var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function n(e,t){var n,r,i,o,s,a,c,l,u,h,d=t&&t.split("/"),p=m.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),l=0;l<e.length;l+=1)if(h=e[l],"."===h)e.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||f)&&p){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),d)for(u=d.length;u>0;u-=1)if(i=p[d.slice(0,u).join("/")],i&&(i=i[r])){o=i,s=l;break}if(o)break;!a&&f&&f[r]&&(a=f[r],c=l)}!o&&a&&(o=a,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function r(t,n){return function(){return u.apply(e,v.call(arguments,0).concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){p[e]=t}}function s(n){if(t(f,n)){var r=f[n];delete f[n],g[n]=!0,l.apply(e,r)}if(!t(p,n)&&!t(g,n))throw new Error("No "+n);return p[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return m&&m.config&&m.config[e]||{}}}var l,u,h,d,p={},f={},m={},g={},y=Object.prototype.hasOwnProperty,v=[].slice;h=function(e,t){var r,o=a(e),c=o[0];return e=o[1],c&&(c=n(c,t),r=s(c)),c?e=r&&r.normalize?r.normalize(e,i(t)):n(e,t):(e=n(e,t),o=a(e),c=o[0],e=o[1],c&&(r=s(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:r}},d={require:function(e){return r(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:c(e)}}},l=function(n,i,a,c){var l,u,m,y,v,b,x=[];if(c=c||n,"function"==typeof a){for(i=!i.length&&a.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(y=h(i[v],c),u=y.f,"require"===u)x[v]=d.require(n);else if("exports"===u)x[v]=d.exports(n),b=!0;else if("module"===u)l=x[v]=d.module(n);else if(t(p,u)||t(f,u)||t(g,u))x[v]=s(u);else{if(!y.p)throw new Error(n+" missing "+u);y.p.load(y.n,r(c,!0),o(u),{}),x[v]=p[u]}m=a.apply(p[n],x),n&&(l&&l.exports!==e&&l.exports!==p[n]?p[n]=l.exports:m===e&&b||(p[n]=m))}else n&&(p[n]=a)},requirejs=require=u=function(t,n,r,i,o){return"string"==typeof t?d[t]?d[t](n):s(h(t,n).f):(t.splice||(m=t,n.splice?(t=n,n=r,r=null):t=e),n=n||function(){},"function"==typeof r&&(r=i,i=o),i?l(e,t,n,r):setTimeout(function(){l(e,t,n,r)},4),u)},u.config=function(e){return m=e,m.deps&&u(m.deps,m.callback),u},define=function(e,n,r){n.splice||(r=n,n=[]),t(p,e)||t(f,e)||(f[e]=[e,n,r])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("vendor/almond",function(){}),define("testbridge",["require"],function(e){function t(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(window.console,[].concat([t.join(" ")],t))}}var n={ready:function(){try{window.TestBridge=n,parent.USING_SELENIUM&&t()}catch(e){}}};return n}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("vendor/bugsnag",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.bugsnag=e()}}(function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){return null===e||"object"!=typeof e||"function"==typeof e.toJSON&&!e.toJSON.forceDecirc||i(e,"",[],null),JSON.stringify(e)}function r(e,t,n){this.val=e,this.k=t,this.parent=n,this.count=1}function i(e,t,n,o){var s,a,c,l,u,h;if("object"==typeof e&&null!==e){if(e instanceof r)return void e.count++;if("function"!=typeof e.toJSON||e.toJSON.forceDecirc){if(o){for(l=0,u=!1,h=n.length;l<h;l++)if(n[l]===e){u=!0;break}if(u)return void(o[t]=new r(e,t,o))}n.push(e),s=[];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&s.push(d);for(a=s.length,c=0;c<a;c++)t=s[c],i(e[t],t,n,e);n.pop()}}}function o(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=[e.tagName];if(e.id&&t.push("#"+e.id),e.className&&e.className.length&&t.push("."+e.className.split(" ").join(".")),!document.querySelectorAll||!Array.prototype.indexOf)return t.join("");try{if(1===document.querySelectorAll(t.join("")).length)return t.join("")}catch(e){return t.join("")}if(e.parentNode.childNodes.length>1){var n=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;t.push(":nth-child("+n+")")}return 1===document.querySelectorAll(t.join("")).length?t.join(""):e.parentNode?a(e.parentNode)+" > "+t.join(""):t.join("")}function c(e,t){var n="(...)";return e&&e.length<=t?e:e.slice(0,t-n.length)+n}var l,u=function(e,t,n){for(var r=n,i=0,o=e.length;i<o;i++)r=t(r,e[i],i,e);return r},h=function(e,t){return u(e,function(e,n,r,i){return t(n,r,i)?e.concat(n):e},[])},d=function(e,t){return u(e,function(e,n,r,i){return e.concat(t(n,r,i))},[])},p=function(e,t){return u(e,function(e,n,r,i){return e===!0||n===t},!1)},f=!{toString:null}.propertyIsEnumerable("toString"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=function(e){var t=[],n=void 0;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);if(!f)return t;for(var r=0,i=m.length;r<i;r++)Object.prototype.hasOwnProperty.call(e,m[r])&&t.push(m[r]);return t},y=function(e){return"[object Array]"===Object.prototype.toString.call(e)},v=function(e){return e<10?"0"+e:e},b=function(){var e=new Date;return e.getUTCFullYear()+"-"+v(e.getUTCMonth()+1)+"-"+v(e.getUTCDate())+"T"+v(e.getUTCHours())+":"+v(e.getUTCMinutes())+":"+v(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},x={map:d,reduce:u,filter:h,includes:p,keys:g,isArray:y,isoDate:b},_=x.isoDate,w=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[anonymous]",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"manual",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_();e(this,t),this.type=i,this.name=n,this.metaData=r,this.timestamp=o}return t.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},t}();w.prototype.toJSON.forceDecirc=!0;var E=w,S=x.includes,M=function(e){return S(["undefined","number"],typeof e)&&parseInt(""+e,10)===e&&e>0},I={},k=x.filter,T=x.reduce,C=x.keys,A=x.isArray;I.schema={apiKey:{defaultValue:function(){return null},message:"(string) apiKey is required",validate:function(e){return"string"==typeof e&&e.length}},appVersion:{defaultValue:function(){return null},message:"(string) appVersion should have a value if supplied",validate:function(e){return null===e||"string"==typeof e&&e.length}},autoNotify:{defaultValue:function(){return!0},message:"(boolean) autoNotify should be true or false",validate:function(e){return e===!0||e===!1}},beforeSend:{defaultValue:function(){return[]},message:"(array[Function]) beforeSend should only contain functions",validate:function(e){return"function"==typeof e||A(e)&&k(e,function(e){return"function"==typeof e}).length===e.length}},endpoint:{defaultValue:function(){return"//notify.bugsnag.com"},message:"(string) endpoint should be set",validate:function(){return!0}},notifyReleaseStages:{defaultValue:function(){return null},message:"(array[string]) notifyReleaseStages should only contain strings",validate:function(e){return null===e||A(e)&&k(e,function(e){return"string"==typeof e}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"(string) releaseStage should be set",validate:function(e){return"string"==typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"(number) maxBreadcrumbs must be a number (≤40) if specified",validate:function(e){return 0===e||M(e)&&(void 0===e||e<=40)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"(boolean) autoBreadcrumbs should be true or false",validate:function(e){return"boolean"==typeof e}}},I.mergeDefaults=function(e,t){if(!e||!t)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");return T(C(t),function(n,r){return n[r]=void 0!==e[r]?e[r]:t[r].defaultValue(),n},{})},I.validate=function(e,t){if(!e||!t)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");var n=T(C(t),function(n,r){return t[r].validate(e[r])?n:n.concat({key:r,message:t[r].message,value:e[r]})},[]);return{valid:!n.length,errors:n}};var P=function(e){return!(!e||!e.stack&&!e.stacktrace&&!e["opera#sourceloc"])},O={};!function(e,t){"use strict";"function"==typeof l&&l.amd?l("stackframe",[],t):"object"==typeof O?O=t():e.StackFrame=t()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function r(e){if(e instanceof Object)for(var n=0;n<c.length;n++)e.hasOwnProperty(c[n])&&void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}var i=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"],c=i.concat(o,s,a);r.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof r)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new r(e)}},toString:function(){var t=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",i=e(this.getLineNumber())?":"+this.getLineNumber():"",o=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+n+r+i+o}};for(var l=0;l<i.length;l++)r.prototype["get"+t(i[l])]=n(i[l]),r.prototype["set"+t(i[l])]=function(e){return function(t){this[e]=Boolean(t)}}(i[l]);for(var u=0;u<o.length;u++)r.prototype["get"+t(o[u])]=n(o[u]),r.prototype["set"+t(o[u])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[u]);for(var h=0;h<s.length;h++)r.prototype["get"+t(s[h])]=n(s[h]),r.prototype["set"+t(s[h])]=function(e){return function(t){this[e]=String(t)}}(s[h]);return r});var L={};!function(e,t){"use strict";"function"==typeof l&&l.amd?l("error-stack-parser",["stackframe"],t):"object"==typeof L?L=t(O):e.ErrorStackParser=t(e.StackFrame)}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=t.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(t){var r=t.stack.split("\n").filter(function(e){return!!e.match(n)},this);return r.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,o=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e({functionName:i,fileName:o,lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseFFOrSafari:function(t){var n=t.stack.split("\n").filter(function(e){return!e.match(r)},this);return n.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new e({functionName:t});var n=t.split("@"),r=this.extractLocation(n.pop()),i=n.join("@")||void 0;return new e({functionName:i,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],o=2,s=r.length;o<s;o+=2){var a=n.exec(r[o]);a&&i.push(new e({fileName:a[2],lineNumber:a[1],source:r[o]}))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],o=0,s=r.length;o<s;o+=2){var a=n.exec(r[o]);a&&i.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:r[o]}))}return i},parseOpera11:function(n){var r=n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return r.map(function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:s,args:a,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})},this)}}});var D={};!function(e,t){"use strict";"function"==typeof l&&l.amd?l("stack-generator",["stackframe"],t):"object"==typeof D?D=t(O):e.StackGenerator=t(e.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var i=arguments.callee;i&&n.length<r&&i.arguments;){for(var o=new Array(i.arguments.length),s=0;s<o.length;++s)o[s]=i.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:o})):n.push(new e({args:o}));try{i=i.caller}catch(e){break}}return n}}});var N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F=x.reduce,q=x.filter,R=function(){function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B();t(this,e),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=o,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=U(n,"[no error class]"),this.errorMessage=U(r,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=F(i,function(e,t){var n=j(t);try{return"{}"===JSON.stringify(n)?e:e.concat(n)}catch(t){return e}},[]),this.user=void 0}return e.prototype.ignore=function(){this._ignored=!0},e.prototype.isIgnored=function(){return this._ignored},e.prototype.updateMetaData=function(e){var t;if(!e)return this;var n=void 0;return null===(arguments.length<=1?void 0:arguments[1])?this.removeMetaData(e):null===(arguments.length<=2?void 0:arguments[2])?this.removeMetaData(e,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):("object"==typeof(arguments.length<=1?void 0:arguments[1])&&(n=arguments.length<=1?void 0:arguments[1]),"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(t={},t[arguments.length<=1?void 0:arguments[1]]=arguments.length<=2?void 0:arguments[2],n=t),n?(this.metaData[e]||(this.metaData[e]={}),this.metaData[e]=N({},this.metaData[e],n),this):this)},e.prototype.removeMetaData=function(e,t){return"string"!=typeof e?this:t?this.metaData[e]?(delete this.metaData[e][t],this):this:(delete this.metaData[e],this)},e.prototype.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request}},e}();R.prototype.toJSON.forceDecirc=!0;var j=function(e){var t={file:e.fileName,method:V(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return!t.lineNumber||t.file||t.method||(t.file="global code"),t},V=function(e){return/^global code$/i.test(e)?"global code":e},B=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},U=function(e,t){return"string"==typeof e&&e?e:t};R.getStacktrace=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return P(e)?L.parse(e).slice(t):q(D.backtrace(),function(e){return(e.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+n)},R.ensureReport=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.__isBugsnagReport)return e;try{var r=R.getStacktrace(e,t,1+n);return new R(e.name,e.message,r)}catch(t){return new R(e.name,e.message,[])}};var z=R,G=n;n.default=n,r.prototype.toJSON=function(){return 0===--this.count&&(this.parent[this.k]=this.val),"[Circular]"};var $=o,H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y=x.map,X=x.reduce,W=x.includes,K=x.isArray,Q=function(){},Z=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.schema,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(s(this,e),!t)throw new Error("new BugsnagClient(notifier, configSchema) requires `notifier` argument");if(!t.name||!t.version||!t.url)throw new Error("new BugsnagClient(notifier, configSchema) - `notifier` requires: `{ name, version, url }`");this.notifier=t,this.configSchema=n,this._configured=!1,this._transport={name:"NULL_TRANSPORT",sendSession:Q,sendReport:Q},this._logger={debug:Q,info:Q,warn:Q,error:Q},this.plugins=[],this.session=r,this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagReport=z,this.BugsnagBreadcrumb=E}return e.prototype.configure=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=I.mergeDefaults(H({},this.config,e),this.configSchema);var t=I.validate(this.config,this.configSchema);if(!t.valid==!0){var n=new Error("Bugsnag configuration error");throw n.errors=Y(t.errors,function(e){return e.key+" "+e.message+" \n  "+e.value}),n}return"function"==typeof this.config.beforeSend&&(this.config.beforeSend=[this.config.beforeSend]),null!==this.config.appVersion&&(this.app.version=this.config.appVersion),this._configured=!0,this._logger.debug("Loaded!"),this},e.prototype.use=function(e){return this.plugins.push(e),e.init(this)},e.prototype.transport=function(e){return this._transport=e,this},e.prototype.logger=function(e,t){return this._logger=e,this},e.prototype.leaveBreadcrumb=function(e,t,n,r){if(!this._configured)throw new Error("Bugsnag must be configured before calling leaveBreadcrumb()");if(e=e||void 0,n="string"==typeof n?n:void 0,r="string"==typeof r?r:void 0,t="object"==typeof t&&null!==t?t:void 0,"string"==typeof e||t){var i=new E(e,t,n,r),o=G(i),s=this.breadcrumbs[this.breadcrumbs.length-1],a=!!s&&o===G(s);if(!a)return this.breadcrumbs.push(i),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},e.prototype.notify=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._configured)throw new Error("Bugsnag must be configured before calling report()");var n=this.app&&"string"==typeof this.app.releaseStage?this.app.releaseStage:this.config.releaseStage,r=J(e,t,this._logger),i=r.err,o=r.errorFramesToSkip,s=r._opts;s&&(t=s),i||(this._logger.warn('Usage error. notify() called with no "error" parameter'),i=new Error('Bugsnag usage error. notify() called with no "error" parameter')),"object"==typeof t&&null!==t||(t={});var a=z.ensureReport(i,o,1);if(a.app=H({releaseStage:n},a.app,this.app),a.context=a.context||t.context||this.context||void 0,a.device=H({},a.device,this.device,t.device),a.request=H({},a.request,this.request,t.request),a.user=H({},a.user,this.user,t.user),a.metaData=H({},a.metaData,this.metaData,t.metaData),a.breadcrumbs=this.breadcrumbs.slice(0),void 0!==t.severity&&(a.severity=t.severity,a._handledState.severityReason={type:"userSpecifiedSeverity"}),K(this.config.notifyReleaseStages)&&!W(this.config.notifyReleaseStages,n))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),!1;var c=a.severity,l=[].concat(t.beforeSend).concat(this.config.beforeSend),u=X(l,function(e,t){return e===!0||("function"==typeof t&&t(a)===!1||!!a.isIgnored())},!1);return u?(this._logger.debug("Report not sent due to beforeSend callback"),!1):(this.config.autoBreadcrumbs&&this.leaveBreadcrumb(a.errorClass,{errorClass:a.errorClass,errorMessage:a.errorMessage,severity:a.severity,stacktrace:a.stacktrace},"error"),c!==a.severity&&(a._handledState.severityReason={type:"userCallbackSetSeverity"}),this._transport.sendReport(this._logger,this.config,{apiKey:a.apiKey||this.config.apiKey,notifier:this.notifier,events:[a]}),!0)},e}(),J=function(e,t,n){var r=void 0,i=0,o=void 0;switch(typeof e){case"string":"string"==typeof t?(n.warn("Usage error. notify() called with (string, string) but expected (error, object)"),r=new Error("Bugsnag usage error. notify() called with (string, string) but expected (error, object)"),o={metaData:{notifier:{notifyArgs:[e,t]}}}):(r=new Error(String(e)),i+=2);break;case"number":case"boolean":r=new Error(String(e));break;case"function":n.warn('Usage error. notify() called with a function as "error" parameter'),r=new Error('Bugsnag usage error. notify() called with a function as "error" parameter');break;case"object":null!==e&&($(e)||e.__isBugsnagReport)?r=e:null!==e&&ee(e)?(r=new Error(e.message||e.errorMessage),r.name=e.name||e.errorClass,i+=2):(n.warn('Usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'),r=new Error('Bugsnag usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'))}return{err:r,errorFramesToSkip:i,_opts:o}},ee=function(e){return!("string"!=typeof e.name&&"string"!=typeof e.errorClass||"string"!=typeof e.message&&"string"!=typeof e.errorMessage)},te=Z,ne={init:function(e){var t=0;e.config.beforeSend.push(function(n){return t>=e.config.maxEvents?n.ignore():void t++}),e.refresh=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"(number) maxEvents must be a positive integer ≤100",validate:function(e){return M(e)&&e<100}}}},re={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"(string) releaseStage should be set",validate:function(e){return"string"==typeof e&&e.length}}},ie=x.map,oe=x.filter,se={init:function(e){ie(ae,function(t){var n=console[t];console[t]=function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];e.leaveBreadcrumb("Console output",{severity:/^group/.test(t)?"log":t,message:ie(i,function(e){var t=String(e);if("[object Object]"!==t)return t;try{t=JSON.stringify(e,null,2)}catch(e){}return t}).join("\n")},"log"),n.apply(console,i)},console[t]._restore=function(){console[t]=n}})},destroy:function(){return ae.forEach(function(e){"function"==typeof console[e]._restore&&console[e]._restore()})},configSchema:{consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return e===!0||e===!1||void 0===e},message:"(boolean) consoleBreadcrumbsEnabled should be true or false"}}},ae=oe(["log","debug","info","warn","error"],function(e){return"undefined"!=typeof console&&"function"==typeof console[e]}),ce={init:function(e){e.config.beforeSend.push(function(e){e.context||(e.context=window.location.pathname)})}},le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue=x.isoDate,he={init:function(e){e.config.beforeSend.push(function(e){e.device=le({time:ue(),locale:navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||navigator.language,userAgent:navigator.userAgent},e.device)})}},de=x.reduce,pe={init:function(e){var t="",n=!1,r=function(){return document.documentElement.outerHTML},i=function(e){var i=e.stacktrace[0];if(!i||!i.file||!i.lineNumber)return i;if(i.file.replace(/#.*$/)!==window.location.href.replace(/#.*$/))return i;n&&t||(t=r());var o=["<!-- DOCUMENT START -->"].concat(t.split("\n")),s=fe(o,i.lineNumber-1),a=s.script,c=s.start,l=de(a,function(e,t,n){return Math.abs(c+n+1-i.lineNumber)>10?e:(e[""+(c+n+1)]=t,e)},{});i.code=l,e.updateMetaData("script",{content:a.join("\n")})};t=r(),document.onreadystatechange=function(){"interactive"===document.readyState&&(t=r(),n=!0)},e.config.beforeSend.push(i)}},fe=function(e,t){for(var n=t;n<e.length&&!/<\/script>/.test(e[n]);)n++;for(var r=n;n>0&&!/<script.*>/.test(e[n]);)n--;var i=n,o=e.slice(i,r+1);return o[0]=o[0].replace(/^.*<script.*>/,""),o[o.length-1]=o[o.length-1].replace(/<\/script>.*$/,""),{script:o,start:i}},me={init:function(e){"addEventListener"in window&&window.addEventListener("click",function(t){var n=void 0,r=void 0;try{n=ge(t.target),r=a(t.target)}catch(t){n="[hidden]",r="[hidden]",e._logger.log("Cross domain error when tracking click event. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors")}e.leaveBreadcrumb("UI click",{targetText:n,targetSelector:r},"user")},!0)},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return e===!0||e===!1||void 0===e},message:"(boolean) interactionBreadcrumbsEnabled should be true or false"}}},ge=function(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),t=t.replace(/^\s+|\s+$/g,""),c(t,140)},ye={init:function(e){if("addEventListener"in window){var t=function(t){return function(){return e.leaveBreadcrumb(t,{},"navigation")}};window.addEventListener("pagehide",t("Page hidden"),!0),window.addEventListener("pageshow",t("Page shown"),!0),window.addEventListener("load",t("Page loaded"),!0),window.document.addEventListener("DOMContentLoaded",t("DOMContentLoaded"),!0),window.addEventListener("load",function(){return window.addEventListener("popstate",t("Navigated back"),!0)}),window.addEventListener("hashchange",function(t){var n=t.oldURL?{from:ve(t.oldURL),to:ve(t.newURL),state:window.history.state}:{to:ve(window.location.href)};e.leaveBreadcrumb("Hash changed",n,"navigation")},!0),window.history.replaceState&&xe(e,window.history,"replaceState"),window.history.pushState&&xe(e,window.history,"pushState"),e.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}},destroy:function(){window.history.replaceState._restore(),window.history.pushState._restore()},configSchema:{navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return e===!0||e===!1||void 0===e},message:"(boolean) navigationBreadcrumbsEnabled should be true or false"}}},ve=function(e){var t=document.createElement("A");return t.href=e,""+t.pathname+t.search+t.hash},be=function(e,t,n){var r=ve(window.location.href);return{title:t,state:e,prevState:window.history.state,to:n||r,from:r}},xe=function(e,t,n){var r=t[n];t[n]=function(i,o,s){e.leaveBreadcrumb("History "+n,be(i,o,s),"navigation"),"function"==typeof e.refresh&&e.refresh(),r.call(t,i,o,s)},t[n]._restore=function(){t[n]=r}},_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we={init:function(e){e.config.beforeSend.push(function(e){e.request&&e.request.url||(e.request=_e({},e.request,{url:window.location.href}))})}},Ee={init:function(e){"onunhandledrejection"in window&&window.addEventListener("unhandledrejection",function(t){var n=t.reason,r={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},i=void 0;if(n&&P(n))i=new e.BugsnagReport(n.name,n.message,L.parse(n),r);else{var o="string"==typeof n?n:"Unhandled promise rejection",s=new Error(o);s.type="UnhandledRejection",i=new e.BugsnagReport(s.type,s.message,L.parse(s),r),i.updateMetaData("promise","rejection reason",n)}e.notify(i)})}},Se={init:function(e){var t=function(t,r,i,o,s){if(0===i&&/Script error\.?/.test(t))return void e._logger.warn("Ignoring cross-domain or eval script error. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors");var a={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},c=void 0;if(s)c=new e.BugsnagReport(s.name,s.message,Me(e.BugsnagReport.getStacktrace(s),r,i,o),a);else if("object"!=typeof t||null===t||r||i||o||s)c=new e.BugsnagReport("window.onerror",t,Me(e.BugsnagReport.getStacktrace(s,1),r,i,o),a),c.updateMetaData("window onerror",{event:t});else{var l=t.type?"Event: "+t.type:"window.onerror",u=t.message||t.detail||"";c=new e.BugsnagReport(l,u,e.BugsnagReport.getStacktrace(new Error,1).slice(1),a),c.updateMetaData("window onerror",{event:t})}e.notify(c),"function"==typeof n&&n(t,r,i,o,s)},n=window.onerror;window.onerror=t}},Me=function(e,t,n,r){var i=e[0];return i?(i.fileName||i.setFileName(t),i.lineNumber||i.setLineNumber(n),i.columnNumber||(void 0!==r?i.setColumnNumber(r):window.event&&window.event.errorCharacter&&i.setColumnNumber(window.event&&window.event.errorCharacter)),e):e},Ie=function(e){var t=G(e);if(t.length>1e6&&(delete e.events[0].metaData,e.events[0].metaData={notifier:"WARNING!\nThe serialized payload was "+t.length/1e6+"MB. The limit is 1MB.\nreport.metaData was stripped to make the payload of a deliverable size."},t=G(e),t.length>1e6))throw new Error("payload exceeded 1MB limit");return t},ke={name:"XDomainRequest",sendReport:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=t.endpoint,o=new window.XDomainRequest;o.onload=function(){r(null,o.responseText)},o.open("POST",i);try{o.send(Ie(n))}catch(t){e.error(t)}}},Te={name:"XMLHttpRequest",sendReport:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=t.endpoint,o=new window.XMLHttpRequest;o.onreadystatechange=function(){o.readyState===window.XMLHttpRequest.DONE&&r(null,o.responseText)},o.open("POST",i),o.setRequestHeader("content-type","application/json");try{o.send(Ie(n))}catch(t){e.error(t)}}},Ce={},Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe="Bugsnag JavaScript",Oe="4.0.3",Le="https://github.com/bugsnag/bugsnag-js",De=x.map,Ne=x.reduce,Fe=x.keys,qe=Ae({},I.schema,re),Re={"window onerror":Se,"unhandled rejection":Ee,device:he,context:ce,request:we,throttle:ne,"console breadcrumbs":se,"navigation breadcrumbs":ye,"interaction breadcrumbs":me,"inline script content":pe},je={XDomainRequest:ke,XMLHttpRequest:Te};Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];
"string"==typeof e&&(e={apiKey:e});var n=Ne([].concat(De(Fe(Re),function(e){return Re[e]})).concat(t),function(e,t){return t.configSchema?Ae({},e,t.configSchema):e},qe),r=new te({name:Pe,version:Oe,url:Le},n);if(r.transport(window.XDomainRequest?je.XDomainRequest:je.XMLHttpRequest),"undefined"!=typeof console&&"function"==typeof console.debug){var i=Ve();r.logger(i)}try{r.configure(e)}catch(e){throw r._logger.warn(e),e.errors&&De(e.errors,r._logger.warn),e}return r.use(Re.device),r.use(Re.context),r.use(Re.request),r.use(Re["inline script content"]),r.use(Re.throttle),r.config.autoNotify!==!1&&(r.use(Re["window onerror"]),r.use(Re["unhandled rejection"])),Be(r.config,"navigationBreadcrumbsEnabled")&&r.use(Re["navigation breadcrumbs"]),Be(r.config,"interactionBreadcrumbsEnabled")&&r.use(Re["interaction breadcrumbs"]),Be(r.config,"consoleBreadcrumbsEnabled",!1)&&r.use(Re["console breadcrumbs"]),De(t,function(e){return r.use(e)}),r};var Ve=function(){var e={},t=console.log;return De(["debug","info","warn","error"],function(n){var r=console[n];e[n]="function"==typeof r?r.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")}),e},Be=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"boolean"==typeof e[t]?e[t]:e.autoBreadcrumbs&&(n||!/^dev(elopment)?$/.test(e.releaseStage))};return Ce.default=Ce,Ce}),define("ipad.ghostevents",["require"],function(e){function t(e){r&&o.evtInScope(e)&&(e.stopPropagation(),e.stopImmediatePropagation())}function n(e){r&&o.evtInScope(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}var r=!1,i=null,o={isGhostEvent:function(e){return!1},evtInScope:function(e){return!1}};return document.addEventListener("mousedown",function(e){o.evtInScope(e)&&(i=document.activeElement,r=o.isGhostEvent(e),t(e))},!0),document.addEventListener("mouseup",t,!0),document.addEventListener("click",function(e){n(e),r&&document.activeElement!==i&&(document.activeElement&&document.activeElement.blur(),i&&i.focus()),r=!1},!0),document.addEventListener("focus",n,!0),document.addEventListener("blur",n,!0),o}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"!==n&&!oe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return J.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(_e)||[],function(e,n){t[n]=!0}),t}function s(){W.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),oe.ready()}function a(){this.expando=oe.expando+a.uid++}function c(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Te,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ke.test(n)?oe.parseJSON(n):n)}catch(e){}Ie.set(e,t,n)}else n=void 0;return n}function l(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return oe.css(e,t,"")},c=a(),l=n&&n[3]||(oe.cssNumber[t]?"":"px"),u=(oe.cssNumber[t]||"px"!==l&&+c)&&Ae.exec(oe.css(e,t));if(u&&u[3]!==l){l=l||u[3],n=n||[],u=+c||1;do o=o||".5",u/=o,oe.style(e,t,u+l);while(o!==(o=a()/c)&&1!==o&&--s)}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=i)),i}function u(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function h(e,t){for(var n=0,r=e.length;n<r;n++)Me.set(e[n],"globalEval",!t||Me.get(t[n],"globalEval"))}function d(e,t,n,r,i){for(var o,s,a,c,l,d,p=t.createDocumentFragment(),f=[],m=0,g=e.length;m<g;m++)if(o=e[m],o||0===o)if("object"===oe.type(o))oe.merge(f,o.nodeType?[o]:o);else if(qe.test(o)){for(s=s||p.appendChild(t.createElement("div")),a=(De.exec(o)||["",""])[1].toLowerCase(),c=Fe[a]||Fe._default,s.innerHTML=c[1]+oe.htmlPrefilter(o)+c[2],d=c[0];d--;)s=s.lastChild;oe.merge(f,s.childNodes),s=p.firstChild,s.textContent=""}else f.push(t.createTextNode(o));for(p.textContent="",m=0;o=f[m++];)if(r&&oe.inArray(o,r)>-1)i&&i.push(o);else if(l=oe.contains(o.ownerDocument,o),s=u(p.appendChild(o),"script"),l&&h(s),n)for(d=0;o=s[d++];)Ne.test(o.type||"")&&n.push(o);return p}function p(){return!0}function f(){return!1}function m(){try{return W.activeElement}catch(e){}}function g(e,t,n,r,i,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)g(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=f;else if(!i)return e;return 1===o&&(s=i,i=function(e){return oe().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,i,r,n)})}function y(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){var n,r,i,o,s,a,c,l;if(1===t.nodeType){if(Me.hasData(e)&&(o=Me.access(e),s=Me.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)oe.event.add(t,i,l[i][n])}Ie.hasData(e)&&(a=Ie.access(e),c=oe.extend({},a),Ie.set(t,c))}}function _(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Le.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function w(e,t,n,r){t=Q.apply([],t);var i,o,s,a,c,l,h=0,p=e.length,f=p-1,m=t[0],g=oe.isFunction(m);if(g||p>1&&"string"==typeof m&&!re.checkClone&&ze.test(m))return e.each(function(i){var o=e.eq(i);g&&(t[0]=m.call(this,i,o.html())),w(o,t,n,r)});if(p&&(i=d(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=oe.map(u(i,"script"),v),a=s.length;h<p;h++)c=i,h!==f&&(c=oe.clone(c,!0,!0),a&&oe.merge(s,u(c,"script"))),n.call(e[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,oe.map(s,b),h=0;h<a;h++)c=s[h],Ne.test(c.type||"")&&!Me.access(c,"globalEval")&&oe.contains(l,c)&&(c.src?oe._evalUrl&&oe._evalUrl(c.src):oe.globalEval(c.textContent.replace($e,"")))}return e}function E(e,t,n){for(var r,i=t?oe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||oe.cleanData(u(r)),r.parentNode&&(n&&oe.contains(r.ownerDocument,r)&&h(u(r,"script")),r.parentNode.removeChild(r));return e}function S(e,t){var n=oe(t.createElement(e)).appendTo(t.body),r=oe.css(n[0],"display");return n.detach(),r}function M(e){var t=W,n=Ye[e];return n||(n=S(e,t),"none"!==n&&n||(He=(He||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=He[0].contentDocument,t.write(),t.close(),n=S(e,t),He.detach()),Ye[e]=n),n}function I(e,t,n){var r,i,o,s,a=e.style;return n=n||Ke(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||oe.contains(e.ownerDocument,e)||(s=oe.style(e,t)),n&&!re.pixelMarginRight()&&We.test(s)&&Xe.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function k(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e){if(e in rt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in rt)return e}function C(e,t,n){var r=Ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function A(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=oe.css(e,n+Pe[o],!0,i)),r?("content"===n&&(s-=oe.css(e,"padding"+Pe[o],!0,i)),"margin"!==n&&(s-=oe.css(e,"border"+Pe[o]+"Width",!0,i))):(s+=oe.css(e,"padding"+Pe[o],!0,i),"padding"!==n&&(s+=oe.css(e,"border"+Pe[o]+"Width",!0,i)));return s}function P(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ke(e),s="border-box"===oe.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=I(e,t,o),(i<0||null==i)&&(i=e.style[t]),We.test(i))return i;r=s&&(re.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(s?"border":"content"),r,o)+"px"}function O(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)r=e[s],r.style&&(o[s]=Me.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Oe(r)&&(o[s]=Me.access(r,"olddisplay",M(r.nodeName)))):(i=Oe(r),"none"===n&&i||Me.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(s=0;s<a;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function L(e,t,n,r,i){return new L.prototype.init(e,t,n,r,i)}function D(){return e.setTimeout(function(){it=void 0}),it=oe.now()}function N(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Pe[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function F(e,t,n){for(var r,i=(j.tweeners[t]||[]).concat(j.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,s,a,c,l,u,h=this,d={},p=e.style,f=e.nodeType&&Oe(e),m=Me.get(e,"fxshow");n.queue||(a=oe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,oe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=oe.css(e,"display"),u="none"===l?Me.get(e,"olddisplay")||M(e.nodeName):l,"inline"===u&&"none"===oe.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],st.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;f=!0}d[r]=m&&m[r]||oe.style(e,r)}else l=void 0;if(oe.isEmptyObject(d))"inline"===("none"===l?M(e.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(f=m.hidden):m=Me.access(e,"fxshow",{}),o&&(m.hidden=!f),f?oe(e).show():h.done(function(){oe(e).hide()}),h.done(function(){var t;Me.remove(e,"fxshow");for(t in d)oe.style(e,t,d[t])});for(r in d)s=F(f?m[r]:0,r,h),r in m||(m[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function R(e,t){var n,r,i,o,s;for(n in e)if(r=oe.camelCase(n),i=t[r],o=e[n],oe.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=oe.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function j(e,t,n){var r,i,o=0,s=j.prefilters.length,a=oe.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=it||D(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,c=l.tweens.length;s<c;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),o<1&&c?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||D(),duration:n.duration,tweens:[],createTween:function(t,n){var r=oe.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(R(u,l.opts.specialEasing);o<s;o++)if(r=j.prefilters[o].call(l,e,u,l.opts))return oe.isFunction(r.stop)&&(oe._queueHooks(l.elem,l.opts.queue).stop=oe.proxy(r.stop,r)),r;return oe.map(u,F,l),oe.isFunction(l.opts.start)&&l.opts.start.call(e,l),oe.fx.timer(oe.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function V(e){return e.getAttribute&&e.getAttribute("class")||""}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(_e)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function U(e,t,n,r){function i(a){var c;return o[a]=!0,oe.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(c=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),c}var o={},s=e===It;return i(t.dataTypes[0])||!o["*"]&&i("*")}function z(e,t){var n,r,i=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&oe.extend(!0,e,r),e}function G(e,t,n){for(var r,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),n[o]}function $(e,t,n,r){var i,o,s,a,c,l={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(s=l[c+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function H(e,t,n,r){var i;if(oe.isArray(t))oe.each(t,function(t,i){n||At.test(e)?r(e,i):H(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==oe.type(t))r(e,t);else for(i in t)H(e+"["+i+"]",t[i],n,r)}function Y(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var X=[],W=e.document,K=X.slice,Q=X.concat,Z=X.push,J=X.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ie="2.2.4",oe=function(e,t){return new oe.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,ce=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(oe.isPlainObject(r)||(i=oe.isArray(r)))?(i?(i=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},s[t]=oe.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=W.createElement("script"),t.text=e,W.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(ce,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;i<r&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?oe.merge(r,"string"==typeof e?[e]:e):Z.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;o<s;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o,s=0,a=[];if(n(e))for(i=e.length;s<i;s++)o=t(e[s],s,r),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,r),null!=o&&a.push(o);return Q.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e))return r=K.call(arguments,2),i=function(){return e.apply(t||this,r.concat(K.call(arguments)))},i.guid=e.guid=e.guid||oe.guid++,i},now:Date.now,support:re}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=X[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,r){var i,o,s,a,c,l,h,p,f=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:V)!==O&&P(t),t=t||O,D)){if(11!==m&&(l=ye.exec(e)))if(i=l[1]){if(9===m){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(f&&(s=f.getElementById(i))&&R(t,s)&&s.id===i)return n.push(s),n}else{if(l[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&_.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(_.qsa&&!$[e+" "]&&(!N||!N.test(e))){if(1!==m)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(be,"\\$&"):t.setAttribute("id",a=j),h=M(e),o=h.length,c=de.test(a)?"#"+a:"[id='"+a+"']";o--;)h[o]=c+" "+d(h[o]);p=h.join(","),f=ve.test(e)&&u(t.parentNode)||t}if(p)try{return Z.apply(n,f.querySelectorAll(p)),n}catch(e){}finally{a===j&&t.removeAttribute("id")}}}return k(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[j]=!0,e}function i(e){var t=O.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function d(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=U++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,c,l,u=[B,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[j]||(t[j]={}),c=l[t.uniqueID]||(l[t.uniqueID]={}),(a=c[r])&&a[0]===B&&a[1]===o)return u[2]=a[2];if(c[r]=u,u[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,s=[],a=0,c=e.length,l=null!=t;a<c;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),l&&t.push(a)));return s}function y(e,t,n,i,o,s){return i&&!i[j]&&(i=y(i)),o&&!o[j]&&(o=y(o,s)),r(function(r,s,a,c){var l,u,h,d=[],p=[],f=s.length,y=r||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!r&&t?y:g(y,d,e,a,c),b=n?o||(r?e:f||i)?[]:s:v;if(n&&n(v,b,a,c),i)for(l=g(b,p),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(b[p[u]]=!(v[p[u]]=h));if(r){if(o||e){if(o){for(l=[],u=b.length;u--;)(h=b[u])&&l.push(v[u]=h);o(null,b=[],l,c)}for(u=b.length;u--;)(h=b[u])&&(l=o?ee(r,h):d[u])>-1&&(r[l]=!(s[l]=h))}}else b=g(b===s?b.splice(f,b.length):b),o?o(null,s,b,c):Z.apply(s,b)})}function v(e){for(var t,n,r,i=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],a=o?1:0,c=p(function(e){return e===t},s,!0),l=p(function(e){return ee(t,e)>-1},s,!0),u=[function(e,n,r){var i=!o&&(r||n!==T)||((t=n).nodeType?c(e,n,r):l(e,n,r));return t=null,i}];a<i;a++)if(n=w.relative[e[a].type])u=[p(f(u),n)];else{if(n=w.filter[e[a].type].apply(null,e[a].matches),n[j]){for(r=++a;r<i&&!w.relative[e[r].type];r++);return y(a>1&&f(u),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<r&&v(e.slice(a,r)),r<i&&v(e=e.slice(r)),r<i&&d(e))}u.push(n)}return f(u)}function b(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,c,l){var u,h,d,p=0,f="0",m=r&&[],y=[],v=T,b=r||o&&w.find.TAG("*",l),x=B+=null==v?1:Math.random()||.1,_=b.length;for(l&&(T=s===O||s||l);f!==_&&null!=(u=b[f]);f++){if(o&&u){for(h=0,s||u.ownerDocument===O||(P(u),a=!D);d=e[h++];)if(d(u,s||O,a)){c.push(u);break}l&&(B=x)}i&&((u=!d&&u)&&p--,r&&m.push(u))}if(p+=f,i&&f!==p){for(h=0;d=n[h++];)d(m,y,s,a);if(r){if(p>0)for(;f--;)m[f]||y[f]||(y[f]=K.call(c));y=g(y)}Z.apply(c,y),l&&!r&&y.length>0&&p+n.length>1&&t.uniqueSort(c)}return l&&(B=x,T=v),m};return i?r(s):s}var x,_,w,E,S,M,I,k,T,C,A,P,O,L,D,N,F,q,R,j="sizzle"+1*new Date,V=e.document,B=0,U=0,z=n(),G=n(),$=n(),H=function(e,t){return e===t&&(A=!0),0},Y=1<<31,X={}.hasOwnProperty,W=[],K=W.pop,Q=W.push,Z=W.push,J=W.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(oe),de=new RegExp("^"+re+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},we=function(){P()};try{Z.apply(W=J.call(V.childNodes),V.childNodes),W[V.childNodes.length].nodeType}catch(e){Z={apply:W.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}_=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},P=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:V;return r!==O&&9===r.nodeType&&r.documentElement?(O=r,L=O.documentElement,D=!S(O),(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),_.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=i(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=ge.test(O.getElementsByClassName),_.getById=i(function(e){return L.appendChild(e).id=j,!O.getElementsByName||!O.getElementsByName(j).length}),_.getById?(w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}},w.filter.ID=function(e){var t=e.replace(xe,_e);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(xe,_e);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),w.find.TAG=_.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=_.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&D)return t.getElementsByClassName(e)},F=[],N=[],(_.qsa=ge.test(O.querySelectorAll))&&(i(function(e){L.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||N.push(".#.+[+~]")}),i(function(e){var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(_.matchesSelector=ge.test(q=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&i(function(e){_.disconnectedMatch=q.call(e,"div"),q.call(e,"[s!='']:x"),F.push("!=",oe)}),N=N.length&&new RegExp(N.join("|")),F=F.length&&new RegExp(F.join("|")),t=ge.test(L.compareDocumentPosition),R=t||ge.test(L.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===O||e.ownerDocument===V&&R(V,e)?-1:t===O||t.ownerDocument===V&&R(V,t)?1:C?ee(C,e)-ee(C,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],c=[t];if(!i||!o)return e===O?-1:t===O?1:i?-1:o?1:C?ee(C,e)-ee(C,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;a[r]===c[r];)r++;return r?s(a[r],c[r]):a[r]===V?-1:c[r]===V?1:0},O):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&P(e),n=n.replace(ue,"='$1']"),_.matchesSelector&&D&&!$[n+" "]&&(!F||!F.test(n))&&(!N||!N.test(n)))try{var r=q.call(e,n);if(r||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&P(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&P(e);var n=w.attrHandle[t.toLowerCase()],r=n&&X.call(w.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==r?r:_.attributes||!D?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!_.detectDuplicates,C=!_.sortStable&&e.slice(0),e.sort(H),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return C=null,e},E=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=E(t);return n},w=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=M(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!c&&!a,b=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(d=g,h=d[j]||(d[j]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),l=u[e]||[],p=l[0]===B&&l[1],b=p&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[B,p,b];break}}else if(v&&(d=t,h=d[j]||(d[j]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),l=u[e]||[],p=l[0]===B&&l[1],b=p),b===!1)for(;(d=++p&&d&&d[m]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&(h=d[j]||(d[j]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),u[e]=[B,b]),d!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[j]?o(n):o.length>1?(i=[e,e,"",n],
w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=ee(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=I(e.replace(ae,"$1"));return i[j]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(xe,_e),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,_e).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=c(x);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,M=t.tokenize=function(e,n){var r,i,o,s,a,c,l,u=G[e+" "];if(u)return n?0:u.slice(0);for(a=e,c=[],l=w.preFilter;a;){r&&!(i=ce.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),r=!1,(i=le.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ae," ")}),a=a.slice(r.length));for(s in w.filter)!(i=pe[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):G(e,c).slice(0)},I=t.compile=function(e,t){var n,r=[],i=[],o=$[e+" "];if(!o){for(t||(t=M(e)),n=t.length;n--;)o=v(t[n]),o[j]?r.push(o):i.push(o);o=$(e,b(i,r)),o.selector=e}return o},k=t.select=function(e,t,n,r){var i,o,s,a,c,l="function"==typeof e&&e,h=!r&&M(e=l.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&_.getById&&9===t.nodeType&&D&&w.relative[o[1].type]){if(t=(w.find.ID(s.matches[0].replace(xe,_e),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pe.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((c=w.find[a])&&(r=c(s.matches[0].replace(xe,_e),ve.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return Z.apply(n,r),n;break}}return(l||I(e,h))(r,t,!D,n,!t||ve.test(e)&&u(t.parentNode)||t),n},_.sortStable=j.split("").sort(H).join("")===j,_.detectDuplicates=!!A,P(),_.sortDetached=i(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);oe.find=ue,oe.expr=ue.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ue.uniqueSort,oe.text=ue.getText,oe.isXMLDoc=ue.isXML,oe.contains=ue.contains;var he=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&oe(e).is(n))break;r.push(e)}return r},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},pe=oe.expr.match.needsContext,fe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?oe.find.matchesSelector(r,e)?[r]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;t<n;t++)if(oe.contains(i[t],this))return!0}));for(t=0;t<n;t++)oe.find(e,i[t],r);return r=this.pushStack(n>1?oe.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&pe.test(e)?oe(e):e||[],!1).length}});var ge,ye=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=oe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||ge,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ye.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:W,!0)),fe.test(r[1])&&oe.isPlainObject(t))for(r in t)oe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=W.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=W,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};ve.prototype=oe.fn,ge=oe(W);var be=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=pe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?J.call(oe(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return he(e,"parentNode")},parentsUntil:function(e,t,n){return he(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return he(e,"nextSibling")},prevAll:function(e){return he(e,"previousSibling")},nextUntil:function(e,t,n){return he(e,"nextSibling",n)},prevUntil:function(e,t,n){return he(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,r){var i=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(xe[e]||oe.uniqueSort(i),be.test(e)&&i.reverse()),this.pushStack(i)}});var _e=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,r,i,s=[],a=[],c=-1,l=function(){for(i=e.once,r=t=!0;a.length;c=-1)for(n=a.shift();++c<s.length;)s[c].apply(n[0],n[1])===!1&&e.stopOnFalse&&(c=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(c=s.length-1,a.push(n)),function t(n){oe.each(n,function(n,r){oe.isFunction(r)?e.unique&&u.has(r)||s.push(r):r&&r.length&&"string"!==oe.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,s,n))>-1;)s.splice(n,1),n<=c&&c--}),this},has:function(e){return e?oe.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=a=[],n||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var s=oe.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,r):r}},i={};return r.pipe=r.then,oe.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=K.call(arguments),s=o.length,a=1!==s||e&&oe.isFunction(e.promise)?s:0,c=1===a?e:oe.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?K.call(arguments):i,r===t?c.notifyWith(n,r):--a||c.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,t)).done(l(i,r,o)).fail(c.reject):--a;return a||c.resolveWith(r,o),c.promise()}});var we;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(we.resolveWith(W,[oe]),oe.fn.triggerHandler&&(oe(W).triggerHandler("ready"),oe(W).off("ready"))))}}),oe.ready.promise=function(t){return we||(we=oe.Deferred(),"complete"===W.readyState||"loading"!==W.readyState&&!W.documentElement.doScroll?e.setTimeout(oe.ready):(W.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),we.promise(t)},oe.ready.promise();var Ee=function(e,t,n,r,i,o,s){var a=0,c=e.length,l=null==n;if("object"===oe.type(n)){i=!0;for(a in n)Ee(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,oe.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(oe(e),n)})),t))for(;a<c;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):c?t(e[0],n):o},Se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Se(e))return{};var t=e[this.expando];return t||(t={},Se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?r=t.concat(t.map(oe.camelCase)):(i=oe.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(_e)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var Me=new a,Ie=new a,ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;oe.extend({hasData:function(e){return Ie.hasData(e)||Me.hasData(e)},data:function(e,t,n){return Ie.access(e,t,n)},removeData:function(e,t){Ie.remove(e,t)},_data:function(e,t,n){return Me.access(e,t,n)},_removeData:function(e,t){Me.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=Ie.get(o),1===o.nodeType&&!Me.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=oe.camelCase(r.slice(5)),c(o,r,i[r])));Me.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Ie.set(this,e)}):Ee(this,function(t){var n,r;if(o&&void 0===t){if(n=Ie.get(o,e)||Ie.get(o,e.replace(Te,"-$&").toLowerCase()),void 0!==n)return n;if(r=oe.camelCase(e),n=Ie.get(o,r),void 0!==n)return n;if(n=c(o,r,void 0),void 0!==n)return n}else r=oe.camelCase(e),this.each(function(){var n=Ie.get(this,r);Ie.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&Ie.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ie.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Me.get(e,t),n&&(!r||oe.isArray(n)?r=Me.access(e,t,oe.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),r=n.length,i=n.shift(),o=oe._queueHooks(e,t),s=function(){oe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Me.get(e,n)||Me.access(e,n,{empty:oe.Callbacks("once memory").add(function(){Me.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=oe.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Me.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),Pe=["Top","Right","Bottom","Left"],Oe=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Le=/^(?:checkbox|radio)$/i,De=/<([\w:-]+)/,Ne=/^$|\/(?:java|ecma)script/i,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td;var qe=/<|&#?\w+;/;!function(){var e=W.createDocumentFragment(),t=e.appendChild(W.createElement("div")),n=W.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Re=/^key/,je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ve=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,r,i){var o,s,a,c,l,u,h,d,p,f,m,g=Me.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=oe.guid++),(c=g.events)||(c=g.events={}),(s=g.handle)||(s=g.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(_e)||[""],l=t.length;l--;)a=Ve.exec(t[l])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=oe.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=oe.event.special[p]||{},u=oe.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&oe.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=c[p])||(d=c[p]=[],d.delegateCount=0,h.setup&&h.setup.call(e,r,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),oe.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,c,l,u,h,d,p,f,m,g=Me.hasData(e)&&Me.get(e);if(g&&(c=g.events)){for(t=(t||"").match(_e)||[""],l=t.length;l--;)if(a=Ve.exec(t[l])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=oe.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,d=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!i&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||oe.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)oe.event.remove(e,p+t[l],n,r,!0);oe.isEmptyObject(c)&&Me.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,r,i,o,s=[],a=K.call(arguments),c=(Me.get(this,"events")||{})[e.type]||[],l=oe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=oe.event.handlers.call(this,e,c),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,r=((oe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,c=e.target;if(a&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],n=0;n<a;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?oe(i,this).index(c)>-1:oe.find(i,this,null,[c]).length),r[i]&&r.push(o);r.length&&s.push({elem:c,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||W,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=je.test(i)?this.mouseHooks:Re.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new oe.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=W),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===m()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oe.nodeName(this,"input"))return this.click(),!1},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:f):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||oe.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,r){return g(this,e,t,n,r)},one:function(e,t,n,r){return g(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,oe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=f),this.each(function(){oe.event.remove(this,e,n,t)})}});var Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ue=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^true\/(.*)/,$e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(Be,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),c=oe.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(s=u(a),o=u(e),r=0,i=o.length;r<i;r++)_(o[r],s[r]);if(t)if(n)for(o=o||u(e),s=s||u(a),r=0,i=o.length;r<i;r++)x(o[r],s[r]);else x(e,a);return s=u(a,"script"),s.length>0&&h(s,!c&&u(e,"script")),a},cleanData:function(e){for(var t,n,r,i=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(Se(n)){if(t=n[Me.expando]){if(t.events)for(r in t.events)i[r]?oe.event.remove(n,r):oe.removeEvent(n,r,t.handle);n[Me.expando]=void 0}n[Ie.expando]&&(n[Ie.expando]=void 0)}}}),oe.fn.extend({domManip:w,detach:function(e){return E(this,e,!0)},remove:function(e){return E(this,e)},text:function(e){return Ee(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(u(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Ee(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ue.test(e)&&!Fe[(De.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(u(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return w(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(u(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,r=[],i=oe(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),oe(i[s])[t](n),Z.apply(r,n.get());return this.pushStack(r)}});var He,Ye={HTML:"block",BODY:"block"},Xe=/^margin/,We=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),Ke=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Qe=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},Ze=W.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ze.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Ze.removeChild(s)}var n,r,i,o,s=W.createElement("div"),a=W.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),oe.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=a.appendChild(W.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Ze.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Ze.removeChild(s),a.removeChild(n),t}}))}();var Je=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],rt=W.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=I(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=oe.camelCase(t),c=e.style;return t=oe.cssProps[a]||(oe.cssProps[a]=T(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:c[t]:(o=typeof n,"string"===o&&(i=Ae.exec(n))&&i[1]&&(n=l(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(oe.cssNumber[a]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(c[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=oe.camelCase(t);return t=oe.cssProps[a]||(oe.cssProps[a]=T(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=I(e,t,r)),"normal"===i&&t in tt&&(i=tt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,r){if(n)return Je.test(oe.css(e,"display"))&&0===e.offsetWidth?Qe(e,et,function(){return P(e,t,r)}):P(e,t,r)},set:function(e,n,r){var i,o=r&&Ke(e),s=r&&A(e,t,r,"border-box"===oe.css(e,"boxSizing",!1,o),o);return s&&(i=Ae.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),C(e,n,s)}}}),oe.cssHooks.marginLeft=k(re.reliableMarginLeft,function(e,t){if(t)return(parseFloat(I(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),oe.cssHooks.marginRight=k(re.reliableMarginRight,function(e,t){if(t)return Qe(e,{display:"inline-block"},I,[e,"marginRight"])}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Pe[r]+t]=o[r]||o[r-2]||o[0];return i}},Xe.test(e)||(oe.cssHooks[e+t].set=C)}),oe.fn.extend({css:function(e,t){return Ee(this,function(e,t,n){var r,i,o={},s=0;if(oe.isArray(t)){for(r=Ke(e),i=t.length;s<i;s++)o[t[s]]=oe.css(e,t[s],!1,r);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return O(this,!0)},hide:function(){return O(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Oe(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=L,L.prototype={constructor:L,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=L.prototype.init,oe.fx.step={};var it,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;oe.Animation=oe.extend(j,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,Ae.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(_e);for(var n,r=0,i=e.length;r<i;r++)n=e[r],j.tweeners[n]=j.tweeners[n]||[],j.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?j.prefilters.unshift(e):j.prefilters.push(e)}}),oe.speed=function(e,t,n){var r=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t
};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Oe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=oe.isEmptyObject(e),o=oe.speed(t,n,r),s=function(){var t=j(this,oe.extend({},e),o);(i||Me.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=oe.timers,s=Me.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&at.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Me.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=oe.timers,s=r?r.length:0;for(n.finish=!0,oe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,r,i)}}),oe.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(it=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),it=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=W.createElement("input"),t=W.createElement("select"),n=t.appendChild(W.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,e=W.createElement("input"),e.value="t",e.type="radio",re.radioValue="t"===e.value}();var ct,lt=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Ee(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),i=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=oe.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(_e);if(o&&1===e.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),ct={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||oe.find.attr;lt[t]=function(e,t,r){var i,o;return r||(o=lt[t],lt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,lt[t]=o),i}});var ut=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Ee(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,i=oe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var dt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,c=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,V(this)))});if("string"==typeof e&&e)for(t=e.match(_e)||[];n=this[c++];)if(i=V(n),r=1===n.nodeType&&(" "+i+" ").replace(dt," ")){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=oe.trim(r),i!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,c=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(_e)||[];n=this[c++];)if(i=V(n),r=1===n.nodeType&&(" "+i+" ").replace(dt," ")){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=oe.trim(r),i!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,V(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=oe(this),o=e.match(_e)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=V(this),t&&Me.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Me.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+V(n)+" ").replace(dt," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,ft=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=oe.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,oe(this).val()):e,null==i?i="":"number"==typeof i?i+="":oe.isArray(i)&&(i=oe.map(i,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=oe.valHooks[i.type]||oe.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(pt,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ft," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,c=i<0?a:o?i:0;c<a;c++)if(n=r[c],(n.selected||c===i)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=oe.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=oe.inArray(oe.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){if(oe.isArray(t))return e.checked=oe.inArray(oe(e).val(),t)>-1}},re.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,r,i){var o,s,a,c,l,u,h,d=[r||W],p=ne.call(t,"type")?t.type:t,f=ne.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||W,3!==r.nodeType&&8!==r.nodeType&&!mt.test(p+oe.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[oe.expando]?t:new oe.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:oe.makeArray(n,[t]),h=oe.event.special[p]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!oe.isWindow(r)){for(c=h.delegateType||p,mt.test(c+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(r.ownerDocument||W)&&d.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)t.type=o>1?c:h.bindType||p,u=(Me.get(s,"events")||{})[t.type]&&Me.get(s,"handle"),u&&u.apply(s,n),u=l&&s[l],u&&u.apply&&Se(s)&&(t.result=u.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Se(r)||l&&oe.isFunction(r[p])&&!oe.isWindow(r)&&(a=r[l],a&&(r[l]=null),oe.event.triggered=p,r[p](),oe.event.triggered=void 0,a&&(r[l]=a)),t.result}},simulate:function(e,t,n){var r=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(r,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return oe.event.trigger(e,t,n,!0)}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Me.access(r,t);i||r.addEventListener(e,n,!0),Me.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Me.access(r,t)-1;i?Me.access(r,t,i):(r.removeEventListener(e,n,!0),Me.remove(r,t))}}});var gt=e.location,yt=oe.now(),vt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var bt=/#.*$/,xt=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)$/gm,wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Et=/^(?:GET|HEAD)$/,St=/^\/\//,Mt={},It={},kt="*/".concat("*"),Tt=W.createElement("a");Tt.href=gt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:wt.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,oe.ajaxSettings),t):z(oe.ajaxSettings,e)},ajaxPrefilter:B(Mt),ajaxTransport:B(It),ajax:function(t,n){function r(t,n,r,a){var l,h,v,b,_,E=n;2!==x&&(x=2,c&&e.clearTimeout(c),i=void 0,s=a||"",w.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=G(d,w,r)),b=$(d,b,w,l),l?(d.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(oe.lastModified[o]=_),_=w.getResponseHeader("etag"),_&&(oe.etag[o]=_)),204===t||"HEAD"===d.type?E="nocontent":304===t?E="notmodified":(E=b.state,h=b.data,v=b.error,l=!v)):(v=E,!t&&E||(E="error",t<0&&(t=0))),w.status=t,w.statusText=(n||E)+"",l?m.resolveWith(p,[h,E,w]):m.rejectWith(p,[w,E,v]),w.statusCode(y),y=void 0,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?h:v]),g.fireWith(p,[w,E]),u&&(f.trigger("ajaxComplete",[w,d]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,s,a,c,l,u,h,d=oe.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?oe(p):oe.event,m=oe.Deferred(),g=oe.Callbacks("once memory"),y=d.statusCode||{},v={},b={},x=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!a)for(a={};t=_t.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)y[t]=[y[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return i&&i.abort(t),r(0,t),this}};if(m.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||gt.href)+"").replace(bt,"").replace(St,gt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=oe.trim(d.dataType||"*").toLowerCase().match(_e)||[""],null==d.crossDomain){l=W.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=Tt.protocol+"//"+Tt.host!=l.protocol+"//"+l.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=oe.param(d.data,d.traditional)),U(Mt,d,n,w),2===x)return w;u=oe.event&&d.global,u&&0===oe.active++&&oe.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Et.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(vt.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=xt.test(o)?o.replace(xt,"$1_="+yt++):o+(vt.test(o)?"&":"?")+"_="+yt++)),d.ifModified&&(oe.lastModified[o]&&w.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&w.setRequestHeader("If-None-Match",oe.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+kt+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)w.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(p,w,d)===!1||2===x))return w.abort();_="abort";for(h in{success:1,error:1,complete:1})w[h](d[h]);if(i=U(It,d,n,w)){if(w.readyState=1,u&&f.trigger("ajaxSend",[w,d]),2===x)return w;d.async&&d.timeout>0&&(c=e.setTimeout(function(){w.abort("timeout")},d.timeout));try{x=1,i.send(v,r)}catch(e){if(!(x<2))throw e;r(-1,e)}}else r(-1,"No Transport");return w},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,r,i){return oe.isFunction(n)&&(i=i||r,r=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:i,data:n,success:r},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ct=/%20/g,At=/\[\]$/,Pt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,r=[],i=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){i(this.name,this.value)});else for(n in e)H(n,e[n],t,i);return r.join("&").replace(Ct,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Lt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:n.replace(Pt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},Nt=oe.ajaxSettings.xhr();re.cors=!!Nt&&"withCredentials"in Nt,re.ajax=Nt=!!Nt,oe.ajaxTransport(function(t){var n,r;if(re.cors||Nt&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Dt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),W.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ft=[],qt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||oe.expando+"_"+yt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(qt,"$1"+i):t.jsonp!==!1&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||oe.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){void 0===o?oe(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ft.push(i)),s&&oe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||W;var r=fe.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=d([e],t,i),i&&i.length&&oe(i).remove(),oe.merge([],r.childNodes))};var Rt=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Rt)return Rt.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=oe.trim(e.slice(a)),e=e.slice(0,a)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&oe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?oe("<div>").append(oe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var r,i,o,s,a,c,l,u=oe.css(e,"position"),h=oe(e),d={};"static"===u&&(e.style.position="relative"),a=h.offset(),o=oe.css(e,"top"),c=oe.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(r=h.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},a))),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+i),"using"in t?t.using.call(e,d):h.css(d)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,oe.contains(t,r)?(i=r.getBoundingClientRect(),n=Y(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(r=e.offset()),r.top+=oe.css(e[0],"borderTopWidth",!0),r.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-oe.css(n,"marginTop",!0),left:t.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ze})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(r){return Ee(this,function(e,r,i){var o=Y(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=k(re.pixelPosition,function(e,n){if(n)return n=I(e,t),We.test(n)?oe(e).position()[t]+"px":n})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){oe.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return Ee(this,function(t,n,r){var i;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?oe.css(t,n,s):oe.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var jt=e.jQuery,Vt=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Vt),t&&e.jQuery===oe&&(e.jQuery=jt),oe},t||(e.jQuery=e.$=oe),oe}),define("bugsnag",["require","exports","vendor/bugsnag","jquery"],function(e,t,n,r){"use strict";function i(){a||(a=n({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,consoleBreadcrumbsEnabled:!1}))}function o(e,t){a&&a.notify(e,t)}function s(e,t,n,r){a&&a.leaveBreadcrumb(e,t,n,r)}Object.defineProperty(t,"__esModule",{value:!0});var a;t.init=i,t.notify=o,t.leaveBreadcrumb=s,r(document).ajaxError(function(e,t,n,r){401!==t.status&&0!==t.status&&o({name:"AjaxError",message:r+": "+n.url},{metaData:{url:n.url,type:n.type,status:t.status,headers:t.getAllResponseHeaders(),responseText:t.responseText}})})}),define("analytics/google_analytics",["require"],function(e){var t=!1;return{init:function(e){if(!t){window._gaq=window._gaq||[],_gaq.push(["_setAccount",e]),_gaq.push(["_trackPageview"]),t=!0;var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}},send:function(e){t&&_gaq.push(e)}}}),define("console",["require"],function(e){var t=function(){},n=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],r={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?r[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:r[e]=t};return n.forEach(i),r}),define("pjs",[],function(){var e=function(e,t,n){function r(e){return"object"==typeof e}function i(e){return"function"==typeof e}function o(){}function s(a,c){function l(){var e=new u;return i(e.init)&&e.init.apply(e,arguments),e}function u(){}c===n&&(c=a,a=Object),l.Bare=u;var h,d=o[e]=a[e],p=u[e]=l[e]=new o;return p.constructor=l,l.mixin=function(t){return u[e]=l[e]=s(l,t)[e],l},(l.open=function(e){if(h={},i(e)?h=e.call(l,p,d,l,a):r(e)&&(h=e),r(h))for(var n in h)t.call(h,n)&&(p[n]=h[n]);return i(p.init)||(p.init=a),l})(c)}return s}("prototype",{}.hasOwnProperty);return e}),function(){function e(e){function t(t,n,r,i,o,s){for(;o>=0&&o<s;o+=e){var a=i?i[o]:o;r=n(r,t[a],a,t)}return r}return function(n,r,i,o){r=b(r,o,4);var s=!I(n)&&v.keys(n),a=(s||n).length,c=e>0?0:a-1;return arguments.length<3&&(i=n[s?s[c]:c],c+=e),t(n,r,i,s,c,a)}}function t(e){return function(t,n,r){n=x(n,r);for(var i=M(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function n(e,t,n){return function(r,i,o){var s=0,a=M(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(u.call(r,s,a),v.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}}function r(e,t){var n=P.length,r=e.constructor,i=v.isFunction(r)&&r.prototype||a,o="constructor";for(v.has(e,o)&&!v.contains(t,o)&&t.push(o);n--;)o=P[n],o in e&&e[o]!==i[o]&&!v.contains(t,o)&&t.push(o)}var i=this,o=i._,s=Array.prototype,a=Object.prototype,c=Function.prototype,l=s.push,u=s.slice,h=a.toString,d=a.hasOwnProperty,p=Array.isArray,f=Object.keys,m=c.bind,g=Object.create,y=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return null==e?v.identity:v.isFunction(e)?b(e,t,n):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return x(e,t,1/0)};var _=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var l=s[c];t&&void 0!==n[l]||(n[l]=o[l])}return n}},w=function(e){if(!v.isObject(e))return{};if(g)return g(e);y.prototype=e;var t=new y;return y.prototype=null,t},E=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,M=E("length"),I=function(e){var t=M(e);return"number"==typeof t&&t>=0&&t<=S};v.each=v.forEach=function(e,t,n){t=b(t,n);var r,i;if(I(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=v.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},v.map=v.collect=function(e,t,n){t=x(t,n);for(var r=!I(e)&&v.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,n){var r;if(r=I(e)?v.findIndex(e,t,n):v.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},v.filter=v.select=function(e,t,n){var r=[];return t=x(t,n),v.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},v.reject=function(e,t,n){return v.filter(e,v.negate(x(t)),n)},v.every=v.all=function(e,t,n){t=x(t,n);for(var r=!I(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},v.some=v.any=function(e,t,n){t=x(t,n);for(var r=!I(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,r){return I(e)||(e=v.values(e)),("number"!=typeof n||r)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=function(e,t){var n=u.call(arguments,2),r=v.isFunction(t);return v.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var r,i,o=-(1/0),s=-(1/0);if(null==t&&null!=e){e=I(e)?e:v.values(e);for(var a=0,c=e.length;a<c;a++)r=e[a],r>o&&(o=r)}else t=x(t,n),v.each(e,function(e,n,r){i=t(e,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=e,s=i)});return o},v.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t&&null!=e){e=I(e)?e:v.values(e);for(var a=0,c=e.length;a<c;a++)r=e[a],r<o&&(o=r)}else t=x(t,n),v.each(e,function(e,n,r){i=t(e,n,r),(i<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},v.shuffle=function(e){for(var t,n=I(e)?e:v.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=v.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},v.sample=function(e,t,n){return null==t||n?(I(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=x(t,n),v.pluck(v.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var k=function(e){return function(t,n,r){var i={};return n=x(n,r),v.each(t,function(r,o){var s=n(r,o,t);e(i,r,s)}),i}};v.groupBy=k(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=k(function(e,t,n){e[n]=t}),v.countBy=k(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.toArray=function(e){return e?v.isArray(e)?u.call(e):I(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:I(e)?e.length:v.keys(e).length},v.partition=function(e,t,n){t=x(t,n);var r=[],i=[];return v.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},v.first=v.head=v.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var T=function(e,t,n,r){for(var i=[],o=0,s=r||0,a=M(e);s<a;s++){var c=e[s];if(I(c)&&(v.isArray(c)||v.isArguments(c))){t||(c=T(c,t,n));var l=0,u=c.length;for(i.length+=u;l<u;)i[o++]=c[l++]}else n||(i[o++]=c)}return i};v.flatten=function(e,t){return T(e,t,!1)},v.without=function(e){
return v.difference(e,u.call(arguments,1))},v.uniq=v.unique=function(e,t,n,r){v.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=x(n,r));for(var i=[],o=[],s=0,a=M(e);s<a;s++){var c=e[s],l=n?n(c,s,e):c;t?(s&&o===l||i.push(c),o=l):n?v.contains(o,l)||(o.push(l),i.push(c)):v.contains(i,c)||i.push(c)}return i},v.union=function(){return v.uniq(T(arguments,!0,!0))},v.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=M(e);r<i;r++){var o=e[r];if(!v.contains(t,o)){for(var s=1;s<n&&v.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},v.difference=function(e){var t=T(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,M).length||0,n=Array(t),r=0;r<t;r++)n[r]=v.pluck(e,r);return n},v.object=function(e,t){for(var n={},r=0,i=M(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,n,r){n=x(n,r,1);for(var i=n(t),o=0,s=M(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o},v.indexOf=n(1,v.findIndex,v.sortedIndex),v.lastIndexOf=n(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var C=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=w(e.prototype),s=e.apply(o,i);return v.isObject(s)?s:o};v.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return C(e,r,t,this,n.concat(u.call(arguments)))};return r},v.partial=function(e){var t=u.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),s=0;s<i;s++)o[s]=t[s]===v?arguments[r++]:t[s];for(;r<arguments.length;)o.push(arguments[r++]);return C(e,n,this,this,o)};return n},v.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return v.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},v.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:v.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var l=v.now();a||n.leading!==!1||(a=l);var u=t-(l-a);return r=this,i=arguments,u<=0||u>t?(s&&(clearTimeout(s),s=null),a=l,o=e.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(c,u)),o}},v.debounce=function(e,t,n){var r,i,o,s,a,c=function(){var l=v.now()-s;l<t&&l>=0?r=setTimeout(c,t-l):(r=null,n||(a=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=v.now();var l=n&&!r;return r||(r=setTimeout(c,t)),l&&(a=e.apply(o,i),o=i=null),a}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return A&&r(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&r(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},v.mapObject=function(e,t,n){t=x(t,n);for(var r,i=v.keys(e),o=i.length,s={},a=0;a<o;a++)r=i[a],s[r]=t(e[r],r,e);return s},v.pairs=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},v.invert=function(e){for(var t={},n=v.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(e,t,n){t=x(t,n);for(var r,i=v.keys(e),o=0,s=i.length;o<s;o++)if(r=i[o],t(e[r],r,e))return r},v.pick=function(e,t,n){var r,i,o={},s=e;if(null==s)return o;v.isFunction(t)?(i=v.allKeys(s),r=b(t,n)):(i=T(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var a=0,c=i.length;a<c;a++){var l=i[a],u=s[l];r(u,l,s)&&(o[l]=u)}return o},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var r=v.map(T(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(r,t)}}return v.pick(e,t,n)},v.defaults=_(v.allKeys,!0),v.create=function(e,t){var n=w(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),o){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!O(e[c],t[c],n,r))return!1}else{var l,u=v.keys(e);if(c=u.length,v.keys(t).length!==c)return!1;for(;c--;)if(l=u[c],!v.has(t,l)||!O(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};v.isEqual=function(e,t){return O(e,t)},v.isEmpty=function(e){return null==e||(I(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=p||function(e){return"[object Array]"===h.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&d.call(e,t)},v.noConflict=function(){return i._=o,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=E,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=v.invert(L),N=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};v.escape=N(L),v.unescape=N(D),v.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),v.isFunction(r)?r.call(e):r};var F=0;v.uniqueId=function(e){var t=++F+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,V=function(e){return"\\"+R[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var r=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,a){return o+=e.slice(i,a).replace(j,V),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var a=function(e){return s.call(this,e,v)},c=t.variable||"obj";return a.source="function("+c+"){\n"+o+"}",a},v.chain=function(e){var t=v(e);return t._chain=!0,t};var B=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),B(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],B(this,n)}}),v.each(["concat","join","slice"],function(e){var t=s[e];v.prototype[e]=function(){return B(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),define("lib/deepCopy",["require","exports"],function(e,t){"use strict";function n(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(n);var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=n(t[i]));return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("config",["require","./lib/deepCopy"],function(e){var t=e("./lib/deepCopy").default,n={},r=location.search;"?"===r[0]&&(r=r.slice(1));for(var i=r.split("&"),o={},s=0;s<i.length;s++){var a=i[s].split("=");o[a[0]]=2!==a.length||a[1]}if(window.Desmos&&window.Desmos.config)for(var c in window.Desmos.config)window.Desmos.config.hasOwnProperty(c)&&(o[c]=window.Desmos.config[c]);var l=function(e){return o.hasOwnProperty(e)},u=function(e){n[e]=l(e)},h=function(e){n[e]=!l("no"+e)};u("testing"),u("maintenance"),u("disableScrollFix"),u("nativeOnscreenKeypad"),u("hidden"),u("disableMouseInteractions"),u("outofdom"),o.lang&&(n.lang=o.lang),n.no_navigation_warning=l("noconcat")||l("testing"),n.previewMessage="You're previewing some new accessibility features.",n.previewFeedbackUrl="mailto:feedback@desmos.com";var d=location&&"preview.desmos.com"===location.hostname;return n.previewMode=l("previewMode")||d,u("lockViewport"),u("administerSecretFolders"),u("degreeMode"),u("plaidMode"),u("editOnWeb"),u("crossOriginSaveTest"),h("links"),h("trace"),u("expressionsCollapsed"),u("invertedColors"),h("images"),h("folders"),h("settingsMenu"),h("expressionsTopbar"),h("zoomButtons"),h("keypad"),h("graphpaper"),h("expressions"),h("expressionsTopbar"),h("settingsMenu"),h("branding"),h("pointsOfInterest"),h("plotSingleVariableImplicitEquations"),h("notes"),u("sciKeypad"),u("4fnKeypad"),u("ans"),l("braille")&&(n.braille=!0),h("qwertyKeyboard"),u("restrictedFunctions"),h("functionDefinition"),u("singleExpression"),u("restrictedEditing"),h("labels"),u("bare-i18n"),u("distributions"),o.additionalFunctions&&(n.additionalFunctions=o.additionalFunctions.split(",")),{get:function(e){return n[e]},all:function(){return t(n)}}}),define("main/cookie",[],function(){function e(e){try{var t,n,r,i=encodeURIComponent(e),o=document.cookie.split(";");for(t=0;t<o.length;t++)if(n=o[t].substr(0,o[t].indexOf("=")),r=o[t].substr(o[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==i)return decodeURIComponent(r)}catch(e){return}}function t(e,t,n){try{var r=new Date;r.setDate(r.getDate()+(n||30)),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+r.toUTCString()+"; path=/"}catch(e){}}return{getCookie:e,setCookie:t}}),define("lib/console",["require","exports","console"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=n.log,t.warn=n.warn}),define("i18n",["require","exports","config","main/cookie","jquery","underscore","lib/console"],function(e,t,n,r,i,o,s){"use strict";function a(e,t){m=e||"",g=t||{}}function c(e){for(var t,n=/(__[^_]+__)/g,r=[];null!==(t=n.exec(e));)r.push({index:t.index,text:t[0]});e=e.replace(/[a-z]/gi,"♦");for(var i=e.split(""),o=0;o<r.length;o++)for(var s=r[o].index,a=r[o].text,c=0;c<a.length;c++)i[s+c]=a[c];return i.join("")}function l(e,t,r){var i=void 0!==r?r:m,o=g[i]&&g[i][e]||e||"";if(n.get("bare-i18n")&&(o=c(o)),t)for(var s in t)t.hasOwnProperty(s)&&(o=o.split("__"+s+"__").join(t[s]));return o}function u(e){var n=[];return o.each(e,function(e){if(e){var r=e.split("-")[0];n.push(e),n.push(r),o.each(t.enabled_languages,function(e,t){t.split("-")[0]===r&&e.useAsRoot&&n.push(t)})}}),n}function h(){for(var e=u([n.get("lang"),r.getCookie("lang"),navigator.userLanguage,navigator.language]),i=0;i<e.length;i++){var s=e[i];if(t.enabled_languages.hasOwnProperty(s))return s;if(o.contains(y,s))return s}return"en"}function d(){return m}function p(e){var t=window.Desmos,n=i.Deferred();return t.supportedLanguages.indexOf(e)>=0||"en"===e?(a(e,t.locales),n.resolve(!0),n.promise()):(i.get("/api/v1/calculator/language/"+e,function(r){t.locales||(t.locales={}),t.supportedLanguages||(t.supportedLanguages=[]),t.locales[e]=r[e],t.supportedLanguages.push(e),a(e,t.locales),n.resolve(!0)}).fail(function(t){404===t.status&&s.warn(e+" is not an available language."),n.reject()}),n.promise())}function f(e,t){if(null===e||void 0===e)return"";if("string"==typeof e)return e;if("number"==typeof e)return""+e;var n,r=e.vars;if(r){n={};for(var i in r)r.hasOwnProperty(i)&&(n[i]=f(r[i],t))}return l(e.msg,n,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.locales=function(){var e=window.Desmos;return e&&e.locales?e.locales:{}}();var m="",g={};t.enabled_languages={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"en-GB":{displayName:"English (GB)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"es-ES":{displayName:"Español (España)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},ru:{displayName:"Русский",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Português (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"pt-PT":{displayName:"Português (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Català",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Français",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"Íslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},hr:{displayName:"Hrvatski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"Čeština",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"Türkçe",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},sl:{displayName:"Slovenščina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_SL.pdf",useAsRoot:!1},lt:{displayName:"Lietuvių",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},ro:{displayName:"Română",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Tiếng Việt",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"Ελληνικά",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},"sr-CS":{displayName:"SRPSKI",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},bg:{displayName:"Български",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_BG.pdf",useAsRoot:!1},mk:{displayName:"Македонски",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},uk:{displayName:"Українська",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"ქართული",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"ภาษาไทย",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"zh-CN":{displayName:"简体中文",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"繁體中文",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"한국어",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"日本語",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var y=["sr","he","ar","fi","hu","kk","ml-IN","tr"];t.init=a,t.t=l,t.detectLanguage=h,t.currentLanguage=d,t.fetchLanguage=p,t.unpack=f,a(h(),t.locales)}),define("keys",["require"],function(e){var t=function(){var e={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},t={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN};this.isUndo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&90==e.which&&!e.shiftKey},this.isRedo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&(89==e.which||90==e.which&&e.shiftKey)},this.isSelectAll=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&65==e.which},this.isBacktick=function(e){return!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||192!=e.which)},this.lookup=function(n){return e[n.which]||t[n.key]},this.lookupChar=function(e){return String.fromCharCode(e.which)}};return new t}),define("touchtracking",["require","jquery","ipad.ghostevents","keys"],function(e){var t=e("jquery"),n=e("ipad.ghostevents"),r=e("keys");void 0==window._touchtracking_id_counter&&(window._touchtracking_id_counter=0),window._touchtracking_id_counter+=1;var i="touchtracking_id_"+window._touchtracking_id_counter,o=function(e){t(e).addClass("dcg-tap-container"),t(e).addClass(i)},s=function(e){t(e).addClass("dcg-no-touchtracking")};n.evtInScope=function(e){return M(e.target)},n.isGhostEvent=function(e){return!window.PointerEvent&&(!(d!==c&&d!==h&&!T())&&(e.target!==v&&((!e.target||!t.contains(e.target,v))&&(!v||!t.contains(v,e.target)))))};var a=0,c=1,l=2,u=3,h=4,d=a,p={},f={},m=[],g=0,y=null,v=null,b=null,x=[],_=function(e){for(var t=[];e;)t.push(e),e=e.parentNode;return t},w=function(e){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(n.push(o),t(o).is(".dcg-tap-container, .dcg-no-touchtracking"))return t(o).is(".dcg-tap-container."+i)?n:[]}return[]},E=function(e,n){v=null,d=e,m=_(d===c?n.originalEvent.touches[0].target:n.target),t(w(m)).addClass("dcg-depressed").each(function(){var e=t(this);I(e)&&e.addClass("dcg-focus-by-tap")}),t(m).each(function(){var e=t(this);e.data({originalScrollTop:e.scrollTop(),originalScrollLeft:e.scrollLeft()})}),f={}},S=function(e){return e.is("input, textarea, select")||e.hasClass("dcg-mathquill-input-span")},M=function(e){return!!t(e).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container."+i)},I=function(e){return d!==u&&!S(e)&&M(e)},k=function(e){v=null,t(".dcg-depressed").removeClass("dcg-depressed");var n=t(document.activeElement);if(I(n)&&n.blur(),t(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),t(m).each(function(){var e=t(this),n=e.data("originalScrollTop")-e.scrollTop(),r=e.data("originalScrollLeft")-e.scrollLeft();(n||r)&&(f.scroll=!0)}),1===f["dcg-tapstart"]&&1===f["dcg-tapend"]&&!f["dcg-tapcancel"]&&!f.scroll){var r="mouse"===e.device?e.clientX:e.originalEvent.changedTouches[0].clientX,i="mouse"===e.device?e.clientY:e.originalEvent.changedTouches[0].clientY;if(e&&!e.device&&0===r&&0===i){var o=e.target.getBoundingClientRect();r=(o.left+o.right)/2,i=(o.top+o.bottom)/2,e.device="keyboard"}for(var s=!1,l=0;l<m.length&&!s;l++){var u,p=t(m[l]);if("function"==typeof p[0].getBoundingClientRect&&(u=p[0].getBoundingClientRect()),"true"===p.attr("tapboundary")&&(s=!0),u){if(r<u.left||i<u.top)continue;if(r>u.right)continue;if(i>u.bottom)continue}v=p[0],A("dcg-tap",e,v);break}}d!==c&&d!==h||(y=setTimeout(function(){y=null,g=(new Date).getTime()},1e3)),m=[],d=a},T=function(){return y||(new Date).getTime()-g<500},C=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push({identifier:r.identifier,x:r.pageX,y:r.pageY,screenX:r.screenX,screenY:r.screenY,pageX:r.pageX,pageY:r.pageY,clientX:r.clientX,clientY:r.clientY})}return t},A=function(e,n,r){if("dcg-tapstart"===e)p[n.identifier]={type:e,pageX:n.originalEvent.changedTouches[0].pageX,pageY:n.originalEvent.changedTouches[0].pageY};else if("dcg-tapmove"===e){var i=n.originalEvent.changedTouches[0],o=p[n.identifier];if(o&&i.pageX===o.pageX&&i.pageY===o.pageY)return;if((d===c||d===h)&&o&&"dcg-tapstart"===o.type&&Math.abs(o.pageX-i.pageX)+Math.abs(o.pageY-i.pageY)<2)return;p[n.identifier]={type:e,pageX:n.originalEvent.changedTouches[0].pageX,pageY:n.originalEvent.changedTouches[0].pageY}}void 0===f[e.toLowerCase()]?f[e.toLowerCase()]=1:f[e.toLowerCase()]++;var s=t.event.fix(n.originalEvent);s.type=e,s.device=d===c||d===h?"touch":d===u?"keyboard":"mouse",s.touches=C(n.originalEvent.touches),s.changedTouches=C(n.originalEvent.changedTouches),s.target=r?r:n.target;var a=f["dcg-longhold"]>0;s.wasLongheld=function(){return a},s.preventTap=function(){f["dcg-tapcancel"]=1},clearTimeout(b),"dcg-tapstart"===s.type&&1===s.touches.length&&(b=setTimeout(function(){A("dcg-longhold",n,r)},500)),t(s.target).trigger(s)},P=function(e){var n=m,r=!!m.length,o=t(".dcg-tap-container."+i+" .dcg-hovered"),s=t.makeArray(o.filter(function(){return M(this)})),a=[],c=[],l=[];w(_(e)).forEach(function(e){r&&n.indexOf(e)===-1||(s.indexOf(e)===-1&&l.push(e),a.push(e))});for(var u=0;u<s.length;u++)e=s[u],a.indexOf(e)===-1&&c.push(e);t(c).removeClass("dcg-hovered").trigger("tipsyhide"),t(l).addClass("dcg-hovered").trigger("tipsyshow")},O=function(e){for(var t=0;t<x.length;t++)if(x[t].pointerId===e)return!0;return!1},L=function(e){for(var t=0;t<x.length;t++)if(x[t].pointerId===e)return x.splice(t,1)[0]},D=function(e){d===a&&E(h,e),P(null),x.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=x,e.originalEvent.changedTouches=[e.originalEvent],A("dcg-tapstart",e)},N=function(e){L(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=x,e.originalEvent.changedTouches=[e.originalEvent],A("dcg-tapcancel",e),0===x.length&&k(e)},F=function(e){L(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=x,e.originalEvent.changedTouches=[e.originalEvent],A("dcg-tapend",e),0===x.length&&k(e)},q=function(e){return"touch"===e.originalEvent.pointerType||2===e.originalEvent.pointerType};return t(document).on("pointerdown MSPointerDown",function(e){d!==l&&d!==c&&q(e)&&(O(e.originalEvent.pointerId)||D(e))}),t(document).on("pointermove MSPointerMove",function(e){d!==l&&d!==c&&q(e)&&(O(e.originalEvent.pointerId)||D(e),L(e.originalEvent.pointerId),x.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=x,e.originalEvent.changedTouches=[e.originalEvent],A("dcg-tapmove",e))}),t(document).on("pointercancel MSPointerCancel",function(e){if(d===h&&q(e)&&O(e.originalEvent.pointerId)){N(e);for(var n;n=x.pop();){var e=t.Event(n,{originalEvent:n});N(e)}}}),t(document).on("pointerup MSPointerUp",function(e){if(d===h&&q(e)&&O(e.originalEvent.pointerId)){F(e);for(var n;n=x.pop();){var e=t.Event(n,{originalEvent:n});F(e)}}}),t(document).on("touchstart",function(e){d!==l&&d!==h&&(d===a&&E(c,e),P(null),A("dcg-tapstart",e))}),t(document).on("touchmove",function(e){d===c&&A("dcg-tapmove",e)}),t(document).on("touchcancel",function(e){d===c&&(A("dcg-tapcancel",e),0===e.originalEvent.touches.length&&k(e))}),t(document).on("touchend",function(e){d===c&&(A("dcg-tapend",e),0===e.originalEvent.touches.length&&k(e))}),t(document).on("mousedown",function(e){if(1!==e.button&&2!==e.button){if(d===c||d===h||T())return void(!t(e.target).is("input, textarea, select")&&M(e.target)&&e.preventDefault());E(l,e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],A("dcg-tapstart",e)}}),t(document).ready(function(){t(document).on("mousedown",function(e){var n=!!t(e.target).closest(".dcg-do-not-blur").length,r=!!t(e.target).closest(".dcg-do-blur").length;if(n&&!r&&M(e.target)){e.preventDefault();try{var i=window.getSelection();if(1===i.rangeCount){var o=i.getRangeAt(0);o.startContainer===o.endContainer&&t(o.startContainer).closest(".dcg-text-selectable").length&&i.removeAllRanges()}}catch(e){}}})}),t(document).on("mouseleave",function(e){d===a&&(T()||P(null))}),t(document).on("mousemove",function(e){1!==e.button&&2!==e.button&&d!==c&&d!==h&&(T()||(P(e.target),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],A("dcg-tapmove",e)))}),t(document).on("mouseup",function(e){1!==e.button&&2!==e.button&&d===l&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],A("dcg-tapend",e),k(e))}),t(document).on("keydown",function(e){if((r.lookup(e)===r.ENTER||r.lookup(e)===r.SPACEBAR)&&M(e.target)){if(d!==u){if(t(e.target).is("a:not([ontap]), button, input, textarea, select, contenteditable"))return;e.preventDefault()}E(u,e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],A("dcg-tapstart",e)}}),t(document).on("keyup",function(e){r.lookup(e)!==r.ENTER&&r.lookup(e)!==r.SPACEBAR||!M(e.target)||d===u&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],A("dcg-tapend",e),k(e))}),{monitor:o,ignore:s,isTapActive:function(){return d!==a},elIsFocusable:S}}),define("math/mathshim",["require"],function(e){var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var n=e>0?1:-1;return e=e>0?e:-e,.5*-n*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var n=e>0?1:-1;e=e>0?e:-e;var r=t.expm1(-2*e);return-n*r/(2+r)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var n=e>0?1:-1;return e=e>0?e:-e,1+e*e===1?n*t.log1p(e):n*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("math/distance",["require","exports"],function(e,t){"use strict";function n(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function r(e,t,n,r){return e*n+t*r}function i(e,n,i,o,s,a){var c=t.hypot(s-i,a-o);if(0===c)return 0;var l=r((e-i)/c,(n-o)/c,(s-i)/c,(a-o)/c);return l}function o(e,t,n,r,o,s){var a=i(e,t,n,r,o,s);return a<=0?[n,r]:a>=1?[o,s]:[n+a*(o-n),r+a*(s-r)]}function s(e,n,r,i,s,a){var c=o(e,n,r,i,s,a);return t.hypot(e-c[0],n-c[1])}function a(e,t,n){if(void 0===n&&(n=1),n>50)throw new Error("Within "+(52-n)+" bits isn't really approximate any more");var r=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),i=1===n?.5:Math.pow(.5,n);return r===r+i*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hypot=Math.hypot||function(e,t){if(0===e&&0===t)return 0;if(Math.abs(e)>Math.abs(t)){var n=t/e;return Math.abs(e)*Math.sqrt(n*n+1)}var n=e/t;return Math.abs(t)*Math.sqrt(n*n+1)},t.mean=n,t.pointToSegmentParameter=i,t.closestPointOnSegment=o,t.pointToSegment=s,t.approx=a}),define("math/poi",["require","exports","./distance","lib/console"],function(e,t,n,r){"use strict";function i(e,t){var r;e>t&&(r=e,e=t,t=r);var i=e>0,o=t>0,s=Math.abs(e)>.01,a=Math.abs(t)>.01;if(s||a)return n.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==o)return 0;var c=i?Math.sqrt(e*t):-Math.sqrt(e*t);return c>=e&&t>=c?c:n.mean(e,t)}function o(e,t,n,o,a){if(!isFinite(t)||!isFinite(o)||t<0==o<0)return void r.log("bisectZero called with bad y values",[t,o]);for(;;){var c=i(e,n),l=a(c);if(!isFinite(l))return;if(c===e||c===n)return Math.abs(t)<=Math.abs(o)?[e,t]:[n,o];if(0===l)return s(e,t,c,l,n,o,a);t<0!=l<0?(n=c,o=l):(e=c,t=l)}}function s(e,t,n,r,o,s,l){var u;if(isFinite(r)){isFinite(t)||(u=a(e,t,n,r,l),u&&(e=u[0],t=u[1])),isFinite(s)||(u=a(n,r,o,s,l),u&&(o=u[0],s=u[1]));var h,d;h=t===r?[e,t]:c(e,t,n,r,l,r),d=s===r?[o,s]:c(n,r,o,s,l,r);var p;return h&&d&&(p=i(h[0],d[0])),void 0!==p?[p,l(p)]:void 0}}function a(e,t,n,o,s){if(isFinite(t)===isFinite(o))return void r.log("bisectFinite called with bad y values",[t,o]);for(;;){var a=i(e,n),c=s(a);if(a===e||a===n)return isFinite(t)?[e,t]:[n,o];isFinite(c)!==isFinite(t)?(n=a,o=c):(e=a,t=c)}}function c(e,t,n,o,s,a){if(t===a==(o===a))return void r.log("bisectConstant called with bad y values",[t,o,a]);for(;;){var c=i(e,n),l=s(c);if(c===e||c===n)return t===a?[e,t]:[n,o];l===a!=(t===a)?(n=c,o=l):(e=c,t=l)}}function l(e,t,n,o,a,c,l){if(!(e<n&&n<a))return void r.log("bisectExtremum called with bad x values",[e,n,a]);if(!(isFinite(t)&&isFinite(o)&&isFinite(c)&&t!==o&&o!==c&&o>t==o>c))return void r.log("bisectExtremum called with bad y values",[t,o,c]);for(;;){var u=i(e,n),h=l(u),d=i(n,a),p=l(d);if(!isFinite(h)||!isFinite(p))return;if(u===e||u===n||d===n||d===a)return h>o==o>t?[u,h]:p>o==o>t?[d,p]:[n,o];
if(h===o||p===o)return s(e,t,n,o,a,c,l);h>t==o>t&&h>t==h>o?(a=n,c=o,n=u,o=h):p>c==o>c&&p>o==p>c?(e=n,t=o,n=d,o=p):(e=u,t=h,a=d,c=p)}}function u(e,t,n,r,i,o,s,a){var c=Math.abs(r-t),l=Math.abs(o-r),u=Math.abs(a-o);return c>l&&c>u?[[e,t],[n,r]]:u>l&&u>c?[[i,o],[s,a]]:[[n,r],[i,o]]}function h(e,t,r,o,s,c,l,h){if(h||(h=0),!((r-e)*(s-r)<=0)&&isFinite(e)&&isFinite(r)&&isFinite(s)&&isFinite(t)&&isFinite(c)){if(!isFinite(o))return[a(e,t,r,o,l),a(r,o,s,c,l)];if(!(Math.abs(o-((s-r)*t+(r-e)*c)/(s-e))<h))for(;;){var d=i(e,r),p=l(d),f=i(r,s),m=l(f),g=Math.abs(p-n.mean(t,o)),y=Math.abs(o-n.mean(p,m)),v=Math.abs(m-n.mean(o,c)),b=void 0,x=void 0;if(g<=h&&y<=h&&v<=h)return;if(!isFinite(p))return b=a(e,t,d,p,l),x=a(d,p,s,c,l),[b,x];if(!isFinite(m))return b=a(e,t,f,m,l),x=a(f,m,s,c,l),[b,x];if(!(d!==e&&d!==r||f!==r&&f!==s))return Math.abs(o-t)>Math.abs(c-o)?(b=[e,t],x=[r,o]):(b=[r,o],x=[s,c]),[b,x];if(d===e||d===r)return u(e,t,r,o,f,m,s,c);if(f===r||f===s)return u(e,t,d,p,r,o,s,c);g>v&&g>=y?(s=r,c=o,r=d,o=p):v>g&&v>=y?(e=r,t=o,r=f,o=m):(e=d,t=p,s=f,c=m)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={bisectJump:h,bisectExtremum:l,bisectFinite:a,bisectZero:o,flatCenter:s,INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006,TRACE:1007,LABEL:1008}}),define("math/quadrature",["require","math/mathshim","math/poi"],function(e){"use strict";function t(e,t){for(var n=v;n>0;n--){var r=p/v*n,i=l.sinh(r),o=l.cosh(Math.PI/2*i),s=1/(Math.exp(Math.PI/2*i)*o),a=l.cosh(r)/(o*o);e.push(s),t.push(a)}}function n(e,t,n){return.5*(t*(2-n)+e*n)}function r(e,t,n){var r=.5*(t+n),i=h(t,e(t),r,e(r),n,e(n),e,0);return i?.5*(i[0][0]+i[1][0]):r}function i(e,t,n,r,i){return{x1:e,x2:t,value:n,error:r,minerror:i}}function o(e,t,r){var i=Math.abs(e(n(t,r,m))),o=Math.abs(e(n(t,r,2*m)));return!(i<m||o<m)&&i>1.95*o}function s(e,t,r){var s,a,c=n(r,t,b[0]),l=n(t,r,b[0]),u=e(c),h=e(l),p=n(t,r,1),f=e(p);if(isFinite(f)&&!isFinite(u)){if(s=d(c,u,p,f,e),Math.abs((s[0]-t)/(r-t))>y)return i(t,r,NaN,NaN,NaN);t=s[0],u=s[1]}if(isFinite(f)&&!isFinite(h)){if(a=d(p,f,l,h,e),Math.abs((a[0]-r)/(r-t))>y)return i(t,r,NaN,NaN,NaN);r=a[0],h=a[1]}if(isFinite(u)&&isFinite(h)&&!isFinite(f)){if(s=d(c,u,p,f,e),a=d(p,f,l,h,e),Math.abs((a[0]-s[0])/(r-t))>y)return i(t,r,NaN,NaN,NaN);f=.5*(s[1]+a[1])}if(o(e,t,r)||o(e,r,t))return i(t,r,NaN,NaN,NaN);for(var m=f,g=0,_=0,w=0,S=0,M=0,I=0,k=0;k<v;k+=4)M=e(n(t,r,b[k])),I=e(n(r,t,b[k])),S=Math.max(S,Math.abs(M),Math.abs(I)),g+=x[k]*(M+I),M=e(n(t,r,b[k+1])),I=e(n(r,t,b[k+1])),S=Math.max(S,Math.abs(M),Math.abs(I)),w+=x[k+1]*(M+I),M=e(n(t,r,b[k+2])),I=e(n(r,t,b[k+2])),S=Math.max(S,Math.abs(M),Math.abs(I)),_+=x[k+2]*(M+I),M=e(n(t,r,b[k+3])),I=e(n(r,t,b[k+3])),S=Math.max(S,Math.abs(M),Math.abs(I)),w+=x[k+3]*(M+I);var T,C=m+g,A=C+_,P=A+w,O=Math.abs(_-C),L=Math.abs(w-A),D=E*(r-t)*P,N=E*Math.abs(r-t)*S*x[0];return T=0===O?E*Math.abs(r-t)*L:E*Math.abs(r-t)*L*(L/O)*(L/O),T=Math.max(T,N),i(t,r,D,T,N)}function a(e){for(var t=-(1/0),n=-(1/0),r=-1,i=0,o=0;o<e.length;o++){var s=e[o];i+=s.value,s.error>t&&(t=s.error,r=o),s.minerror>n&&(n=s.minerror)}return{maxerror:t,maxminerror:n,maxindex:r,totalvalue:i}}function c(e,t,i,o){if(void 0===o&&(o=32),!isFinite(t)||!isFinite(i))return NaN;for(var c=[s(e,t,i)],l=a(c),u=1;u<o&&!(Math.abs(l.maxerror/l.totalvalue)<=32*g||l.maxerror<=32*g||l.maxerror<=32*l.maxminerror);u++){var h=c[c.length-1];c[c.length-1]=c[l.maxindex],c[l.maxindex]=h;var d=c.pop(),p=r(e,n(d.x2,d.x1,.125),n(d.x1,d.x2,.125));c.push(s(e,d.x1,p)),c.push(s(e,p,d.x2)),l=a(c)}return l.totalvalue}var l=e("math/mathshim"),u=e("math/poi").default,h=u.bisectJump,d=u.bisectFinite,p=3.154019550531224,f=Math.pow(2,-13),m=f*f,g=m*m,y=m,v=32,b=[],x=[];t(b,x);for(var _=0,w=0;w<x.length;w++)_+=x[w];var E=1/(1+2*_);return{quad:c}}),define("math/studentt",["require"],function(e){var t=.5772156649015329,n=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.840230011973897,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.25967555349],i=function(e){if(e<=0)throw new RangeError("Argument must be positive.");if(e<.001)return 1/(e*(1+t*e));if(e<12){var i=e,o=0,s=i<1;s?i+=1:(o=Math.floor(i)-1,i-=o);for(var c=0,l=1,u=i-1,h=0;h<8;h++)c=(c+n[h])*u,l=l*u+r[h];var d=c/l+1;if(s)d/=i-1;else for(h=0;h<o;h++)d*=i++;return d}return e>171.624?1/0:Math.exp(a(e))},o=[1/12,-1/360,1/1260,-1/1680,1/1188,-691/360360,1/156,-3617/122400],s=.9189385332046728,a=function(e){if(e<=0)throw new RangeError("Argument must be positive.");if(e<12)return Math.log(Math.abs(i(e)));for(var t=1/(e*e),n=o[7],r=6;r>=0;r--)n*=t,n+=o[r];var a=n/e;return(e-.5)*Math.log(e)-e+s+a},c=function(e){if(e<=-1)throw new RangeError("Argument mustbe greater than -1.0");return Math.abs(e)>1e-4?Math.log(1+e):(-.5*e+1)*e},l=function(e,t,n){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===n)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===n)return 0;var r=Math.exp(a(t+n)-a(t)-a(n)+t*Math.log(e)+n*c(-e));return e<(t+1)/(t+n+2)?r*u(e,t,n)/t:1-r*u(1-e,n,t)/n},u=function(e,t,n){var r,i,o,s,a,c,l,u,h,d=1e-30,p=1;for(l=t+n,h=t+1,u=t-1,o=1,s=1-l*e/h,Math.abs(s)<d&&(s=d),s=1/s,c=s;p<=100&&(r=2*p,i=p*(n-p)*e/((u+r)*(t+r)),s=1+i*s,Math.abs(s)<d&&(s=d),o=1+i/o,Math.abs(o)<d&&(o=d),s=1/s,c*=s*o,i=-(t+p)*(l+p)*e/((t+r)*(h+r)),s=1+i*s,Math.abs(s)<d&&(s=d),o=1+i/o,Math.abs(o)<d&&(o=d),s=1/s,a=s*o,c*=a,!(Math.abs(a-1)<3e-7));p++);return c},h=function(e,t){var n=i((e+1)/2)/(Math.sqrt(e*Math.PI)*i(e/2));return n*Math.pow(1+t*t/e,-((e+1)/2))},d=function(e,t){var n=Math.sqrt(t*t+e);return l((t+n)/(2*n),e/2,e/2)};return{cdf:d,pdf:h,gamma:i}}),define("math/tofraction",["require","exports"],function(e,t){"use strict";function n(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-(1/0))return{n:-(1/0),d:1};if(!isFinite(e))return{n:NaN,d:1};for(var n,r,i,o=0,s=1,a=1,c=0;;){if(n=Math.floor(e),r=n*s+o,i=n*c+a,i>t)break;if(o=s,a=c,s=r,c=i,e===n)break;e=1/(e-n)}return{n:s,d:c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("math/builtin",["require","math/mathshim","math/distance","math/quadrature","math/studentt","math/tofraction"],function(e){function t(e){return!(e>1e12)&&Math.round(l*e)*Math.PI===e}function n(e){if(e>1e12)return!1;var t=Math.round(2*l*e);return t%2===1&&t*Math.PI===2*e}var r=e("math/mathshim"),i=e("math/distance"),o=e("math/quadrature"),s=e("math/studentt"),a=e("math/tofraction").default,c={};c.cosh=r.cosh,c.sinh=r.sinh,c.tanh=r.tanh,c.acosh=r.acosh,c.asinh=r.asinh,c.atanh=r.atanh,c.expm1=r.expm1,c.log1p=r.log1p,c.sqrtxsqp1=r.sqrtxsqp1,c.sqrtxsqm1=r.sqrtxsqm1,c.mod=function(e,t){return e-t*Math.floor(e/t)},c.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},c.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var n=c.gcd(e,t);return Math.abs(e*t/n)},c.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var n=t;t=e,e=n}if(0===t)return e;for(var r=e%t;r>0;)e=t,t=r,r=e%t;return t},c.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],n=1;n<e.length;n++)t=c.gcd(t,e[n]);return t},c.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],n=1;n<e.length;n++)t=c.lcm(t,e[n]);return t},c.nCr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||e<0||t<0)return 0;for(var n=1,r=0;r<t;r++)n*=(e-r)/(r+1);return n},c.nPr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||e<0||t<0)return 0;for(var n=1,r=0;r<t;r++)n*=e-r;return n},c.factorial=function(e){return c.gamma(e+1)},c._integerFactorial=function(e){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(e>170)return NaN;if(0===e||1===e)return 1;for(var t=1,n=2;n<=e;n++)t*=n;return t},c.gamma=function(e){return e===Math.floor(e)?c._integerFactorial(e-1):e<0?Math.PI/(Math.sin(Math.PI*e)*c.gamma(1-e)):Math.exp(c.lnGamma(e))},c.lnGamma=function(e){if(e<0)return NaN;for(var t=[57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],n=.9999999999999971,r=0;r<14;r++)n+=t[r]/(e+r+1);var i=e+5.2421875;return(e+.5)*Math.log(i)-i+Math.log(2.5066282746310007*n/e)},c.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],c.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/c.tan(t);var n=c.sin(t);if(1===e)return-1/(n*n);var r=c.cos(t);if(2===e)return 2*r/(n*n*n);var i,o,s,a,l,u=[0,2];for(o=3;o<=e;o++){for(i=[],s=0;s<o;s++)a=0,l=0,s>0&&(a=(o-s+1)*u[s-1]),s+2<o&&(l=(s+1)*u[s+1]),i.push(-(a+l));u=i}var h=0;for(s=e-1;s>=0;s--)h=i[s]+r*h;return h/Math.pow(n,e+1)},c.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var n=e%2===0?-1:1;if(t<0)return-n*c.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*c.cotDerivative(e,Math.PI*t);for(var r=c.factorial(e),i=0,o=Math.pow(t,-(e+1));t<10;)i+=o,t++,o=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):o*t/e,i+=.5*o;for(var s=c.bernoulliTable,a=e+1,l=2,u=o*t*a/l,h=1/(t*t),d=1;d<=14;d++)u*=h,i+=u*s[d-1],a++,l++,u*=a/l,a++,l++,u*=a/l;return r*n*i},c.toFraction=a,c.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},c.log_base=function(e,t){if(0===t)return NaN;var n=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(n))===e?Math.round(n):n},c.common_log=function(e){return c.log_base(e,10)},c.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var n=c.toFraction(t,100);return i.approx(n.n/n.d,t,2)&&n.d%2===1?(n.n%2===0?1:-1)*Math.pow(-e,t):NaN},c.nthroot=function(e,t){return c.pow(e,1/t)};var l=1/Math.PI;return c.sin=function(e){return t(Math.abs(e))?0:Math.sin(e)},c.cos=function(e){return n(Math.abs(e))?0:Math.cos(e)},c.tan=function(e){var r=Math.abs(e);return t(r)?0:n(r)?1/0:Math.tan(e)},c.sec=function(e){return n(Math.abs(e))?1/0:1/Math.cos(e)},c.csc=function(e){return t(Math.abs(e))?1/0:1/Math.sin(e)},c.cot=function(e){var r=Math.abs(e);return t(r)?1/0:n(r)?0:1/Math.tan(e)},c.acot=function(e){return Math.PI/2-Math.atan(e)},c.acsc=function(e){return Math.asin(1/e)},c.asec=function(e){return Math.acos(1/e)},c.sech=function(e){return 1/c.cosh(e)},c.csch=function(e){return 1/c.sinh(e)},c.coth=function(e){return 1/c.tanh(e)},c.asech=function(e){return c.acosh(1/e)},c.acsch=function(e){return c.asinh(1/e)},c.acoth=function(e){return c.atanh(1/e)},c.mean=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length},c.total=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t},c.tpdf=function(e,t){return t!==Math.round(t)?NaN:t<=0?NaN:s.pdf(t,e)},c.tcdf=function(e,t){return t!==Math.round(t)?NaN:t<=0?NaN:s.cdf(t,e)},c.normalcdf=function(e,t,n){var r=(e-t)/(Math.SQRT2*Math.abs(n));return r<0?.5*Math.exp(-r*r)*c.erfcx(-r):1-.5*Math.exp(-r*r)*c.erfcx(r)},c.normalpdf=function(e,t,n){return 1/Math.sqrt(2*Math.PI*n*n)*Math.exp(-(e-t)*(e-t)/(2*n*n))},c.binomcdf=function(e,t,n){if(t!==Math.round(t)||e!==Math.round(e))return NaN;if(n<0||n>1)return NaN;if(e<0||t<0)return 0;for(var r=n/(1-n),i=Math.pow(1-n,t),o=i,s=1;s<=Math.min(t,e);s++)i*=(t-s+1)/s*r,o+=i;return o},c.binompdf=function(e,t,n){return t!==Math.round(t)?NaN:(e=Math.floor(e),n<0||n>1?NaN:e<0||t<0?0:c.nCr(t,e)*Math.pow(n,e)*Math.pow(1-n,t-e))},c.poissonpdf=function(e,t){return t<=0?NaN:e!==Math.round(e)?NaN:e<0?0:Math.exp(-t+e*Math.log(t)-c.lnGamma(e+1))},c.poissoncdf=function(e,t){if(t<=0)return NaN;if(e=Math.floor(e),e<0)return 0;for(var n=1,r=1,i=1;i<=e;i++)n*=t/i,r+=n;return Math.exp(-t)*r},c.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*c.erfcx(e);if(e<=-.065)return Math.exp(t)*c.erfcx(-e)-1;var n=1.1283791670955126,r=.37612638903183754,i=.11283791670955126,o=.026866170645131252,s=.005223977625442188;return e*(n+t*(r+t*(i+t*(o+t*s))))},c.erfcx=function(e){var t=.9999999999999999,n=2.224574423459406,r=2.444115549920689,i=1.7057986861852539,o=.8257463703357973,s=.28647031042892007,a=.07124513844341643,l=.012296749268608364,u=.001347817214557592,h=7263959403471071e-20,d=1,p=3.352953590554884,f=5.227518529742423,m=5.003720878235473,g=3.266590890998987,y=1.5255421920765353,v=.5185887413188858,b=.12747319185915415,x=.02185979575963238,_=.0023889438122503674,w=.00012875032817508128;if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-c.erfcx(-e);if(e>50){var E=.5641895835477563,S=e*e;return e>5e7?E/e:E*(S*(S+4.5)+2)/(e*(S*(S+5)+3.75))}var M=t+e*(n+e*(r+e*(i+e*(o+e*(s+e*(a+e*(l+e*(u+e*h)))))))),I=d+e*(p+e*(f+e*(m+e*(g+e*(y+e*(v+e*(b+e*(x+e*(_+e*w)))))))));return M/I},c.invNorm=function(e){var t,n,r,i=-39.6968302866538,o=220.946098424521,s=-275.928510446969,a=138.357751867269,l=-30.6647980661472,u=2.50662827745924,h=-54.4760987982241,d=161.585836858041,p=-155.698979859887,f=66.8013118877197,m=-13.2806815528857,g=-.00778489400243029,y=-.322396458041136,v=-2.40075827716184,b=-2.54973253934373,x=4.37466414146497,_=2.93816398269878,w=.00778469570904146,E=.32246712907004,S=2.445134137143,M=3.75440866190742,I=.02425;return e>.5?-c.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-(1/0):(e<I?(t=Math.sqrt(-2*Math.log(e)),r=(((((g*t+y)*t+v)*t+b)*t+x)*t+_)/((((w*t+E)*t+S)*t+M)*t+1)):(t=e-.5,n=t*t,r=(((((i*n+o)*n+s)*n+a)*n+l)*n+u)*t/(((((h*n+d)*n+p)*n+f)*n+m)*n+1)),r-Math.sqrt(2*Math.PI)*(.5*c.erfcx(-r/Math.SQRT2)-Math.exp(.5*r*r)*e))},c.TScore=function(e,t){var n=c.stdev(e),r=c.mean(e);return(r-t)*Math.sqrt(e.length)/n},c.TTest=function(e,t){return c.tcdf(c.TScore(e,t),e.length-1)},c.length=function(e){return e.length},c.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]<t&&(t=e[n])}return t},c.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]>=t&&(t=e[n])}return t},c.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;var n=e.length,r=c.sortPerm(e),i=t*(n-1);return Math.floor(i)===i?e[r[i]]:(Math.ceil(i)-i)*e[r[Math.floor(i)]]+(i-Math.floor(i))*e[r[Math.ceil(i)]]},c.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;var n=c.sortPerm(e),r=c.quartileIndex(e,t),i=Math.floor(r),o=Math.ceil(r);return(e[n[i]]+e[n[o]])/2},c.sortPerm=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n.push(r);return n.sort(function(t,n){return e[t]-e[n]}),n},c.quartileIndex=function(e,t){t=Math.round(t);var n,r=e.length,i=r%2===1;return 1===r?0:(0===t&&(n=0),2===t&&(n=(r-1)/2),4===t&&(n=r-1),1===t&&(n=i?(r+1)/4-1:(r+2)/4-1),3===t&&(n=i?(3*r+3)/4-1:(3*r+2)/4-1),n)},c.upperQuantileIndex=function(e,t){return c.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},c.lowerQuantileIndex=function(e,t){return c.sortPerm(e)[Math.floor(t*(e.length-1))]+1},c.upperQuartileIndex=function(e,t){return c.sortPerm(e)[Math.ceil(c.quartileIndex(e,t))]+1},c.lowerQuartileIndex=function(e,t){return c.sortPerm(e)[Math.floor(c.quartileIndex(e,t))]+1},c.median=function(e){return c.quantile(e,.5)},c.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var n=0,r=1;r<e.length;r++){if(isNaN(e[r]))return 0;e[r]<t&&(n=r,t=e[r])}return n+1},c.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var n=0,r=1;r<e.length;r++)if(e[r]>=t){if(isNaN(e[r]))return 0;n=r,t=e[r]}return n+1},c.varp=function(e){for(var t=c.mean(e),n=0,r=0;r<e.length;r++){var i=e[r]-t;n+=i*i}return n/e.length},c.mad=function(e){for(var t=c.mean(e),n=0,r=0;r<e.length;r++)n+=Math.abs(e[r]-t);return n/e.length},c.var=function(e){var t=e.length;return c.varp(e)*t/(t-1)},c.covp=function(e,t){if(e.length!==t.length)return NaN;for(var n=e.length,r=c.mean(e),i=c.mean(t),o=0,s=0;s<n;s++)o+=(e[s]-r)*(t[s]-i);return o/n},c.cov=function(e,t){if(e.length!==t.length)return NaN;var n=e.length;return c.covp(e,t)*n/(n-1)},c.corr=function(e,t){if(e.length!==t.length)return NaN;for(var n,r,i=e.length,o=c.mean(e),s=c.mean(t),a=0,l=0,u=0,h=0;h<i;h++)n=e[h]-o,r=t[h]-s,a+=n*n,l+=r*r,u+=n*r;return u/Math.sqrt(a*l)},c.stdev=function(e){return Math.sqrt(c.var(e))},c.stdevp=function(e){return Math.sqrt(c.varp(e))},c.quad=o.quad,c.distance=function(e,t){return i.hypot(t[0]-e[0],t[1]-e[1])},c.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},c}),define("math/functions",["require","math/builtin"],function(e){function t(e){for(var t=0;t<e.length;t++)e[t].compiled&&delete e[t].compiled.fn}function n(e){for(var t=0;t<e.length;t++){var n=e[t].compiled;n&&(n.fn=i(n.args,n.source))}}function r(e,t){for(var n=[],r=0;r<t;r++)n.push("values["+r+"]");return i(["values"],"return "+e(n))}function i(e,t){var n=e.join(","),r="return (function("+n+"){"+t+"})",i=new Function(["BuiltIn"],r);return i(o)}var o=e("math/builtin");return{dehydrateGraphData:t,rehydrateGraphData:n,closureFunctionWithBuiltIn:i,createEvaluateFunction:r}}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!worker_src_underlying",[],function(){return'var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function r(e,t){var r,n,i,a,o,s,u,c,l,h,p=t&&t.split("/"),f=d.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&f){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),p)for(l=p.length;l>0;l-=1)if(i=f[p.slice(0,l).join("/")],i&&(i=i[n])){a=i,o=c;break}if(a)break;!s&&m&&m[n]&&(s=m[n],u=c)}!a&&s&&(a=s,o=u),a&&(r.splice(0,o,a),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,v.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function a(e){return function(t){f[e]=t}}function o(r){if(t(m,r)){var n=m[r];delete m[r],g[r]=!0,c.apply(e,n)}if(!t(f,r)&&!t(g,r))throw new Error("No "+r);return f[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return d&&d.config&&d.config[e]||{}}}var c,l,h,p,f={},m={},d={},g={},y=Object.prototype.hasOwnProperty,v=[].slice;h=function(e,t){var n,a=s(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=o(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),a=s(e),u=a[0],e=a[1],u&&(n=o(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},p={require:function(e){return n(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:u(e)}}},c=function(r,i,s,u){var c,l,d,y,v,b,x=[];if(u=u||r,"function"==typeof s){for(i=!i.length&&s.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(y=h(i[v],u),l=y.f,"require"===l)x[v]=p.require(r);else if("exports"===l)x[v]=p.exports(r),b=!0;else if("module"===l)c=x[v]=p.module(r);else if(t(f,l)||t(m,l)||t(g,l))x[v]=o(l);else{if(!y.p)throw new Error(r+" missing "+l);y.p.load(y.n,n(u,!0),a(l),{}),x[v]=f[l]}d=s.apply(f[r],x),r&&(c&&c.exports!==e&&c.exports!==f[r]?f[r]=c.exports:d===e&&b||(f[r]=d))}else r&&(f[r]=s)},requirejs=require=l=function(t,r,n,i,a){return"string"==typeof t?p[t]?p[t](r):o(h(t,r).f):(t.splice||(d=t,r.splice?(t=r,r=n,n=null):t=e),r=r||function(){},"function"==typeof n&&(n=i,i=a),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l)},l.config=function(e){return d=e,d.deps&&l(d.deps,d.callback),l},define=function(e,r,n){r.splice||(n=r,r=[]),t(f,e)||t(m,e)||(m[e]=[e,r,n])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("vendor/almond",function(){}),define("testbridge",["require"],function(e){function t(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);e.apply(window.console,[].concat([t.join(" ")],t))}}var r={ready:function(){try{window.TestBridge=r,parent.USING_SELENIUM&&t()}catch(e){}}};return r}),define("console",["require"],function(e){var t=function(){},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],n={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?n[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:n[e]=t};return r.forEach(i),n}),define("pjs",[],function(){var e=function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function a(){}function o(s,u){function c(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}u===r&&(u=s,s=Object),c.Bare=l;var h,p=a[e]=s[e],f=l[e]=c[e]=new a;return f.constructor=c,c.mixin=function(t){return l[e]=c[e]=o(c,t)[e],c},(c.open=function(e){if(h={},i(e)?h=e.call(c,f,p,c,s):n(e)&&(h=e),n(h))for(var r in h)t.call(h,r)&&(f[r]=h[r]);return i(f.init)||(f.init=s),c})(u)}return o}("prototype",{}.hasOwnProperty);return e}),function(){function e(e){function t(t,r,n,i,a,o){for(;a>=0&&a<o;a+=e){var s=i?i[a]:a;n=r(n,t[s],s,t)}return n}return function(r,n,i,a){n=b(n,a,4);var o=!S(r)&&v.keys(r),s=(o||r).length,u=e>0?0:s-1;return arguments.length<3&&(i=r[o?o[u]:u],u+=e),t(r,n,i,o,u,s)}}function t(e){return function(t,r,n){r=x(r,n);for(var i=T(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(r(t[a],a,t))return a;return-1}}function r(e,t,r){return function(n,i,a){var o=0,s=T(n);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(r&&a&&s)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(l.call(n,o,s),v.isNaN),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&a<s;a+=e)if(n[a]===i)return a;return-1}}function n(e,t){var r=A.length,n=e.constructor,i=v.isFunction(n)&&n.prototype||s,a="constructor";for(v.has(e,a)&&!v.contains(t,a)&&t.push(a);r--;)a=A[r],a in e&&e[a]!==i[a]&&!v.contains(t,a)&&t.push(a)}var i=this,a=i._,o=Array.prototype,s=Object.prototype,u=Function.prototype,c=o.push,l=o.slice,h=s.toString,p=s.hasOwnProperty,f=Array.isArray,m=Object.keys,d=u.bind,g=Object.create,y=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):i._=v,v.VERSION="1.8.3";var b=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}},x=function(e,t,r){return null==e?v.identity:v.isFunction(e)?b(e,t,r):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return x(e,t,1/0)};var _=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;u<s;u++){var c=o[u];t&&void 0!==r[c]||(r[c]=a[c])}return r}},w=function(e){if(!v.isObject(e))return{};if(g)return g(e);y.prototype=e;var t=new y;return y.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},E=Math.pow(2,53)-1,T=M("length"),S=function(e){var t=T(e);return"number"==typeof t&&t>=0&&t<=E};v.each=v.forEach=function(e,t,r){t=b(t,r);var n,i;if(S(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var a=v.keys(e);for(n=0,i=a.length;n<i;n++)t(e[a[n]],a[n],e)}return e},v.map=v.collect=function(e,t,r){t=x(t,r);for(var n=!S(e)&&v.keys(e),i=(n||e).length,a=Array(i),o=0;o<i;o++){var s=n?n[o]:o;a[o]=t(e[s],s,e)}return a},v.reduce=v.foldl=v.inject=e(1),v.reduceRight=v.foldr=e(-1),v.find=v.detect=function(e,t,r){var n;if(n=S(e)?v.findIndex(e,t,r):v.findKey(e,t,r),void 0!==n&&n!==-1)return e[n]},v.filter=v.select=function(e,t,r){var n=[];return t=x(t,r),v.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},v.reject=function(e,t,r){return v.filter(e,v.negate(x(t)),r)},v.every=v.all=function(e,t,r){t=x(t,r);for(var n=!S(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var o=n?n[a]:a;if(!t(e[o],o,e))return!1}return!0},v.some=v.any=function(e,t,r){t=x(t,r);for(var n=!S(e)&&v.keys(e),i=(n||e).length,a=0;a<i;a++){var o=n?n[a]:a;if(t(e[o],o,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,r,n){return S(e)||(e=v.values(e)),("number"!=typeof r||n)&&(r=0),v.indexOf(e,t,r)>=0},v.invoke=function(e,t){var r=l.call(arguments,2),n=v.isFunction(t);return v.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,r){var n,i,a=-(1/0),o=-(1/0);if(null==t&&null!=e){e=S(e)?e:v.values(e);for(var s=0,u=e.length;s<u;s++)n=e[s],n>a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){i=t(e,r,n),(i>o||i===-(1/0)&&a===-(1/0))&&(a=e,o=i)});return a},v.min=function(e,t,r){var n,i,a=1/0,o=1/0;if(null==t&&null!=e){e=S(e)?e:v.values(e);for(var s=0,u=e.length;s<u;s++)n=e[s],n<a&&(a=n)}else t=x(t,r),v.each(e,function(e,r,n){i=t(e,r,n),(i<o||i===1/0&&a===1/0)&&(a=e,o=i)});return a},v.shuffle=function(e){for(var t,r=S(e)?e:v.values(e),n=r.length,i=Array(n),a=0;a<n;a++)t=v.random(0,a),t!==a&&(i[a]=i[t]),i[t]=r[a];return i},v.sample=function(e,t,r){return null==t||r?(S(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,r){return t=x(t,r),v.pluck(v.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,r,n){var i={};return r=x(r,n),v.each(t,function(n,a){var o=r(n,a,t);e(i,n,o)}),i}};v.groupBy=I(function(e,t,r){v.has(e,r)?e[r].push(t):e[r]=[t]}),v.indexBy=I(function(e,t,r){e[r]=t}),v.countBy=I(function(e,t,r){v.has(e,r)?e[r]++:e[r]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):S(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:S(e)?e.length:v.keys(e).length},v.partition=function(e,t,r){t=x(t,r);var n=[],i=[];return v.each(e,function(e,r,a){(t(e,r,a)?n:i).push(e)}),[n,i]},v.first=v.head=v.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},v.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var N=function(e,t,r,n){for(var i=[],a=0,o=n||0,s=T(e);o<s;o++){var u=e[o];if(S(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=N(u,t,r));var c=0,l=u.length;for(i.length+=l;c<l;)i[a++]=u[c++]}else r||(i[a++]=u)}return i};v.flatten=function(e,t){return N(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,r,n){v.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=x(r,n));for(var i=[],a=[],o=0,s=T(e);o<s;o++){var u=e[o],c=r?r(u,o,e):u;t?(o&&a===c||i.push(u),a=c):r?v.contains(a,c)||(a.push(c),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(N(arguments,!0,!0))},v.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=T(e);n<i;n++){var a=e[n];if(!v.contains(t,a)){for(var o=1;o<r&&v.contains(arguments[o],a);o++);o===r&&t.push(a)}}return t},v.difference=function(e){var t=N(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,T).length||0,r=Array(t),n=0;n<t;n++)r[n]=v.pluck(e,n);return r},v.object=function(e,t){for(var r={},n=0,i=T(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},v.findIndex=t(1),v.findLastIndex=t(-1),v.sortedIndex=function(e,t,r,n){r=x(r,n,1);for(var i=r(t),a=0,o=T(e);a<o;){var s=Math.floor((a+o)/2);r(e[s])<i?a=s+1:o=s}return a},v.indexOf=r(1,v.findIndex,v.sortedIndex),v.lastIndexOf=r(-1,v.findLastIndex),v.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;a<n;a++,e+=r)i[a]=e;return i};var C=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=w(e.prototype),o=e.apply(a,i);return v.isObject(o)?o:a};v.bind=function(e,t){if(d&&e.bind===d)return d.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),n=function(){return C(e,n,t,this,r.concat(l.call(arguments)))};return n},v.partial=function(e){var t=l.call(arguments,1),r=function(){for(var n=0,i=t.length,a=Array(i),o=0;o<i;o++)a[o]=t[o]===v?arguments[n++]:t[o];for(;n<arguments.length;)a.push(arguments[n++]);return C(e,r,this,this,a)};return r},v.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=v.bind(e[r],e);return e},v.memoize=function(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return v.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r},v.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,r){var n,i,a,o=null,s=0;r||(r={});var u=function(){s=r.leading===!1?0:v.now(),o=null,a=e.apply(n,i),o||(n=i=null)};return function(){var c=v.now();s||r.leading!==!1||(s=c);var l=t-(c-s);return n=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),s=c,a=e.apply(n,i),o||(n=i=null)):o||r.trailing===!1||(o=setTimeout(u,l)),a}},v.debounce=function(e,t,r){var n,i,a,o,s,u=function(){var c=v.now()-o;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(s=e.apply(a,i),n||(a=i=null)))};return function(){a=this,i=arguments,o=v.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(s=e.apply(a,i),a=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},v.once=v.partial(v.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];v.keys=function(e){if(!v.isObject(e))return[];if(m)return m(e);var t=[];for(var r in e)v.has(e,r)&&t.push(r);return D&&n(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var r in e)t.push(r);return D&&n(e,t),t},v.values=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},v.mapObject=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=i.length,o={},s=0;s<a;s++)n=i[s],o[n]=t(e[n],n,e);return o},v.pairs=function(e){for(var t=v.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},v.invert=function(e){for(var t={},r=v.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},v.functions=v.methods=function(e){var t=[];for(var r in e)v.isFunction(e[r])&&t.push(r);return t.sort()},v.extend=_(v.allKeys),v.extendOwn=v.assign=_(v.keys),v.findKey=function(e,t,r){t=x(t,r);for(var n,i=v.keys(e),a=0,o=i.length;a<o;a++)if(n=i[a],t(e[n],n,e))return n},v.pick=function(e,t,r){var n,i,a={},o=e;if(null==o)return a;v.isFunction(t)?(i=v.allKeys(o),n=b(t,r)):(i=N(arguments,!1,!1,1),n=function(e,t,r){return t in r},o=Object(o));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=o[c];n(l,c,o)&&(a[c]=l)}return a},v.omit=function(e,t,r){if(v.isFunction(t))t=v.negate(t);else{var n=v.map(N(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(n,t)}}return v.pick(e,t,r)},v.defaults=_(v.allKeys,!0),v.create=function(e,t){var r=w(e);return t&&v.extendOwn(r,t),r},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var r=v.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;a<n;a++){var o=r[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var O=function(e,t,r,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=h.call(e);if(i!==h.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!O(e[u],t[u],r,n))return!1}else{var c,l=v.keys(e);if(u=l.length,v.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!v.has(t,c)||!O(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};v.isEqual=function(e,t){return O(e,t)},v.isEmpty=function(e){return null==e||(S(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=f||function(e){return"[object Array]"===h.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&p.call(e,t)},v.noConflict=function(){return i._=a,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=M,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,r){var n=Array(Math.max(0,e));t=b(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},k=v.invert(P),F=function(e){var t=function(t){return e[t]},r="(?:"+v.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};v.escape=F(P),v.unescape=F(k),v.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),v.isFunction(n)?n.call(e):n};var L=0;v.uniqueId=function(e){var t=++L+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var q=/(.)^/,V={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},j=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g,z=function(e){return"\\\\"+V[e]};v.template=function(e,t,r){!t&&r&&(t=r),t=v.defaults({},t,v.templateSettings);var n=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+=\'";e.replace(n,function(t,r,n,o,s){return a+=e.slice(i,s).replace(j,z),i=s+t.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":n?a+="\'+\\n((__t=("+n+"))==null?\'\':__t)+\\n\'":o&&(a+="\';\\n"+o+"\\n__p+=\'"),t}),a+="\';\\n",t.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{var o=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return o.call(this,e,v)},u=t.variable||"obj";return s.source="function("+u+"){\\n"+a+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var R=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var r=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),R(this,r.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],R(this,r)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return R(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this),define("math/distance",["require","exports"],function(e,t){"use strict";function r(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function n(e,t,r,n){return e*r+t*n}function i(e,r,i,a,o,s){var u=t.hypot(o-i,s-a);if(0===u)return 0;var c=n((e-i)/u,(r-a)/u,(o-i)/u,(s-a)/u);return c}function a(e,t,r,n,a,o){var s=i(e,t,r,n,a,o);return s<=0?[r,n]:s>=1?[a,o]:[r+s*(a-r),n+s*(o-n)]}function o(e,r,n,i,o,s){var u=a(e,r,n,i,o,s);return t.hypot(e-u[0],r-u[1])}function s(e,t,r){if(void 0===r&&(r=1),r>50)throw new Error("Within "+(52-r)+" bits isn\'t really approximate any more");var n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1),i=1===r?.5:Math.pow(.5,r);return n===n+i*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hypot=Math.hypot||function(e,t){if(0===e&&0===t)return 0;if(Math.abs(e)>Math.abs(t)){var r=t/e;return Math.abs(e)*Math.sqrt(r*r+1)}var r=e/t;return Math.abs(t)*Math.sqrt(r*r+1)},t.mean=r,t.pointToSegmentParameter=i,t.closestPointOnSegment=a,t.pointToSegment=o,t.approx=s}),define("lib/console",["require","exports","console"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=r.log,t.warn=r.warn}),define("math/poi",["require","exports","./distance","lib/console"],function(e,t,r,n){"use strict";function i(e,t){var n;e>t&&(n=e,e=t,t=n);var i=e>0,a=t>0,o=Math.abs(e)>.01,s=Math.abs(t)>.01;if(o||s)return r.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==a)return 0;var u=i?Math.sqrt(e*t):-Math.sqrt(e*t);return u>=e&&t>=u?u:r.mean(e,t)}function a(e,t,r,a,s){if(!isFinite(t)||!isFinite(a)||t<0==a<0)return void n.log("bisectZero called with bad y values",[t,a]);for(;;){var u=i(e,r),c=s(u);if(!isFinite(c))return;if(u===e||u===r)return Math.abs(t)<=Math.abs(a)?[e,t]:[r,a];if(0===c)return o(e,t,u,c,r,a,s);t<0!=c<0?(r=u,a=c):(e=u,t=c)}}function o(e,t,r,n,a,o,c){var l;if(isFinite(n)){isFinite(t)||(l=s(e,t,r,n,c),l&&(e=l[0],t=l[1])),isFinite(o)||(l=s(r,n,a,o,c),l&&(a=l[0],o=l[1]));var h,p;h=t===n?[e,t]:u(e,t,r,n,c,n),p=o===n?[a,o]:u(r,n,a,o,c,n);var f;return h&&p&&(f=i(h[0],p[0])),void 0!==f?[f,c(f)]:void 0}}function s(e,t,r,a,o){if(isFinite(t)===isFinite(a))return void n.log("bisectFinite called with bad y values",[t,a]);for(;;){var s=i(e,r),u=o(s);if(s===e||s===r)return isFinite(t)?[e,t]:[r,a];isFinite(u)!==isFinite(t)?(r=s,a=u):(e=s,t=u)}}function u(e,t,r,a,o,s){if(t===s==(a===s))return void n.log("bisectConstant called with bad y values",[t,a,s]);for(;;){var u=i(e,r),c=o(u);if(u===e||u===r)return t===s?[e,t]:[r,a];c===s!=(t===s)?(r=u,a=c):(e=u,t=c)}}function c(e,t,r,a,s,u,c){if(!(e<r&&r<s))return void n.log("bisectExtremum called with bad x values",[e,r,s]);if(!(isFinite(t)&&isFinite(a)&&isFinite(u)&&t!==a&&a!==u&&a>t==a>u))return void n.log("bisectExtremum called with bad y values",[t,a,u]);for(;;){var l=i(e,r),h=c(l),p=i(r,s),f=c(p);if(!isFinite(h)||!isFinite(f))return;if(l===e||l===r||p===r||p===s)return h>a==a>t?[l,h]:f>a==a>t?[p,f]:[r,a];if(h===a||f===a)return o(e,t,r,a,s,u,c);h>t==a>t&&h>t==h>a?(s=r,u=a,r=l,a=h):f>u==a>u&&f>a==f>u?(e=r,t=a,r=p,a=f):(e=l,t=h,s=p,u=f)}}function l(e,t,r,n,i,a,o,s){var u=Math.abs(n-t),c=Math.abs(a-n),l=Math.abs(s-a);return u>c&&u>l?[[e,t],[r,n]]:l>c&&l>u?[[i,a],[o,s]]:[[r,n],[i,a]]}function h(e,t,n,a,o,u,c,h){if(h||(h=0),!((n-e)*(o-n)<=0)&&isFinite(e)&&isFinite(n)&&isFinite(o)&&isFinite(t)&&isFinite(u)){if(!isFinite(a))return[s(e,t,n,a,c),s(n,a,o,u,c)];if(!(Math.abs(a-((o-n)*t+(n-e)*u)/(o-e))<h))for(;;){var p=i(e,n),f=c(p),m=i(n,o),d=c(m),g=Math.abs(f-r.mean(t,a)),y=Math.abs(a-r.mean(f,d)),v=Math.abs(d-r.mean(a,u)),b=void 0,x=void 0;if(g<=h&&y<=h&&v<=h)return;if(!isFinite(f))return b=s(e,t,p,f,c),x=s(p,f,o,u,c),[b,x];if(!isFinite(d))return b=s(e,t,m,d,c),x=s(m,d,o,u,c),[b,x];if(!(p!==e&&p!==n||m!==n&&m!==o))return Math.abs(a-t)>Math.abs(u-a)?(b=[e,t],x=[n,a]):(b=[n,a],x=[o,u]),[b,x];if(p===e||p===n)return l(e,t,n,a,m,d,o,u);if(m===n||m===o)return l(e,t,p,f,n,a,o,u);g>v&&g>=y?(o=n,u=a,n=p,a=f):v>g&&v>=y?(e=n,t=a,n=m,a=d):(e=p,t=f,o=m,u=d)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={bisectJump:h,bisectExtremum:c,bisectFinite:s,bisectZero:a,flatCenter:o,INTERSECTION:1001,ZERO:1002,INTERCEPT:1003,EXTREMUM:1004,EDGE:1005,DEFINITION:1006,TRACE:1007,LABEL:1008}}),define("math/curve-accumulator",["require","exports","./distance"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,n){this.map&&(e=this.map(e),t=this.map(t),n=this.map(n));var i=r.pointToSegmentParameter(n[0],n[1],e[0],e[1],t[0],t[1]);if(i<1)return!1;var a=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1])];return Math.abs(n[0]-a[0])<=this.xtolerance&&Math.abs(n[1]-a[1])<=this.ytolerance},e.prototype.addPoint=function(e){if(this.xtolerance<0&&this.ytolerance<0)return void this.segment.push(e[0],e[1]);if(!this.segment.length)return void this.segment.push(e[0],e[1]);var t=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||r.hypot(t[0]-e[0],t[1]-e[1])<r.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1]))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>2&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.default=n}),define("math/implicit-plotter",["require","exports","./distance","./curve-accumulator"],function(e,t,r,n){"use strict";function i(e,t){var r=a(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function a(e,t){var r=Math.pow(2,-U),n=c(t,r),i=c(t,2*r),a=p(e,n,i),o=N(a.root,e,n),s=R(o,e,n);return{paddedDomain:n,rootDomain:i,quadTree:a,triangles:o,contours:s}}function o(e,t,r){return{x:e,y:t,z:r}}function s(e,t,r){return{x:e,y:t,isZero:r}}function u(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function c(e,t){var r=(1+t)*e.xmin-t*e.xmax,n=(1+t)*e.xmax-t*e.xmin,i=(1+t)*e.ymin-t*e.ymax,a=(1+t)*e.ymax-t*e.ymin;return{xmin:r,ymin:i,xmax:n,ymax:a,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function l(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function h(e,t,r){e.center=E(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function p(e,t,r){var n=f(e,r),i=[],a=[];a.push(n);var o=1,s=!0;e:for(;a.length;){var u=i;i=a,a=u;for(var c=void 0;c=i.pop();)if(d(c,e,t)){if(m(c,e),!c.children){s=!1;break e}if(a.push(c.children[0]),a.push(c.children[1]),a.push(c.children[2]),a.push(c.children[3]),o+=3,o>=Y){s=!1;break e}}else h(c,e,t)}for(var l=0;l<i.length;l++)h(i[l],e,t);for(var l=0;l<a.length;l++)h(a[l],e,t);return{root:n,resolved:s}}function f(e,t){var r=t.xmin,n=t.xmax,i=t.ymin,a=t.ymax;return l(0,[_(r,a,e),_(n,a,e),_(n,i,e),_(r,i,e)])}function m(e,t){var r=e.depth+1,n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3],s=w(n,i,t),u=w(i,a,t),c=w(a,o,t),h=w(o,n,t),p=w(n,a,t);e.children=[l(r,[n,s,p,h]),l(r,[s,i,u,p]),l(r,[p,u,a,c]),l(r,[h,p,c,o])]}function d(e,t,r){if(e.depth<U)return!0;if(b(e,r))return!1;if(v(e,r))return!1;var n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(a.z)&&isNaN(o.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(a.z)||isNaN(o.z))return!0;var s=E(n,i,a,o,t,r),u=M(n,i,t,r),c=M(i,a,t,r),l=M(a,o,t,r),h=M(o,n,t,r);return y(n,u,t)||y(i,u,t)||y(i,c,t)||y(a,c,t)||y(a,l,t)||y(o,l,t)||y(o,h,t)||y(n,h,t)||g(n,u,s,t,r)||g(u,i,s,t,r)||g(i,c,s,t,r)||g(c,a,s,t,r)||g(a,l,s,t,r)||g(l,o,s,t,r)||g(o,h,s,t,r)||g(h,n,s,t,r)}function g(e,t,n,i,a){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;var o,s,u,c;if(e.z>0==t.z>0){if(o=w(e,t,i),o.z>0!=e.z>0)return!0;s=S(e,n,i,a),u=S(t,n,i,a),c=S(o,n,i,a)}else if(t.z>0==n.z>0){if(o=w(t,n,i),o.z>0!=t.z>0)return!0;s=S(t,e,i,a),u=S(n,e,i,a),c=S(o,e,i,a)}else{if(o=w(n,e,i),o.z>0!=n.z>0)return!0;s=S(n,t,i,a),u=S(e,t,i,a),c=S(o,t,i,a)}var l=a.xtolerance,h=a.ytolerance,p=r.pointToSegment(h*c.x,l*c.y,h*s.x,l*s.y,h*u.x,l*u.y);return p>l*h}function y(e,t,r){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var n=w(e,t,r),i=4*n.z-t.z-3*e.z,a=1e-4,o=(r((1-a)*e.x+a*t.x,(1-a)*e.y+a*t.y)-e.z)/a,s=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-o)>.125*s}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function _(e,t,r){return o(e,t,r(e,t))}function w(e,t,r){return _(.5*(e.x+t.x),.5*(e.y+t.y),r)}function M(e,t,r,n){if(x(e,n)||x(t,n))return w(e,t,r);if(isNaN(e.z)||isNaN(t.z))return I(e,t,r,n);if(e.z>0!=t.z>0)return w(e,t,r);var i=.01,a=r((1-i)*e.x+i*t.x,(1-i)*e.y+i*t.y)-e.z,s=t.z-r(i*e.x+(1-i)*t.x,i*e.y+(1-i)*t.y);return isNaN(a)||isNaN(s)?w(e,t,r):a>0==s>0?w(e,t,r):T(o(e.x,e.y,a),o(t.x,t.y,s),r)}function E(e,t,r,n,i,a){var o=M(e,r,i,a);return e.z>0==r.z>0&&o.z>0!=e.z>0?o:(o=M(t,n,i,a),t.z>0==n.z>0&&o.z>0!=t.z>0?o:w(e,r,i))}function T(e,t,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var n=1-e.z/t.z,i=1-t.z/e.z;return _(e.x/n+t.x/i,e.y/n+t.y/i,r)}return e}return t}return w(e,t,r)}function S(e,t,r,n){var i=e.x,a=t.x,u=e.y,c=t.y,l=e.z,h=t.z,p=n.xtolerance,f=n.ytolerance;if(x(e,n)||x(t,n)){var m=w(e,t,r);return s(m.x,m.y,!1)}for(;Math.abs(i-a)>p||Math.abs(u-c)>f;){var d=.5*(i+a),g=.5*(u+c),y=r(d,g);y>0==l>0?(i=d,u=g,l=y):(a=d,c=g,h=y)}if(isNaN(l))return s(a,c,!1);if(isNaN(h))return s(i,u,!1);var v=T(o(i,u,l),o(a,c,h),r),b=0===l||0===h||0===v.z||v.z>=l==h>=v.z&&Math.abs(v.z)<1e250;return s(v.x,v.y,b)}function I(e,t,r,n){if(isNaN(e.z)===isNaN(t.z))return w(e,t,r);if(isNaN(e.z)){var i=e;e=t,t=i}for(var a=e.x,s=t.x,u=e.y,c=t.y,l=e.z,h=n.xtolerance,p=n.ytolerance;Math.abs(a-s)>h||Math.abs(u-c)>p;){var f=.5*(a+s),m=.5*(u+c),d=r(f,m);isNaN(d)===isNaN(l)?(a=f,u=m,l=d):(s=f,c=m)}return o(a,u,l)}function N(e,t,r){var n={triangles:[],edgeCache:{},domain:r,fn:t};return C(e,n),n.triangles}function C(e,t){e.children&&(C(e.children[0],t),C(e.children[1],t),C(e.children[2],t),C(e.children[3],t),D(e.children[0],e.children[1],t),D(e.children[3],e.children[2],t),A(e.children[1],e.children[2],t),A(e.children[0],e.children[3],t))}function D(e,t,r){e.children&&t.children?(D(e.children[1],t.children[0],r),D(e.children[2],t.children[3],r)):e.children?(D(e.children[1],t,r),D(e.children[2],t,r)):t.children?(D(e,t.children[0],r),D(e,t.children[3],r)):O(e,t,r)}function A(e,t,r){e.children&&t.children?(A(e.children[2],t.children[1],r),A(e.children[3],t.children[0],r)):e.children?(A(e.children[2],t,r),A(e.children[3],t,r)):t.children?(A(e,t.children[1],r),A(e,t.children[0],r)):P(e,t,r)}function O(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[1],e.vertices[2],r.fn,r.domain),i=k(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=M(t.vertices[0],t.vertices[3],r.fn,r.domain),i=k(t.vertices[0],t.center,t.vertices[3],e.center,n)),\nq(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function P(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[3],e.vertices[2],r.fn,r.domain),i=k(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=M(t.vertices[1],t.vertices[0],r.fn,r.domain),i=k(t.vertices[1],t.center,t.vertices[0],e.center,n)),q(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function k(e,t,r,n,i){return[u(e,i,t),u(t,i,r),u(r,i,n),u(n,i,e)]}function F(e,t,r){return e.z>0&&!x(e,r)&&(!(t.z>0)||x(t,r))}function L(e,t){return""+e.x+","+e.y+","+t.x+","+t.y}function q(e,t,r){V(e[0],e[1],e[2],L(e[1].vertices[2],e[1].vertices[0]),t,r),V(e[1],e[2],e[3],L(e[2].vertices[0],e[2].vertices[2]),t,r),V(e[2],e[3],e[0],L(e[3].vertices[2],e[3].vertices[0]),t,r),V(e[3],e[0],e[1],L(e[0].vertices[0],e[0].vertices[2]),t,r)}function V(e,t,r,n,i,a){var o=t.vertices[0],s=t.vertices[1],u=t.vertices[2];F(s,u,a)&&(t.next=r),F(o,s,a)&&(t.next=e),F(u,o,a)&&z(t,n,i),F(o,u,a)&&j(t,n,i)}function j(e,t,r){r[t]?r[t].next=e:r[t]=e}function z(e,t,r){r[t]?e.next=r[t]:r[t]=e}function R(e,t,r){for(var i={fillAccumulator:new n.default(r),strokeAccumulator:new n.default(r),fn:t,domain:r},a=0;a<e.length;a++){var o=e[a];o.next&&!o.visited&&B(o,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function B(e,t){for(;;){var r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if($(r,n,t),$(n,i,t),$(i,r,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function $(e,t,r){if(F(e,t,r.domain)){var n=S(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}function G(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0});var U=5,Y=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=a,t.buildQuadTree=p,t.triangulate=N,t.traceContours=R,t.displayTriangles=G}),define("worker/workerconfig",[],function(){return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0}}),function(){var e,t,r,n,i,a,o,s,u,c,l,h,p,f,m,d,g={};!function(e){function t(e,t){return function(r,n){return e[r]=t?t(r,n):n}}var r="object"==typeof g?g:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):e("object"==typeof module&&"object"==typeof module.exports?t(r,t(module.exports)):t(r))}(function(g){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};e=function(e,t){function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r},n=function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},i=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}u((n=n.apply(e,t||[])).next())})},s=function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(o=a[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,a=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],a=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,a,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},u=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},p=function(e){return this instanceof p?(this.v=e,this):new p(e)},f=function(e,t,r){function n(e){l[e]&&(c[e]=function(t){return new Promise(function(r,n){h.push([e,t,r,n])>1||i(e,t)})})}function i(e,t){try{a(l[e](t))}catch(e){u(h[0][3],e)}}function a(e){e.value instanceof p?Promise.resolve(e.value.v).then(o,s):u(h[0][2],e)}function o(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=r.apply(e,t||[]),h=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},m=function(e){function t(t,i){e[t]&&(r[t]=function(r){return(n=!n)?{value:p(e[t](r)),done:"return"===t}:i?i(r):r})}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r},d=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof c?c(e):e[Symbol.iterator]()},g("__extends",e),g("__assign",t),g("__rest",r),g("__decorate",n),g("__param",i),g("__metadata",a),g("__awaiter",o),g("__generator",s),g("__exportStar",u),g("__values",c),g("__read",l),g("__spread",h),g("__await",p),g("__asyncGenerator",f),g("__asyncDelegator",m),g("__asyncValues",d)})}(),define("math/poi-finding-accumulator",["require","exports","worker/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,r,n,i,a){"use strict";function o(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.domain=t,i.fn=r,i.derivative=n,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.flatLeft=void 0,i}return n.__extends(t,e),t.prototype.getPOI=function(){return r.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.flushPending=function(){if(this.pendingPoint){var e=this.pendingPoint[0],t=this.pendingPoint[1];this.pivotPoint=void 0,this.pendingPoint=void 0;var r=this.segment.length,n=void 0,i=void 0;if(i=this.checkForZero(this.segment[r-2],this.segment[r-1],e,t),r>=4&&(n=this.checkForExtremum(this.segment[r-4],this.segment[r-3],this.segment[r-2],this.segment[r-1],e,t)),i&&(this.poiData.zeros.x.push(i[0]),this.poiData.zeros.y.push(i[1])),n){this.poiData.extrema.x.push(n[0]),this.poiData.extrema.y.push(n[1]);var o=void 0;n[0]<this.segment[r-2]?(o=!!this.fn&&!!a.default.bisectJump(this.segment[r-4],this.segment[r-3],n[0],n[1],this.segment[r-2],this.segment[r-1],this.fn,this.ytolerance),o||this.segment.splice(-2,0,n[0],n[1])):(o=!!this.fn&&!!a.default.bisectJump(this.segment[r-2],this.segment[r-1],n[0],n[1],e,t,this.fn,this.ytolerance),o||n[0]===e||this.segment.push(n[0],n[1]))}this.segment.push(e,t)}},t.prototype.breakSegment=function(){if(this.flushPending(),this.segment.length>2){this.segments.push(this.segment);var e=this.segment.length;o(this.segment[1])&&(this.poiData.zeros.x.push(this.segment[0]),this.poiData.zeros.y.push(this.segment[1])),o(this.segment[e-1])&&(this.poiData.zeros.x.push(this.segment[e-2]),this.poiData.zeros.y.push(this.segment[e-1]))}this.segment=[],this.flatLeft=void 0},t.prototype.checkForZero=function(e,t,r,n){if(this.fn){var i;return 0===this.segment[1]&&(this.flatLeft=[this.segment[0],this.segment[1]]),this.flatLeft?0!==n&&(this.flatLeft[0]!==this.segment[0]&&(i=a.default.flatCenter(this.flatLeft[0],this.flatLeft[1],e,t,r,n,this.fn)),this.flatLeft=void 0):0===n?this.flatLeft=[e,t]:t<0!=n<0&&(i=a.default.bisectZero(e,t,r,n,this.fn)),i}},t.prototype.checkForExtremum=function(e,t,r,n,i,o){if(this.fn){var s;if(isFinite(t)&&isFinite(n)&&isFinite(o)){if(t!==n&&n===o)this.flatLeft=[e,t];else if(t===n&&n!==o&&this.flatLeft)n>this.flatLeft[1]==n>o&&(s=a.default.flatCenter(this.flatLeft[0],this.flatLeft[1],r,n,i,o,this.fn));else{if(t===n&&n===o)return;if(n>t==n>o)if(this.derivative){if(this.derivative(e)>0==this.derivative(i)>0)return;if(s=a.default.bisectZero(e,this.derivative(e),i,this.derivative(i),this.derivative),s||(s=a.default.bisectExtremum(e,t,r,n,i,o,this.fn)),s)return[s[0],this.fn(s[0])]}else s=a.default.bisectExtremum(e,t,r,n,i,o,this.fn)}return s}}},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.default);t.default=s}),define("graphing/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10}),define("math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-(1/0),1/0])},t.intersectDomains=function(e,r){if("empty"===e.type||"empty"===r.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===r.type)return t.unknownDomain();if(e.bounds&&r.bounds){var n=[Math.max(e.bounds[0],r.bounds[0]),Math.min(e.bounds[1],r.bounds[1])];return t.knownDomain(n)}return t.emptyDomain()}}),define("math/plotter",["require","exports","./distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","graphing/graphmode","./domaintypes"],function(e,t,r,n,i,a,o,s,u){"use strict";function c(e,t){for(var r,n=new a.default,i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r[0])&&isFinite(r[1])?n.addPoint(r):n.breakSegment();return n.finish()}function l(e,t){for(var r,n=new o.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r)?n.addPoint([i,r]):n.breakSegment();return n.finish()}function h(e,t){var r=new o.default(t);return r.addPoint([t.min,e[0]+t.min*e[1]]),r.addPoint([t.max,e[0]+t.max*e[1]]),r.addLinearZero(e),r.addLinearIntercept(e),r.finish()}function p(e,t){var r=h(e[0],t),n=h(e[1],t);return r.segments.length&&n.segments.length&&4===r.segments[0].length&&4===n.segments[0].length?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function f(e,t,i){var a,o,s,u,c,l,h=i.fn,p=i.jumpTolerance,f=i.stepPerturbation;a=e[0],o=e[1],c=t[0],l=t[1],s=r.mean(a,c),u=h(s);var m;if(m=n.default.bisectJump(a,o,s,u,c,l,h,p))for(var d=[-f,f],g=0;g<d.length;g++)if(a=e[0]+d[g],o=h(a),isFinite(o)||(a=e[0],o=e[1]),c=t[0]+d[g],l=h(c),isFinite(l)||(c=t[0],l=t[1]),s=r.mean(a,c),u=h(s),n.default.bisectJump(a,o,s,u,c,l,h,p))return m}function m(e,t,r){var i,a=new I(e,t,r),o=t.min,s=e(o),u=[o,s];for(isFinite(s)&&a.accumulator.addPoint([o,s]),o+=t.step;o<=t.max+t.step/2;o+=t.step){var c=o;s=e(c),isFinite(s)||(c=o+a.stepPerturbation,s=e(c)),isFinite(s)||(c=o-a.stepPerturbation,s=e(c)),isFinite(s)&&isFinite(u[1])?(S(u,[c,s],a),a.accumulator.addPoint([c,s])):isFinite(s)&&!isFinite(u[1])?(i=n.default.bisectFinite(u[0],u[1],c,s,e),i&&(i[0]!==c&&a.accumulator.addPoint(i),S(i,[c,s],a),a.accumulator.addPoint([c,s]))):!isFinite(s)&&isFinite(u[1])&&(i=n.default.bisectFinite(u[0],u[1],c,s,e),i&&(S(u,i,a),i[0]!==u[0]&&a.accumulator.addPoint(i),a.accumulator.breakSegment())),u=[c,s]}return a.accumulator.finish()}function d(e,t,r,n){function i(e,t){var i=t%2===0?1:-1;if(!n&&i===-1)return!1;for(var a=t*(Math.PI/r),o=[u,u+1,u+2,u+3],s=!1,c=0,h=o.length;c<h;c++){var p=e(o[c]),f=e(o[c]+a);if(isFinite(p)&&isFinite(f)&&(s=!0),isFinite(p)!==isFinite(f)||Math.abs(p-i*f)>l)return!1}return!!s}var a,o,s,u=t.min,c=t.max-t.min,l=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,h=Math.floor(c/(Math.PI/r));for(a=1;a<=h;a++)if(i(e,a)){for(s=a,o=2;o*a<=h;o++)i(e,o*a)||(s=void 0);if(s)break}return s?s*(Math.PI/r):null}function g(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function y(e,t){return t.map=g,m(e,t)}function v(e,t){for(var r=e.min,n=e.max,i=e.step,a=n-r,o=Math.ceil(a/i),s=a/o,u=0;u<o;u++)t(r+u*s);t(n)}function b(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var r=new a.default(t),n=10,i=t.min,o=e(i);isFinite(o[0])&&isFinite(o[1])&&r.addPoint(o);var s;return v(t,function(t){s=e(t),x(e,i,o,t,s,n,r),i=t,o=s}),r.finish()}function x(e,t,n,i,a,o,s){if(i!==t){var u=s.xtolerance,c=s.ytolerance,l=r.mean(t,i),h=e(l),p=isFinite(n[0])&&isFinite(n[1]),f=isFinite(a[0])&&isFinite(a[1]),m=isFinite(h[0])&&isFinite(h[1]);if(0===o||l===t||l===i)return s.breakSegment(),void(f&&s.addPoint(a));if(p||f){if(p!==f){for(var d=t,g=i,y=n,v=a;t!==l&&l!==i;)m==p?(t=l,n=h,p=m):(i=l,a=h,f=m),l=t+(i-t)/2,h=e(l),m=isFinite(h[0])&&isFinite(h[1]);return void(p?(x(e,d,y,t,n,o-1,s),s.breakSegment()):(s.breakSegment(),s.addPoint(a),x(e,i,a,g,v,o-1,s)))}if(p&&m&&f){var b=r.pointToSegmentParameter(h[0],h[1],n[0],n[1],a[0],a[1]);if(b>.2&&b<.8&&Math.abs(h[0]-(n[0]+b*(a[0]-n[0])))<=u&&Math.abs(h[1]-(n[1]+b*(a[1]-n[1])))<=c)return void s.addPoint(a)}n[0]===h[0]&&n[1]===h[1]||x(e,t,n,l,h,o-1,s),a[0]===h[0]&&a[1]===h[1]||x(e,l,h,i,a,o-1,s)}}}function _(e){if(!e)return!1;var t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(n)||!isFinite(i)||i<=n)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function w(e,t,r){var n,i,a=e.viewport.xmin,o=e.viewport.xmax,c=e.viewport.ymin,l=e.viewport.ymax,h=e.trigAngleMultiplier||1,p=e.oversample||4,f=1/p*(o-a)/e.screen.width,m=1/p*(l-c)/e.screen.height,g=t.domainBound;switch(t.graphMode){case s.X:switch(n=u.intersectDomains(u.knownDomain([c,l]),g),n.type){case"empty":return!1;case"known":c=n.bounds[0],l=n.bounds[1]}i={min:c,max:l,xtolerance:m,ytolerance:f,step:m};break;case s.Y:switch(n=u.intersectDomains(u.knownDomain([a,o]),g),n.type){case"empty":return!1;case"known":a=n.bounds[0],o=n.bounds[1]}i={min:a,max:o,xtolerance:f,ytolerance:m,step:f};break;case s.POLAR:i={min:0,max:2*Math.PI/h*6,step:2*Math.PI/h/1e3,tolerance:Math.min(f,m)};var y=d(r,i,h,"="===t.operator);y&&(i.max=i.min+y);break;case s.PARAMETRIC:var v=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(n=u.intersectDomains(u.knownDomain([v,b]),g),n.type){case"empty":return!1;case"known":v=n.bounds[0],b=n.bounds[1]}i={min:v,max:b,step:x,xtolerance:f,ytolerance:m};break;case s.IMPLICIT:i={xmin:a,xmax:o,ymin:c,ymax:l,xtolerance:f,ytolerance:m};break;default:return!1}return i}function M(e,t,r,n){var a,o,u,c=w(e,t,r);if(c){switch(t.graphMode){case s.X:case s.Y:a=t.isLinear?h(t.linearCoefficients,c):m(r,c,n);break;case s.POLAR:a=y(r,c);break;case s.IMPLICIT:a=i.sampleImplicit(r,c);break;default:c.step||(c.step=(c.max-c.min)/1e3),a=t.isLinear?p(t.linearCoefficients,c):b(r,c)}u=a.poi}else a={segments:[],resolved:!0};if((!u||u.zeros.x.length+u.extrema.x.length+u.intercept.x.length>250)&&(u={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),t.graphMode===s.X)for(var l in u)u.hasOwnProperty(l)&&(o=u[l].y,u[l].y=u[l].x,u[l].x=o);var f={segments:a.segments,resolved:a.resolved,graphMode:t.graphMode,color:t.color,style:t.lineStyle,operator:t.operator,poi:u,expr:null};return a.fillSegments&&(f.fillSegments=a.fillSegments),f}function E(e,t,r){var n,i,a,o,u=[],c=null;switch(r){case s.POLAR:c=g;break;case s.X:c=function(e){return[e[1],e[0]]}}for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i+=2)a=[o[i],o[i+1]],c&&(a=c(a)),u.push(a[0],a[1]);for(n=t.length-1;n>=0;n--)for(o=t[n],i=o.length-2;i>=0;i-=2)a=[o[i],o[i+1]],c&&(a=c(a)),u.push(a[0],a[1]);return u}function T(e,t,n){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},a=[],o=0,s=0,u=[],c=[],l=-(1/0),h=-(1/0);;){if(l<=h){if(o>=t.length)break;c.push(t[o++])}if(h<=l){if(s>=e.length)break;u.push(e[s++])}if(l=i(c),h=i(u),r.approx(l,h,4)){a.push(E(u,c,n)),c=[],u=[];var p=Math.max(l,h);l=p,h=p}}return a}Object.defineProperty(t,"__esModule",{value:!0});var S=function(e,t,r){if(isFinite(r.jumpTolerance)&&!(r.jumpTolerance<=0)){var n;if(n=f(e,t,r)){var i=n[0],a=n[1];i&&r.accumulator.addPoint(i),r.accumulator.breakSegment(),a&&r.accumulator.addPoint(a)}}},I=function(){function e(e,t,r){this.derivative=r,this.accumulator=new o.default(t,e,r),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0,this.stepPerturbation=t.step/10}return e}();t.default={sampleParametricNaive:c,sampleXYNaive:l,sampleLinear:h,sampleXY:m,findPiPeriod:d,samplePolar:y,sampleParametricRecursive:b,subsampleParametricRecursive:x,validateViewState:_,computeDomain:w,computeGraphData:M,polygonsFromSegments:T}}),define("jison",[],function(){var e={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,regression:9,polygon:10,ordered_pair_list:11,double_inequality:12,boolean:13,identifier:14,"=":15,FUNCTION_PROTOTYPE:16,",":17,"~":18,POLYGON:19,"(":20,")":21,function_argument_list:22,comparator:23,IDENTIFIER_BASE:24,ordered_pair:25,ordered_pair_list_elements:26,list:27,"[":28,list_elements:29,"]":30,range:31,optional_commas_ellipsis:32,"...":33,list_element_access_impmul:34,expr_atom_impmul:35,list_element_access:36,expr_atom:37,expr_sum:38,"<":39,">":40,">=":41,"<=":42,"+":43,expr_product:44,"-":45,"*":46,"/":47,"%":48,OF:49,exponent:50,"^N":51,"^I":52,"^":53,"{":54,"}":55,subscript:56,_N:57,_I:58,_:59,function_call:60,primed_function_call:61,function_call_unary:62,trig_function_call:63,ln_log_function_call:64,logbase_function_call:65,ANS:66,"left|":67,"right|":68,FRAC:69,SQRT:70,"!":71,repeated_operator:72,integral:73,DERIVATIVE:74,expr_piecewise:75,constant:76,expr_atom_error:77,repeated_operator_symbol:78,SUM:79,PROD:80,INT:81,DIFFERENTIAL:82,"{_visible":83,piecewise_list:84,"}_visible":85,incomplete_piecewise_list:86,piecewise_element:87,":":88,NUMBER:89,trig_function:90,TRIG_FUNCTION:91,logbase_prefix:92,LOG:93,LOG_BASE_N:94,ln_log_prefix:95,LN:96,primes:97,PRIME:98,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",15:"=",16:"FUNCTION_PROTOTYPE",17:",",18:"~",19:"POLYGON",20:"(",21:")",24:"IDENTIFIER_BASE",28:"[",30:"]",33:"...",39:"<",40:">",41:">=",42:"<=",43:"+",45:"-",46:"*",47:"/",48:"%",49:"OF",51:"^N",52:"^I",53:"^",54:"{",55:"}",57:"_N",58:"_I",59:"_",66:"ANS",67:"left|",68:"right|",69:"FRAC",70:"SQRT",71:"!",74:"DERIVATIVE",79:"SUM",80:"PROD",81:"INT",82:"DIFFERENTIAL",83:"{_visible",85:"}_visible",88:":",89:"NUMBER",91:"TRIG_FUNCTION",93:"LOG",94:"LOG_BASE_N",96:"LN",98:"PRIME"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[9,3],[10,4],[10,4],[7,3],[12,5],[14,1],[11,3],[26,1],[26,3],[25,5],[27,3],[31,5],[32,1],[32,2],[32,2],[32,3],[29,1],[29,3],[34,4],[36,4],[4,1],[23,1],[23,1],[23,1],[23,1],[13,3],[13,3],[13,5],[38,3],[38,3],[38,2],[38,2],[38,1],[44,2],[44,3],[44,3],[44,4],[44,3],[44,3],[44,2],[44,2],[44,2],[44,1],[50,1],[50,1],[50,4],[56,1],[56,1],[56,4],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,3],[35,3],[35,3],[35,2],[35,5],[35,6],[35,6],[35,7],[35,4],[35,7],[35,2],[35,1],[35,1],[35,2],[35,1],[37,1],[37,2],[37,2],[37,2],[37,2],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[77,1],[77,2],[77,1],[77,2],[78,1],[78,1],[72,9],[73,5],[73,4],[73,2],[75,3],[75,2],[84,3],[84,1],[86,3],[86,1],[87,3],[87,1],[76,1],[62,5],[62,4],[90,1],[63,4],[63,2],[63,7],[63,9],[63,3],[63,5],[92,2],[92,1],[65,4],[65,2],[65,5],[65,3],[95,1],[95,1],[64,4],[64,2],[64,5],[64,3],[60,4],[61,5],[61,5],[61,5],[61,5],[61,5],[97,2],[97,1],[22,3],[22,3],[8,2]],performAction:function(e,t,r,n,i,a,o){var s=a.length-1;switch(i){case 1:return a[s-1];case 2:return a[s-1];case 3:return a[s-1];case 4:return a[s-1];case 5:return a[s-1];case 6:return a[s-1];case 7:return a[s-1];case 8:return a[s-1];case 9:return a[s-1];case 10:return n.ErrorMsg.missingRHS(a[s-2]._symbol);case 11:var u=n.parseFunctionDeclaration(a[s-1]).identifier._symbol;return n.ErrorMsg.missingRHS(u);case 12:return n.ErrorMsg.malformedPoint();case 13:return n.ErrorMsg.blankExpression();case 14:this.$=n.Assignment(a[s-2],a[s]),n.setInput(this.$,this._$);break;case 15:this.$=n.Regression(a[s-2],a[s]),n.setInput(this.$,this._$);break;case 16:this.$=n.Polygon([a[s-1]]);break;case 17:this.$=n.Polygon(a[s-1]);break;case 18:this.$=n.Equation(a[s-2],a[s]),n.setInput(this.$,this._$);break;case 19:this.$=n.DoubleInequality([a[s-4],a[s-3],a[s-2],a[s-1],a[s]]),n.setInput(this.$,this._$);break;case 20:this.$=n.Identifier(e),n.setInput(this.$,this._$);break;case 21:a[s].unshift(a[s-2]),this.$=n.List(a[s]),n.setInput(this.$,this._$);break;case 22:this.$=[a[s]];break;case 23:a[s-2].push(a[s]),this.$=a[s-2];break;case 24:this.$=n.OrderedPair([a[s-3],a[s-1]]);break;case 25:this.$=n.List(a[s-1]),n.setInput(this.$,this._$);break;case 26:this.$=n.Range([n.List(a[s-3]),n.List(a[s-1])]);break;case 31:this.$=[a[s]];break;case 32:a[s-2].push(a[s]),this.$=a[s-2];break;case 33:this.$=n.ListAccess([a[s-3],a[s-1]]);break;case 34:this.$=n.ListAccess([a[s-3],a[s-1]]);break;case 35:this.$=a[s],n.setInput(this.$,this._$);break;case 36:this.$="<";break;case 37:this.$=">";break;case 38:this.$=">=";break;case 39:this.$="<=";break;case 40:this.$=n.Comparator[a[s-1]]([a[s-2],a[s]]),n.setInput(this.$,this._$);break;case 41:this.$=n.Comparator["="]([a[s-2],a[s]]),n.setInput(this.$,this._$);break;case 42:var c=n.Comparator[a[s-3]]([a[s-4],a[s-2]]),l=n.Comparator[a[s-1]]([a[s-2],a[s]]);this.$=n.And([c,l]),n.setInput(this.$,this._$);break;case 43:this.$=n.Add([a[s-2],a[s]]);break;case 44:this.$=n.Subtract([a[s-2],a[s]]);break;case 45:throw n.ErrorMsg.binaryOperatorMissingOperand("+");case 46:throw n.ErrorMsg.binaryOperatorMissingOperand("-");case 47:this.$=a[s];break;case 48:this.$=n.Multiply([a[s-1],a[s]]);break;case 49:this.$=n.Multiply([a[s-2],a[s]]);break;case 50:this.$=n.Divide([a[s-2],a[s]]);break;case 51:this.$=n.PercentOf([a[s-3],a[s]]);break;case 52:throw n.ErrorMsg.binaryOperatorMissingOperand("% of");case 53:throw n.ErrorMsg.percentMissingOf();case 54:throw n.ErrorMsg.percentMissingOf();case 55:throw n.ErrorMsg.binaryOperatorMissingOperand("*");case 56:throw n.ErrorMsg.binaryOperatorMissingOperand("÷");case 57:this.$=a[s];break;case 58:this.$=n.Constant(Number(a[s]));break;case 59:this.$=n.Identifier(a[s]),n.setInput(this.$,this._$);break;case 60:this.$=a[s-1];break;case 61:this.$=n.Constant(Number(a[s]));break;case 62:this.$=n.Identifier(a[s]),n.setInput(this.$,this._$);break;case 63:this.$=a[s-1];break;case 64:this.$=a[s];break;case 65:this.$=a[s];break;case 66:this.$=a[s];break;case 67:this.$=a[s];break;case 68:this.$=a[s];break;case 69:this.$=a[s];break;case 70:this.$=a[s];break;case 71:this.$=a[s];break;case 72:if(void 0===n.currentIndex)throw n.ErrorMsg.badAnsContext();this.$=n.Ans("ans_{"+(n.currentIndex-1)+"}");break;case 73:this.$=a[s-1];break;case 74:this.$=a[s-1];break;case 75:this.$=n.FunctionCall("\\\\abs",[a[s-1]]);break;case 76:this.$=n.Exponent([a[s-1],a[s]]);break;case 77:throw n.ErrorMsg.fractionEmpty();case 78:throw n.ErrorMsg.fractionMissingNumerator();case 79:throw n.ErrorMsg.fractionMissingDenominator();case 80:this.$=n.Divide([a[s-4],a[s-1]]);break;case 81:this.$=n.FunctionCall("\\\\sqrt",[a[s-1]]);break;case 82:this.$=n.FunctionCall("\\\\nthroot",[a[s-1],a[s-4]]);break;case 83:this.$=n.FunctionCall("\\\\factorial",[a[s-1]]);break;case 84:this.$=a[s];break;case 85:this.$=a[s];break;case 86:this.$=n.Derivative(a[s-1],[a[s]]);break;case 87:this.$=a[s];break;case 88:this.$=a[s];break;case 89:this.$=n.Exponent([a[s-1],a[s]]);break;case 90:this.$=n.FunctionCall("\\\\factorial",[a[s-1]]);break;case 91:this.$=a[s].isConstant?n.Constant(-a[s].constantValue):n.Negative([a[s]]);break;case 92:this.$=a[s];break;case 93:this.$=a[s];break;case 94:this.$=a[s];break;case 95:this.$=a[s];break;case 96:this.$=a[s];break;case 97:this.$=a[s];break;case 98:this.$=a[s];break;case 99:throw n.ErrorMsg.binaryOperatorMissingOperand("*");case 100:throw n.ErrorMsg.binaryOperatorMissingOperand("*");case 101:throw n.ErrorMsg.binaryOperatorMissingOperand("÷");case 102:throw n.ErrorMsg.binaryOperatorMissingOperand("÷");case 103:this.$=n.Sum;break;case 104:this.$=n.Product;break;case 105:this.$=a[s-8]([a[s-5],a[s-3],a[s-1],a[s]]);break;case 106:this.$=n.Integral([n.Identifier(a[s]),a[s-3],a[s-2],a[s-1]]);break;case 107:this.$=n.Integral([n.Identifier(a[s]),a[s-2],a[s-1],n.Constant(1)]);break;case 108:throw n.ErrorMsg.missingIntegralBounds();case 109:this.$=n.Piecewise.chain(a[s-1]);break;case 110:this.$=n.Piecewise.empty();break;case 111:a[s-2].push({condition:n.Constant(!0),if_expr:a[s]}),this.$=a[s-2];break;case 112:this.$=a[s];break;case 113:a[s-2].push(a[s]),this.$=a[s-2];break;case 114:this.$=[a[s]];break;case 115:this.$={condition:a[s-2],if_expr:a[s]};break;case 116:this.$={condition:a[s],if_expr:n.Constant(1)};break;case 117:this.$=n.Constant(Number(e));break;case 118:this.$=n.FunctionExponent([a[s-4],a[s-2],a[s]]);break;case 119:this.$=n.FunctionCall(a[s-3],[a[s-1]]);break;case 120:this.$=n.Identifier(e),n.setInput(this.$,this._$);break;case 121:this.$=n.FunctionCall(a[s-3],[a[s-1]]);break;case 122:if(a[s]instanceof n.OrderedPair)this.$=n.FunctionCall(a[s-1],a[s].args);else{if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-1]._symbol);this.$=n.FunctionCall(a[s-1],[a[s]])}break;case 123:if(1!=a[s-2].constantValue)throw n.ErrorMsg.badTrigExponent(a[s-6]._symbol);if(a[s]instanceof n.OrderedPair)this.$=n.FunctionCall(n.inverses[a[s-6]._symbol],a[s].args);else{if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-6]._symbol);this.$=n.FunctionCall(n.inverses[a[s-6]._symbol],[a[s]])}break;case 124:if(1!=a[s-4].constantValue)throw n.ErrorMsg.badTrigExponent(a[s-8]._symbol);this.$=n.FunctionCall(n.inverses[a[s-8]._symbol],[a[s-1]]);break;case 125:if("2"!=a[s-1])throw n.ErrorMsg.badTrigExponent(a[s-2]._symbol);if(a[s]instanceof n.OrderedPair)this.$=n.Exponent([n.FunctionCall(a[s-2],a[s].args),n.Constant(2)]);else{if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-2]._symbol);this.$=n.Exponent([n.FunctionCall(a[s-2],[a[s]]),n.Constant(2)])}break;case 126:if("2"!=a[s-3])throw n.ErrorMsg.badTrigExponent(a[s-4]._symbol);this.$=n.Exponent([n.FunctionCall(a[s-4],[a[s-1]]),n.Constant(2)]);break;case 127:this.$=a[s];break;case 128:this.$=n.Constant(Number(e));break;case 129:this.$=n.FunctionCall("logbase",[a[s-1],a[s-3]]);break;case 130:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply("logbase");this.$=n.FunctionCall("logbase",[a[s],a[s-1]]);break;case 131:if("2"!=a[s-3])throw n.ErrorMsg.badLogExponent("logbase");this.$=n.Exponent([n.FunctionCall("logbase",[a[s-1],a[s-4]]),n.Constant(2)]);break;case 132:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply("logbase");if("2"!=a[s-1])throw n.ErrorMsg.badLogExponent("logbase");this.$=n.Exponent([n.FunctionCall("logbase",[a[s],a[s-2]]),n.Constant(2)]);break;case 133:this.$="ln";break;case 134:this.$="log";break;case 135:this.$=n.FunctionCall(a[s-3],[a[s-1]]);break;case 136:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-1]);this.$=n.FunctionCall(a[s-1],[a[s]]);break;case 137:if("2"!=a[s-3])throw n.ErrorMsg.badLogExponent(a[s-4]);this.$=n.Exponent([n.FunctionCall(a[s-4],[a[s-1]]),n.Constant(2)]);break;case 138:if(!a[s].okForImplicitFunction())throw n.ErrorMsg.badImplicitMultiply(a[s-2]);if("2"!=a[s-1])throw n.ErrorMsg.badLogExponent(a[s-2]);this.$=n.Exponent([n.FunctionCall(a[s-2],[a[s]]),n.Constant(2)]);break;case 139:this.$=n.FunctionCall(a[s-3],a[s-1]);break;case 140:this.$=n.Prime(a[s-3],[n.FunctionCall(a[s-4],[a[s-1]])]);break;case 141:this.$=n.Prime(a[s-3],[n.FunctionCall(a[s-4],[a[s-1]])]);break;case 142:this.$=n.Prime(a[s-3],[n.FunctionCall(a[s-4],[a[s-1]])]);break;case 143:this.$=n.Prime(a[s-3],[n.FunctionCall("logbase",[a[s-1],a[s-4]])]);break;case 144:throw n.ErrorMsg.primedFunctionArity();case 145:this.$=a[s-1]+1;break;case 146:this.$=1;break;case 147:this.$=a[s-2].concat([a[s]]);break;case 148:this.$=[a[s-2],a[s]];break;case 149:var h=n.parseFunctionDeclaration(a[s-1]);this.$=n.FunctionDefinition(h.identifier,h.args,a[s]),n.setInput(this.$,this._$)}},table:[{3:1,4:2,5:[1,13],6:3,7:4,8:5,9:6,10:7,11:8,12:9,13:10,14:11,16:[1,12],19:[1,15],20:[1,19],24:[1,17],25:16,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{1:[3]},{5:[1,61],15:[1,63],17:[1,62],18:[1,64],23:65,39:[1,66],40:[1,67],41:[1,68],42:[1,69]},{5:[1,70]},{5:[1,71]},{5:[1,72]},{5:[1,73]},{5:[1,74]},{5:[1,75]},{5:[1,76]},{5:[1,77]},{5:[2,64],15:[1,78],17:[2,64],18:[2,64],20:[1,79],24:[2,64],28:[2,64],39:[2,64],40:[2,64],41:[2,64],42:[2,64],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],51:[2,64],52:[2,64],53:[2,64],54:[2,64],66:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64],74:[2,64],79:[2,64],80:[2,64],81:[2,64],83:[2,64],91:[2,64],93:[2,64],94:[2,64],96:[2,64],97:80,98:[1,81]},{4:83,5:[1,82],14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{1:[2,13]},{5:[2,35],15:[2,35],\n17:[2,35],18:[2,35],20:[2,35],21:[2,35],24:[2,35],28:[2,35],30:[2,35],33:[2,35],39:[2,35],40:[2,35],41:[2,35],42:[2,35],43:[1,86],45:[1,87],46:[2,35],47:[2,35],48:[2,35],51:[2,35],52:[2,35],53:[2,35],54:[2,35],55:[2,35],66:[2,35],67:[2,35],68:[2,35],69:[2,35],70:[2,35],71:[2,35],74:[2,35],79:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],85:[2,35],88:[2,35],91:[2,35],93:[2,35],94:[2,35],96:[2,35]},{20:[1,88]},{5:[2,96],15:[2,96],17:[1,89],18:[2,96],20:[2,96],24:[2,96],28:[2,96],39:[2,96],40:[2,96],41:[2,96],42:[2,96],43:[2,96],45:[2,96],46:[2,96],47:[2,96],48:[2,96],51:[2,96],52:[2,96],53:[2,96],54:[2,96],66:[2,96],67:[2,96],69:[2,96],70:[2,96],71:[2,96],74:[2,96],79:[2,96],80:[2,96],81:[2,96],83:[2,96],91:[2,96],93:[2,96],94:[2,96],96:[2,96]},{5:[2,20],15:[2,20],17:[2,20],18:[2,20],20:[2,20],21:[2,20],24:[2,20],28:[2,20],30:[2,20],33:[2,20],39:[2,20],40:[2,20],41:[2,20],42:[2,20],43:[2,20],45:[2,20],46:[2,20],47:[2,20],48:[2,20],51:[2,20],52:[2,20],53:[2,20],54:[2,20],55:[2,20],66:[2,20],67:[2,20],68:[2,20],69:[2,20],70:[2,20],71:[2,20],74:[2,20],79:[2,20],80:[2,20],81:[2,20],82:[2,20],83:[2,20],85:[2,20],88:[2,20],91:[2,20],93:[2,20],94:[2,20],96:[2,20],98:[2,20]},{5:[2,47],14:85,15:[2,47],17:[2,47],18:[2,47],20:[1,94],21:[2,47],24:[1,17],28:[2,47],30:[2,47],33:[2,47],34:37,35:90,39:[2,47],40:[2,47],41:[2,47],42:[2,47],43:[2,47],45:[2,47],46:[1,91],47:[1,92],48:[1,93],51:[2,47],52:[2,47],53:[2,47],54:[1,39],55:[2,47],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,47],69:[1,41],70:[1,42],71:[2,47],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,47],83:[1,54],85:[2,47],88:[2,47],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:95,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,57],15:[2,57],17:[2,57],18:[2,57],20:[2,57],21:[2,57],24:[2,57],28:[1,98],30:[2,57],33:[2,57],39:[2,57],40:[2,57],41:[2,57],42:[2,57],43:[2,57],45:[2,57],46:[2,57],47:[2,57],48:[2,57],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,57],55:[2,57],66:[2,57],67:[2,57],68:[2,57],69:[2,57],70:[2,57],71:[1,97],74:[2,57],79:[2,57],80:[2,57],81:[2,57],82:[2,57],83:[2,57],85:[2,57],88:[2,57],91:[2,57],93:[2,57],94:[2,57],96:[2,57]},{5:[2,88],15:[2,88],17:[2,88],18:[2,88],20:[2,88],21:[2,88],24:[2,88],28:[2,88],30:[2,88],33:[2,88],39:[2,88],40:[2,88],41:[2,88],42:[2,88],43:[2,88],45:[2,88],46:[2,88],47:[2,88],48:[2,88],51:[2,88],52:[2,88],53:[2,88],54:[2,88],55:[2,88],66:[2,88],67:[2,88],68:[2,88],69:[2,88],70:[2,88],71:[2,88],74:[2,88],79:[2,88],80:[2,88],81:[2,88],82:[2,88],83:[2,88],85:[2,88],88:[2,88],91:[2,88],93:[2,88],94:[2,88],96:[2,88]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:102,43:[1,23],45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:103,43:[1,23],45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,93],15:[2,93],17:[2,93],18:[2,93],20:[2,93],21:[2,93],24:[2,93],28:[2,93],30:[2,93],33:[2,93],39:[2,93],40:[2,93],41:[2,93],42:[2,93],43:[2,93],45:[2,93],46:[2,93],47:[2,93],48:[2,93],51:[2,93],52:[2,93],53:[2,93],54:[2,93],55:[2,93],66:[2,93],67:[2,93],68:[2,93],69:[2,93],70:[2,93],71:[2,93],74:[2,93],79:[2,93],80:[2,93],81:[2,93],82:[2,93],83:[2,93],85:[2,93],88:[2,93],91:[2,93],93:[2,93],94:[2,93],96:[2,93]},{5:[2,94],15:[2,94],17:[2,94],18:[2,94],20:[2,94],21:[2,94],24:[2,94],28:[2,94],30:[2,94],33:[2,94],39:[2,94],40:[2,94],41:[2,94],42:[2,94],43:[2,94],45:[2,94],46:[2,94],47:[2,94],48:[2,94],51:[2,94],52:[2,94],53:[2,94],54:[2,94],55:[2,94],66:[2,94],67:[2,94],68:[2,94],69:[2,94],70:[2,94],71:[2,94],74:[2,94],79:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],85:[2,94],88:[2,94],91:[2,94],93:[2,94],94:[2,94],96:[2,94]},{5:[2,95],15:[2,95],17:[2,95],18:[2,95],20:[2,95],21:[2,95],24:[2,95],28:[2,95],30:[2,95],33:[2,95],39:[2,95],40:[2,95],41:[2,95],42:[2,95],43:[2,95],45:[2,95],46:[2,95],47:[2,95],48:[2,95],51:[2,95],52:[2,95],53:[2,95],54:[2,95],55:[2,95],66:[2,95],67:[2,95],68:[2,95],69:[2,95],70:[2,95],71:[2,95],74:[2,95],79:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],85:[2,95],88:[2,95],91:[2,95],93:[2,95],94:[2,95],96:[2,95]},{5:[2,97],15:[2,97],17:[2,97],18:[2,97],20:[2,97],21:[2,97],24:[2,97],28:[1,106],30:[2,97],33:[2,97],39:[2,97],40:[2,97],41:[2,97],42:[2,97],43:[2,97],45:[2,97],46:[2,97],47:[2,97],48:[2,97],50:104,51:[1,99],52:[1,100],53:[1,101],54:[2,97],55:[2,97],66:[2,97],67:[2,97],68:[2,97],69:[2,97],70:[2,97],71:[1,105],74:[2,97],79:[2,97],80:[2,97],81:[2,97],82:[2,97],83:[2,97],85:[2,97],88:[2,97],91:[2,97],93:[2,97],94:[2,97],96:[2,97]},{5:[2,98],15:[2,98],17:[2,98],18:[2,98],20:[2,98],21:[2,98],24:[2,98],28:[2,98],30:[2,98],33:[2,98],39:[2,98],40:[2,98],41:[2,98],42:[2,98],43:[2,98],45:[2,98],46:[2,98],47:[2,98],48:[2,98],51:[2,98],52:[2,98],53:[2,98],54:[2,98],55:[2,98],66:[2,98],67:[2,98],68:[2,98],69:[2,98],70:[2,98],71:[2,98],74:[2,98],79:[2,98],80:[2,98],81:[2,98],82:[2,98],83:[2,98],85:[2,98],88:[2,98],91:[2,98],93:[2,98],94:[2,98],96:[2,98]},{5:[2,117],15:[2,117],17:[2,117],18:[2,117],20:[2,117],21:[2,117],24:[2,117],28:[2,117],30:[2,117],33:[2,117],39:[2,117],40:[2,117],41:[2,117],42:[2,117],43:[2,117],45:[2,117],46:[2,117],47:[2,117],48:[2,117],51:[2,117],52:[2,117],53:[2,117],54:[2,117],55:[2,117],66:[2,117],67:[2,117],68:[2,117],69:[2,117],70:[2,117],71:[2,117],74:[2,117],79:[2,117],80:[2,117],81:[2,117],82:[2,117],83:[2,117],85:[2,117],88:[2,117],91:[2,117],93:[2,117],94:[2,117],96:[2,117]},{4:108,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],29:107,31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,65],15:[2,65],17:[2,65],18:[2,65],20:[2,65],21:[2,65],24:[2,65],28:[2,65],30:[2,65],33:[2,65],39:[2,65],40:[2,65],41:[2,65],42:[2,65],43:[2,65],45:[2,65],46:[2,65],47:[2,65],48:[2,65],51:[2,65],52:[2,65],53:[2,65],54:[2,65],55:[2,65],66:[2,65],67:[2,65],68:[2,65],69:[2,65],70:[2,65],71:[2,65],74:[2,65],79:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],85:[2,65],88:[2,65],91:[2,65],93:[2,65],94:[2,65],96:[2,65]},{5:[2,66],15:[2,66],17:[2,66],18:[2,66],20:[2,66],21:[2,66],24:[2,66],28:[2,66],30:[2,66],33:[2,66],39:[2,66],40:[2,66],41:[2,66],42:[2,66],43:[2,66],45:[2,66],46:[2,66],47:[2,66],48:[2,66],51:[2,66],52:[2,66],53:[2,66],54:[2,66],55:[2,66],66:[2,66],67:[2,66],68:[2,66],69:[2,66],70:[2,66],71:[2,66],74:[2,66],79:[2,66],80:[2,66],81:[2,66],82:[2,66],83:[2,66],85:[2,66],88:[2,66],91:[2,66],93:[2,66],94:[2,66],96:[2,66]},{5:[2,67],15:[2,67],17:[2,67],18:[2,67],20:[2,67],21:[2,67],24:[2,67],28:[2,67],30:[2,67],33:[2,67],39:[2,67],40:[2,67],41:[2,67],42:[2,67],43:[2,67],45:[2,67],46:[2,67],47:[2,67],48:[2,67],51:[2,67],52:[2,67],53:[2,67],54:[2,67],55:[2,67],66:[2,67],67:[2,67],68:[2,67],69:[2,67],70:[2,67],71:[2,67],74:[2,67],79:[2,67],80:[2,67],81:[2,67],82:[2,67],83:[2,67],85:[2,67],88:[2,67],91:[2,67],93:[2,67],94:[2,67],96:[2,67]},{5:[2,68],15:[2,68],17:[2,68],18:[2,68],20:[2,68],21:[2,68],24:[2,68],28:[2,68],30:[2,68],33:[2,68],39:[2,68],40:[2,68],41:[2,68],42:[2,68],43:[2,68],45:[2,68],46:[2,68],47:[2,68],48:[2,68],51:[2,68],52:[2,68],53:[2,68],54:[2,68],55:[2,68],66:[2,68],67:[2,68],68:[2,68],69:[2,68],70:[2,68],71:[2,68],74:[2,68],79:[2,68],80:[2,68],81:[2,68],82:[2,68],83:[2,68],85:[2,68],88:[2,68],91:[2,68],93:[2,68],94:[2,68],96:[2,68]},{5:[2,69],15:[2,69],17:[2,69],18:[2,69],20:[2,69],21:[2,69],24:[2,69],28:[2,69],30:[2,69],33:[2,69],39:[2,69],40:[2,69],41:[2,69],42:[2,69],43:[2,69],45:[2,69],46:[2,69],47:[2,69],48:[2,69],51:[2,69],52:[2,69],53:[2,69],54:[2,69],55:[2,69],66:[2,69],67:[2,69],68:[2,69],69:[2,69],70:[2,69],71:[2,69],74:[2,69],79:[2,69],80:[2,69],81:[2,69],82:[2,69],83:[2,69],85:[2,69],88:[2,69],91:[2,69],93:[2,69],94:[2,69],96:[2,69]},{5:[2,70],15:[2,70],17:[2,70],18:[2,70],20:[2,70],21:[2,70],24:[2,70],28:[2,70],30:[2,70],33:[2,70],39:[2,70],40:[2,70],41:[2,70],42:[2,70],43:[2,70],45:[2,70],46:[2,70],47:[2,70],48:[2,70],51:[2,70],52:[2,70],53:[2,70],54:[2,70],55:[2,70],66:[2,70],67:[2,70],68:[2,70],69:[2,70],70:[2,70],71:[2,70],74:[2,70],79:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],85:[2,70],88:[2,70],91:[2,70],93:[2,70],94:[2,70],96:[2,70]},{5:[2,71],15:[2,71],17:[2,71],18:[2,71],20:[2,71],21:[2,71],24:[2,71],28:[2,71],30:[2,71],33:[2,71],39:[2,71],40:[2,71],41:[2,71],42:[2,71],43:[2,71],45:[2,71],46:[2,71],47:[2,71],48:[2,71],51:[2,71],52:[2,71],53:[2,71],54:[2,71],55:[2,71],66:[2,71],67:[2,71],68:[2,71],69:[2,71],70:[2,71],71:[2,71],74:[2,71],79:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],85:[2,71],88:[2,71],91:[2,71],93:[2,71],94:[2,71],96:[2,71]},{5:[2,72],15:[2,72],17:[2,72],18:[2,72],20:[2,72],21:[2,72],24:[2,72],28:[2,72],30:[2,72],33:[2,72],39:[2,72],40:[2,72],41:[2,72],42:[2,72],43:[2,72],45:[2,72],46:[2,72],47:[2,72],48:[2,72],51:[2,72],52:[2,72],53:[2,72],54:[2,72],55:[2,72],66:[2,72],67:[2,72],68:[2,72],69:[2,72],70:[2,72],71:[2,72],74:[2,72],79:[2,72],80:[2,72],81:[2,72],82:[2,72],83:[2,72],85:[2,72],88:[2,72],91:[2,72],93:[2,72],94:[2,72],96:[2,72]},{4:109,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:110,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,111]},{28:[1,113],54:[1,112]},{5:[2,84],15:[2,84],17:[2,84],18:[2,84],20:[2,84],21:[2,84],24:[2,84],28:[2,84],30:[2,84],33:[2,84],39:[2,84],40:[2,84],41:[2,84],42:[2,84],43:[2,84],45:[2,84],46:[2,84],47:[2,84],48:[2,84],51:[2,84],52:[2,84],53:[2,84],54:[2,84],55:[2,84],66:[2,84],67:[2,84],68:[2,84],69:[2,84],70:[2,84],71:[2,84],74:[2,84],79:[2,84],80:[2,84],81:[2,84],82:[2,84],83:[2,84],85:[2,84],88:[2,84],91:[2,84],93:[2,84],94:[2,84],96:[2,84]},{5:[2,85],15:[2,85],17:[2,85],18:[2,85],20:[2,85],21:[2,85],24:[2,85],28:[2,85],30:[2,85],33:[2,85],39:[2,85],40:[2,85],41:[2,85],42:[2,85],43:[2,85],45:[2,85],46:[2,85],47:[2,85],48:[2,85],51:[2,85],52:[2,85],53:[2,85],54:[2,85],55:[2,85],66:[2,85],67:[2,85],68:[2,85],69:[2,85],70:[2,85],71:[2,85],74:[2,85],79:[2,85],80:[2,85],81:[2,85],82:[2,85],83:[2,85],85:[2,85],88:[2,85],91:[2,85],93:[2,85],94:[2,85],96:[2,85]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:114,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,87],15:[2,87],17:[2,87],18:[2,87],20:[2,87],21:[2,87],24:[2,87],28:[2,87],30:[2,87],33:[2,87],39:[2,87],40:[2,87],41:[2,87],42:[2,87],43:[2,87],45:[2,87],46:[2,87],47:[2,87],48:[2,87],51:[2,87],52:[2,87],53:[2,87],54:[2,87],55:[2,87],66:[2,87],67:[2,87],68:[2,87],69:[2,87],70:[2,87],71:[2,87],74:[2,87],79:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],85:[2,87],88:[2,87],91:[2,87],93:[2,87],94:[2,87],96:[2,87]},{5:[2,99],14:85,15:[2,99],17:[2,99],18:[2,99],20:[1,19],21:[2,99],24:[1,17],25:84,27:24,28:[1,30],30:[2,99],31:25,33:[2,99],34:37,35:27,36:26,37:115,39:[2,99],40:[2,99],41:[2,99],42:[2,99],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,99],51:[2,99],52:[2,99],53:[2,99],54:[1,39],55:[2,99],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,99],69:[1,41],70:[1,42],71:[2,99],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,99],83:[1,54],85:[2,99],88:[2,99],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,101],14:85,15:[2,101],17:[2,101],18:[2,101],20:[1,19],21:[2,101],24:[1,17],25:84,27:24,28:[1,30],30:[2,101],31:25,33:[2,101],34:37,35:27,36:26,37:116,39:[2,101],40:[2,101],41:[2,101],42:[2,101],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,101],51:[2,101],52:[2,101],53:[2,101],54:[1,39],55:[2,101],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,101],69:[1,41],70:[1,42],71:[2,101],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,101],83:[1,54],85:[2,101],88:[2,101],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,118],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:119,45:[1,22],46:[1,47],47:[1,48],51:[1,121],53:[1,120],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56],97:117,98:[1,81]},{14:85,20:[1,123],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:124,45:[1,22],46:[1,47],47:[1,48],51:[1,125],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56],97:122,98:[1,81]},{14:85,20:[1,127],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:128,45:[1,22],46:[1,47],47:[1,48],51:[1,129],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56],97:126,98:[1,81]},{59:[1,130]},{4:132,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],56:131,57:[1,133],58:[1,134],59:[1,135],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:141,13:140,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],84:136,85:[1,137],86:138,87:139,89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,120],24:[2,120],28:[2,120],43:[2,120],45:[2,120],46:[2,120],47:[2,120],51:[2,120],53:[2,120],54:[2,120],66:[2,120],67:[2,120],69:[2,120],70:[2,120],74:[2,120],79:[2,120],80:[2,120],81:[2,120],83:[2,120],89:[2,120],91:[2,120],93:[2,120],94:[2,120],96:[2,120],98:[2,120]},{20:[2,133],24:[2,133],28:[2,133],43:[2,133],45:[2,133],46:[2,133],47:[2,133],51:[2,133],54:[2,133],66:[2,133],67:[2,133],69:[2,133],70:[2,133],74:[2,133],79:[2,133],80:[2,133],81:[2,133],83:[2,133],89:[2,133],91:[2,133],93:[2,133],94:[2,133],96:[2,133],98:[2,133]},{20:[2,134],24:[2,134],28:[2,134],43:[2,134],45:[2,134],46:[2,134],47:[2,134],51:[2,134],54:[2,134],56:142,57:[1,133],58:[1,134],59:[1,135],66:[2,134],67:[2,134],69:[2,134],70:[2,134],74:[2,134],79:[2,134],80:[2,134],81:[2,134],83:[2,134],89:[2,134],91:[2,134],93:[2,134],94:[2,134],96:[2,134],98:[2,134]},{20:[2,128],24:[2,128],28:[2,128],43:[2,128],45:[2,128],46:[2,128],47:[2,128],51:[2,128],54:[2,128],66:[2,128],67:[2,128],69:[2,128],70:[2,128],74:[2,128],79:[2,128],80:[2,128],81:[2,128],83:[2,128],89:[2,128],91:[2,128],93:[2,128],94:[2,128],96:[2,128],98:[2,128]},{59:[2,103]},{59:[2,104]},{1:[2,1]},{4:143,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:144,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:145,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:147,14:146,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,36],24:[2,36],28:[2,36],43:[2,36],45:[2,36],46:[2,36],47:[2,36],54:[2,36],66:[2,36],67:[2,36],69:[2,36],70:[2,36],74:[2,36],79:[2,36],80:[2,36],81:[2,36],83:[2,36],89:[2,36],91:[2,36],93:[2,36],94:[2,36],96:[2,36]},{20:[2,37],24:[2,37],28:[2,37],43:[2,37],45:[2,37],46:[2,37],47:[2,37],54:[2,37],66:[2,37],67:[2,37],69:[2,37],70:[2,37],74:[2,37],79:[2,37],80:[2,37],81:[2,37],83:[2,37],89:[2,37],91:[2,37],93:[2,37],94:[2,37],96:[2,37]},{20:[2,38],24:[2,38],28:[2,38],43:[2,38],45:[2,38],46:[2,38],47:[2,38],54:[2,38],66:[2,38],67:[2,38],69:[2,38],70:[2,38],74:[2,38],79:[2,38],80:[2,38],81:[2,38],83:[2,38],89:[2,38],91:[2,38],93:[2,38],94:[2,38],96:[2,38]},{20:[2,39],24:[2,39],28:[2,39],43:[2,39],45:[2,39],46:[2,39],47:[2,39],54:[2,39],66:[2,39],67:[2,39],69:[2,39],70:[2,39],74:[2,39],79:[2,39],80:[2,39],81:[2,39],83:[2,39],89:[2,39],91:[2,39],93:[2,39],94:[2,39],96:[2,39]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{1:[2,8]},{1:[2,9]},{4:149,5:[1,148],14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:151,14:85,20:[1,19],22:150,24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,152],98:[1,153]},{20:[2,146],98:[2,146]},{1:[2,11]},{5:[2,149]},{5:[2,96],15:[2,96],17:[2,96],18:[2,96],20:[2,96],21:[2,96],24:[2,96],28:[2,96],30:[2,96],33:[2,96],39:[2,96],40:[2,96],41:[2,96],42:[2,96],43:[2,96],45:[2,96],46:[2,96],47:[2,96],48:[2,96],51:[2,96],52:[2,96],53:[2,96],54:[2,96],55:[2,96],66:[2,96],67:[2,96],68:[2,96],69:[2,96],70:[2,96],71:[2,96],74:[2,96],79:[2,96],80:[2,96],81:[2,96],82:[2,96],83:[2,96],85:[2,96],88:[2,96],91:[2,96],93:[2,96],94:[2,96],96:[2,96]},{5:[2,64],15:[2,64],17:[2,64],18:[2,64],20:[1,79],21:[2,64],24:[2,64],28:[2,64],30:[2,64],33:[2,64],39:[2,64],40:[2,64],41:[2,64],42:[2,64],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],51:[2,64],52:[2,64],53:[2,64],54:[2,64],55:[2,64],66:[2,64],67:[2,64],68:[2,64],69:[2,64],70:[2,64],71:[2,64],74:[2,64],79:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],85:[2,64],88:[2,64],91:[2,64],93:[2,64],94:[2,64],96:[2,64],97:80,98:[1,81]},{5:[2,45],14:85,15:[2,45],17:[2,45],18:[2,45],20:[1,19],21:[2,45],24:[1,17],25:84,27:24,28:[1,30],30:[2,45],31:25,33:[2,45],34:37,35:27,36:26,37:20,39:[2,45],40:[2,45],41:[2,45],42:[2,45],43:[1,23],44:154,45:[1,22],46:[1,47],47:[1,48],48:[2,45],51:[2,45],52:[2,45],53:[2,45],54:[1,39],55:[2,45],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,45],69:[1,41],70:[1,42],71:[2,45],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,45],83:[1,54],85:[2,45],88:[2,45],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,46],14:85,15:[2,46],17:[2,46],18:[2,46],20:[1,19],21:[2,46],24:[1,17],25:84,27:24,28:[1,30],30:[2,46],31:25,33:[2,46],34:37,35:27,36:26,37:20,39:[2,46],40:[2,46],41:[2,46],42:[2,46],43:[1,23],44:155,45:[1,22],46:[1,47],47:[1,48],48:[2,46],51:[2,46],52:[2,46],53:[2,46],54:[1,39],55:[2,46],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,46],69:[1,41],70:[1,42],71:[2,46],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,46],83:[1,54],85:[2,46],88:[2,46],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:156,14:85,20:[1,19],22:157,24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,160],25:159,26:158},{5:[2,48],15:[2,48],17:[2,48],18:[2,48],20:[2,48],21:[2,48],24:[2,48],28:[1,106],30:[2,48],33:[2,48],39:[2,48],40:[2,48],41:[2,48],42:[2,48],43:[2,48],45:[2,48],46:[2,48],47:[2,48],48:[2,48],50:104,51:[1,99],52:[1,100],53:[1,101],54:[2,48],55:[2,48],66:[2,48],67:[2,48],68:[2,48],69:[2,48],70:[2,48],71:[1,105],74:[2,48],79:[2,48],80:[2,48],81:[2,48],82:[2,48],83:[2,48],85:[2,48],88:[2,48],91:[2,48],93:[2,48],94:[2,48],96:[2,48]},{5:[2,55],14:85,15:[2,55],17:[2,55],18:[2,55],20:[1,19],21:[2,55],24:[1,17],25:84,27:24,28:[1,30],30:[2,55],31:25,33:[2,55],34:37,35:27,36:26,37:161,39:[2,55],40:[2,55],41:[2,55],42:[2,55],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,55],51:[2,55],52:[2,55],53:[2,55],54:[1,39],55:[2,55],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,55],69:[1,41],70:[1,42],71:[2,55],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,55],83:[1,54],85:[2,55],88:[2,55],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,56],14:85,15:[2,56],17:[2,56],18:[2,56],20:[1,19],21:[2,56],24:[1,17],25:84,27:24,28:[1,30],30:[2,56],31:25,33:[2,56],34:37,35:27,36:26,37:162,39:[2,56],40:[2,56],41:[2,56],42:[2,56],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,56],51:[2,56],52:[2,56],53:[2,56],54:[1,39],55:[2,56],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,56],69:[1,41],70:[1,42],71:[2,56],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,56],83:[1,54],85:[2,56],88:[2,56],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,54],14:85,15:[2,54],17:[2,54],18:[2,54],20:[1,19],21:[2,54],24:[1,17],25:84,27:24,28:[1,30],30:[2,54],31:25,33:[2,54],34:37,35:27,36:26,37:164,39:[2,54],40:[2,54],41:[2,54],42:[2,54],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,54],49:[1,163],51:[2,54],52:[2,54],53:[2,54],54:[1,39],55:[2,54],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,54],69:[1,41],70:[1,42],71:[2,54],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,54],83:[1,54],85:[2,54],88:[2,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:165,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,167]},{5:[2,89],15:[2,89],17:[2,89],18:[2,89],20:[2,89],21:[2,89],24:[2,89],28:[2,89],30:[2,89],33:[2,89],39:[2,89],40:[2,89],41:[2,89],42:[2,89],43:[2,89],45:[2,89],46:[2,89],47:[2,89],48:[2,89],51:[2,89],52:[2,89],53:[2,89],54:[2,89],55:[2,89],66:[2,89],67:[2,89],68:[2,89],69:[2,89],70:[2,89],71:[2,89],74:[2,89],79:[2,89],80:[2,89],81:[2,89],82:[2,89],83:[2,89],85:[2,89],88:[2,89],91:[2,89],93:[2,89],94:[2,89],96:[2,89]},{5:[2,90],15:[2,90],17:[2,90],18:[2,90],20:[2,90],21:[2,90],24:[2,90],28:[2,90],30:[2,90],33:[2,90],39:[2,90],40:[2,90],41:[2,90],42:[2,90],43:[2,90],45:[2,90],46:[2,90],47:[2,90],48:[2,90],51:[2,90],52:[2,90],53:[2,90],54:[2,90],55:[2,90],66:[2,90],67:[2,90],68:[2,90],69:[2,90],70:[2,90],71:[2,90],74:[2,90],79:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],85:[2,90],88:[2,90],91:[2,90],93:[2,90],94:[2,90],96:[2,90]},{4:168,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,58],15:[2,58],17:[2,58],18:[2,58],20:[2,58],21:[2,58],24:[2,58],28:[2,58],30:[2,58],33:[2,58],39:[2,58],40:[2,58],41:[2,58],42:[2,58],43:[2,58],45:[2,58],46:[2,58],47:[2,58],48:[2,58],51:[2,58],52:[2,58],53:[2,58],54:[2,58],55:[2,58],66:[2,58],67:[2,58],68:[2,58],69:[2,58],70:[2,58],71:[2,58],74:[2,58],79:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],85:[2,58],88:[2,58],89:[2,58],91:[2,58],93:[2,58],94:[2,58],96:[2,58]},{5:[2,59],15:[2,59],17:[2,59],18:[2,59],20:[2,59],21:[2,59],24:[2,59],28:[2,59],30:[2,59],33:[2,59],39:[2,59],40:[2,59],41:[2,59],42:[2,59],43:[2,59],45:[2,59],46:[2,59],47:[2,59],48:[2,59],51:[2,59],52:[2,59],53:[2,59],54:[2,59],55:[2,59],66:[2,59],67:[2,59],68:[2,59],69:[2,59],70:[2,59],71:[2,59],74:[2,59],79:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],85:[2,59],88:[2,59],89:[2,59],91:[2,59],93:[2,59],94:[2,59],96:[2,59]},{54:[1,169]},{5:[2,91],15:[2,91],17:[2,91],18:[2,91],20:[2,91],21:[2,91],24:[2,91],28:[1,98],30:[2,91],33:[2,91],39:[2,91],40:[2,91],41:[2,91],42:[2,91],43:[2,91],45:[2,91],46:[2,91],47:[2,91],48:[2,91],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,91],55:[2,91],66:[2,91],67:[2,91],68:[2,91],69:[2,91],70:[2,91],71:[1,97],74:[2,91],79:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],85:[2,91],88:[2,91],91:[2,91],93:[2,91],94:[2,91],96:[2,91]},{5:[2,92],15:[2,92],17:[2,92],18:[2,92],20:[2,92],21:[2,92],24:[2,92],28:[1,98],30:[2,92],33:[2,92],39:[2,92],40:[2,92],41:[2,92],42:[2,92],43:[2,92],45:[2,92],46:[2,92],47:[2,92],48:[2,92],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,92],55:[2,92],66:[2,92],67:[2,92],68:[2,92],69:[2,92],70:[2,92],71:[1,97],74:[2,92],79:[2,92],80:[2,92],81:[2,92],82:[2,92],83:[2,92],85:[2,92],88:[2,92],91:[2,92],93:[2,92],94:[2,92],96:[2,92]},{5:[2,76],15:[2,76],17:[2,76],18:[2,76],20:[2,76],21:[2,76],24:[2,76],28:[2,76],30:[2,76],33:[2,76],39:[2,76],40:[2,76],41:[2,76],42:[2,76],43:[2,76],45:[2,76],46:[2,76],47:[2,76],48:[2,76],51:[2,76],52:[2,76],53:[2,76],54:[2,76],55:[2,76],66:[2,76],67:[2,76],68:[2,76],69:[2,76],70:[2,76],71:[2,76],74:[2,76],79:[2,76],80:[2,76],81:[2,76],82:[2,76],83:[2,76],85:[2,76],88:[2,76],91:[2,76],93:[2,76],94:[2,76],96:[2,76]},{5:[2,83],15:[2,83],17:[2,83],18:[2,83],20:[2,83],21:[2,83],24:[2,83],28:[2,83],30:[2,83],33:[2,83],39:[2,83],40:[2,83],41:[2,83],42:[2,83],43:[2,83],45:[2,83],46:[2,83],47:[2,83],48:[2,83],51:[2,83],52:[2,83],53:[2,83],54:[2,83],55:[2,83],66:[2,83],67:[2,83],68:[2,83],69:[2,83],70:[2,83],71:[2,83],74:[2,83],79:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],85:[2,83],88:[2,83],91:[2,83],93:[2,83],94:[2,83],96:[2,83]},{4:170,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,173],30:[1,171],32:172,33:[1,174]},{17:[2,31],30:[2,31],33:[2,31]},{55:[1,175]},{68:[1,176]},{4:178,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],55:[1,177],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:179,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:180,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,86],14:85,15:[2,86],17:[2,86],18:[2,86],20:[1,94],21:[2,86],24:[1,17],28:[2,86],30:[2,86],33:[2,86],34:37,35:90,39:[2,86],40:[2,86],41:[2,86],42:[2,86],43:[2,86],45:[2,86],46:[1,91],47:[1,92],48:[1,93],51:[2,86],52:[2,86],53:[2,86],54:[1,39],55:[2,86],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,86],69:[1,41],70:[1,42],71:[2,86],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,86],83:[1,54],85:[2,86],88:[2,86],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,100],15:[2,100],17:[2,100],18:[2,100],20:[2,100],21:[2,100],24:[2,100],28:[1,98],30:[2,100],33:[2,100],39:[2,100],40:[2,100],41:[2,100],42:[2,100],43:[2,100],45:[2,100],46:[2,100],47:[2,100],48:[2,100],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,100],55:[2,100],66:[2,100],67:[2,100],68:[2,100],69:[2,100],70:[2,100],71:[1,97],74:[2,100],79:[2,100],80:[2,100],81:[2,100],82:[2,100],83:[2,100],85:[2,100],88:[2,100],91:[2,100],93:[2,100],94:[2,100],96:[2,100]},{5:[2,102],15:[2,102],17:[2,102],18:[2,102],20:[2,102],21:[2,102],24:[2,102],28:[1,98],30:[2,102],33:[2,102],39:[2,102],40:[2,102],41:[2,102],42:[2,102],43:[2,102],45:[2,102],46:[2,102],47:[2,102],48:[2,102],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,102],55:[2,102],66:[2,102],67:[2,102],68:[2,102],69:[2,102],70:[2,102],71:[1,97],74:[2,102],79:[2,102],80:[2,102],81:[2,102],82:[2,102],83:[2,102],85:[2,102],88:[2,102],91:[2,102],93:[2,102],94:[2,102],96:[2,102]},{20:[1,181],98:[1,153]},{4:182,14:85,20:[1,19],24:[1,17],25:84,27:24,\n28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,122],14:85,15:[2,122],17:[2,122],18:[2,122],20:[1,94],21:[2,122],24:[1,17],28:[2,122],30:[2,122],33:[2,122],34:37,35:90,39:[2,122],40:[2,122],41:[2,122],42:[2,122],43:[2,122],45:[2,122],46:[1,91],47:[1,92],48:[1,93],51:[2,122],52:[2,122],53:[2,122],54:[1,39],55:[2,122],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,122],69:[1,41],70:[1,42],71:[2,122],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,122],83:[1,54],85:[2,122],88:[2,122],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,183]},{14:85,20:[1,185],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:184,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,186],98:[1,153]},{4:187,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,136],14:85,15:[2,136],17:[2,136],18:[2,136],20:[1,94],21:[2,136],24:[1,17],28:[2,136],30:[2,136],33:[2,136],34:37,35:90,39:[2,136],40:[2,136],41:[2,136],42:[2,136],43:[2,136],45:[2,136],46:[1,91],47:[1,92],48:[1,93],51:[2,136],52:[2,136],53:[2,136],54:[1,39],55:[2,136],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,136],69:[1,41],70:[1,42],71:[2,136],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,136],83:[1,54],85:[2,136],88:[2,136],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,188],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:189,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,190],98:[1,153]},{4:191,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,130],14:85,15:[2,130],17:[2,130],18:[2,130],20:[1,94],21:[2,130],24:[1,17],28:[2,130],30:[2,130],33:[2,130],34:37,35:90,39:[2,130],40:[2,130],41:[2,130],42:[2,130],43:[2,130],45:[2,130],46:[1,91],47:[1,92],48:[1,93],51:[2,130],52:[2,130],53:[2,130],54:[1,39],55:[2,130],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,130],69:[1,41],70:[1,42],71:[2,130],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,130],83:[1,54],85:[2,130],88:[2,130],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,192],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:193,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,194]},{50:195,51:[1,99],52:[1,100],53:[1,101]},{5:[2,108],15:[2,108],17:[2,108],18:[2,108],20:[2,108],21:[2,108],24:[2,108],28:[2,108],30:[2,108],33:[2,108],39:[2,108],40:[2,108],41:[2,108],42:[2,108],43:[2,108],45:[2,108],46:[2,108],47:[2,108],48:[2,108],51:[2,108],52:[2,108],53:[2,108],54:[2,108],55:[2,108],66:[2,108],67:[2,108],68:[2,108],69:[2,108],70:[2,108],71:[2,108],74:[2,108],79:[2,108],80:[2,108],81:[2,108],82:[2,108],83:[2,108],85:[2,108],88:[2,108],91:[2,108],93:[2,108],94:[2,108],96:[2,108]},{20:[2,61],24:[2,61],28:[2,61],43:[2,61],45:[2,61],46:[2,61],47:[2,61],51:[2,61],52:[2,61],53:[2,61],54:[2,61],66:[2,61],67:[2,61],69:[2,61],70:[2,61],74:[2,61],79:[2,61],80:[2,61],81:[2,61],83:[2,61],89:[2,61],91:[2,61],93:[2,61],94:[2,61],96:[2,61],98:[2,61]},{20:[2,62],24:[2,62],28:[2,62],43:[2,62],45:[2,62],46:[2,62],47:[2,62],51:[2,62],52:[2,62],53:[2,62],54:[2,62],66:[2,62],67:[2,62],69:[2,62],70:[2,62],74:[2,62],79:[2,62],80:[2,62],81:[2,62],83:[2,62],89:[2,62],91:[2,62],93:[2,62],94:[2,62],96:[2,62],98:[2,62]},{54:[1,196]},{85:[1,197]},{5:[2,110],15:[2,110],17:[2,110],18:[2,110],20:[2,110],21:[2,110],24:[2,110],28:[2,110],30:[2,110],33:[2,110],39:[2,110],40:[2,110],41:[2,110],42:[2,110],43:[2,110],45:[2,110],46:[2,110],47:[2,110],48:[2,110],51:[2,110],52:[2,110],53:[2,110],54:[2,110],55:[2,110],66:[2,110],67:[2,110],68:[2,110],69:[2,110],70:[2,110],71:[2,110],74:[2,110],79:[2,110],80:[2,110],81:[2,110],82:[2,110],83:[2,110],85:[2,110],88:[2,110],91:[2,110],93:[2,110],94:[2,110],96:[2,110]},{17:[1,198],85:[2,112]},{17:[2,114],85:[2,114]},{17:[2,116],85:[2,116],88:[1,199]},{15:[1,201],23:200,39:[1,66],40:[1,67],41:[1,68],42:[1,69]},{20:[2,127],24:[2,127],28:[2,127],43:[2,127],45:[2,127],46:[2,127],47:[2,127],51:[2,127],54:[2,127],66:[2,127],67:[2,127],69:[2,127],70:[2,127],74:[2,127],79:[2,127],80:[2,127],81:[2,127],83:[2,127],89:[2,127],91:[2,127],93:[2,127],94:[2,127],96:[2,127],98:[2,127]},{5:[1,202]},{5:[2,18]},{5:[2,15]},{5:[2,64],20:[1,79],23:203,24:[2,64],28:[2,64],39:[1,66],40:[1,67],41:[1,68],42:[1,69],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],51:[2,64],52:[2,64],53:[2,64],54:[2,64],66:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64],74:[2,64],79:[2,64],80:[2,64],81:[2,64],83:[2,64],91:[2,64],93:[2,64],94:[2,64],96:[2,64],97:80,98:[1,81]},{5:[2,40],17:[2,40],23:204,39:[1,66],40:[1,67],41:[1,68],42:[1,69],85:[2,40],88:[2,40]},{1:[2,10]},{5:[2,14]},{17:[1,206],21:[1,205]},{17:[1,208],21:[1,207]},{4:209,14:85,20:[1,19],22:210,24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,145],98:[2,145]},{5:[2,43],14:85,15:[2,43],17:[2,43],18:[2,43],20:[1,94],21:[2,43],24:[1,17],28:[2,43],30:[2,43],33:[2,43],34:37,35:90,39:[2,43],40:[2,43],41:[2,43],42:[2,43],43:[2,43],45:[2,43],46:[1,91],47:[1,92],48:[1,93],51:[2,43],52:[2,43],53:[2,43],54:[1,39],55:[2,43],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,43],69:[1,41],70:[1,42],71:[2,43],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,43],83:[1,54],85:[2,43],88:[2,43],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,44],14:85,15:[2,44],17:[2,44],18:[2,44],20:[1,94],21:[2,44],24:[1,17],28:[2,44],30:[2,44],33:[2,44],34:37,35:90,39:[2,44],40:[2,44],41:[2,44],42:[2,44],43:[2,44],45:[2,44],46:[1,91],47:[1,92],48:[1,93],51:[2,44],52:[2,44],53:[2,44],54:[1,39],55:[2,44],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,44],69:[1,41],70:[1,42],71:[2,44],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,44],83:[1,54],85:[2,44],88:[2,44],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,208],21:[1,211]},{17:[1,206],21:[1,212]},{5:[2,21],17:[1,213]},{5:[2,22],17:[2,22]},{4:214,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,49],15:[2,49],17:[2,49],18:[2,49],20:[2,49],21:[2,49],24:[2,49],28:[1,98],30:[2,49],33:[2,49],39:[2,49],40:[2,49],41:[2,49],42:[2,49],43:[2,49],45:[2,49],46:[2,49],47:[2,49],48:[2,49],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,49],55:[2,49],66:[2,49],67:[2,49],68:[2,49],69:[2,49],70:[2,49],71:[1,97],74:[2,49],79:[2,49],80:[2,49],81:[2,49],82:[2,49],83:[2,49],85:[2,49],88:[2,49],91:[2,49],93:[2,49],94:[2,49],96:[2,49]},{5:[2,50],15:[2,50],17:[2,50],18:[2,50],20:[2,50],21:[2,50],24:[2,50],28:[1,98],30:[2,50],33:[2,50],39:[2,50],40:[2,50],41:[2,50],42:[2,50],43:[2,50],45:[2,50],46:[2,50],47:[2,50],48:[2,50],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,50],55:[2,50],66:[2,50],67:[2,50],68:[2,50],69:[2,50],70:[2,50],71:[1,97],74:[2,50],79:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],85:[2,50],88:[2,50],91:[2,50],93:[2,50],94:[2,50],96:[2,50]},{5:[2,52],14:85,15:[2,52],17:[2,52],18:[2,52],20:[1,19],21:[2,52],24:[1,17],25:84,27:24,28:[1,30],30:[2,52],31:25,33:[2,52],34:37,35:27,36:26,37:215,39:[2,52],40:[2,52],41:[2,52],42:[2,52],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,52],51:[2,52],52:[2,52],53:[2,52],54:[1,39],55:[2,52],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,52],69:[1,41],70:[1,42],71:[2,52],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,52],83:[1,54],85:[2,52],88:[2,52],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,53],15:[2,53],17:[2,53],18:[2,53],20:[2,53],21:[2,53],24:[2,53],28:[1,98],30:[2,53],33:[2,53],39:[2,53],40:[2,53],41:[2,53],42:[2,53],43:[2,53],45:[2,53],46:[2,53],47:[2,53],48:[2,53],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,53],55:[2,53],66:[2,53],67:[2,53],68:[2,53],69:[2,53],70:[2,53],71:[1,97],74:[2,53],79:[2,53],80:[2,53],81:[2,53],82:[2,53],83:[2,53],85:[2,53],88:[2,53],91:[2,53],93:[2,53],94:[2,53],96:[2,53]},{21:[1,167]},{4:216,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,73],15:[2,73],17:[2,73],18:[2,73],20:[2,73],21:[2,73],24:[2,73],28:[2,73],30:[2,73],33:[2,73],39:[2,73],40:[2,73],41:[2,73],42:[2,73],43:[2,73],45:[2,73],46:[2,73],47:[2,73],48:[2,73],51:[2,73],52:[2,73],53:[2,73],54:[2,73],55:[2,73],66:[2,73],67:[2,73],68:[2,73],69:[2,73],70:[2,73],71:[2,73],74:[2,73],79:[2,73],80:[2,73],81:[2,73],82:[2,73],83:[2,73],85:[2,73],88:[2,73],91:[2,73],93:[2,73],94:[2,73],96:[2,73]},{30:[1,217]},{4:218,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{30:[1,219]},{5:[2,25],15:[2,25],17:[2,25],18:[2,25],20:[2,25],21:[2,25],24:[2,25],28:[2,25],30:[2,25],33:[2,25],39:[2,25],40:[2,25],41:[2,25],42:[2,25],43:[2,25],45:[2,25],46:[2,25],47:[2,25],48:[2,25],51:[2,25],52:[2,25],53:[2,25],54:[2,25],55:[2,25],66:[2,25],67:[2,25],68:[2,25],69:[2,25],70:[2,25],71:[2,25],74:[2,25],79:[2,25],80:[2,25],81:[2,25],82:[2,25],83:[2,25],85:[2,25],88:[2,25],91:[2,25],93:[2,25],94:[2,25],96:[2,25]},{4:108,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],29:220,31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:221,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,33:[1,222],34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,223],20:[2,27],24:[2,27],28:[2,27],43:[2,27],45:[2,27],46:[2,27],47:[2,27],54:[2,27],66:[2,27],67:[2,27],69:[2,27],70:[2,27],74:[2,27],79:[2,27],80:[2,27],81:[2,27],83:[2,27],89:[2,27],91:[2,27],93:[2,27],94:[2,27],96:[2,27]},{5:[2,74],15:[2,74],17:[2,74],18:[2,74],20:[2,74],21:[2,74],24:[2,74],28:[2,74],30:[2,74],33:[2,74],39:[2,74],40:[2,74],41:[2,74],42:[2,74],43:[2,74],45:[2,74],46:[2,74],47:[2,74],48:[2,74],51:[2,74],52:[2,74],53:[2,74],54:[2,74],55:[2,74],66:[2,74],67:[2,74],68:[2,74],69:[2,74],70:[2,74],71:[2,74],74:[2,74],79:[2,74],80:[2,74],81:[2,74],82:[2,74],83:[2,74],85:[2,74],88:[2,74],91:[2,74],93:[2,74],94:[2,74],96:[2,74]},{5:[2,75],15:[2,75],17:[2,75],18:[2,75],20:[2,75],21:[2,75],24:[2,75],28:[2,75],30:[2,75],33:[2,75],39:[2,75],40:[2,75],41:[2,75],42:[2,75],43:[2,75],45:[2,75],46:[2,75],47:[2,75],48:[2,75],51:[2,75],52:[2,75],53:[2,75],54:[2,75],55:[2,75],66:[2,75],67:[2,75],68:[2,75],69:[2,75],70:[2,75],71:[2,75],74:[2,75],79:[2,75],80:[2,75],81:[2,75],82:[2,75],83:[2,75],85:[2,75],88:[2,75],91:[2,75],93:[2,75],94:[2,75],96:[2,75]},{54:[1,224]},{55:[1,225]},{55:[1,226]},{30:[1,227]},{4:228,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,229]},{45:[1,230]},{5:[2,125],14:85,15:[2,125],17:[2,125],18:[2,125],20:[1,94],21:[2,125],24:[1,17],28:[2,125],30:[2,125],33:[2,125],34:37,35:90,39:[2,125],40:[2,125],41:[2,125],42:[2,125],43:[2,125],45:[2,125],46:[1,91],47:[1,92],48:[1,93],51:[2,125],52:[2,125],53:[2,125],54:[1,39],55:[2,125],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,125],69:[1,41],70:[1,42],71:[2,125],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,125],83:[1,54],85:[2,125],88:[2,125],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:231,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:232,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,233]},{4:234,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,138],14:85,15:[2,138],17:[2,138],18:[2,138],20:[1,94],21:[2,138],24:[1,17],28:[2,138],30:[2,138],33:[2,138],34:37,35:90,39:[2,138],40:[2,138],41:[2,138],42:[2,138],43:[2,138],45:[2,138],46:[1,91],47:[1,92],48:[1,93],51:[2,138],52:[2,138],53:[2,138],54:[1,39],55:[2,138],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,138],69:[1,41],70:[1,42],71:[2,138],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,138],83:[1,54],85:[2,138],88:[2,138],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:235,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,236]},{4:237,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,132],14:85,15:[2,132],17:[2,132],18:[2,132],20:[1,94],21:[2,132],24:[1,17],28:[2,132],30:[2,132],33:[2,132],34:37,35:90,39:[2,132],40:[2,132],41:[2,132],42:[2,132],43:[2,132],45:[2,132],46:[1,91],47:[1,92],48:[1,93],51:[2,132],52:[2,132],53:[2,132],54:[1,39],55:[2,132],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,132],69:[1,41],70:[1,42],71:[2,132],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,132],83:[1,54],85:[2,132],88:[2,132],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:238,24:[1,17]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:239,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[1,240],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:241,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,109],15:[2,109],17:[2,109],18:[2,109],20:[2,109],21:[2,109],24:[2,109],28:[2,109],30:[2,109],33:[2,109],39:[2,109],40:[2,109],41:[2,109],42:[2,109],43:[2,109],45:[2,109],46:[2,109],47:[2,109],48:[2,109],51:[2,109],52:[2,109],53:[2,109],54:[2,109],55:[2,109],66:[2,109],67:[2,109],68:[2,109],69:[2,109],70:[2,109],71:[2,109],74:[2,109],79:[2,109],80:[2,109],81:[2,109],82:[2,109],83:[2,109],85:[2,109],88:[2,109],91:[2,109],93:[2,109],94:[2,109],96:[2,109]},{4:242,13:140,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],87:243,89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:244,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:147,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:245,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{1:[2,12]},{4:246,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:247,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,139],15:[2,139],17:[2,139],18:[2,139],20:[2,139],21:[2,139],24:[2,139],28:[2,139],30:[2,139],33:[2,139],39:[2,139],40:[2,139],41:[2,139],42:[2,139],43:[2,139],45:[2,139],46:[2,139],47:[2,139],48:[2,139],51:[2,139],52:[2,139],53:[2,139],54:[2,139],55:[2,139],66:[2,139],67:[2,139],68:[2,139],69:[2,139],70:[2,139],71:[2,139],74:[2,139],79:[2,139],80:[2,139],81:[2,139],82:[2,139],83:[2,139],85:[2,139],88:[2,139],91:[2,139],93:[2,139],94:[2,139],96:[2,139]},{4:248,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,119],15:[2,119],17:[2,119],18:[2,119],20:[2,119],21:[2,119],24:[2,119],28:[2,119],30:[2,119],33:[2,119],39:[2,119],40:[2,119],41:[2,119],42:[2,119],43:[2,119],45:[2,119],46:[2,119],47:[2,119],48:[2,119],50:249,51:[1,99],52:[1,100],53:[1,101],54:[2,119],55:[2,119],66:[2,119],67:[2,119],68:[2,119],69:[2,119],70:[2,119],71:[2,119],74:[2,119],79:[2,119],80:[2,119],81:[2,119],82:[2,119],83:[2,119],85:[2,119],88:[2,119],91:[2,119],93:[2,119],94:[2,119],96:[2,119]},{4:250,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,208],21:[1,251]},{17:[1,206],21:[1,252]},{5:[2,16]},{5:[2,17]},{20:[1,160],25:253},{17:[1,166]},{5:[2,51],15:[2,51],17:[2,51],18:[2,51],20:[2,51],21:[2,51],24:[2,51],28:[1,98],30:[2,51],33:[2,51],39:[2,51],40:[2,51],41:[2,51],42:[2,51],43:[2,51],45:[2,51],46:[2,51],47:[2,51],48:[2,51],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,51],55:[2,51],66:[2,51],67:[2,51],68:[2,51],69:[2,51],70:[2,51],71:[1,97],74:[2,51],79:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],85:[2,51],88:[2,51],91:[2,51],93:[2,51],94:[2,51],96:[2,51]},{21:[1,254]},{5:[2,34],15:[2,34],17:[2,34],18:[2,34],20:[2,34],21:[2,34],24:[2,34],28:[2,34],30:[2,34],33:[2,34],39:[2,34],40:[2,34],41:[2,34],42:[2,34],43:[2,34],45:[2,34],46:[2,34],47:[2,34],48:[2,34],51:[2,34],52:[2,34],53:[2,34],54:[2,34],55:[2,34],66:[2,34],67:[2,34],68:[2,34],69:[2,34],70:[2,34],71:[2,34],74:[2,34],79:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],85:[2,34],88:[2,34],91:[2,34],93:[2,34],94:[2,34],96:[2,34]},{55:[1,255]},{5:[2,33],15:[2,33],17:[2,33],18:[2,33],20:[2,33],21:[2,33],24:[2,33],28:[2,33],30:[2,33],33:[2,33],39:[2,33],40:[2,33],41:[2,33],42:[2,33],43:[2,33],45:[2,33],46:[2,33],47:[2,33],48:[2,33],51:[2,33],52:[2,33],53:[2,33],54:[2,33],55:[2,33],66:[2,33],67:[2,33],68:[2,33],69:[2,33],70:[2,33],71:[2,33],74:[2,33],79:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],85:[2,33],88:[2,33],91:[2,33],93:[2,33],94:[2,33],96:[2,33]},{17:[1,257],30:[1,256]},{17:[2,32],30:[2,32],33:[2,32]},{17:[1,258],20:[2,28],24:[2,28],28:[2,28],43:[2,28],45:[2,28],46:[2,28],47:[2,28],54:[2,28],66:[2,28],67:[2,28],69:[2,28],70:[2,28],74:[2,28],79:[2,28],80:[2,28],81:[2,28],83:[2,28],89:[2,28],91:[2,28],93:[2,28],94:[2,28],96:[2,28]},{20:[2,29],24:[2,29],28:[2,29],43:[2,29],45:[2,29],46:[2,29],47:[2,29],54:[2,29],66:[2,29],67:[2,29],69:[2,29],70:[2,29],74:[2,29],79:[2,29],80:[2,29],81:[2,29],83:[2,29],89:[2,29],91:[2,29],93:[2,29],94:[2,29],96:[2,29]},{4:260,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],55:[1,259],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,261]},{5:[2,81],15:[2,81],17:[2,81],18:[2,81],20:[2,81],21:[2,81],24:[2,81],28:[2,81],30:[2,81],33:[2,81],39:[2,81],40:[2,81],41:[2,81],42:[2,81],43:[2,81],45:[2,81],46:[2,81],47:[2,81],48:[2,81],51:[2,81],52:[2,81],53:[2,81],54:[2,81],55:[2,81],66:[2,81],67:[2,81],68:[2,81],69:[2,81],70:[2,81],71:[2,81],74:[2,81],79:[2,81],80:[2,81],81:[2,81],82:[2,81],83:[2,81],85:[2,81],88:[2,81],91:[2,81],93:[2,81],94:[2,81],96:[2,81]},{54:[1,262]},{21:[1,263]},{5:[2,121],15:[2,121],17:[2,121],18:[2,121],20:[2,121],21:[2,121],24:[2,121],28:[2,121],30:[2,121],33:[2,121],39:[2,121],40:[2,121],41:[2,121],42:[2,121],43:[2,121],45:[2,121],46:[2,121],47:[2,121],48:[2,121],51:[2,121],52:[2,121],53:[2,121],54:[2,121],55:[2,121],66:[2,121],67:[2,121],68:[2,121],69:[2,121],70:[2,121],71:[2,121],74:[2,121],79:[2,121],80:[2,121],81:[2,121],82:[2,121],83:[2,121],85:[2,121],88:[2,121],91:[2,121],93:[2,121],94:[2,121],96:[2,121]},{76:264,89:[1,29]},{17:[1,166],21:[1,265]},{21:[1,266]},{5:[2,135],15:[2,135],17:[2,135],18:[2,135],20:[2,135],21:[2,135],24:[2,135],28:[2,135],30:[2,135],33:[2,135],39:[2,135],40:[2,135],41:[2,135],42:[2,135],43:[2,135],45:[2,135],46:[2,135],47:[2,135],48:[2,135],51:[2,135],52:[2,135],53:[2,135],54:[2,135],55:[2,135],66:[2,135],67:[2,135],68:[2,135],69:[2,135],70:[2,135],71:[2,135],74:[2,135],79:[2,135],80:[2,135],81:[2,135],82:[2,135],83:[2,135],85:[2,135],88:[2,135],91:[2,135],93:[2,135],94:[2,135],96:[2,135]},{17:[1,166],21:[1,267]},{21:[1,268]},{5:[2,129],15:[2,129],17:[2,129],18:[2,129],20:[2,129],21:[2,129],24:[2,129],28:[2,129],30:[2,129],33:[2,129],39:[2,129],40:[2,129],41:[2,129],42:[2,129],43:[2,129],45:[2,129],46:[2,129],47:[2,129],48:[2,129],51:[2,129],52:[2,129],53:[2,129],54:[2,129],55:[2,129],66:[2,129],67:[2,129],68:[2,129],69:[2,129],70:[2,129],71:[2,129],74:[2,129],79:[2,129],80:[2,129],81:[2,129],82:[2,129],83:[2,129],85:[2,129],88:[2,129],91:[2,129],93:[2,129],94:[2,129],96:[2,129]},{17:[1,166],21:[1,269]},{15:[1,270]},{14:85,20:[1,94],24:[1,17],34:37,35:90,46:[1,91],47:[1,92],48:[1,93],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[1,271],83:[1,54],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,107],15:[2,107],17:[2,107],18:[2,107],20:[2,107],21:[2,107],24:[2,107],28:[2,107],30:[2,107],33:[2,107],39:[2,107],40:[2,107],41:[2,107],42:[2,107],43:[2,107],45:[2,107],46:[2,107],47:[2,107],48:[2,107],51:[2,107],52:[2,107],53:[2,107],54:[2,107],55:[2,107],66:[2,107],67:[2,107],68:[2,107],69:[2,107],70:[2,107],71:[2,107],74:[2,107],79:[2,107],80:[2,107],81:[2,107],82:[2,107],83:[2,107],85:[2,107],88:[2,107],91:[2,107],93:[2,107],94:[2,107],96:[2,107]},{55:[1,272]},{15:[1,201],23:200,39:[1,66],40:[1,67],41:[1,68],42:[1,69],85:[2,111]},{17:[2,113],85:[2,113]},{17:[2,115],85:[2,115]},{17:[2,41],85:[2,41],88:[2,41]},{5:[2,19]},{5:[2,42],17:[2,42],85:[2,42],88:[2,42]},{17:[2,147],21:[2,147]},{5:[2,118],15:[2,118],17:[2,118],18:[2,118],20:[2,118],21:[2,118],24:[2,118],28:[2,118],30:[2,118],33:[2,118],39:[2,118],40:[2,118],41:[2,118],42:[2,118],43:[2,118],45:[2,118],46:[2,118],47:[2,118],48:[2,118],51:[2,118],52:[2,118],53:[2,118],54:[2,118],55:[2,118],66:[2,118],67:[2,118],68:[2,118],69:[2,118],70:[2,118],71:[2,118],74:[2,118],79:[2,118],80:[2,118],81:[2,118],82:[2,118],83:[2,118],85:[2,118],88:[2,118],91:[2,118],93:[2,118],94:[2,118],96:[2,118]},{17:[2,148],21:[2,148]},{5:[2,140],15:[2,140],17:[2,140],18:[2,140],20:[2,140],21:[2,140],24:[2,140],28:[2,140],30:[2,140],33:[2,140],39:[2,140],40:[2,140],41:[2,140],42:[2,140],43:[2,140],45:[2,140],46:[2,140],47:[2,140],48:[2,140],51:[2,140],52:[2,140],53:[2,140],54:[2,140],55:[2,140],66:[2,140],67:[2,140],68:[2,140],69:[2,140],70:[2,140],71:[2,140],74:[2,140],79:[2,140],80:[2,140],81:[2,140],82:[2,140],83:[2,140],85:[2,140],88:[2,140],91:[2,140],93:[2,140],94:[2,140],96:[2,140]},{5:[2,144],15:[2,144],17:[2,144],18:[2,144],20:[2,144],21:[2,144],24:[2,144],28:[2,144],30:[2,144],33:[2,144],39:[2,144],40:[2,144],41:[2,144],42:[2,144],43:[2,144],45:[2,144],46:[2,144],47:[2,144],48:[2,144],51:[2,144],52:[2,144],53:[2,144],54:[2,144],55:[2,144],66:[2,144],67:[2,144],68:[2,144],69:[2,144],70:[2,144],71:[2,144],74:[2,144],79:[2,144],80:[2,144],81:[2,144],82:[2,144],83:[2,144],85:[2,144],88:[2,144],91:[2,144],93:[2,144],94:[2,144],96:[2,144]},{5:[2,23],17:[2,23]},{5:[2,24],15:[2,24],17:[2,24],18:[2,24],20:[2,24],21:[2,24],24:[2,24],28:[2,24],30:[2,24],33:[2,24],39:[2,24],40:[2,24],41:[2,24],42:[2,24],43:[2,24],45:[2,24],46:[2,24],47:[2,24],48:[2,24],51:[2,24],52:[2,24],53:[2,24],54:[2,24],55:[2,24],66:[2,24],67:[2,24],68:[2,24],69:[2,24],70:[2,24],71:[2,24],74:[2,24],79:[2,24],80:[2,24],81:[2,24],82:[2,24],83:[2,24],85:[2,24],88:[2,24],91:[2,24],93:[2,24],94:[2,24],96:[2,24]},{5:[2,60],15:[2,60],17:[2,60],18:[2,60],20:[2,60],21:[2,60],24:[2,60],28:[2,60],30:[2,60],33:[2,60],39:[2,60],40:[2,60],41:[2,60],42:[2,60],43:[2,60],45:[2,60],46:[2,60],47:[2,60],48:[2,60],51:[2,60],52:[2,60],53:[2,60],54:[2,60],55:[2,60],66:[2,60],67:[2,60],68:[2,60],69:[2,60],70:[2,60],71:[2,60],74:[2,60],79:[2,60],80:[2,60],81:[2,60],82:[2,60],83:[2,60],85:[2,60],88:[2,60],89:[2,60],91:[2,60],93:[2,60],94:[2,60],96:[2,60]},{5:[2,26],15:[2,26],17:[2,26],18:[2,26],20:[2,26],21:[2,26],24:[2,26],28:[2,26],30:[2,26],33:[2,26],39:[2,26],40:[2,26],41:[2,26],42:[2,26],43:[2,26],45:[2,26],46:[2,26],47:[2,26],48:[2,26],51:[2,26],52:[2,26],53:[2,26],54:[2,26],55:[2,26],66:[2,26],67:[2,26],68:[2,26],69:[2,26],70:[2,26],71:[2,26],74:[2,26],79:[2,26],80:[2,26],81:[2,26],82:[2,26],83:[2,26],85:[2,26],88:[2,26],91:[2,26],93:[2,26],94:[2,26],96:[2,26]},{4:221,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,30],24:[2,30],28:[2,30],43:[2,30],45:[2,30],46:[2,30],47:[2,30],54:[2,30],66:[2,30],67:[2,30],69:[2,30],70:[2,30],74:[2,30],79:[2,30],80:[2,30],81:[2,30],83:[2,30],89:[2,30],91:[2,30],93:[2,30],94:[2,30],96:[2,30]},{5:[2,77],15:[2,77],17:[2,77],18:[2,77],20:[2,77],21:[2,77],24:[2,77],28:[2,77],30:[2,77],33:[2,77],39:[2,77],40:[2,77],41:[2,77],42:[2,77],43:[2,77],45:[2,77],46:[2,77],47:[2,77],48:[2,77],51:[2,77],52:[2,77],53:[2,77],54:[2,77],55:[2,77],66:[2,77],67:[2,77],68:[2,77],69:[2,77],70:[2,77],71:[2,77],74:[2,77],79:[2,77],80:[2,77],81:[2,77],82:[2,77],83:[2,77],85:[2,77],88:[2,77],91:[2,77],93:[2,77],94:[2,77],96:[2,77]},{55:[1,273]},{4:275,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],\n55:[1,274],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:276,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,141],15:[2,141],17:[2,141],18:[2,141],20:[2,141],21:[2,141],24:[2,141],28:[2,141],30:[2,141],33:[2,141],39:[2,141],40:[2,141],41:[2,141],42:[2,141],43:[2,141],45:[2,141],46:[2,141],47:[2,141],48:[2,141],51:[2,141],52:[2,141],53:[2,141],54:[2,141],55:[2,141],66:[2,141],67:[2,141],68:[2,141],69:[2,141],70:[2,141],71:[2,141],74:[2,141],79:[2,141],80:[2,141],81:[2,141],82:[2,141],83:[2,141],85:[2,141],88:[2,141],91:[2,141],93:[2,141],94:[2,141],96:[2,141]},{55:[1,277]},{5:[2,126],15:[2,126],17:[2,126],18:[2,126],20:[2,126],21:[2,126],24:[2,126],28:[2,126],30:[2,126],33:[2,126],39:[2,126],40:[2,126],41:[2,126],42:[2,126],43:[2,126],45:[2,126],46:[2,126],47:[2,126],48:[2,126],51:[2,126],52:[2,126],53:[2,126],54:[2,126],55:[2,126],66:[2,126],67:[2,126],68:[2,126],69:[2,126],70:[2,126],71:[2,126],74:[2,126],79:[2,126],80:[2,126],81:[2,126],82:[2,126],83:[2,126],85:[2,126],88:[2,126],91:[2,126],93:[2,126],94:[2,126],96:[2,126]},{5:[2,142],15:[2,142],17:[2,142],18:[2,142],20:[2,142],21:[2,142],24:[2,142],28:[2,142],30:[2,142],33:[2,142],39:[2,142],40:[2,142],41:[2,142],42:[2,142],43:[2,142],45:[2,142],46:[2,142],47:[2,142],48:[2,142],51:[2,142],52:[2,142],53:[2,142],54:[2,142],55:[2,142],66:[2,142],67:[2,142],68:[2,142],69:[2,142],70:[2,142],71:[2,142],74:[2,142],79:[2,142],80:[2,142],81:[2,142],82:[2,142],83:[2,142],85:[2,142],88:[2,142],91:[2,142],93:[2,142],94:[2,142],96:[2,142]},{5:[2,137],15:[2,137],17:[2,137],18:[2,137],20:[2,137],21:[2,137],24:[2,137],28:[2,137],30:[2,137],33:[2,137],39:[2,137],40:[2,137],41:[2,137],42:[2,137],43:[2,137],45:[2,137],46:[2,137],47:[2,137],48:[2,137],51:[2,137],52:[2,137],53:[2,137],54:[2,137],55:[2,137],66:[2,137],67:[2,137],68:[2,137],69:[2,137],70:[2,137],71:[2,137],74:[2,137],79:[2,137],80:[2,137],81:[2,137],82:[2,137],83:[2,137],85:[2,137],88:[2,137],91:[2,137],93:[2,137],94:[2,137],96:[2,137]},{5:[2,143],15:[2,143],17:[2,143],18:[2,143],20:[2,143],21:[2,143],24:[2,143],28:[2,143],30:[2,143],33:[2,143],39:[2,143],40:[2,143],41:[2,143],42:[2,143],43:[2,143],45:[2,143],46:[2,143],47:[2,143],48:[2,143],51:[2,143],52:[2,143],53:[2,143],54:[2,143],55:[2,143],66:[2,143],67:[2,143],68:[2,143],69:[2,143],70:[2,143],71:[2,143],74:[2,143],79:[2,143],80:[2,143],81:[2,143],82:[2,143],83:[2,143],85:[2,143],88:[2,143],91:[2,143],93:[2,143],94:[2,143],96:[2,143]},{5:[2,131],15:[2,131],17:[2,131],18:[2,131],20:[2,131],21:[2,131],24:[2,131],28:[2,131],30:[2,131],33:[2,131],39:[2,131],40:[2,131],41:[2,131],42:[2,131],43:[2,131],45:[2,131],46:[2,131],47:[2,131],48:[2,131],51:[2,131],52:[2,131],53:[2,131],54:[2,131],55:[2,131],66:[2,131],67:[2,131],68:[2,131],69:[2,131],70:[2,131],71:[2,131],74:[2,131],79:[2,131],80:[2,131],81:[2,131],82:[2,131],83:[2,131],85:[2,131],88:[2,131],91:[2,131],93:[2,131],94:[2,131],96:[2,131]},{4:278,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,106],15:[2,106],17:[2,106],18:[2,106],20:[2,106],21:[2,106],24:[2,106],28:[2,106],30:[2,106],33:[2,106],39:[2,106],40:[2,106],41:[2,106],42:[2,106],43:[2,106],45:[2,106],46:[2,106],47:[2,106],48:[2,106],51:[2,106],52:[2,106],53:[2,106],54:[2,106],55:[2,106],66:[2,106],67:[2,106],68:[2,106],69:[2,106],70:[2,106],71:[2,106],74:[2,106],79:[2,106],80:[2,106],81:[2,106],82:[2,106],83:[2,106],85:[2,106],88:[2,106],91:[2,106],93:[2,106],94:[2,106],96:[2,106]},{20:[2,63],24:[2,63],28:[2,63],43:[2,63],45:[2,63],46:[2,63],47:[2,63],51:[2,63],52:[2,63],53:[2,63],54:[2,63],66:[2,63],67:[2,63],69:[2,63],70:[2,63],74:[2,63],79:[2,63],80:[2,63],81:[2,63],83:[2,63],89:[2,63],91:[2,63],93:[2,63],94:[2,63],96:[2,63],98:[2,63]},{5:[2,78],15:[2,78],17:[2,78],18:[2,78],20:[2,78],21:[2,78],24:[2,78],28:[2,78],30:[2,78],33:[2,78],39:[2,78],40:[2,78],41:[2,78],42:[2,78],43:[2,78],45:[2,78],46:[2,78],47:[2,78],48:[2,78],51:[2,78],52:[2,78],53:[2,78],54:[2,78],55:[2,78],66:[2,78],67:[2,78],68:[2,78],69:[2,78],70:[2,78],71:[2,78],74:[2,78],79:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],85:[2,78],88:[2,78],91:[2,78],93:[2,78],94:[2,78],96:[2,78]},{5:[2,79],15:[2,79],17:[2,79],18:[2,79],20:[2,79],21:[2,79],24:[2,79],28:[2,79],30:[2,79],33:[2,79],39:[2,79],40:[2,79],41:[2,79],42:[2,79],43:[2,79],45:[2,79],46:[2,79],47:[2,79],48:[2,79],51:[2,79],52:[2,79],53:[2,79],54:[2,79],55:[2,79],66:[2,79],67:[2,79],68:[2,79],69:[2,79],70:[2,79],71:[2,79],74:[2,79],79:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],85:[2,79],88:[2,79],91:[2,79],93:[2,79],94:[2,79],96:[2,79]},{55:[1,279]},{55:[1,280]},{14:85,20:[1,282],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:281,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{55:[1,283]},{5:[2,80],15:[2,80],17:[2,80],18:[2,80],20:[2,80],21:[2,80],24:[2,80],28:[2,80],30:[2,80],33:[2,80],39:[2,80],40:[2,80],41:[2,80],42:[2,80],43:[2,80],45:[2,80],46:[2,80],47:[2,80],48:[2,80],51:[2,80],52:[2,80],53:[2,80],54:[2,80],55:[2,80],66:[2,80],67:[2,80],68:[2,80],69:[2,80],70:[2,80],71:[2,80],74:[2,80],79:[2,80],80:[2,80],81:[2,80],82:[2,80],83:[2,80],85:[2,80],88:[2,80],91:[2,80],93:[2,80],94:[2,80],96:[2,80]},{5:[2,82],15:[2,82],17:[2,82],18:[2,82],20:[2,82],21:[2,82],24:[2,82],28:[2,82],30:[2,82],33:[2,82],39:[2,82],40:[2,82],41:[2,82],42:[2,82],43:[2,82],45:[2,82],46:[2,82],47:[2,82],48:[2,82],51:[2,82],52:[2,82],53:[2,82],54:[2,82],55:[2,82],66:[2,82],67:[2,82],68:[2,82],69:[2,82],70:[2,82],71:[2,82],74:[2,82],79:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],85:[2,82],88:[2,82],91:[2,82],93:[2,82],94:[2,82],96:[2,82]},{5:[2,123],14:85,15:[2,123],17:[2,123],18:[2,123],20:[1,94],21:[2,123],24:[1,17],28:[2,123],30:[2,123],33:[2,123],34:37,35:90,39:[2,123],40:[2,123],41:[2,123],42:[2,123],43:[2,123],45:[2,123],46:[1,91],47:[1,92],48:[1,93],51:[2,123],52:[2,123],53:[2,123],54:[1,39],55:[2,123],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,123],69:[1,41],70:[1,42],71:[2,123],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,123],83:[1,54],85:[2,123],88:[2,123],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:284,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{50:285,51:[1,99],52:[1,100],53:[1,101]},{17:[1,166],21:[1,286]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:287,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,124],15:[2,124],17:[2,124],18:[2,124],20:[2,124],21:[2,124],24:[2,124],28:[2,124],30:[2,124],33:[2,124],39:[2,124],40:[2,124],41:[2,124],42:[2,124],43:[2,124],45:[2,124],46:[2,124],47:[2,124],48:[2,124],51:[2,124],52:[2,124],53:[2,124],54:[2,124],55:[2,124],66:[2,124],67:[2,124],68:[2,124],69:[2,124],70:[2,124],71:[2,124],74:[2,124],79:[2,124],80:[2,124],81:[2,124],82:[2,124],83:[2,124],85:[2,124],88:[2,124],91:[2,124],93:[2,124],94:[2,124],96:[2,124]},{5:[2,105],14:85,15:[2,105],17:[2,105],18:[2,105],20:[1,94],21:[2,105],24:[1,17],28:[2,105],30:[2,105],33:[2,105],34:37,35:90,39:[2,105],40:[2,105],41:[2,105],42:[2,105],43:[2,105],45:[2,105],46:[1,91],47:[1,92],48:[1,93],51:[2,105],52:[2,105],53:[2,105],54:[1,39],55:[2,105],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,105],69:[1,41],70:[1,42],71:[2,105],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,105],83:[1,54],85:[2,105],88:[2,105],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]}],defaultActions:{13:[2,13],59:[2,103],60:[2,104],61:[2,1],70:[2,2],71:[2,3],72:[2,4],73:[2,5],74:[2,6],75:[2,7],76:[2,8],77:[2,9],82:[2,11],83:[2,149],144:[2,18],145:[2,15],148:[2,10],149:[2,14],202:[2,12],211:[2,16],212:[2,17],246:[2,19]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=r.lexer.lex()||1,"number"!=typeof e&&(e=r.symbols_[e]||e),e}var r=this,n=[0],i=[null],a=[],o=this.table,s="",u=0,c=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;a.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,m,d,g,y,v,b,x,_,w={};;){if(d=n[n.length-1],this.defaultActions[d]?g=this.defaultActions[d]:(null!==f&&"undefined"!=typeof f||(f=t()),g=o[d]&&o[d][f]),"undefined"==typeof g||!g.length||!g[0]){var M="";if(!l){_=[];for(v in o[d])this.terminals_[v]&&v>2&&_.push("\'"+this.terminals_[v]+"\'");M=this.lexer.showPosition?"Parse error on line "+(u+1)+":\\n"+this.lexer.showPosition()+"\\nExpecting "+_.join(", ")+", got \'"+(this.terminals_[f]||f)+"\'":"Parse error on line "+(u+1)+": Unexpected "+(1==f?"end of input":"\'"+(this.terminals_[f]||f)+"\'"),this.parseError(M,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:h,expected:_})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+f);switch(g[0]){case 1:n.push(f),i.push(this.lexer.yytext),a.push(this.lexer.yylloc),n.push(g[1]),f=null,m?(f=m,m=null):(c=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc,l>0&&l--);break;case 2:if(b=this.productions_[g[1]][1],w.$=i[i.length-b],w._$={first_line:a[a.length-(b||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(b||1)].first_column,last_column:a[a.length-1].last_column},p&&(w._$.range=[a[a.length-(b||1)].range[0],a[a.length-1].range[1]]),y=this.performAction.call(w,s,c,u,this.yy,g[1],i,a),"undefined"!=typeof y)return y;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),a=a.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),i.push(w.$),a.push(w._$),x=o[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\\r\\n?|\\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\\r\\n?|\\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\\r\\n?|\\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,r,n,i;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length&&(r=this._input.match(this.rules[a[o]]),!r||t&&!(r[0].length>t[0].length)||(t=r,n=o,this.options.flex));o++);return t?(i=t[0].match(/(?:\\r\\n?|\\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\\r?\\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,r,n){switch(r){case 0:break;case 1:return 54;case 2:return 55;case 3:return"MATH_SHIFT";case 4:return t.yytext=this.matches[this.matches.length-1],51;case 5:return t.yytext=this.matches[this.matches.length-1],52;case 6:return t.yytext=this.matches[this.matches.length-1],57;case 7:return t.yytext=this.matches[this.matches.length-1],58;case 8:return"...";case 9:return 53;case 10:return t.yytext=Number(this.matches[2])+Number(this.matches[5])/Number(this.matches[6]),89;case 11:return 89;case 12:return 98;case 13:return 46;case 14:return 46;case 15:return 47;case 16:return 47;case 17:return t.yytext=this.matches[3],74;case 18:return t.yytext=this.matches[2],this.popState(),82;case 19:return t.yytext=this.matches[this.matches.length-1],94;case 20:return 96;case 21:return 93;case 22:return 69;case 23:return 70;case 24:return"\\\\";case 25:return 79;case 26:return 80;case 27:return 66;case 28:return 66;case 29:return 19;case 30:return 19;case 31:return 49;case 32:return this.begin("integral"),81;case 33:return 24;case 34:return 18;case 35:return 67;case 36:return 68;case 37:return 45;case 38:return 43;case 39:return 15;case 40:return 18;case 41:return 59;case 42:return 71;case 43:return 48;case 44:return 5;case 45:return 20;case 46:return 21;case 47:return 28;case 48:return 30;case 49:return 83;case 50:return 85;case 51:return 88;case 52:return 41;case 53:return 42;case 54:return 40;case 55:return 39;case 56:return 17;case 57:return 16;case 58:return 91;case 59:return t.yytext="\\\\sign",24;case 60:return t.yytext="\\\\gcd",24;case 61:return t.yytext="\\\\lcm",24;case 62:return t.yytext="\\\\stdevp",24;case 63:return t.yytext="\\\\stdevp",24;case 64:return t.yytext="\\\\stdev",24;case 65:return t.yytext="\\\\stdev",24;case 66:return t.yytext="\\\\var",24;case 67:return t.yytext="\\\\sign",24;case 68:return t.yytext="\\\\gcd",24;case 69:return t.yytext="\\\\lcm",24;case 70:return t.yytext="\\\\stdevp",24;case 71:return t.yytext="\\\\stdevp",24;case 72:return t.yytext="\\\\stdev",24;case 73:return t.yytext="\\\\stdev",24;case 74:return t.yytext="\\\\var",24;case 75:return/^(arc)?(sin|cos|tan|cot|sec|csc)h?$/.test(this.matches[3])?(t.yytext="\\\\"+this.matches[3],91):(t.yytext="\\\\"+this.matches[3]+this.matches[4],"IDENTIFIER_BASE");case 76:return 24;case 77:break;case 78:return"UNRECOGNIZED"}},e.rules=[/^(?:(\\\\space|\\\\:|\\s|\\\\ )+)/,/^(?:\\{)/,/^(?:\\})/,/^(?:\\$)/,/^(?:\\^([0-9]))/,/^(?:\\^([a-zA-Z]))/,/^(?:_([0-9]))/,/^(?:_([a-zA-Z]))/,/^(?:\\.\\.\\.)/,/^(?:\\^)/,/^(?:(([0-9]+)((?:\\s|\\\\space|\\\\:|\\\\ )*)\\\\frac((?:\\s|\\\\space|\\\\:|\\\\ )*)\\{([0-9]+)\\}\\{([0-9]+)\\}))/,/^(?:[0-9]+(\\.[0-9]+|\\.(?![.0-9]))?|(\\.[0-9]+))/,/^(?:\')/,/^(?:\\*|(\\\\cdot))/,/^(?:(\\\\times))/,/^(?:\\/)/,/^(?:(\\\\div))/,/^(?:(\\\\frac((?:\\s|\\\\space|\\\\:|\\\\ )*)\\{d\\}\\{d((((?!\\\\left)(\\\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?))\\}))/,/^(?:(d((((?!\\\\left)(\\\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?))))/,/^(?:(\\\\log)((?:\\s|\\\\space|\\\\:|\\\\ )*)*_([0-9]))/,/^(?:(\\\\ln))/,/^(?:(\\\\log))/,/^(?:(\\\\frac))/,/^(?:(\\\\sqrt))/,/^(?:(\\\\backslash))/,/^(?:(\\\\sum))/,/^(?:(\\\\prod))/,/^(?:(\\\\ans))/,/^(?:(\\\\operatorname{ans}))/,/^(?:(\\\\polygon))/,/^(?:(\\\\operatorname{polygon}))/,/^(?:(\\\\operatorname{of}|\\\\of))/,/^(?:(\\\\int))/,/^(?:(\\\\length))/,/^(?:(\\\\sim))/,/^(?:\\\\left\\|)/,/^(?:\\\\right\\|)/,/^(?:-)/,/^(?:\\+)/,/^(?:=)/,/^(?:~)/,/^(?:[_])/,/^(?:!)/,/^(?:\\\\%)/,/^(?:$)/,/^(?:(\\()|\\\\left\\()/,/^(?:(\\))|\\\\right\\))/,/^(?:(\\[)|\\\\left\\[)/,/^(?:(\\])|\\\\right\\])/,/^(?:(\\\\\\{)|\\\\left\\\\\\{)/,/^(?:(\\\\\\})|\\\\right\\\\\\})/,/^(?::)/,/^(?:(\\\\ge|>=))/,/^(?:(\\\\le|<=))/,/^(?:(\\\\gt|>))/,/^(?:(\\\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\\s|\\\\space|\\\\:|\\\\ )*)(?:(((?!\\\\left)(\\\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)|((\\\\operatorname\\{([a-zA-Z]+)\\})((_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)))((?:\\s|\\\\space|\\\\:|\\\\ )*)(\\\\left\\(|\\()((?:\\s|\\\\space|\\\\:|\\\\ )*)(((?!\\\\left)(\\\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)(((?:\\s|\\\\space|\\\\:|\\\\ )*),((?:\\s|\\\\space|\\\\:|\\\\ )*)(((?!\\\\left)(\\\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)((?:\\s|\\\\space|\\\\:|\\\\ )*))*((?:\\s|\\\\space|\\\\:|\\\\ )*)(\\\\right\\)|\\))((?:\\s|\\\\space|\\\\:|\\\\ )*)=))/,/^(?:(\\\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\\\signum))/,/^(?:(\\\\(gcf|mcd)))/,/^(?:(\\\\mcm))/,/^(?:(\\\\stdDevP))/,/^(?:(\\\\stddevp))/,/^(?:(\\\\stdDev))/,/^(?:(\\\\stddev))/,/^(?:(\\\\variance))/,/^(?:(\\\\operatorname\\{signum\\}))/,/^(?:(\\\\operatorname\\{(gcf|mcd)\\}))/,/^(?:(\\\\operatorname\\{mcm\\}))/,/^(?:(\\\\operatorname\\{stdDevP\\}))/,/^(?:(\\\\operatorname\\{stddevp\\}))/,/^(?:(\\\\operatorname\\{stdDev\\}))/,/^(?:(\\\\operatorname\\{stddev\\}))/,/^(?:(\\\\operatorname\\{variance\\}))/,/^(?:((\\\\operatorname\\{([a-zA-Z]+)\\})((_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?)))/,/^(?:(((?!\\\\left)(\\\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\\{[a-zA-Z0-9]+\\})?))/,/^(?:(###))/,/^(?:.)/],e.conditions={integral:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78],inclusive:!0},conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78],inclusive:!0}},e}();return e.lexer=t,e}),define("math/mathshim",["require"],function(e){var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,.5*-r*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var r=e>0?1:-1;e=e>0?e:-e;var n=t.expm1(-2*e);return-r*n/(2+n)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,1+e*e===1?r*t.log1p(e):r*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("math/quadrature",["require","math/mathshim","math/poi"],function(e){"use strict";function t(e,t){for(var r=v;r>0;r--){var n=f/v*r,i=c.sinh(n),a=c.cosh(Math.PI/2*i),o=1/(Math.exp(Math.PI/2*i)*a),s=c.cosh(n)/(a*a);e.push(o),t.push(s)}}function r(e,t,r){return.5*(t*(2-r)+e*r)}function n(e,t,r){var n=.5*(t+r),i=h(t,e(t),n,e(n),r,e(r),e,0);return i?.5*(i[0][0]+i[1][0]):n}function i(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function a(e,t,n){var i=Math.abs(e(r(t,n,d))),a=Math.abs(e(r(t,n,2*d)));return!(i<d||a<d)&&i>1.95*a}function o(e,t,n){var o,s,u=r(n,t,b[0]),c=r(t,n,b[0]),l=e(u),h=e(c),f=r(t,n,1),m=e(f);if(isFinite(m)&&!isFinite(l)){if(o=p(u,l,f,m,e),Math.abs((o[0]-t)/(n-t))>y)return i(t,n,NaN,NaN,NaN);t=o[0],l=o[1]}if(isFinite(m)&&!isFinite(h)){if(s=p(f,m,c,h,e),Math.abs((s[0]-n)/(n-t))>y)return i(t,n,NaN,NaN,NaN);n=s[0],h=s[1]}if(isFinite(l)&&isFinite(h)&&!isFinite(m)){if(o=p(u,l,f,m,e),s=p(f,m,c,h,e),Math.abs((s[0]-o[0])/(n-t))>y)return i(t,n,NaN,NaN,NaN);m=.5*(o[1]+s[1])}if(a(e,t,n)||a(e,n,t))return i(t,n,NaN,NaN,NaN);for(var d=m,g=0,_=0,w=0,E=0,T=0,S=0,I=0;I<v;I+=4)T=e(r(t,n,b[I])),S=e(r(n,t,b[I])),E=Math.max(E,Math.abs(T),Math.abs(S)),g+=x[I]*(T+S),T=e(r(t,n,b[I+1])),S=e(r(n,t,b[I+1])),E=Math.max(E,Math.abs(T),Math.abs(S)),w+=x[I+1]*(T+S),T=e(r(t,n,b[I+2])),S=e(r(n,t,b[I+2])),E=Math.max(E,Math.abs(T),Math.abs(S)),_+=x[I+2]*(T+S),T=e(r(t,n,b[I+3])),S=e(r(n,t,b[I+3])),E=Math.max(E,Math.abs(T),Math.abs(S)),w+=x[I+3]*(T+S);var N,C=d+g,D=C+_,A=D+w,O=Math.abs(_-C),P=Math.abs(w-D),k=M*(n-t)*A,F=M*Math.abs(n-t)*E*x[0];return N=0===O?M*Math.abs(n-t)*P:M*Math.abs(n-t)*P*(P/O)*(P/O),N=Math.max(N,F),i(t,n,k,N,F)}function s(e){for(var t=-(1/0),r=-(1/0),n=-1,i=0,a=0;a<e.length;a++){var o=e[a];i+=o.value,o.error>t&&(t=o.error,n=a),o.minerror>r&&(r=o.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function u(e,t,i,a){if(void 0===a&&(a=32),!isFinite(t)||!isFinite(i))return NaN;for(var u=[o(e,t,i)],c=s(u),l=1;l<a&&!(Math.abs(c.maxerror/c.totalvalue)<=32*g||c.maxerror<=32*g||c.maxerror<=32*c.maxminerror);l++){var h=u[u.length-1];u[u.length-1]=u[c.maxindex],u[c.maxindex]=h;var p=u.pop(),f=n(e,r(p.x2,p.x1,.125),r(p.x1,p.x2,.125));u.push(o(e,p.x1,f)),u.push(o(e,f,p.x2)),c=s(u)}return c.totalvalue}var c=e("math/mathshim"),l=e("math/poi").default,h=l.bisectJump,p=l.bisectFinite,f=3.154019550531224,m=Math.pow(2,-13),d=m*m,g=d*d,y=d,v=32,b=[],x=[];t(b,x);for(var _=0,w=0;w<x.length;w++)_+=x[w];var M=1/(1+2*_);return{quad:u}}),define("math/studentt",["require"],function(e){var t=.5772156649015329,r=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],n=[-30.840230011973897,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.25967555349],i=function(e){if(e<=0)throw new RangeError("Argument must be positive.");if(e<.001)return 1/(e*(1+t*e));if(e<12){var i=e,a=0,o=i<1;o?i+=1:(a=Math.floor(i)-1,i-=a);for(var u=0,c=1,l=i-1,h=0;h<8;h++)u=(u+r[h])*l,c=c*l+n[h];var p=u/c+1;if(o)p/=i-1;else for(h=0;h<a;h++)p*=i++;return p}return e>171.624?1/0:Math.exp(s(e))},a=[1/12,-1/360,1/1260,-1/1680,1/1188,-691/360360,1/156,-3617/122400],o=.9189385332046728,s=function(e){if(e<=0)throw new RangeError("Argument must be positive.");if(e<12)return Math.log(Math.abs(i(e)));for(var t=1/(e*e),r=a[7],n=6;n>=0;n--)r*=t,r+=a[n];var s=r/e;return(e-.5)*Math.log(e)-e+o+s},u=function(e){if(e<=-1)throw new RangeError("Argument mustbe greater than -1.0");return Math.abs(e)>1e-4?Math.log(1+e):(-.5*e+1)*e},c=function(e,t,r){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===r)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===r)return 0;var n=Math.exp(s(t+r)-s(t)-s(r)+t*Math.log(e)+r*u(-e));return e<(t+1)/(t+r+2)?n*l(e,t,r)/t:1-n*l(1-e,r,t)/r},l=function(e,t,r){var n,i,a,o,s,u,c,l,h,p=1e-30,f=1;for(c=t+r,h=t+1,l=t-1,a=1,o=1-c*e/h,Math.abs(o)<p&&(o=p),o=1/o,u=o;f<=100&&(n=2*f,i=f*(r-f)*e/((l+n)*(t+n)),o=1+i*o,Math.abs(o)<p&&(o=p),a=1+i/a,Math.abs(a)<p&&(a=p),o=1/o,u*=o*a,i=-(t+f)*(c+f)*e/((t+n)*(h+n)),o=1+i*o,Math.abs(o)<p&&(o=p),a=1+i/a,Math.abs(a)<p&&(a=p),o=1/o,s=o*a,u*=s,!(Math.abs(s-1)<3e-7));f++);return u},h=function(e,t){var r=i((e+1)/2)/(Math.sqrt(e*Math.PI)*i(e/2));return r*Math.pow(1+t*t/e,-((e+1)/2))},p=function(e,t){var r=Math.sqrt(t*t+e);return c((t+r)/(2*r),e/2,e/2)};return{cdf:p,pdf:h,gamma:i}}),define("math/tofraction",["require","exports"],function(e,t){"use strict";function r(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-(1/0))return{n:-(1/0),d:1};if(!isFinite(e))return{n:NaN,d:1};for(var r,n,i,a=0,o=1,s=1,u=0;;){if(r=Math.floor(e),n=r*o+a,i=r*u+s,i>t)break;if(a=o,s=u,o=n,u=i,e===r)break;e=1/(e-r)}return{n:o,d:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("math/builtin",["require","math/mathshim","math/distance","math/quadrature","math/studentt","math/tofraction"],function(e){function t(e){return!(e>1e12)&&Math.round(c*e)*Math.PI===e}function r(e){if(e>1e12)return!1;var t=Math.round(2*c*e);return t%2===1&&t*Math.PI===2*e}var n=e("math/mathshim"),i=e("math/distance"),a=e("math/quadrature"),o=e("math/studentt"),s=e("math/tofraction").default,u={};u.cosh=n.cosh,u.sinh=n.sinh,u.tanh=n.tanh,u.acosh=n.acosh,u.asinh=n.asinh,u.atanh=n.atanh,u.expm1=n.expm1,u.log1p=n.log1p,u.sqrtxsqp1=n.sqrtxsqp1,u.sqrtxsqm1=n.sqrtxsqm1,u.mod=function(e,t){return e-t*Math.floor(e/t)},u.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},u.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var r=u.gcd(e,t);return Math.abs(e*t/r)},u.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var r=t;t=e,e=r}if(0===t)return e;for(var n=e%t;n>0;)e=t,t=n,n=e%t;return t},u.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=u.gcd(t,e[r]);return t},u.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=u.lcm(t,e[r]);return t},u.nCr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||e<0||t<0)return 0;for(var r=1,n=0;n<t;n++)r*=(e-n)/(n+1);return r},u.nPr=function(e,t){if(e=Math.round(e),t=Math.round(t),t>e||e<0||t<0)return 0;for(var r=1,n=0;n<t;n++)r*=e-n;return r},u.factorial=function(e){return u.gamma(e+1)},u._integerFactorial=function(e){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(e>170)return NaN;if(0===e||1===e)return 1;for(var t=1,r=2;r<=e;r++)t*=r;return t},u.gamma=function(e){return e===Math.floor(e)?u._integerFactorial(e-1):e<0?Math.PI/(Math.sin(Math.PI*e)*u.gamma(1-e)):Math.exp(u.lnGamma(e))},u.lnGamma=function(e){if(e<0)return NaN;for(var t=[57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],r=.9999999999999971,n=0;n<14;n++)r+=t[n]/(e+n+1);var i=e+5.2421875;return(e+.5)*Math.log(i)-i+Math.log(2.5066282746310007*r/e)},u.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],u.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/u.tan(t);var r=u.sin(t);if(1===e)return-1/(r*r);var n=u.cos(t);if(2===e)return 2*n/(r*r*r);var i,a,o,s,c,l=[0,2];for(a=3;a<=e;a++){for(i=[],o=0;o<a;o++)s=0,c=0,o>0&&(s=(a-o+1)*l[o-1]),o+2<a&&(c=(o+1)*l[o+1]),i.push(-(s+c));l=i}var h=0;for(o=e-1;o>=0;o--)h=i[o]+n*h;return h/Math.pow(r,e+1)},u.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var r=e%2===0?-1:1;if(t<0)return-r*u.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*u.cotDerivative(e,Math.PI*t);for(var n=u.factorial(e),i=0,a=Math.pow(t,-(e+1));t<10;)i+=a,t++,a=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):a*t/e,i+=.5*a;for(var o=u.bernoulliTable,s=e+1,c=2,l=a*t*s/c,h=1/(t*t),p=1;p<=14;p++)l*=h,i+=l*o[p-1],s++,c++,l*=s/c,s++,c++,l*=s/c;return n*r*i},u.toFraction=s,u.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},u.log_base=function(e,t){if(0===t)return NaN;var r=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(r))===e?Math.round(r):r},u.common_log=function(e){return u.log_base(e,10)},u.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var r=u.toFraction(t,100);return i.approx(r.n/r.d,t,2)&&r.d%2===1?(r.n%2===0?1:-1)*Math.pow(-e,t):NaN},u.nthroot=function(e,t){return u.pow(e,1/t)};var c=1/Math.PI;return u.sin=function(e){return t(Math.abs(e))?0:Math.sin(e)},u.cos=function(e){return r(Math.abs(e))?0:Math.cos(e)},u.tan=function(e){var n=Math.abs(e);return t(n)?0:r(n)?1/0:Math.tan(e)},u.sec=function(e){return r(Math.abs(e))?1/0:1/Math.cos(e)},u.csc=function(e){return t(Math.abs(e))?1/0:1/Math.sin(e)},u.cot=function(e){var n=Math.abs(e);return t(n)?1/0:r(n)?0:1/Math.tan(e)},u.acot=function(e){return Math.PI/2-Math.atan(e)},u.acsc=function(e){return Math.asin(1/e)},u.asec=function(e){return Math.acos(1/e)},u.sech=function(e){return 1/u.cosh(e)},u.csch=function(e){return 1/u.sinh(e)},u.coth=function(e){return 1/u.tanh(e)},u.asech=function(e){return u.acosh(1/e)},u.acsch=function(e){return u.asinh(1/e)},u.acoth=function(e){return u.atanh(1/e)},u.mean=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},u.total=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t},u.tpdf=function(e,t){return t!==Math.round(t)?NaN:t<=0?NaN:o.pdf(t,e)},u.tcdf=function(e,t){return t!==Math.round(t)?NaN:t<=0?NaN:o.cdf(t,e)},u.normalcdf=function(e,t,r){var n=(e-t)/(Math.SQRT2*Math.abs(r));return n<0?.5*Math.exp(-n*n)*u.erfcx(-n):1-.5*Math.exp(-n*n)*u.erfcx(n)},u.normalpdf=function(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))},u.binomcdf=function(e,t,r){if(t!==Math.round(t)||e!==Math.round(e))return NaN;if(r<0||r>1)return NaN;if(e<0||t<0)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,o=1;o<=Math.min(t,e);o++)i*=(t-o+1)/o*n,a+=i;return a},u.binompdf=function(e,t,r){return t!==Math.round(t)?NaN:(e=Math.floor(e),r<0||r>1?NaN:e<0||t<0?0:u.nCr(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e))},u.poissonpdf=function(e,t){return t<=0?NaN:e!==Math.round(e)?NaN:e<0?0:Math.exp(-t+e*Math.log(t)-u.lnGamma(e+1))},u.poissoncdf=function(e,t){if(t<=0)return NaN;if(e=Math.floor(e),e<0)return 0;for(var r=1,n=1,i=1;i<=e;i++)r*=t/i,n+=r;return Math.exp(-t)*n},u.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*u.erfcx(e);\nif(e<=-.065)return Math.exp(t)*u.erfcx(-e)-1;var r=1.1283791670955126,n=.37612638903183754,i=.11283791670955126,a=.026866170645131252,o=.005223977625442188;return e*(r+t*(n+t*(i+t*(a+t*o))))},u.erfcx=function(e){var t=.9999999999999999,r=2.224574423459406,n=2.444115549920689,i=1.7057986861852539,a=.8257463703357973,o=.28647031042892007,s=.07124513844341643,c=.012296749268608364,l=.001347817214557592,h=7263959403471071e-20,p=1,f=3.352953590554884,m=5.227518529742423,d=5.003720878235473,g=3.266590890998987,y=1.5255421920765353,v=.5185887413188858,b=.12747319185915415,x=.02185979575963238,_=.0023889438122503674,w=.00012875032817508128;if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-u.erfcx(-e);if(e>50){var M=.5641895835477563,E=e*e;return e>5e7?M/e:M*(E*(E+4.5)+2)/(e*(E*(E+5)+3.75))}var T=t+e*(r+e*(n+e*(i+e*(a+e*(o+e*(s+e*(c+e*(l+e*h)))))))),S=p+e*(f+e*(m+e*(d+e*(g+e*(y+e*(v+e*(b+e*(x+e*(_+e*w)))))))));return T/S},u.invNorm=function(e){var t,r,n,i=-39.6968302866538,a=220.946098424521,o=-275.928510446969,s=138.357751867269,c=-30.6647980661472,l=2.50662827745924,h=-54.4760987982241,p=161.585836858041,f=-155.698979859887,m=66.8013118877197,d=-13.2806815528857,g=-.00778489400243029,y=-.322396458041136,v=-2.40075827716184,b=-2.54973253934373,x=4.37466414146497,_=2.93816398269878,w=.00778469570904146,M=.32246712907004,E=2.445134137143,T=3.75440866190742,S=.02425;return e>.5?-u.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-(1/0):(e<S?(t=Math.sqrt(-2*Math.log(e)),n=(((((g*t+y)*t+v)*t+b)*t+x)*t+_)/((((w*t+M)*t+E)*t+T)*t+1)):(t=e-.5,r=t*t,n=(((((i*r+a)*r+o)*r+s)*r+c)*r+l)*t/(((((h*r+p)*r+f)*r+m)*r+d)*r+1)),n-Math.sqrt(2*Math.PI)*(.5*u.erfcx(-n/Math.SQRT2)-Math.exp(.5*n*n)*e))},u.TScore=function(e,t){var r=u.stdev(e),n=u.mean(e);return(n-t)*Math.sqrt(e.length)/r},u.TTest=function(e,t){return u.tcdf(u.TScore(e,t),e.length-1)},u.length=function(e){return e.length},u.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t},u.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t},u.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;var r=e.length,n=u.sortPerm(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]},u.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;var r=u.sortPerm(e),n=u.quartileIndex(e,t),i=Math.floor(n),a=Math.ceil(n);return(e[r[i]]+e[r[a]])/2},u.sortPerm=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r.push(n);return r.sort(function(t,r){return e[t]-e[r]}),r},u.quartileIndex=function(e,t){t=Math.round(t);var r,n=e.length,i=n%2===1;return 1===n?0:(0===t&&(r=0),2===t&&(r=(n-1)/2),4===t&&(r=n-1),1===t&&(r=i?(n+1)/4-1:(n+2)/4-1),3===t&&(r=i?(3*n+3)/4-1:(3*n+2)/4-1),r)},u.upperQuantileIndex=function(e,t){return u.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},u.lowerQuantileIndex=function(e,t){return u.sortPerm(e)[Math.floor(t*(e.length-1))]+1},u.upperQuartileIndex=function(e,t){return u.sortPerm(e)[Math.ceil(u.quartileIndex(e,t))]+1},u.lowerQuartileIndex=function(e,t){return u.sortPerm(e)[Math.floor(u.quartileIndex(e,t))]+1},u.median=function(e){return u.quantile(e,.5)},u.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1},u.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1},u.varp=function(e){for(var t=u.mean(e),r=0,n=0;n<e.length;n++){var i=e[n]-t;r+=i*i}return r/e.length},u.mad=function(e){for(var t=u.mean(e),r=0,n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length},u.var=function(e){var t=e.length;return u.varp(e)*t/(t-1)},u.covp=function(e,t){if(e.length!==t.length)return NaN;for(var r=e.length,n=u.mean(e),i=u.mean(t),a=0,o=0;o<r;o++)a+=(e[o]-n)*(t[o]-i);return a/r},u.cov=function(e,t){if(e.length!==t.length)return NaN;var r=e.length;return u.covp(e,t)*r/(r-1)},u.corr=function(e,t){if(e.length!==t.length)return NaN;for(var r,n,i=e.length,a=u.mean(e),o=u.mean(t),s=0,c=0,l=0,h=0;h<i;h++)r=e[h]-a,n=t[h]-o,s+=r*r,c+=n*n,l+=r*n;return l/Math.sqrt(s*c)},u.stdev=function(e){return Math.sqrt(u.var(e))},u.stdevp=function(e){return Math.sqrt(u.varp(e))},u.quad=a.quad,u.distance=function(e,t){return i.hypot(t[0]-e[0],t[1]-e[1])},u.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},u}),define("math/functions",["require","math/builtin"],function(e){function t(e){for(var t=0;t<e.length;t++)e[t].compiled&&delete e[t].compiled.fn}function r(e){for(var t=0;t<e.length;t++){var r=e[t].compiled;r&&(r.fn=i(r.args,r.source))}}function n(e,t){for(var r=[],n=0;n<t;n++)r.push("values["+n+"]");return i(["values"],"return "+e(r))}function i(e,t){var r=e.join(","),n="return (function("+r+"){"+t+"})",i=new Function(["BuiltIn"],n);return i(a)}var a=e("math/builtin");return{dehydrateGraphData:t,rehydrateGraphData:r,closureFunctionWithBuiltIn:i,createEvaluateFunction:n}});var define_enum_constant,enum_strings={},debuggable_enums=!0;if(debuggable_enums)define_enum_constant=function(e){this[e]=e};else{var next_enum=1e3;define_enum_constant=function(e){enum_strings[next_enum]=e,this[e]=next_enum++}}define_enum_constant("EXPRESSION"),define_enum_constant("FUNCTION_DEFINITION"),define_enum_constant("VARIABLE_DEFINITION"),define_enum_constant("ORDERED_PAIR_LIST"),define_enum_constant("DOUBLE_INEQUALITY"),define_enum_constant("COMPARATOR"),define_enum_constant("CHAINED_COMPARATOR"),define_enum_constant("EQUATION"),define_enum_constant("CONSTANT"),define_enum_constant("IDENTIFIER"),define_enum_constant("LIST"),define("math/enums",function(){}),define("math/parsenode/base",["require","pjs","math/functions","../enums"],function(e){var t=e("pjs"),r=e("math/functions");return e("../enums"),t(function(e,t,n){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._inputString="",this._exports=[]},e.exportPenalty=0;var i=0;e.tmpVar=function(){return"tmp"+i++},e.statementType=EXPRESSION,e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(e),r=t.getEvaluationInfo();return r?r[0].val:NaN},e.setInputString=function(e){this._inputString=e},e.getInputString=function(){return this._inputString},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){this._dummyDependencies.indexOf(e)===-1&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){var e=this._exports||[];return e.concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,r){for(var n=this.getLegalExports(e),i=0;i<n.length;i++){var a=n[i];if(r[a])return;r[a]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.getSliderInfo=function(){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.okForImplicitFunction=function(){return!1},e.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){if(!(t instanceof n))throw t;e=t}return e},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),n=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(i!==-1){var a=e[0];e[0]=e[i],e[i]=a}}return{args:e,source:n,fn:r.closureFunctionWithBuiltIn(e,n)}},e.getCompiledDerivative=function(){var e=this.getDependencies(),t=this.takeDerivative(e[0]||"x");return t.getCompiledFunction()}})}),define("lib/worker-i18n",["require","exports"],function(e,t){"use strict";function r(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=r}),define("math/parsenode/error",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("graphing/label",["require","exports","underscore","math/distance","math/tofraction"],function(e,t,r,n,i){"use strict";function a(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var r,a,o,s=i.default(e/Math.PI,24);if(f(t)&&n.approx(s.n/s.d*Math.PI,e,3))return r=0===s.n?"0":1===s.n?"π":s.n===-1?"-π":s.n.toString()+"π",a=1===s.d?"":"/"+s.d.toString(),o=r+a,{ariaString:u(o),string:o,value:s.n/s.d*Math.PI};if(f(t))return o=p(l(e.toFixed(m(t)))),{ariaString:u(o),string:o,value:parseFloat(o)};var c=h(e.toExponential(m(t/e))).split("e"),d=c[0]+"×10",g=c[1].replace("+","");return o=h(e.toExponential(m(t/e))).replace("+",""),{ariaString:u(o),string:o,mantissa:d,superscript:g,value:parseFloat(o)}}function o(e){return T["["+e+"]"]}function s(e){return e[0]+e.slice(1).split("").join(" ")}function u(e){return e.replace(I,s).replace(S,o).replace(/ +/gi," ").trim()}function c(e,t,r,n){var i=a(e,t),o=a(n(i.value),r);return[i,o]}function l(e){return e.indexOf(".")===-1?e:e.replace(N,"")}function h(e){var t=/\\.?0+e/;return e.replace(t,"e")}function p(e){return"-0"===e?"0":e}function f(e){return e=Math.abs(e),1e-4<e&&e<1e7}function m(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function d(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var r=t.smallCutoff||.001,n=t.bigCutoff||1e6,i=t.digits||10;if(Math.abs(e)>n||Math.abs(e)<r){var a=h(e.toExponential(i-2)),o=a.match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);return o?{type:"scientific",mantissa:o[1],exponent:o[2]}:{type:"undefined"}}var s=l(e.toPrecision(i));return e!==Number(s)&&t.addEllipses&&(s+="..."),{type:"decimal",value:s}}function g(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"<span class=\'dcg-cross\'>×</span>10<sup>"+r.exponent+"</sup>";default:var n=r;return n}}function y(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+" * 10^"+r.exponent;default:var n=r;return n}}function v(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\\\times10^{"+r.exponent+"}";default:var n=r;return n}}function b(e,t){var r=d(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return u(r.value);case"scientific":return u(r.mantissa+"e"+r.exponent);default:var n=r;return n}}function x(e){var t={pi:"π",tau:"τ",theta:"θ",phi:"ϕ"};return t.hasOwnProperty(e)?t[e]:e}function _(e){var t=e.split("_"),r="";return t[0].length>1&&(r+="\\\\"),r+=t[0],t[1]&&(r+=1===t[1].length?"_"+t[1]:"_{"+t[1]+"}"),r}function w(e){if(!e)return"";var t=e.split("_").map(x).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n}function M(e){return e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1"),e.replace(/[{}\\\\]/g,"")}function E(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.value=a;var T={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[π]":" pi ","[τ]":" tau ","[θ]":" theta ","[ϕ]":" phi "},S=new RegExp(Object.keys(T).join("|"),"gi"),I=/\\.\\d+/g;t.point=c;var N=/\\.?0+$/;t.numericLabel=d,t.truncatedHTMLLabel=g,t.truncatedPlainmathLabel=y,t.truncatedLatexLabel=v,t.truncatedAriaLabel=b,t.formatSymbol=x,t.identifierToLatex=_,t.identifierToHTML=w,t.latexToIdentifier=M,t.trimLatex=E}),define("math/types",["require","lib/worker-i18n"],function(e){function t(e){switch(e){case u:return"Any";case c:return"Number";case l:return"Bool";case h:return"Point";case p:return"ListOfAny";case f:return"ListOfNumber";case m:return"ListOfBool";case d:return"ListOfPoint";case g:return"ErrorType";default:throw new Error("Invalid type")}}function r(e){switch(e){case u:return s.t("an unknown object");case c:return s.t("a number");case l:return s.t("a true/false value");case h:return s.t("a point");case p:return s.t("a list of unknown objects");case f:return s.t("a list of numbers");case m:return s.t("a list of true/false values");case d:return s.t("a list of points");case g:return s.t("an error object");default:throw new Error("Invalid type")}}function n(e){switch(e){case p:return!0;case f:return!0;case m:return!0;case d:return!0;default:return!1}}function i(e){switch(e){case p:return u;case f:return c;case m:return l;case d:return h;default:return u}}function a(e){switch(e){case u:return p;case c:return f;case l:return m;case h:return d;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function o(e){switch(e){case u:return!0;case c:return!0;case l:return!0;case h:return!0;default:return!1}}var s=e("lib/worker-i18n"),u=0,c=1,l=2,h=3,p=4,f=5,m=6,d=7,g=8;return{Any:u,Number:c,Bool:l,Point:h,ListOfAny:p,ListOfNumber:f,ListOfBool:m,ListOfPoint:d,ErrorType:g,repr:t,prettyPrint:r,isList:n,elementType:i,listType:a,hasListType:o}}),define("math/errormsg",["require","lib/worker-i18n","math/parsenode/error","graphing/label","math/types"],function(e){var t=e("lib/worker-i18n"),r=e("math/parsenode/error"),n=e("graphing/label"),i=e("math/types");return{parseError:function(){return r(t.t("Sorry, I don\'t understand this."))},addTypeError:function(e){return r(t.t("Cannot add __symbol2__ and __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},subtractTypeError:function(e){return r(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return r(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return r(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return r(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return r(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return r(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return r(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return r(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return r(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.",{symbol1:e[0],symbol2:e[1],symbol3:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return r(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return r(t.t("Function \'__fn__\' cannot be applied to __arg__.",{fn:n.formatSymbol(e),arg:i[0]})).allowExport();case 2:return r(t.t("Function \'__fn__\' cannot be applied to __arg1__ and __arg2__.",{fn:n.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return r(t.t("Function \'__fn__\' cannot be applied to these arguments.",{fn:n.formatSymbol(e)})).allowExport()}},sumLowerBoundTypeError:function(e){return r(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return r(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumArgumentTypeError:function(e){return r(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return r(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return r(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productArgumentTypeError:function(e){return r(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return r(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return r(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralArgumentTypeError:function(e){return r(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return r(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return r(t.t("Cannot take derivative with respect to \'__symbol1__\' because it is __symbol2__.",{symbol1:n.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return r(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return r(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return r(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return r(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return r(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return r(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return r(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return r(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return r(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return r(t.t("Cannot make a polygon from two numbers."))},wrongArity:function(e,i,a){e=n.formatSymbol(e);var o,s;if(1===i)s=t.t("For example, try typing: __dependency__(x).",{dependency:e}),o=a>1?t.t("Function \'__dependency__\' requires only 1 argument. __supplement__",{dependency:e,supplement:s}):t.t("Function \'__dependency__\' requires an argument. __supplement__",{dependency:e,supplement:s});else{for(var u=[],c=0;c<i;c++)u[c]=c+1;var l=n.formatSymbol(e)+"("+u.join(", ")+")";s=t.t("For example, try typing: __recommendation__.",{recommendation:l}),o=t.t("Function \'__dependency__\' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:s})}return r(o)},wrongParametrizedReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return r(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return r(t.t("Function \'__symbol__\' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:n.formatSymbol(e)}))},missingRHS:function(e){return e=n.formatSymbol(e),r(t.t("What do you want \'__symbol__\' to equal?",{symbol:e}))},malformedPoint:function(){return r(t.t("Points are written like this: (1, 2)."))},badImplicitMultiply:function(e){return e=n.formatSymbol(e),r(t.t("Use parentheses around the argument of \'__symbol__\'.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return r(t.t("You need something on both sides of the \'__symbol__\' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return r(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return r(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return r(t.t("You need a numerator and denominator for your fraction."))},badTrigExponent:function(e){var n=e+"^2",i=e+"^-1";return r(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:n,form2:i}))},badLogExponent:function(e){var n=e+"^2";return r(t.t("Only __form__ is supported. Otherwise, use parens.",{form:n}))},blankExpression:function(){return r(t.t("You haven\'t written anything yet."))},functionNotDefined:function(e){return e=n.formatSymbol(e),r(t.t("Function \'__dependency__\' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__dependency__\' as a parameter of this function because \'__dependency__\' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=n.formatSymbol(e),r(void 0===i?t.t("You can\'t redefine \'__symbol__\' because it\'s already defined.",{symbol:e}):t.t("You can\'t redefine \'__symbol__\' because \'__symbolRoot__\' is already defined.",{symbol:e,symbolRoot:i}))},multiplyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You\'ve defined \'__dependency__\' in more than one place. Try picking a different variable, or deleting some of the definitions of \'__dependency__\'.",{dependency:e}))},shadowedIndex:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__symbol__\' as an index because it\'s already defined.",{symbol:e}))},cycle:function(e){e=e.map(n.formatSymbol);var i=e.pop();return r(t.t("\'__symbols__\' and \'__lastSymbol__\' can\'t be defined in terms of each other.",{symbols:e.join("\', \'"),lastSymbol:i}))},selfReferentialFunction:function(e){return r(t.t("The definition of function \'__symbol__\' cannot depend on \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},tooManyVariables:function(e){if(e=e.map(n.formatSymbol),0===e.length)return r(t.t("Too many variables, I don\'t know what to do with this."));var i=e.pop();return r(t.t("Too many variables. Try defining \'__variables__\'.",{variables:(e.length?e.join("\', \'")+"\' or \'":"")+i}))},addArgumentsToDefinition:function(e,i,a){e=e.map(n.formatSymbol),i=n.formatSymbol(i),a=a.map(n.formatSymbol);var o=i+"("+a.join(",")+","+e.join(",")+")",s=e.pop(),u={symbols:e.join("\', \'"),lastSymbol:s,newSignature:o};return r(e.length?t.t("Try including \'__symbols__\' and \'__lastSymbol__\' as arguments by defining the function as \'__newSignature__\'.",u):t.t("Try including \'__lastSymbol__\' as an argument by defining the function as \'__newSignature__\'.",u))},invalidLHS:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, you can\'t graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return r(t.t("We can\'t plot θ as a function of r. Try plotting r(θ) instead."))},invalidInequalityVariables:function(){return r(t.t("We only plot inequalities of x and y, or r and θ."))},invalidImplicitVariables:function(){return r(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return r(t.t("Plotting single-variable implicit equations is disabled."))},complicatedImplicitInequality:function(){return r(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return r(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return r(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return r(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return r(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=n.formatSymbol(e),r(t.t("Try adding \'__lhs__\' to the beginning of this equation.",{lhs:e+"="}))):r(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Variable \'__dependency__\' can\'t be used as a function.",{dependency:e}))},emptyList:function(){return r(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return r(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return r(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return r(t.t("First column may not be __most__ or __last__.",{most:"\'y\', \'r\',",last:"\'θ\'"}))},invalidDependentFirstTableColumn:function(){return r(t.t("This column header can\'t be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return r(t.t("\'__symbol__\' may not be used as a regression parameter.",{symbol:n.formatSymbol(e)}))},optimizationError:function(){return r(t.t("We couldn\'t find any region where this model is defined."))},badListInReducer:function(e){return r(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:n.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return r(t.t("Both arguments of \'__symbol__\' must be lists. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return r(t.t("The first argument of \'__symbol__\' must be a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},variableRange:function(e){return r(t.t("Range cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).allowExport()},nonArithmeticRange:function(e){return r(t.t("Ranges must be arithmetic sequences.")).allowExport()},missingIntegralBounds:function(){return r(t.t("Integrals must have upper and lower bounds."))},shadowedIntegrationVariable:function(e){return r(t.t("You can\'t use \'__symbol__\' as an integration variable because it\'s already defined.",{symbol:n.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return r(t.t("Integration bounds can\'t depend on integration variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},percentMissingOf:function(){return r(t.t("\'%\' must be used with \'of\'. Try \'25% of 12\'."))},badAnsContext:function(){return r(t.t("You can\'t use \'ans\' in this context."))},ansUndefined:function(){return r(t.t("The previous expression didn\'t define any value for ans."))},variablesUnsupported:function(e){return r(t.t("This calculator does not support variables like \'__variable__\'.",{variable:n.formatSymbol(e)}))},functionUnsupported:function(e){return r(t.t("This calculator does not support the \'__symbol__\' function.",{symbol:n.formatSymbol(e)}))},constantUnsupported:function(e){return r(t.t("This calculator does not support the constant \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},assignmentsUnsupported:function(){return r(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return r(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return r(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return r(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return r(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return r(t.t("This calculator does not support points."))},featureUnavailable:function(){return r(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return r(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return r(t.t("Only square matrices have an inverse."))},singularInverse:function(){return r(t.t("Singular matrices do not have an inverse."))},matrixAssignment:function(){return r(t.t("This calculator does not support this type of variable definition. Try using \'New Matrix\'."))},matrixAddDimensions:function(){return r(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return r(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return r(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return r(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return r(t.t("Only square matrices can be raised to a power."))},matrixElementTypeError:function(e){return r(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return r(t.t("Cannot use \'__symbol__\' as a variable.",{symbol:n.formatSymbol(e)}))}}}),define("math/parsenode/expression",["require","pjs","./base","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){this.mergeDependencies.apply(this,this.args)},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw n.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n={Add:t(r,{}),Subtract:t(r,{}),Multiply:t(r,{}),Divide:t(r,{}),Exponent:t(r,{}),Negative:t(r,{}),And:t(r,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(r,{})};return n.RawExponent=t(n.Exponent,{}),n}),define("math/parsenode/constant",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){this.constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){\nreturn{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return this.constantValue},e.scalarExprString=function(){return this.constantValue>0?String(this.constantValue):"("+String(this.constantValue)+")"},e.getEvaluationInfo=function(){return[{val:this.constantValue}]},e.isNaN=function(){return"number"==typeof this.constantValue&&isNaN(this.constantValue)},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/identifier",["require","pjs","./expression","graphing/label"],function(e){var t=e("pjs"),r=e("./expression"),n=e("graphing/label");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,[]),this._symbol=n.latexToIdentifier(e),this.setInputString(e),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/ans",["require","pjs","./identifier"],function(e){var t=e("pjs"),r=e("./identifier");return t(r,function(e,t,r){})}),define("math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){var t=e("pjs"),r=e("./freevariable");return t(r,function(){})}),define("math/parsenode/list",["require","pjs","./expression","math/errormsg","math/types"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/errormsg"),i=e("math/types");return t(r,function(e,t,r){function a(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw n.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();Array.prototype.push.apply(e,n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.constantValue})}]},r.eachArgs=function(e,t){var r=a(e);if(!isFinite(r))return void t(e);for(var n=0;n<r;n++){for(var o=[],s=0;s<e.length;s++)o.push(e[s].isList||i.isList(e[s].valueType)?e[s].elementAt(n):e[s]);t(o)}},r.mapArgs=function(e,t){var n=[];return r.eachArgs(e,function(e){n.push(t(e))}),n},r.wrap=function(e){return e.isList||i.isList(e.valueType)?e:r([e])}})}),define("math/parsenode/range",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]}})}),define("math/parsenode/broadcast",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t,r){e.init=function(e,r){if(t.init.call(this,r),this._replacedSymbols=e,this._expression=r[0],this._lists=r.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var n=0;n<e.length;n++)this.removeDependency(e[n]);for(var i=1/0,a=0;a<this._lists.length;a++){if(!this._lists[a].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[a].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.evaluate=function(e){for(var t=this._expression.getCompiledFunction(this._replacedSymbols).fn,r=[],n=0;n<this.length;n++){for(var i=[],a=0;a<e.length;a++)i.push(e[a][n]);r.push(t.apply(void 0,i))}return r},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var r,n=[],i=[];for(r=0;r<this._lists.length;r++){var a=this._lists[r].getEvalStrings();Array.prototype.push.apply(e,a.statements);var o=this.tmpVar();i.push(o),n.push("var "+o+" = "+a.expression)}var s=this.tmpVar(),u=this.tmpVar();n.push("var "+s+" = []");var c=[];for(r=0;r<i.length;r++)c.push("var "+this._replacedSymbols[r]+" = "+i[r]+"["+u+"]");return n.push("for (var "+u+" = 0; "+u+" < "+this.length+"; "+u+"++) {\\n  "+c.join(";\\n  ")+";\\n  "+s+".push("+t.expression+");\\n}"),{statements:e.concat(n),expression:s}}})}),define("math/parsenode/listaccess",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),r=e.statements.concat(t.statements),n=this.tmpVar();r.push(n+" = "+t.expression);var i=this.tmpVar();return r.push(i+" = Math.floor("+e.expression+") - 1"),{statements:r,expression:"("+i+" >= 0 && "+i+" < "+n+".length ? "+n+"["+i+"] : NaN)"}}})}),define("math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t,r){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){var t=e("pjs"),r=e("./orderedpair");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this,e),this.moveStrategy=r,this.defaultDragMode=n},e.isMovablePoint=!0})}),define("math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),r=e("./scalarexpression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),r=[];Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements);var n=t.expression+"["+e.expression+"-1]";return{statements:r,expression:n}}})}),define("math/parsenode/polygon",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e){t.init.call(this,e)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/comparators",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},n=function(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}};t.table=r,t.get=n}),define("math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","math/comparators","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./expressionTypes").Subtract,i=e("math/comparators").table,a=e("math/functions");return t(r,function(e,r,o){o.create=function(e,r){return r=r||e,t(o,function(t,n){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=r,t.scalarEvalExpression=function(e){return e.join(r)},t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){r.init.call(this,e),this._difference=n(i[this.operator].direction===-1?[e[1],e[0]]:[e[0],e[1]])}})}),define("math/parsenode/comparator",["require","math/parsenode/basecomparator"],function(e){var t=e("math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("math/parsenode/doubleinequality",["require","pjs","./base","math/comparators","./comparator"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/comparators"),i=e("./comparator");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var r=n.get(n.table[e[1]].inclusive&&n.table[e[3]].inclusive,n.table[e[1]].direction);this._indicator=i[r]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof n&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),r=this._index._symbol,n=this.tmpVar(),i=this.tmpVar(),a=this.args[1].getEvalStrings(),o=this.args[2].getEvalStrings(),s=this.args[3].getEvalStrings();Array.prototype.push.apply(e,a.statements),e.push("var "+n+" = Math.round("+a.expression+")"),Array.prototype.push.apply(e,o.statements),e.push("var "+i+" = Math.round("+o.expression+")"),e.push("var "+t+"="+this.starting_value);var u="for (var "+r+"="+n+";"+r+"<="+i+";"+r+"++) {"+s.statements.join(";")+";"+t+this.in_place_operator+s.expression+"};",c="if(!isFinite("+i+"-"+n+")) {"+t+"=("+i+"<"+n+"?"+this.starting_value+":NaN);}else{"+u+"}";return e.push(c),{statements:e,expression:t}},e.evaluate=function(e,t,r){var n=r.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,a=e;a<=t;a++)i=this.update(i,n(a));return i}})}),define("math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),r=e("./repeatedoperator");return t(r,function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),r=e("./repeatedoperator");return t(r,function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","math/builtin"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("math/builtin");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof n&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],r=this.args[2],n=this.args[3],i=[],a=this.tmpVar(),o=e._symbol,s=this.tmpVar(),u=this.tmpVar(),c=t.getEvalStrings(),l=r.getEvalStrings(),h=n.getEvalStrings();Array.prototype.push.apply(i,c.statements),Array.prototype.push.apply(i,l.statements),i.push("var "+s+" = "+c.expression),i.push("var "+u+" = "+l.expression),i.push("var "+a+" = function ("+o+") { "+h.statements.join("; ")+"; return "+h.expression+";}");var p="BuiltIn.quad("+[a,s,u].join(", ")+")";return{statements:i,expression:p}},e.evaluate=function(e,t,r){var n=this.args[0],a=r.getCompiledFunction([n._symbol]).fn;return i.quad(a,e,t)}})}),define("math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){var t=e("pjs"),r=e("./expression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){"string"==typeof e&&(e=n(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,r),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(n(this._symbol),e)}})}),define("math/parsenode/functionexponent",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){})}),define("math/parsenode/prime",["require","pjs","./expression"],function(e){var t=e("pjs"),r=e("./expression");return t(r,function(e,t){e.init=function(e,r){t.init.call(this,r),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./constant"),i=t(r,{});return i.chain=function(e){for(var t,r=n(NaN);e.length;)t=e.pop(),r=i([t.condition,t.if_expr,r]);return r},i.empty=function(){return i([n(!0),n(1),n(NaN)])},i}),define("math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){this._symbol=n(e)._symbol,t.init.call(this,r)}})}),define("math/parsenode/nativefunction",["require","pjs","./scalarexpression","math/errormsg","math/functions"],function(e){var t=e("pjs"),r=e("./scalarexpression"),n=e("math/errormsg"),i=e("math/functions");return t(r,function(e,r,a){e.init=function(e){if(e.length<this._requiredArity)throw n.wrongArity(this._symbol,this._requiredArity,e.length);if(e.length>this._maxArity)throw n.wrongArity(this._symbol,this._maxArity,e.length);for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);r.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},a.create=function(e,r,n,a){return t(this,function(t,o,s){s.isFunction=!0,t._symbol=e,t.head=r,t._requiredArity=n,t._optionalArguments=a||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=i.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),s.getConcreteInvocationTree=function(e,t,r){return s(t).getConcreteTree(e,r)},s.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){var t=e("pjs"),r=e("./nativefunction");return t(r,function(e,t,r,n){r.create=function(e,t,r,i){var a=r.length,o=n.create.call(this,e,t,a);return o.prototype._inputTypes=r,o.prototype._outputType=i,o}})}),define("math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Multiply;return t(r,function(e,t,r,i){r.create=function(e,t){var r=1,a=i.create(e,t,r);return a.getConcreteInvocationTree=function(e,t,r){var i=e.trigAngleMultiplier?[n([t[0],e.trigAngleMultiplier])].concat(t.slice(1)):t;return a(i).getConcreteTree(e,r)},a.getCacheKeys=function(){return["trigAngleMultiplier"]},a}})}),define("math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Divide;return t(r,function(e,t,r,i){r.create=function(e,t,r){var a=1,o=i.create(e,t,a,r);return o.getConcreteInvocationTree=function(e,t,r){var i=o(t),a=e.trigAngleMultiplier?n([i,e.trigAngleMultiplier]):i;return a.getConcreteTree(e,r)},o.getCacheKeys=function(){return["trigAngleMultiplier"]},o}})}),define("math/parsenode/reducerfunction",["require","pjs","./expression","math/functions"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions");return t(r,function(e,r,i){e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},i.create=function(e,r){return t(i,function(t,i,a){t._symbol=e,t.head=r,t._arity=1,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r){return a(t).getConcreteTree(e,r)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/doublereducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg");return t(r,function(e,r,a){e.init=function(){if(r.init.apply(this,arguments),2!==this.args.length)throw i.wrongDoubleReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],r=Math.min(this.args[0].length,this.args[1].length),n=0;n<this.args.length;n++){var i=this.args[n],a=i.getEvalStrings();Array.prototype.push.apply(e,a.statements),t.push(i.length===r?a.expression:a.expression+".slice(0,"+r+")")}return{statements:e,expression:this.evalExpression(t)}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r){return a(t).getConcreteTree(e,r)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),r=e("./expression"),n=e("math/functions"),i=e("math/errormsg");return t(r,function(e,r,a){e.init=function(){if(r.init.apply(this,arguments),2!==this.args.length)throw i.wrongParametrizedReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),r=this.args[1].getEvalStrings();Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,r.statements);var n=this.evalExpression([t.expression,r.expression]);return{statements:e,expression:n}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r){return a(t).getConcreteTree(e,r)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/builtinfunction",["require","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/trigfunction","math/parsenode/inversetrigfunction","math/parsenode/reducerfunction","math/parsenode/doublereducerfunction","math/parsenode/parametrizedreducerfunction","math/types","math/parsenode/constant"],function(e){var t=e("math/parsenode/nativefunction"),r=e("math/parsenode/typedfunction"),n=e("math/parsenode/trigfunction"),i=e("math/parsenode/inversetrigfunction"),a=e("math/parsenode/reducerfunction"),o=e("math/parsenode/doublereducerfunction"),s=e("math/parsenode/parametrizedreducerfunction"),u=e("math/types"),c=e("math/parsenode/constant"),l=c(1),h=c(0),p=c(.5);return{sin:n.create("sin","BuiltIn.sin"),cos:n.create("cos","BuiltIn.cos"),tan:n.create("tan","BuiltIn.tan"),cot:n.create("cot","BuiltIn.cot"),sec:n.create("sec","BuiltIn.sec"),csc:n.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[l]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","Math.round",1),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:a.create("lcm","BuiltIn.listLCM"),gcd:a.create("gcd","BuiltIn.listGCD"),mean:a.create("mean","BuiltIn.mean"),total:a.create("total","BuiltIn.total"),stdev:a.create("stdev","BuiltIn.stdev"),stdevp:a.create("stdevp","BuiltIn.stdevp"),mad:a.create("mad","BuiltIn.mad"),length:a.create("length","BuiltIn.length"),min:a.create("min","BuiltIn.listMin"),max:a.create("max","BuiltIn.listMax"),argmin:a.create("argmin","BuiltIn.argMin"),argmax:a.create("argmax","BuiltIn.argMax"),median:a.create("median","BuiltIn.median"),var:a.create("var","BuiltIn.var"),varp:a.create("varp","BuiltIn.varp"),cov:o.create("cov","BuiltIn.cov"),covp:o.create("covp","BuiltIn.covp"),corr:o.create("corr","BuiltIn.corr"),quantile:s.create("quantile","BuiltIn.quantile"),quartile:s.create("quartile","BuiltIn.quartile"),upperQuantileIndex:s.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:s.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:s.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:s.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:s.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",1,[h,l]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[h,l]),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",2,[p]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[p]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",2),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),invNorm:t.create("invNorm","BuiltIn.invNorm",1),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",2),TTest:s.create("TTest","BuiltIn.TTest"),TScore:s.create("TScore","BuiltIn.TScore"),distance:r.create("distance","BuiltIn.distance",[u.Point,u.Point],u.Number),midpoint:r.create("midpoint","BuiltIn.midpoint",[u.Point,u.Point],u.Point)}}),define("math/parsenode/equation",["require","./base","pjs","./expressionTypes","math/parsenode/comparator"],function(e){var t=e("./base"),r=e("pjs"),n=e("./expressionTypes").Subtract,i=e("math/parsenode/comparator");return r(t,function(e,t){e.init=function(e,r){t.init.call(this),this.mergeDependencies(e,r),this._lhs=e,this._rhs=r,this._difference=n([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){var t=e("./base"),r=e("./equation"),n=e("./identifier"),i=e("pjs");return i(t,function(e,t){e.init=function(e,r){t.init.call(this),e=e._symbol,this.mergeDependencies(r),this._expression=r,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),r=0;r<t.length;r++)if(t[r]===e)return[];return[e]},e.isEquation=function(e){return e.getDependencies().indexOf(this._symbol)!==-1},e.asEquation=function(){var e=r(n(this._symbol),this._expression);return e.userData=this.userData,e},e.getSliderInfo=function(){if(this._expression.isConstant&&"number"==typeof this._expression.constantValue&&isFinite(this._expression.constantValue))return{value:this._expression.constantValue}}})}),define("math/parsenode/functiondefinition",["require","pjs","./base","math/errormsg"],function(e){var t=e("pjs"),r=e("./base"),n=e("math/errormsg");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this),e=e._symbol,this._argSymbols=r.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=n,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,r){if(t.length!==this._argSymbols.length)throw n.wrongArity(this._symbol,this._argSymbols.length,t.length);for(var i=Object.create(e),a=0;a<this._argSymbols.length;a++)i[this._argSymbols[a]]=t[a];return this._expression.getConcreteTree(i,r)},e.getArgs=function(){return this._args},e.getSliderVariables=function(e,t){var r=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return r.indexOf(e)===-1})}})}),define("numeric",[],function(){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var r,n,i,a;for("undefined"==typeof t&&(t=15),i=.5,r=new Date;;){for(i*=2,a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(n=new Date,n-r>t)break}for(a=i;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return n=new Date,1e3*(3*i-1)/(n-r)},numeric._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.precision=4,numeric.largeArray=50,numeric.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t="return function ("+e.join(",")+") {"+t+"}",new Function(["numeric"],t)(numeric)},numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+t(-e);if(isFinite(e)){var r=Math.floor(Math.log(e)/Math.log(10)),n=e/Math.pow(10,r),i=n.toPrecision(numeric.precision);return 10===parseFloat(i)&&(r++,n=1,i=n.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+r.toString()}return"Infinity"}function r(e){var i;if("undefined"==typeof e)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return n.push(\'"\'+e+\'"\'),!1;if("boolean"==typeof e)return n.push(e.toString()),!1;if("number"==typeof e){var a=t(e),o=e.toPrecision(numeric.precision),s=parseFloat(e.toString()).toString(),u=[a,o,s,parseFloat(o).toString(),parseFloat(s).toString()];for(i=1;i<u.length;i++)u[i].length<a.length&&(a=u[i]);return n.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(null===e)return n.push("null"),!1;if("function"==typeof e){n.push(e.toString());var c=!1;for(i in e)e.hasOwnProperty(i)&&(c?n.push(",\\n"):n.push("\\n{"),c=!0,n.push(i),n.push(": \\n"),r(e[i]));return c&&n.push("}\\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return n.push("...Large Array..."),!0;var c=!1;for(n.push("["),i=0;i<e.length;i++)i>0&&(n.push(","),c&&n.push("\\n ")),c=r(e[i]);return n.push("]"),!0}n.push("{");var c=!1;for(i in e)e.hasOwnProperty(i)&&(c&&n.push(",\\n"),c=!0,n.push(i),n.push(": \\n"),r(e[i]));return n.push("}"),!0}var n=[];return r(e),n.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,n=[];for(r=0;r<e.length;r++)n[r]=t(e[r]);return n}return t(e)},numeric.parseCSV=function(e){var t,r,n=e.split("\\n"),i=[],a=/(([^\'",]*)|(\'[^\']*\')|("[^"]*")),/g,o=/^\\s*(([+-]?[0-9]+(\\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\\.[0-9]+)?(e[+-]?[0-9]+)?))\\s*$/,s=function(e){return e.substr(0,e.length-1)},u=0;for(r=0;r<n.length;r++){var c,l=(n[r]+",").match(a);if(l.length>0){for(i[u]=[],t=0;t<l.length;t++)c=s(l[t]),o.test(c)?i[u][t]=parseFloat(c):i[u][t]=c;u++}}return i},numeric.toCSV=function(e){var t,r,n,i,a,o,s=numeric.dim(e);for(n=s[0],i=s[1],o=[],t=0;t<n;t++){for(a=[],r=0;r<n;r++)a[r]=e[t][r].toString();o[t]=a.join(", ")}return o.join("\\n")+"\\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,r,n,i,a,o,s,u,c=e.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(t=0;t<c;t+=3)r=e[t],n=e[t+1],i=e[t+2],a=r>>2,o=((3&r)<<4)+(n>>4),s=((15&n)<<2)+(i>>6),u=63&i,t+1>=c?s=u=64:t+2>=c&&(u=64),h+=l.charAt(a)+l.charAt(o)+l.charAt(s)+l.charAt(u);return h}function r(e,t,r){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=e.length);var n,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1,o=0;e.length;for(n=t;n<r;n++)o=255&(a^e[n]),a=a>>>8^i[o];return a^-1}var n,i,a,o,s,u,c,l,h,p,f=e[0].length,m=e[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,m>>24&255,m>>16&255,m>>8&255,255&m,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(p=r(d,12,29),d[29]=p>>24&255,d[30]=p>>16&255,d[31]=p>>8&255,d[32]=255&p,n=1,i=0,c=0;c<f;c++){for(c<f-1?d.push(0):d.push(1),s=3*m+1+(0===c)&255,u=3*m+1+(0===c)>>8&255,d.push(s),d.push(u),d.push(255&~s),\nd.push(255&~u),0===c&&d.push(0),l=0;l<m;l++)for(a=0;a<3;a++)s=e[a][c][l],s=s>255?255:s<0?0:Math.round(s),n=(n+s)%65521,i=(i+n)%65521,d.push(s);d.push(0)}return h=(i<<16)+n,d.push(h>>24&255),d.push(h>>16&255),d.push(h>>8&255),d.push(255&h),o=d.length-41,d[33]=o>>24&255,d[34]=o>>16&255,d[35]=o>>8&255,d[36]=255&o,p=r(d,37),d.push(p>>24&255),d.push(p>>16&255),d.push(p>>8&255),d.push(255&p),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+t(d)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,r;return"object"==typeof e?(t=e[0],"object"==typeof t?(r=t[0],"object"==typeof r?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return numeric.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+t+\';\\nif(typeof x === "number") { var xi = x; \'+e+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+e+";\\n    xi = x[i-1];\\n    "+e+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+e+"\\n}\\nreturn accum;")},numeric.mapreduce2=function(e,t){return numeric.compile("x","var n = x.length;\\nvar i,xi;\\n"+t+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+e+"\\n}\\nreturn accum;")},numeric.same=function e(t,r){var n,i;if(!(t instanceof Array&&r instanceof Array))return!1;if(i=t.length,i!==r.length)return!1;for(n=0;n<i;n++)if(t[n]!==r[n]){if("object"!=typeof t[n])return!1;if(!e(t[n],r[n]))return!1}return!0},numeric.rep=function(e,t,r){"undefined"==typeof r&&(r=0);var n,i=e[r],a=Array(i);if(r===e.length-1){for(n=i-2;n>=0;n-=2)a[n+1]=t,a[n]=t;return n===-1&&(a[0]=t),a}for(n=i-1;n>=0;n--)a[n]=numeric.rep(e,t,r+1);return a},numeric.dotMMsmall=function(e,t){var r,n,i,a,o,s,u,c,l,h,p;for(a=e.length,o=t.length,s=t[0].length,u=Array(a),r=a-1;r>=0;r--){for(c=Array(s),l=e[r],i=s-1;i>=0;i--){for(h=l[o-1]*t[o-1][i],n=o-2;n>=1;n-=2)p=n-1,h+=l[n]*t[n][i]+l[p]*t[p][i];0===n&&(h+=l[0]*t[0][i]),c[i]=h}u[r]=c}return u},numeric._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},numeric.dotMMbig=function(e,t){var r,n,i,a,o=numeric._getCol,s=t.length,u=Array(s),c=e.length,l=t[0].length,h=new Array(c),p=numeric.dotVV;for(--s,--c,n=c;n!==-1;--n)h[n]=Array(l);for(--l,n=l;n!==-1;--n)for(o(t,n,u),i=c;i!==-1;--i)a=0,r=e[i],h[i][n]=p(r,u);return h},numeric.dotMV=function(e,t){var r,n=e.length,i=(t.length,Array(n)),a=numeric.dotVV;for(r=n-1;r>=0;r--)i[r]=a(e[r],t);return i},numeric.dotVM=function(e,t){var r,n,i,a,o,s,u;for(i=e.length,a=t[0].length,o=Array(a),n=a-1;n>=0;n--){for(s=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)u=r-1,s+=e[r]*t[r][n]+e[u]*t[u][n];0===r&&(s+=e[0]*t[0][n]),o[n]=s}return o},numeric.dotVV=function(e,t){var r,n,i=e.length,a=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,a+=e[r]*t[r]+e[n]*t[n];return 0===r&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var r=numeric.dim;switch(1e3*r(e).length+r(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,r,n,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),r=t+2,n=a-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),o[t]=i}return o},numeric.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,a=[],o=/\\[i\\]$/,s="",u=!1;for(n=0;n<e.length;n++)o.test(e[n])?(i=e[n].substring(0,e[n].length-3),s=i):i=e[n],"ret"===i&&(u=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+s+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(u?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+r+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+t+"\\n}\\nreturn ret;",numeric.compile.apply(null,a)},numeric.pointwise2=function(e,t,r){"undefined"==typeof r&&(r="");var n,i,a=[],o=/\\[i\\]$/,s="",u=!1;for(n=0;n<e.length;n++)o.test(e[n])?(i=e[n].substring(0,e[n].length-3),s=i):i=e[n],"ret"===i&&(u=!0),a.push(i);return a[e.length]="var _n = "+s+".length;\\nvar i"+(u?"":", ret = Array(_n)")+";\\n"+r+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+t+"\\n}\\nreturn ret;",numeric.compile.apply(null,a)},numeric._biforeach=function e(t,r,n,i,a){if(i===n.length-1)return void a(t,r);var o,s=n[i];for(o=s-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,i+1,a)},numeric._biforeach2=function e(t,r,n,i,a){if(i===n.length-1)return a(t,r);var o,s=n[i],u=Array(s);for(o=s-1;o>=0;--o)u[o]=e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,i+1,a);return u},numeric._foreach=function e(t,r,n,i){if(n===r.length-1)return void i(t);var a,o=r[n];for(a=o-1;a>=0;a--)e(t[a],r,n+1,i)},numeric._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var a,o=r[n],s=Array(o);for(a=o-1;a>=0;a--)s[a]=e(t[a],r,n+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var r,n,i="";numeric.myIndexOf.call(numeric.mathfuns2,e)!==-1?(i="var "+t+" = Math."+t+";\\n",r=function(e,r,n){return e+" = "+t+"("+r+","+n+")"},n=function(e,r){return e+" = "+t+"("+e+","+r+")"}):(r=function(e,r,n){return e+" = "+r+" "+t+" "+n},n=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+t+"= "+r}:function(e,r){return e+" = "+e+" "+t+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),i),numeric[e]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+n("x","y")+"\\n}\\nreturn x;\\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),i),numeric[e+"eq"]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+e+"eqV, S = numeric."+e+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],numeric.myIndexOf.call(numeric.mathfuns,e)!==-1&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=numeric.compile("x",\'if(typeof x !== "object") return \'+t+"x\\nvar i;\\nvar V = numeric."+e+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=numeric.compile("x",\'if(typeof x !== "object") return \'+t+"(x)\\nvar i;\\nvar V = numeric."+e+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=numeric.compile("x","s","k",t[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+t[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+e+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+t[0]+"\\n}\\nreturn accum;\\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,r,n,i,a,o,s,e,u=numeric.dim(e),c=Math.abs,l=u[0],h=u[1],p=numeric.clone(e),f=numeric.identity(l);for(o=0;o<h;++o){var m=-1,d=-1;for(a=o;a!==l;++a)s=c(p[a][o]),s>d&&(m=a,d=s);for(r=p[m],p[m]=p[o],p[o]=r,i=f[m],f[m]=f[o],f[o]=i,e=r[o],s=o;s!==h;++s)r[s]/=e;for(s=h-1;s!==-1;--s)i[s]/=e;for(a=l-1;a!==-1;--a)if(a!==o){for(t=p[a],n=f[a],e=t[o],s=o+1;s!==h;++s)t[s]-=r[s]*e;for(s=h-1;s>0;--s)n[s]-=i[s]*e,--s,n[s]-=i[s]*e;0===s&&(n[0]-=i[0]*e)}}return f},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var r,n,i,a,o,s,u,c,l=t[0],h=1,p=numeric.clone(e);for(n=0;n<l-1;n++){for(i=n,r=n+1;r<l;r++)Math.abs(p[r][n])>Math.abs(p[i][n])&&(i=r);for(i!==n&&(u=p[i],p[i]=p[n],p[n]=u,h*=-1),a=p[n],r=n+1;r<l;r++){for(o=p[r],s=o[n]/a[n],i=n+1;i<l-1;i+=2)c=i+1,o[i]-=a[i]*s,o[c]-=a[c]*s;i!==l&&(o[i]-=a[i]*s)}if(0===a[n])return 0;h*=a[n]}return h*p[n][n]},numeric.transpose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=i[r],a[t-1]=n[r],--r,a=u[r],a[t]=i[r],a[t-1]=n[r];0===r&&(a=u[0],a[t]=i[0],a[t-1]=n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=n[r],--r,u[r][0]=n[r];0===r&&(u[0][0]=n[0])}return u},numeric.negtranspose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=-i[r],a[t-1]=-n[r],--r,a=u[r],a[t]=-i[r],a[t-1]=-n[r];0===r&&(a=u[0],a[t]=-i[0],a[t-1]=-n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=-n[r],--r,u[r][0]=-n[r];0===r&&(u[0][0]=-n[0])}return u},numeric._random=function e(t,r){var n,i,a=t[r],o=Array(a);if(r===t.length-1){for(i=Math.random,n=a-1;n>=1;n-=2)o[n]=i(),o[n-1]=i();return 0===n&&(o[0]=i()),o}for(n=a-1;n>=0;n--)o[n]=e(t,r+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,r){if("undefined"==typeof r&&(r=Math.max(Math.round(t-e)+1,1)),r<2)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},numeric.getBlock=function(e,t,r){function n(e,a){var o,s=t[a],u=r[a]-s,c=Array(u);if(a===i.length-1){for(o=u;o>=0;o--)c[o]=e[o+s];return c}for(o=u;o>=0;o--)c[o]=n(e[o+s],a+1);return c}var i=numeric.dim(e);return n(e,0)},numeric.setBlock=function(e,t,r,n){function i(e,n,o){var s,u=t[o],c=r[o]-u;if(o===a.length-1)for(s=c;s>=0;s--)e[s+u]=n[s];for(s=c;s>=0;s--)i(e[s+u],n[s],o+1)}var a=numeric.dim(e);return i(e,n,0),e},numeric.getRange=function(e,t,r){var n,i,a,o,s=t.length,u=r.length,c=Array(s);for(n=s-1;n!==-1;--n)for(c[n]=Array(u),a=c[n],o=e[t[n]],i=u-1;i!==-1;--i)a[i]=o[r[i]];return c},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var r,n,i,a,o,s=t[0],u=t[1];for(r=0,n=0,i=0;i<s;++i)r+=e[i][0].length;for(a=0;a<u;++a)n+=e[0][a][0].length;var c=Array(r);for(i=0;i<r;++i)c[i]=Array(n);var l,h,p,f,m,d=0;for(i=0;i<s;++i){for(l=n,a=u-1;a!==-1;--a)for(o=e[i][a],l-=o[0].length,p=o.length-1;p!==-1;--p)for(m=o[p],h=c[d+p],f=m.length-1;f!==-1;--f)h[l+f]=m[f];d+=e[i][0].length}return c},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var r=numeric.dim(e),n=numeric.dim(t);if(1!==r.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,u=r[0],c=n[0],l=Array(u);for(a=u-1;a>=0;a--){for(i=Array(c),s=e[a],o=c-1;o>=3;--o)i[o]=s*t[o],--o,i[o]=s*t[o],--o,i[o]=s*t[o],--o,i[o]=s*t[o];for(;o>=0;)i[o]=s*t[o],--o;l[a]=i}return l},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,r,n,i){numeric.indexOf;if("string"!=typeof i){var a;i="";for(a in numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||r.indexOf(a)>=0||n.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\\n")}return numeric.compile(["y"],"var x = this;\\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\\n"+i+"\\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\\n  }\\n  return new numeric.T("+r+");\\n}\\nif(y.y) {\\n  return new numeric.T("+t+");\\n}\\nreturn new numeric.T("+e+");\\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,r),t(numeric.neg(this.y),r))}return new T(t(1,this.x))},numeric.T.prototype.div=function e(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var e=numeric.div;return this.y?new numeric.T(e(this.x,t.x),e(this.y,t.x)):new numeric.T(e(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),e(r)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),numeric.negtranspose(r)):new numeric.T(e(t))},numeric.Tunop=function(e,t,r){return"string"!=typeof r&&(r=""),numeric.compile("var x = this;\\n"+r+"\\nif(x.y) {  "+t+"\\n}\\n"+e+"\\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex);","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex));","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x));","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x));","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,r,n,i,a,o,s,u,c,l,h,t,r,n,p,f,m,d,g,y,v,b=e.x.length,x=numeric.identity(b),_=numeric.rep([b,b],0),w=numeric.clone(e.x),M=numeric.clone(e.y);for(t=0;t<b;t++){for(m=w[t][t],d=M[t][t],p=m*m+d*d,n=t,r=t+1;r<b;r++)m=w[r][t],d=M[r][t],f=m*m+d*d,f>p&&(n=r,p=f);for(n!==t&&(v=w[t],w[t]=w[n],w[n]=v,v=M[t],M[t]=M[n],M[n]=v,v=x[t],x[t]=x[n],x[n]=v,v=_[t],_[t]=_[n],_[n]=v),i=w[t],a=M[t],u=x[t],c=_[t],m=i[t],d=a[t],r=t+1;r<b;r++)g=i[r],y=a[r],i[r]=(g*m+y*d)/p,a[r]=(y*m-g*d)/p;for(r=0;r<b;r++)g=u[r],y=c[r],u[r]=(g*m+y*d)/p,c[r]=(y*m-g*d)/p;for(r=t+1;r<b;r++){for(o=w[r],s=M[r],l=x[r],h=_[r],m=o[t],d=s[t],n=t+1;n<b;n++)g=i[n],y=a[n],o[n]-=g*m-y*d,s[n]-=y*m+g*d;for(n=0;n<b;n++)g=u[n],y=c[n],l[n]-=g*m-y*d,h[n]-=y*m+g*d}}for(t=b-1;t>0;t--)for(u=x[t],c=_[t],r=t-1;r>=0;r--)for(l=x[r],h=_[r],m=w[r][t],d=M[r][t],n=b-1;n>=0;n--)g=u[n],y=c[n],l[n]-=m*g-d*y,h[n]-=m*y+d*g;return new numeric.T(x,_)},numeric.T.prototype.get=function(e){var t,r=this.x,n=this.y,i=0,a=e.length;if(n){for(;i<a;)t=e[i],r=r[t],n=n[t],i++;return new numeric.T(r,n)}for(;i<a;)t=e[i],r=r[t],i++;return new numeric.T(r)},numeric.T.prototype.set=function(e,t){var r,n=this.x,i=this.y,a=0,o=e.length,s=t.x,u=t.y;if(0===o)return u?this.y=u:i&&(this.y=void 0),this.x=n,this;if(u){for(i||(i=numeric.rep(numeric.dim(n),0),this.y=i);a<o-1;)r=e[a],n=n[r],i=i[r],a++;return r=e[a],n[r]=s,i[r]=u,this}if(i){for(;a<o-1;)r=e[a],n=n[r],i=i[r],a++;return r=e[a],n[r]=s,s instanceof Array?i[r]=numeric.rep(numeric.dim(s),0):i[r]=0,this}for(;a<o-1;)r=e[a],n=n[r],a++;return r=e[a],n[r]=s,this},numeric.T.prototype.getRows=function(e,t){var r,n,i=t-e+1,a=Array(i),o=this.x,s=this.y;for(r=e;r<=t;r++)a[r-e]=o[r];if(s){for(n=Array(i),r=e;r<=t;r++)n[r-e]=s[r];return new numeric.T(a,n)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,r){var n,i=this.x,a=this.y,o=r.x,s=r.y;for(n=e;n<=t;n++)i[n]=o[n-e];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),n=e;n<=t;n++)a[n]=s[n-e];else if(a)for(n=e;n<=t;n++)a[n]=numeric.rep([o[n-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,r=this.y;return r?new numeric.T(t[e],r[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var r=this.x,n=this.y,i=t.x,a=t.y;return r[e]=i,a?(n||(n=numeric.rep(numeric.dim(r),0),this.y=n),n[e]=a):n&&(n=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var r=this.x,n=this.y,i=numeric.getBlock;return n?new numeric.T(i(r,e,t),i(n,e,t)):new numeric.T(i(r,e,t))},numeric.T.prototype.setBlock=function(e,t,r){r instanceof numeric.T||(r=new numeric.T(r));var n=this.x,i=this.y,a=numeric.setBlock,o=r.x,s=r.y;return s?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(n,e,t,o),a(i,e,t,s),this):(a(n,e,t,o),void(i&&a(i,e,t,numeric.rep(numeric.dim(o),0))))},numeric.T.rep=function(e,t){var r=numeric.T;t instanceof r||(t=new r(t));var n=t.x,i=t.y,a=numeric.rep;return i?new r(a(e,n),a(e,i)):new r(a(e,n))},numeric.T.diag=function e(t){t instanceof numeric.T||(t=new numeric.T(t));var r=t.x,n=t.y,e=numeric.diag;return n?new numeric.T(e(r),e(n)):new numeric.T(e(r))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,r=this.y;return r?new e.T(e.getDiag(t),e.getDiag(r)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),r=e[0]>=0?1:-1,n=r*numeric.norm2(e);t[0]+=n;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,n,i,a,o,s,u,c,l,h,p=t[0],f=numeric.clone(e),m=numeric.identity(p);for(n=0;n<p-2;n++){for(a=Array(p-n-1),r=n+1;r<p;r++)a[r-n-1]=f[r][n];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(f,[n+1,n],[p-1,p-1]),u=numeric.tensor(o,numeric.dot(o,s)),r=n+1;r<p;r++)for(c=f[r],l=u[r-n-1],i=n;i<p;i++)c[i]-=2*l[i-n];for(s=numeric.getBlock(f,[0,n+1],[p-1,p-1]),u=numeric.tensor(numeric.dot(s,o),o),r=0;r<p;r++)for(c=f[r],l=u[r],i=n+1;i<p;i++)c[i]-=2*l[i-n-1];for(s=Array(p-n-1),r=n+1;r<p;r++)s[r-n-1]=m[r];for(u=numeric.tensor(o,numeric.dot(o,s)),r=n+1;r<p;r++)for(h=m[r],l=u[r-n-1],i=0;i<p;i++)h[i]-=2*l[i]}}return{H:f,Q:m}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var r,n,i,a,o,s,u,c,l,h,p,f,m,d,g,y,v,b,x=(numeric.clone(e),numeric.dim(e)),_=x[0],w=numeric.identity(_);if(_<3)return{Q:w,B:[[0,_-1]]};var M=numeric.epsilon;for(b=0;b<t;b++){for(y=0;y<_-1;y++)if(Math.abs(e[y+1][y])<M*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var E=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),T=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[_-1,_-1]),t);for(f=Array(y+1),g=0;g<=y;g++)f[g]=w[g];for(m=numeric.dot(E.Q,f),g=0;g<=y;g++)w[g]=m[g];for(f=Array(_-y-1),g=y+1;g<_;g++)f[g-y-1]=w[g];for(m=numeric.dot(T.Q,f),g=y+1;g<_;g++)w[g]=m[g-y-1];return{Q:w,B:E.B.concat(numeric.add(T.B,y+1))}}if(i=e[_-2][_-2],a=e[_-2][_-1],o=e[_-1][_-2],s=e[_-1][_-1],c=i+s,u=i*s-a*o,l=numeric.getBlock(e,[0,0],[2,2]),c*c>=4*u){var S,I;S=.5*(c+Math.sqrt(c*c-4*u)),I=.5*(c-Math.sqrt(c*c-4*u)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,S+I)),numeric.diag(numeric.rep([3],S*I)))}else l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,c)),numeric.diag(numeric.rep([3],u)));for(r=[l[0][0],l[1][0],l[2][0]],n=numeric.house(r),f=[e[0],e[1],e[2]],m=numeric.tensor(n,numeric.dot(n,f)),g=0;g<3;g++)for(p=e[g],d=m[g],v=0;v<_;v++)p[v]-=2*d[v];for(f=numeric.getBlock(e,[0,0],[_-1,2]),m=numeric.tensor(numeric.dot(f,n),n),g=0;g<_;g++)for(p=e[g],d=m[g],v=0;v<3;v++)p[v]-=2*d[v];for(f=[w[0],w[1],w[2]],m=numeric.tensor(n,numeric.dot(n,f)),g=0;g<3;g++)for(h=w[g],d=m[g],v=0;v<_;v++)h[v]-=2*d[v];var N;for(y=0;y<_-2;y++){for(v=y;v<=y+1;v++)if(Math.abs(e[v+1][v])<M*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var E=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),T=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[_-1,_-1]),t);for(f=Array(v+1),g=0;g<=v;g++)f[g]=w[g];for(m=numeric.dot(E.Q,f),g=0;g<=v;g++)w[g]=m[g];for(f=Array(_-v-1),g=v+1;g<_;g++)f[g-v-1]=w[g];for(m=numeric.dot(T.Q,f),g=v+1;g<_;g++)w[g]=m[g-v-1];return{Q:w,B:E.B.concat(numeric.add(T.B,v+1))}}for(N=Math.min(_-1,y+3),r=Array(N-y),g=y+1;g<=N;g++)r[g-y-1]=e[g][y];for(n=numeric.house(r),f=numeric.getBlock(e,[y+1,y],[N,_-1]),m=numeric.tensor(n,numeric.dot(n,f)),g=y+1;g<=N;g++)for(p=e[g],d=m[g-y-1],v=y;v<_;v++)p[v]-=2*d[v-y];for(f=numeric.getBlock(e,[0,y+1],[_-1,N]),m=numeric.tensor(numeric.dot(f,n),n),g=0;g<_;g++)for(p=e[g],d=m[g],v=y+1;v<=N;v++)p[v]-=2*d[v-y-1];for(f=Array(N-y),g=y+1;g<=N;g++)f[g-y-1]=w[g];for(m=numeric.tensor(n,numeric.dot(n,f)),g=y+1;g<=N;g++)for(h=w[g],d=m[g-y-1],v=0;v<_;v++)h[v]-=2*d[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var r,n,i,a,o,s,u,c,l,h,p,f,m,d,g,y,v,b=numeric.toUpperHessenberg(e),x=numeric.QRFrancis(b.H,t),_=numeric.T,w=e.length,M=x.B,E=numeric.dot(x.Q,numeric.dot(b.H,numeric.transpose(x.Q))),T=new _(numeric.dot(x.Q,b.Q)),S=M.length,I=Math.sqrt;for(n=0;n<S;n++)if(r=M[n][0],r===M[n][1]);else{if(a=r+1,o=E[r][r],s=E[r][a],u=E[a][r],c=E[a][a],0===s&&0===u)continue;l=-o-c,h=o*c-s*u,p=l*l-4*h,p>=0?(f=l<0?-.5*(l-I(p)):-.5*(l+I(p)),y=(o-f)*(o-f)+s*s,v=u*u+(c-f)*(c-f),y>v?(y=I(y),d=(o-f)/y,g=s/y):(v=I(v),d=u/v,g=(c-f)/v),i=new _([[g,-d],[d,g]]),T.setRows(r,a,i.dot(T.getRows(r,a)))):(f=-.5*l,m=.5*I(-p),y=(o-f)*(o-f)+s*s,v=u*u+(c-f)*(c-f),y>v?(y=I(y+m*m),d=(o-f)/y,g=s/y,f=0,m/=y):(v=I(v+m*m),d=u/v,g=(c-f)/v,f=m/v,m=0),i=new _([[g,-d],[d,g]],[[f,m],[m,-f]]),T.setRows(r,a,i.dot(T.getRows(r,a))))}var N=T.dot(e).dot(T.transjugate()),w=e.length,C=numeric.T.identity(w);for(a=0;a<w;a++)if(a>0)for(n=a-1;n>=0;n--){var D=N.get([n,n]),A=N.get([a,a]);numeric.neq(D.x,A.x)||numeric.neq(D.y,A.y)?(f=N.getRow(n).getBlock([n],[a-1]),m=C.getRow(a).getBlock([n],[a-1]),C.set([a,n],N.get([n,a]).neg().sub(f.dot(m)).div(D.sub(A)))):C.setRow(a,C.getRow(n))}for(a=0;a<w;a++)f=C.getRow(a),C.setRow(a,f.div(f.norm2()));return C=C.transpose(),C=T.transjugate().dot(C),{lambda:N.getDiag(),E:C}},numeric.ccsSparse=function(e){var t,r,n,i,a=e.length,o=[];for(n=a-1;n!==-1;--n){r=e[n];for(i in r){for(i=parseInt(i);i>=o.length;)o[o.length]=0;0!==r[i]&&o[i]++}}var t=o.length,s=Array(t+1);for(s[0]=0,n=0;n<t;++n)s[n+1]=s[n]+o[n];var u=Array(s[t]),c=Array(s[t]);for(n=a-1;n!==-1;--n){r=e[n];for(i in r)0!==r[i]&&(o[i]--,u[s[i]+o[i]]=n,c[s[i]+o[i]]=r[i])}return[s,u,c]},numeric.ccsFull=function(e){var t,r,n,i,a=e[0],o=e[1],s=e[2],u=numeric.ccsDim(e),c=u[0],l=u[1],h=numeric.rep([c,l],0);for(t=0;t<l;t++)for(n=a[t],i=a[t+1],r=n;r<i;++r)h[o[r]][t]=s[r];return h},numeric.ccsTSolve=function(e,t,r,n,i){function a(e){var t;if(0===r[e]){for(r[e]=1,t=o[e];t<o[e+1];++t)a(s[t]);i[h]=e,++h}}var o=e[0],s=e[1],u=e[2],c=o.length-1,l=Math.max,h=0;"undefined"==typeof n&&(r=numeric.rep([c],0)),"undefined"==typeof n&&(n=numeric.linspace(0,r.length-1)),"undefined"==typeof i&&(i=[]);var p,f,m,d,g,y,v;for(p=n.length-1;p!==-1;--p)a(n[p]);for(i.length=h,p=i.length-1;p!==-1;--p)r[i[p]]=0;for(p=n.length-1;p!==-1;--p)f=n[p],r[f]=t[f];for(p=i.length-1;p!==-1;--p){for(f=i[p],m=o[f],d=l(o[f+1],m),g=m;g!==d;++g)if(s[g]===f){r[f]/=u[g];break}for(v=r[f],g=m;g!==d;++g)y=s[g],y!==f&&(r[y]-=v*u[g])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,r,n,i,a){var o,s,u,c=0,l=i.length,h=this.k,p=this.k1,f=this.j;if(0===n[e])for(n[e]=1,f[0]=e,h[0]=s=t[e],p[0]=u=t[e+1];;)if(s>=u){if(i[l]=f[c],0===c)return;++l,--c,s=h[c],u=p[c]}else o=a[r[s]],0===n[o]?(n[o]=1,h[c]=s,++c,f[c]=o,s=t[o],p[c]=u=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,r,n,i,a,o){var s,u,c,l,h,p,f,m,d,g=e[0],y=e[1],v=e[2],b=(g.length-1,t[0]),x=t[1],_=t[2];for(u=b[i],c=b[i+1],n.length=0,s=u;s<c;++s)o.dfs(a[x[s]],g,y,r,n,a);for(s=n.length-1;s!==-1;--s)r[n[s]]=0;for(s=u;s!==c;++s)l=a[x[s]],r[l]=_[s];for(s=n.length-1;s!==-1;--s){for(l=n[s],h=g[l],p=g[l+1],f=h;f<p;++f)if(a[y[f]]===l){r[l]/=v[f];break}for(d=r[l],f=h;f<p;++f)m=a[y[f]],m!==l&&(r[m]-=d*v[f])}return r},numeric.ccsLUP1=function(e,t){var r,n,i,a,o,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],h=[numeric.rep([c+1],0),[],[]],p=l[0],f=l[1],m=l[2],d=h[0],g=h[1],y=h[2],v=numeric.rep([c],0),b=numeric.rep([c],0),x=numeric.ccsLPSolve,_=(Math.max,Math.abs),w=numeric.linspace(0,c-1),M=numeric.linspace(0,c-1),E=new numeric.ccsDFS(c);for("undefined"==typeof t&&(t=1),r=0;r<c;++r){for(x(l,e,v,b,r,M,E),a=-1,o=-1,n=b.length-1;n!==-1;--n)i=b[n],i<=r||(s=_(v[i]),s>a&&(o=i,a=s));for(_(v[r])<t*a&&(n=w[r],a=w[o],w[r]=a,M[a]=r,w[o]=n,M[n]=o,a=v[r],v[r]=v[o],v[o]=a),a=p[r],o=d[r],u=v[r],f[a]=w[r],m[a]=1,++a,n=b.length-1;n!==-1;--n)i=b[n],s=v[i],b[n]=0,v[i]=0,i<=r?(g[o]=i,y[o]=s,++o):(f[a]=w[i],m[a]=s/u,++a);p[r+1]=a,d[r+1]=o}for(n=f.length-1;n!==-1;--n)f[n]=M[f[n]];return{L:l,U:h,P:w,Pinv:M}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,r,n,i,a,o){var s,u,c,l=0,h=i.length,p=this.k,f=this.k1,m=this.j;if(0===n[e])for(n[e]=1,m[0]=e,p[0]=u=t[a[e]],f[0]=c=t[a[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=c){if(i[h]=a[m[l]],0===l)return;++h,--l,u=p[l],c=f[l]}else s=r[u],0===n[s]?(n[s]=1,p[l]=u,++l,m[l]=s,s=a[s],u=t[s],f[l]=c=t[s+1]):++u}},numeric.ccsLPSolve0=function(e,t,r,n,i,a,o,s){var u,c,l,h,p,f,m,d,g,y=e[0],v=e[1],b=e[2],x=(y.length-1,t[0]),_=t[1],w=t[2];for(c=x[i],l=x[i+1],n.length=0,u=c;u<l;++u)s.dfs(_[u],y,v,r,n,a,o);for(u=n.length-1;u!==-1;--u)h=n[u],r[o[h]]=0;for(u=c;u!==l;++u)h=_[u],r[h]=w[u];for(u=n.length-1;u!==-1;--u){for(h=n[u],d=o[h],p=y[h],f=y[h+1],m=p;m<f;++m)if(v[m]===d){r[d]/=b[m];break}for(g=r[d],m=p;m<f;++m)r[v[m]]-=g*b[m];r[d]=g}},numeric.ccsLUP0=function(e,t){var r,n,i,a,o,s,u,c=e[0].length-1,l=[numeric.rep([c+1],0),[],[]],h=[numeric.rep([c+1],0),[],[]],p=l[0],f=l[1],m=l[2],d=h[0],g=h[1],y=h[2],v=numeric.rep([c],0),b=numeric.rep([c],0),x=numeric.ccsLPSolve0,_=(Math.max,Math.abs),w=numeric.linspace(0,c-1),M=numeric.linspace(0,c-1),E=new numeric.ccsDFS0(c);for("undefined"==typeof t&&(t=1),r=0;r<c;++r){for(x(l,e,v,b,r,M,w,E),a=-1,o=-1,n=b.length-1;n!==-1;--n)i=b[n],i<=r||(s=_(v[w[i]]),s>a&&(o=i,a=s));for(_(v[w[r]])<t*a&&(n=w[r],a=w[o],w[r]=a,M[a]=r,w[o]=n,M[n]=o),a=p[r],o=d[r],u=v[w[r]],f[a]=w[r],m[a]=1,++a,n=b.length-1;n!==-1;--n)i=b[n],s=v[w[i]],b[n]=0,v[w[i]]=0,i<=r?(g[o]=i,y[o]=s,++o):(f[a]=w[i],m[a]=s/u,++a);p[r+1]=a,d[r+1]=o}for(n=f.length-1;n!==-1;--n)f[n]=M[f[n]];return{L:l,U:h,P:w,Pinv:M}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,r){var n=numeric.ccsDim(e),i=n[0],a=n[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof r?r=numeric.linspace(0,a-1):"number"==typeof r&&(r=[r]);var o,s,u,c,l,h=t.length,p=r.length,f=numeric.rep([a],0),m=[],d=[],g=[f,m,d],y=e[0],v=e[1],b=e[2],x=numeric.rep([i],0),_=0,w=numeric.rep([i],0);for(s=0;s<p;++s){c=r[s];var M=y[c],E=y[c+1];for(o=M;o<E;++o)u=v[o],w[u]=1,x[u]=b[o];for(o=0;o<h;++o)l=t[o],w[l]&&(m[_]=o,d[_]=x[t[o]],++_);for(o=M;o<E;++o)u=v[o],w[u]=0;f[s+1]=_}return g},numeric.ccsDot=function(e,t){var r,n,i,a,o,s,u,c,l,h,p,f=e[0],m=e[1],d=e[2],g=t[0],y=t[1],v=t[2],b=numeric.ccsDim(e),x=numeric.ccsDim(t),_=b[0],w=(b[1],x[1]),M=numeric.rep([_],0),E=numeric.rep([_],0),T=Array(_),S=numeric.rep([w],0),I=[],N=[],C=[S,I,N];for(i=0;i!==w;++i){for(a=g[i],o=g[i+1],l=0,n=a;n<o;++n)for(h=y[n],p=v[n],s=f[h],u=f[h+1],r=s;r<u;++r)c=m[r],0===E[c]&&(T[l]=c,E[c]=1,l+=1),M[c]=M[c]+d[r]*p;for(a=S[i],o=a+l,S[i+1]=o,n=l-1;n!==-1;--n)p=a+n,r=T[n],I[p]=r,N[p]=M[r],E[r]=0,M[r]=0;S[i+1]=S[i]+l}return C},numeric.ccsLUPSolve=function(e,t){var r=e.L,n=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],a=!0);var o,s,u,c,l,h,p=t[1],f=t[2],m=r[0].length-1,d=i.length-1,g=numeric.rep([m],0),y=Array(m),v=numeric.rep([m],0),b=Array(m),x=numeric.rep([d+1],0),_=[],w=[],M=numeric.ccsTSolve,E=0;for(o=0;o<d;++o){for(l=0,u=i[o],c=i[o+1],s=u;s<c;++s)h=e.Pinv[p[s]],b[l]=h,v[h]=f[s],++l;for(b.length=l,M(r,v,g,b,y),s=b.length-1;s!==-1;--s)v[b[s]]=0;\nif(M(n,g,v,y,b),a)return v;for(s=y.length-1;s!==-1;--s)g[y[s]]=0;for(s=b.length-1;s!==-1;--s)h=b[s],_[E]=h,w[E]=v[h],v[h]=0,++E;x[o+1]=E}return[x,_,w]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),numeric.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\\nvar xk,yk,zk;\\nvar i,j,j0,j1,k,p=0;\\n"+t+"for(i=0;i<n;++i) {\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Xj[j];\\n    x[k] = 1;\\n    Zj[p] = k;\\n    ++p;\\n  }\\n  j0 = Yi[i]; j1 = Yi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Yj[j];\\n    y[k] = Yv[j];\\n    if(x[k] === 0) {\\n      Zj[p] = k;\\n      ++p;\\n    }\\n  }\\n  Zi[i+1] = p;\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\\n  j0 = Zi[i]; j1 = Zi[i+1];\\n  for(j=j0;j!==j1;++j) {\\n    k = Zj[j];\\n    xk = x[k];\\n    yk = y[k];\\n"+e+"\\n    Zv[j] = zk;\\n  }\\n  j0 = Xi[i]; j1 = Xi[i+1];\\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\\n  j0 = Yi[i]; j1 = Yi[i+1];\\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\\n}\\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=numeric.compile("X","Y",\'if(typeof X === "number") return \'+A+\';\\nif(typeof Y === "number") return \'+B+";\\nreturn "+C+";\\n")}(),numeric.ccsScatter=function(e){var t,r=e[0],n=e[1],i=e[2],a=numeric.sup(n)+1,o=r.length,s=numeric.rep([a],0),u=Array(o),c=Array(o),l=numeric.rep([a],0);for(t=0;t<o;++t)l[n[t]]++;for(t=0;t<a;++t)s[t+1]=s[t]+l[t];var h,p,f=s.slice(0);for(t=0;t<o;++t)p=n[t],h=f[p],u[h]=r[t],c[h]=i[t],f[p]=f[p]+1;return[s,u,c]},numeric.ccsGather=function(e){var t,r,n,i,a,o=e[0],s=e[1],u=e[2],c=o.length-1,l=s.length,h=Array(l),p=Array(l),f=Array(l);for(a=0,t=0;t<c;++t)for(n=o[t],i=o[t+1],r=n;r!==i;++r)p[a]=t,h[a]=s[r],f[a]=u[r],++a;return[h,p,f]},numeric.sdim=function e(t,r,n){if("undefined"==typeof r&&(r=[]),"object"!=typeof t)return r;"undefined"==typeof n&&(n=0),n in r||(r[n]=0),t.length>r[n]&&(r[n]=t.length);var i;for(i in t)t.hasOwnProperty(i)&&e(t[i],r,n+1);return r},numeric.sclone=function e(t,r,n){"undefined"==typeof r&&(r=0),"undefined"==typeof n&&(n=numeric.sdim(t).length);var i,a=Array(t.length);if(r===n-1){for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);return a}for(i in t)t.hasOwnProperty(i)&&(a[i]=e(t[i],r+1,n));return a},numeric.sdiag=function(e){var t,r,n=e.length,i=Array(n);for(t=n-1;t>=1;t-=2)r=t-1,i[t]=[],i[t][t]=e[t],i[r]=[],i[r][r]=e[r];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,r,n,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){n=e[t];for(r in n)n.hasOwnProperty(r)&&("object"!=typeof i[r]&&(i[r]=[]),i[r][t]=n[r])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var r,n,i,a,o,s,u,c=e.length,l=(t.length,numeric.stranspose(t)),h=l.length,p=Array(c);for(i=c-1;i>=0;i--){for(u=[],r=e[i],o=h-1;o>=0;o--){s=0,n=l[o];for(a in r)r.hasOwnProperty(a)&&a in n&&(s+=r[a]*n[a]);s&&(u[o]=s)}p[i]=u}return p},numeric.sdotMV=function(e,t){var r,n,i,a,o=e.length,s=Array(o);for(n=o-1;n>=0;n--){r=e[n],a=0;for(i in r)r.hasOwnProperty(i)&&t[i]&&(a+=r[i]*t[i]);a&&(s[n]=a)}return s},numeric.sdotVM=function(e,t){var r,n,i,a,o=[];for(r in e)if(e.hasOwnProperty(r)){i=t[r],a=e[r];for(n in i)i.hasOwnProperty(n)&&(o[n]||(o[n]=0),o[n]+=a*i[n])}return o},numeric.sdotVV=function(e,t){var r,n=0;for(r in e)e[r]&&t[r]&&(n+=e[r]*t[r]);return n},numeric.sdot=function(e,t){var r=numeric.sdim(e).length,n=numeric.sdim(t).length,i=1e3*r+n;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+n)}},numeric.sscatter=function(e){var t,r,n,i,a=e[0].length,o=e.length,s=[];for(r=a-1;r>=0;--r)if(e[o-1][r]){for(i=s,n=0;n<o-2;n++)t=e[n][r],i[t]||(i[t]=[]),i=i[t];i[e[n][r]]=e[n+1][r]}return s},numeric.sgather=function e(t,r,n){"undefined"==typeof r&&(r=[]),"undefined"==typeof n&&(n=[]);var i,a,o;i=n.length;for(a in t)if(t.hasOwnProperty(a))if(n[i]=parseInt(a),o=t[a],"number"==typeof o){if(o){if(0===r.length)for(a=i+1;a>=0;--a)r[a]=[];for(a=i;a>=0;--a)r[a].push(n[a]);r[i+1].push(o)}}else e(o,r,n);return n.length>i&&n.pop(),r},numeric.cLU=function(e){var t,r,n,i,a,o,s=e[0],u=e[1],c=e[2],l=s.length,h=0;for(t=0;t<l;t++)s[t]>h&&(h=s[t]);h++;var p,f,m,d=Array(h),g=Array(h),y=numeric.rep([h],1/0),v=numeric.rep([h],-(1/0));for(n=0;n<l;n++)t=s[n],r=u[n],r<y[t]&&(y[t]=r),r>v[t]&&(v[t]=r);for(t=0;t<h-1;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=h-1;t>=1;t--)y[t]<y[t-1]&&(y[t-1]=y[t]);var b=0,x=0;for(t=0;t<h;t++)g[t]=numeric.rep([v[t]-y[t]+1],0),d[t]=numeric.rep([t-y[t]],0),b+=t-y[t]+1,x+=v[t]-t+1;for(n=0;n<l;n++)t=s[n],g[t][u[n]-y[t]]=c[n];for(t=0;t<h-1;t++)for(i=t-y[t],p=g[t],r=t+1;y[r]<=t&&r<h;r++)if(a=t-y[r],o=v[t]-t,f=g[r],m=f[a]/p[i]){for(n=1;n<=o;n++)f[n+a]-=m*p[n+i];d[r][t-y[r]]=m}var l,_,w,p=[],f=[],M=[],E=[],T=[],S=[];for(l=0,_=0,t=0;t<h;t++){for(i=y[t],a=v[t],w=g[t],r=t;r<=a;r++)w[r-i]&&(p[l]=t,f[l]=r,M[l]=w[r-i],l++);for(w=d[t],r=i;r<t;r++)w[r-i]&&(E[_]=t,T[_]=r,S[_]=w[r-i],_++);E[_]=t,T[_]=t,S[_]=1,_++}return{U:[p,f,M],L:[E,T,S]}},numeric.cLUsolve=function(e,t){var r,n,i=e.L,a=e.U,o=numeric.clone(t),s=i[0],u=i[1],c=i[2],l=a[0],h=a[1],p=a[2],f=l.length,m=(s.length,o.length);for(n=0,r=0;r<m;r++){for(;u[n]<r;)o[r]-=c[n]*o[u[n]],n++;n++}for(n=f-1,r=m-1;r>=0;r--){for(;h[n]>r;)o[r]-=p[n]*o[h[n]],n--;o[r]/=p[n],n--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var r,n,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,r){return t>=e[0]/2||r<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,r=1;r<e[0]-1;r++)for(n=1;n<e[1]-1;n++)t(r,n)&&(a[r][n]=i,i++);return a},numeric.cdelsq=function(e){var t,r,n,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),u=s[0],c=s[1],l=[],h=[],p=[];for(t=1;t<u-1;t++)for(r=1;r<c-1;r++)if(!(e[t][r]<0)){for(n=0;n<4;n++)i=t+o[n][0],a=r+o[n][1],e[i][a]<0||(l.push(e[t][r]),h.push(e[i][a]),p.push(-1));l.push(e[t][r]),h.push(e[t][r]),p.push(4)}return[l,h,p]},numeric.cdotMV=function(e,t){var r,n,i,a=e[0],o=e[1],s=e[2],u=a.length;for(i=0,n=0;n<u;n++)a[n]>i&&(i=a[n]);for(i++,r=numeric.rep([i],0),n=0;n<u;n++)r[a[n]]+=s[n]*t[o[n]];return r},numeric.Spline=function(e,t,r,n,i){this.x=e,this.yl=t,this.yr=r,this.kl=n,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,r,n,i,a=this.x,o=this.yl,s=this.yr,u=this.kl,c=this.kr,l=numeric.add,h=numeric.sub,p=numeric.mul;r=h(p(u[t],a[t+1]-a[t]),h(s[t+1],o[t])),n=l(p(c[t+1],a[t]-a[t+1]),h(s[t+1],o[t])),i=(e-a[t])/(a[t+1]-a[t]);var f=i*(1-i);return l(l(l(p(1-i,o[t]),p(i,s[t+1])),p(r,f*(1-i))),p(n,f*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,r,n,i=this.x,a=i.length,o=Math.floor;for(t=0,r=a-1;r-t>1;)n=o((t+r)/2),i[n]<=e?t=n:r=n;return this._at(e,t)}var s,a=e.length,u=Array(a);for(s=a-1;s!==-1;--s)u[s]=this.at(e[s]);return u},numeric.Spline.prototype.diff=function(){var e,t,r,n=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,u=i.length,c=o,l=s,h=Array(u),p=Array(u),f=numeric.add,m=numeric.mul,d=numeric.div,g=numeric.sub;for(e=u-1;e!==-1;--e)t=n[e+1]-n[e],r=g(a[e+1],i[e]),h[e]=d(f(m(r,6),m(o[e],-4*t),m(s[e+1],-2*t)),t*t),p[e+1]=d(f(m(r,-6),m(o[e],2*t),m(s[e+1],4*t)),t*t);return new numeric.Spline(n,c,l,h,p)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],r=this.x,n=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof n[0]&&(n=[n],i=[i],a=[a],o=[o]);var s,u,c,l,h,p,f,m,d,g,y,v,b,x,_,w,M,E,T,S,I,N,C,D,A=n.length,O=r.length-1,t=Array(A),P=Math.sqrt;for(s=0;s!==A;++s){for(l=n[s],h=i[s],p=a[s],f=o[s],m=[],u=0;u!==O;u++){for(u>0&&h[u]*l[u]<0&&m.push(r[u]),w=r[u+1]-r[u],M=r[u],y=l[u],v=h[u+1],d=p[u]/w,g=f[u+1]/w,_=e(d-g+3*(y-v))+12*g*y,b=g+3*y+2*d-3*v,x=3*(g+d+2*(y-v)),_<=0?(T=b/x,E=T>r[u]&&T<r[u+1]?[r[u],T,r[u+1]]:[r[u],r[u+1]]):(T=(b-P(_))/x,S=(b+P(_))/x,E=[r[u]],T>r[u]&&T<r[u+1]&&E.push(T),S>r[u]&&S<r[u+1]&&E.push(S),E.push(r[u+1])),N=E[0],T=this._at(N,u),c=0;c<E.length-1;c++)if(C=E[c+1],S=this._at(C,u),0!==T)if(0===S||T*S>0)N=C,T=S;else{for(var k=0;;){if(D=(T*C-S*N)/(T-S),D<=N||D>=C)break;if(I=this._at(D,u),I*S>0)C=D,S=I,k===-1&&(T*=.5),k=-1;else{if(!(I*T>0))break;N=D,T=I,1===k&&(S*=.5),k=1}}m.push(D),N=E[c+1],T=this._at(N,u)}else m.push(N),N=C,T=S;0===S&&m.push(C)}t[s]=m}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,r,n){var i,a=e.length,o=[],s=[],u=[],c=numeric.sub,l=numeric.mul,h=numeric.add;for(i=a-2;i>=0;i--)s[i]=e[i+1]-e[i],u[i]=c(t[i+1],t[i]);"string"!=typeof r&&"string"!=typeof n||(r=n="periodic");var p=[[],[],[]];switch(typeof r){case"undefined":o[0]=l(3/(s[0]*s[0]),u[0]),p[0].push(0,0),p[1].push(0,1),p[2].push(2/s[0],1/s[0]);break;case"string":o[0]=h(l(3/(s[a-2]*s[a-2]),u[a-2]),l(3/(s[0]*s[0]),u[0])),p[0].push(0,0,0),p[1].push(a-2,0,1),p[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=r,p[0].push(0),p[1].push(0),p[2].push(1)}for(i=1;i<a-1;i++)o[i]=h(l(3/(s[i-1]*s[i-1]),u[i-1]),l(3/(s[i]*s[i]),u[i])),p[0].push(i,i,i),p[1].push(i-1,i,i+1),p[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof n){case"undefined":o[a-1]=l(3/(s[a-2]*s[a-2]),u[a-2]),p[0].push(a-1,a-1),p[1].push(a-2,a-1),p[2].push(1/s[a-2],2/s[a-2]);break;case"string":p[1][p[1].length-1]=0;break;default:o[a-1]=n,p[0].push(a-1),p[1].push(a-1),p[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var f=Array(o.length);if("string"==typeof r)for(i=f.length-1;i!==-1;--i)f[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(p)),o[i]),f[i][a-1]=f[i][0];else for(i=f.length-1;i!==-1;--i)f[i]=numeric.cLUsolve(numeric.cLU(p),o[i]);return f="number"==typeof t[0]?f[0]:numeric.transpose(f),new numeric.Spline(e,t,t,f,f)},numeric.fftpow2=function e(t,r){var n=t.length;if(1!==n){var i,a,o=Math.cos,s=Math.sin,u=Array(n/2),c=Array(n/2),l=Array(n/2),h=Array(n/2);for(a=n/2,i=n-1;i!==-1;--i)--a,l[a]=t[i],h[a]=r[i],--i,u[a]=t[i],c[a]=r[i];e(u,c),e(l,h),a=n/2;var p,f,m,d=-6.283185307179586/n;for(i=n-1;i!==-1;--i)--a,a===-1&&(a=n/2-1),p=d*i,f=o(p),m=s(p),t[i]=u[a]+f*l[a]-m*h[a],r[i]=c[a]+f*h[a]+m*l[a]}},numeric._ifftpow2=function e(t,r){var n=t.length;if(1!==n){var i,a,o=Math.cos,s=Math.sin,u=Array(n/2),c=Array(n/2),l=Array(n/2),h=Array(n/2);for(a=n/2,i=n-1;i!==-1;--i)--a,l[a]=t[i],h[a]=r[i],--i,u[a]=t[i],c[a]=r[i];e(u,c),e(l,h),a=n/2;var p,f,m,d=6.283185307179586/n;for(i=n-1;i!==-1;--i)--a,a===-1&&(a=n/2-1),p=d*i,f=o(p),m=s(p),t[i]=u[a]+f*l[a]-m*h[a],r[i]=c[a]+f*h[a]+m*l[a]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,r,n){numeric.fftpow2(e,t),numeric.fftpow2(r,n);var i,a,o,s,u,c=e.length;for(i=c-1;i!==-1;--i)a=e[i],s=t[i],o=r[i],u=n[i],e[i]=a*o-s*u,t[i]=a*u+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,r=this.x,n=this.y,i=r.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),h=Math.cos,p=Math.sin,f=-3.141592653589793/i,m=numeric.rep([u],0),d=numeric.rep([u],0);Math.floor(i/2);for(e=0;e<i;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;e<i;e++)d[e]=n[e];for(c[0]=1,e=1;e<=u/2;e++)t=f*e*e,c[e]=h(t),l[e]=p(t),c[u-e]=h(t),l[u-e]=p(t);var g=new numeric.T(m,d),y=new numeric.T(c,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var e,t,r=this.x,n=this.y,i=r.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),c=numeric.rep([u],0),l=numeric.rep([u],0),h=Math.cos,p=Math.sin,f=3.141592653589793/i,m=numeric.rep([u],0),d=numeric.rep([u],0);Math.floor(i/2);for(e=0;e<i;e++)m[e]=r[e];if("undefined"!=typeof n)for(e=0;e<i;e++)d[e]=n[e];for(c[0]=1,e=1;e<=u/2;e++)t=f*e*e,c[e]=h(t),l[e]=p(t),c[u-e]=h(t),l[u-e]=p(t);var g=new numeric.T(m,d),y=new numeric.T(c,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var r=t.length,n=e(t);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,u,c,l,h,p,f,m=Math.max,d=numeric.clone(t),g=Array(r),m=(numeric.div,numeric.sub,Math.max),y=.001,v=Math.abs,b=Math.min,x=0;for(i=0;i<r;i++)for(var _=m(1e-6*n,1e-8);;){if(++x,x>20)throw new Error("Numerical gradient fails");if(d[i]=t[i]+_,a=e(d),d[i]=t[i]-_,o=e(d),d[i]=t[i],isNaN(a)||isNaN(o))_/=16;else{if(g[i]=(a-o)/(2*_),u=t[i]-_,c=t[i],l=t[i]+_,h=(a-n)/_,p=(n-o)/_,f=m(v(g[i]),v(n),v(a),v(o),v(u),v(c),v(l),1e-8),s=b(m(v(h-g[i]),v(p-g[i]),v(h-p))/f,_/f),!(s>y))break;_/=16}}return g},numeric.uncmin=function(e,t,r,n,i,a,o){var s=numeric.gradient;"undefined"==typeof o&&(o={}),"undefined"==typeof r&&(r=1e-8),"undefined"==typeof n&&(n=function(t){return s(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var u,c,l=t.length,h=e(t);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var p=Math.max,f=numeric.norm2;r=p(r,numeric.epsilon);var m,d,g,y,v,b,x,_,w,M,E=o.Hinv||numeric.identity(l),T=numeric.dot,S=(numeric.inv,numeric.sub),I=numeric.add,N=numeric.tensor,C=numeric.div,D=numeric.mul,A=numeric.all,O=numeric.isFinite,P=numeric.neg,k=0,F="";for(d=n(t);k<i;){if("function"==typeof a&&a(k,t,h,d,E)){F="Callback returned true";break}if(!A(O(d))){F="Gradient has Infinity or NaN";break}if(m=P(T(E,d)),!A(O(m))){F="Search direction has Infinity or NaN";break}if(M=f(m),M<r){F="Newton step smaller than tol";break}for(w=1,c=T(d,m),v=t;k<i&&!(w*M<r)&&(y=D(m,w),v=I(t,y),u=e(v),u-h>=.1*w*c||isNaN(u));)w*=.5,++k;if(w*M<r){F="Line search step size smaller than tol";break}if(k===i){F="maxit reached during line search";break}g=n(v),b=S(g,d),_=T(b,y),x=T(E,b),E=S(I(E,D((_+T(b,x))/(_*_),N(y,y))),C(I(N(x,y),N(y,x)),_)),t=v,h=u,d=g,++k}return{solution:t,f:h,gradient:d,invHessian:E,iterations:k,message:F}},numeric.Dopri=function(e,t,r,n,i,a,o){this.x=e,this.y=t,this.f=r,this.ymid=n,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(e,t){function r(e){return e*e}var n,i,a,o,s,u,e,c,l,h,p,f=this,m=f.x,d=f.y,g=f.f,y=f.ymid,v=(m.length,Math.floor,.5),b=numeric.add,x=numeric.mul,_=numeric.sub;return n=m[t],i=m[t+1],o=d[t],s=d[t+1],c=i-n,a=n+v*c,u=y[t],l=_(g[t],x(o,1/(n-a)+2/(n-i))),h=_(g[t+1],x(s,1/(i-a)+2/(i-n))),p=[r(e-i)*(e-a)/r(n-i)/(n-a),r(e-n)*r(e-i)/r(n-a)/r(i-a),r(e-n)*(e-a)/r(i-n)/(i-a),(e-n)*r(e-i)*(e-a)/r(n-i)/(n-a),(e-i)*r(e-n)*(e-a)/r(n-i)/(i-a)],b(b(b(b(x(o,p[0]),x(u,p[1])),x(s,p[2])),x(l,p[3])),x(h,p[4]))},numeric.Dopri.prototype.at=function(e){var t,r,n,i=Math.floor;if("number"!=typeof e){var a=e.length,o=Array(a);for(t=a-1;t!==-1;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,r=s.length-1;r-t>1;)n=i(.5*(t+r)),s[n]<=e?t=n:r=n;return this._at(e,t)},numeric.dopri=function(e,t,r,n,i,a,o){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof a&&(a=1e3);var s,u,c,l,h,p,f,m,d,g,y,v,b,x=[e],_=[r],w=[n(e,r)],M=[],E=.2,T=[.075,.225],S=[44/45,-56/15,32/9],I=[19372/6561,-25360/2187,64448/6561,-212/729],N=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],C=[35/384,0,500/1113,125/192,-2187/6784,11/84],D=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],A=[.2,.3,.8,8/9,1,1],O=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],P=0,k=(t-e)/10,F=0,L=numeric.add,q=numeric.mul,V=(Math.max,Math.min),j=Math.abs,z=numeric.norminf,R=Math.pow,B=numeric.any,$=numeric.lt,G=numeric.and,U=(numeric.sub,new numeric.Dopri(x,_,w,M,-1,""));for("function"==typeof o&&(y=o(e,r));e<t&&F<a;)if(++F,e+k>t&&(k=t-e),s=n(e+A[0]*k,L(r,q(E*k,w[P]))),u=n(e+A[1]*k,L(L(r,q(T[0]*k,w[P])),q(T[1]*k,s))),c=n(e+A[2]*k,L(L(L(r,q(S[0]*k,w[P])),q(S[1]*k,s)),q(S[2]*k,u))),l=n(e+A[3]*k,L(L(L(L(r,q(I[0]*k,w[P])),q(I[1]*k,s)),q(I[2]*k,u)),q(I[3]*k,c))),h=n(e+A[4]*k,L(L(L(L(L(r,q(N[0]*k,w[P])),q(N[1]*k,s)),q(N[2]*k,u)),q(N[3]*k,c)),q(N[4]*k,l))),d=L(L(L(L(L(r,q(w[P],k*C[0])),q(u,k*C[2])),q(c,k*C[3])),q(l,k*C[4])),q(h,k*C[5])),p=n(e+k,d),f=L(L(L(L(L(q(w[P],k*O[0]),q(u,k*O[2])),q(c,k*O[3])),q(l,k*O[4])),q(h,k*O[5])),q(p,k*O[6])),g="number"==typeof f?j(f):z(f),g>i){if(k=.2*k*R(i/g,.25),e+k===e){U.msg="Step size became too small";break}}else{if(M[P]=L(L(L(L(L(L(r,q(w[P],k*D[0])),q(u,k*D[2])),q(c,k*D[3])),q(l,k*D[4])),q(h,k*D[5])),q(p,k*D[6])),++P,x[P]=e+k,_[P]=d,w[P]=p,"function"==typeof o){var Y,X,Z=e,Q=e+.5*k;if(v=o(Q,M[P-1]),b=G($(y,0),$(0,v)),B(b)||(Z=Q,Q=e+k,y=v,v=o(Q,d),b=G($(y,0),$(0,v))),B(b)){for(var W,H,J=0,K=1,ee=1;;){if("number"==typeof y)X=(ee*v*Z-K*y*Q)/(ee*v-K*y);else for(X=Q,m=y.length-1;m!==-1;--m)y[m]<0&&v[m]>0&&(X=V(X,(ee*v[m]*Z-K*y[m]*Q)/(ee*v[m]-K*y[m])));if(X<=Z||X>=Q)break;Y=U._at(X,P-1),H=o(X,Y),W=G($(y,0),$(0,H)),B(W)?(Q=X,v=H,b=W,ee=1,J===-1?K*=.5:K=1,J=-1):(Z=X,y=H,K=1,1===J?ee*=.5:ee=1,J=1)}return d=U._at(.5*(e+X),P-1),U.f[P]=n(X,Y),U.x[P]=X,U.y[P]=Y,U.ymid[P-1]=d,U.events=b,U.iterations=F,U}}e+=k,r=d,y=v,k=V(.8*k*R(i/g,.25),4*k)}return U.iterations=F,U},numeric.LU=function(e,t){t=t||!1;var r,n,i,a,o,s,u,c,l,h=Math.abs,p=e.length,f=p-1,m=new Array(p);for(t||(e=numeric.clone(e)),i=0;i<p;++i){for(u=i,s=e[i],l=h(s[i]),n=i+1;n<p;++n)a=h(e[n][i]),l<a&&(l=a,u=n);for(m[i]=u,u!=i&&(e[i]=e[u],e[u]=s,s=e[i]),o=s[i],r=i+1;r<p;++r)e[r][i]/=o;for(r=i+1;r<p;++r){for(c=e[r],n=i+1;n<f;++n)c[n]-=c[i]*s[n],++n,c[n]-=c[i]*s[n];n===f&&(c[n]-=c[i]*s[n])}}return{LU:e,P:m}},numeric.LUsolve=function(e,t){var r,n,i,a,o,s=e.LU,u=s.length,c=numeric.clone(t),l=e.P;for(r=u-1;r!==-1;--r)c[r]=t[r];for(r=0;r<u;++r)for(i=l[r],l[r]!==r&&(o=c[r],c[r]=c[i],c[i]=o),a=s[r],n=0;n<r;++n)c[r]-=c[n]*a[n];for(r=u-1;r>=0;--r){for(a=s[r],n=r+1;n<u;++n)c[r]-=c[n]*a[n];c[r]/=a[r]}return c},numeric.solve=function(e,t,r){return numeric.LUsolve(numeric.LU(e,r),t)},numeric.echelonize=function(e){var t,r,n,i,a,o,s,u,c=numeric.dim(e),l=c[0],h=c[1],p=numeric.identity(l),f=Array(l),m=Math.abs,d=numeric.diveq;for(e=numeric.clone(e),t=0;t<l;++t){for(n=0,a=e[t],o=p[t],r=1;r<h;++r)m(a[n])<m(a[r])&&(n=r);for(f[t]=n,d(o,a[n]),d(a,a[n]),r=0;r<l;++r)if(r!==t){for(s=e[r],u=s[n],i=h-1;i!==-1;--i)s[i]-=a[i]*u;for(s=p[r],i=l-1;i!==-1;--i)s[i]-=o[i]*u}}return{I:p,A:e,P:f}},numeric.__solveLP=function(e,t,r,n,i,a,o){var s,u,c,l,h=numeric.sum,p=(numeric.log,numeric.mul),f=numeric.sub,m=numeric.dot,d=numeric.div,g=numeric.add,y=e.length,v=r.length,b=!1,x=0,_=1,w=(numeric.transpose(t),numeric.svd,numeric.transpose),M=(numeric.leq,Math.sqrt),E=Math.abs,T=(numeric.muleq,numeric.norminf,numeric.any,Math.min),S=numeric.all,I=numeric.gt,N=Array(y),C=Array(v),D=(numeric.rep([v],1),numeric.solve),A=f(r,m(t,a)),O=m(e,e);for(c=x;c<i;++c){var P,k;for(P=v-1;P!==-1;--P)C[P]=d(t[P],A[P]);var F=w(C);for(P=y-1;P!==-1;--P)N[P]=h(F[P]);_=.25*E(O/m(e,N));var L=100*M(O/m(N,N));for((!isFinite(_)||_>L)&&(_=L),l=g(e,p(_,N)),u=m(F,C),P=y-1;P!==-1;--P)u[P][P]+=1;k=D(u,d(l,_),!0);var q=d(A,m(t,k)),V=1;for(P=v-1;P!==-1;--P)q[P]<0&&(V=T(V,-.999*q[P]));if(s=f(a,p(k,V)),A=f(r,m(t,s)),!S(I(A,0)))return{solution:a,message:"",iterations:c};if(a=s,_<n)return{solution:s,message:"",iterations:c};if(o){var j=m(e,l),z=m(t,l);for(b=!0,P=v-1;P!==-1;--P)if(j*z[P]<0){b=!1;break}}else b=!(a[y-1]>=0);if(b)return{solution:s,message:"Unbounded",iterations:c}}return{solution:a,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(e,t,r,n,i){var a,o=e.length,s=r.length,u=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,l=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),h=numeric.rep([s,1],-1),p=numeric.blockMatrix([[t,h]]),f=r,a=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),m=numeric.__solveLP(l,p,f,n,i,a,!1),d=numeric.clone(m.solution);d.length=o;var g=numeric.inf(u(r,c(t,d)));if(g<0)return{solution:NaN,message:"Infeasible",iterations:m.iterations};var y=numeric.__solveLP(e,t,r,n,i-m.iterations,d,!0);return y.iterations+=m.iterations,y},numeric.solveLP=function(e,t,r,n,i,a,o){if("undefined"==typeof o&&(o=1e3),"undefined"==typeof a&&(a=numeric.epsilon),"undefined"==typeof n)return numeric._solveLP(e,t,r,a,o);var s,u=n.length,c=n[0].length,l=t.length,h=numeric.echelonize(n),p=numeric.rep([c],0),f=h.P,m=[];for(s=f.length-1;s!==-1;--s)p[f[s]]=1;for(s=c-1;s!==-1;--s)0===p[s]&&m.push(s);var d=numeric.getRange,g=numeric.linspace(0,u-1),y=numeric.linspace(0,l-1),v=d(n,g,m),b=d(t,y,f),x=d(t,y,m),_=numeric.dot,w=numeric.sub,M=_(b,h.I),E=w(x,_(M,v)),T=w(r,_(M,i)),S=Array(f.length),I=Array(m.length);for(s=f.length-1;s!==-1;--s)S[s]=e[f[s]];for(s=m.length-1;s!==-1;--s)I[s]=e[m[s]];var N=w(I,_(S,_(h.I,v))),C=numeric._solveLP(N,E,T,a,o),D=C.solution;if(D!==D)return C;var A=_(h.I,w(i,_(v,D))),O=Array(e.length);for(s=f.length-1;s!==-1;--s)O[f[s]]=A[s];for(s=m.length-1;s!==-1;--s)O[m[s]]=D[s];return{solution:O,message:C.message,iterations:C.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\\nLine "+r+": "+e[r]+"\\nCurrent state: "+s[o]+"\\n")}e instanceof String&&e.split("\\n");var r,n,i,a,o=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],u=e.length,c=0,l={},h=[],p=0,f={},m=0,d=[],g=[],y=[];for(r=0;r<u;++r){i=e[r];var v=i.match(/\\S*/g),b=[];for(n=0;n<v.length;++n)""!==v[n]&&b.push(v[n]);if(0!==b.length){for(n=0;n<s.length&&i.substr(0,s[n].length)!==s[n];++n);if(n<s.length){if(o=n,1===n&&(a=b[1]),6===n)return{name:a,c:d,A:numeric.transpose(g),b:y,rows:l,vars:f}}else switch(o){case 0:case 1:t("Unexpected line");case 2:switch(b[0]){case"N":0===c?c=b[1]:t("Two or more N rows");break;case"L":l[b[1]]=p,h[p]=1,y[p]=0,++p;break;case"G":l[b[1]]=p,h[p]=-1,y[p]=0,++p;break;case"E":l[b[1]]=p,h[p]=0,y[p]=0,++p;break;default:t("Parse error "+numeric.prettyPrint(b))}break;case 3:f.hasOwnProperty(b[0])||(f[b[0]]=m,d[m]=0,g[m]=numeric.rep([p],0),++m);var x=f[b[0]];for(n=1;n<b.length;n+=2)if(b[n]!==c){var _=l[b[n]];g[x][_]=(h[_]<0?-1:1)*parseFloat(b[n+1])}else d[x]=parseFloat(b[n+1]);break;case 4:for(n=1;n<b.length;n+=2)y[l[b[n]]]=(h[l[b[n]]]<0?-1:1)*parseFloat(b[n+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,r,n,i,a,o){function s(e){var t,n,i=this,a=e.length,o=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(e=[a++]);o<r;)i.S[o]=o++;for(o=0;o<r;o++)t=i.S[o],s=l(s+t+e[o%a]),n=i.S[s],i.S[o]=n,i.S[s]=t;i.g=function(e){var t=i.S,n=l(i.i+1),a=t[n],o=l(i.j+a),s=t[o];t[n]=s,t[o]=a;for(var u=t[l(a+s)];--e;)n=l(n+1),a=t[n],o=l(o+a),s=t[o],t[n]=s,t[o]=a,u=u*r+t[l(a+s)];return i.i=n,i.j=o,u},i.g(r)}function u(e,t,r,n,i){if(r=[],i=typeof e,t&&"object"==i)for(n in e)if(n.indexOf("S")<5)try{r.push(u(e[n],t-1))}catch(e){}return r.length?r:e+("string"!=i?"\\0":"")}function c(e,t,r,n){for(e+="",r=0,n=0;n<e.length;n++)t[l(n)]=l((r^=19*t[l(n)])+e.charCodeAt(n));e="";for(n in t)e+=String.fromCharCode(t[n]);return e}function l(e){return e&r-1}t.seedrandom=function(l,h){var p,f=[];return l=c(u(h?[l,e]:arguments.length?l:[(new Date).getTime(),e,window],3),f),p=new s(f),c(p.S,e),t.random=function(){for(var e=p.g(n),t=o,s=0;e<i;)e=(e+s)*r,t*=r,s=p.g(1);for(;e>=a;)e/=2,t/=2,s>>>=1;return(e+s)/t},l},o=t.pow(r,n),i=t.pow(2,i),a=2*i,c(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var r,n=[],i=e.length;for(r=0;r<i;r++)n[r+1]=t(e[r]);return n}function r(e){if("object"!=typeof e)return e;var t,n=[],i=e.length;for(t=1;t<i;t++)n[t-1]=r(e[t]);return n}function n(e,t,r){var n,i,a,o,s;for(a=1;a<=r;a+=1){for(e[a][a]=1/e[a][a],s=-e[a][a],n=1;n<a;n+=1)e[n][a]=s*e[n][a];if(o=a+1,r<o)break;for(i=o;i<=r;i+=1)for(s=e[a][i],e[a][i]=0,n=1;n<=a;n+=1)e[n][i]=e[n][i]+s*e[n][a]}}function i(e,t,r,n){var i,a,o,s;for(a=1;a<=r;a+=1){for(s=0,i=1;i<a;i+=1)s+=e[i][a]*n[i];n[a]=(n[a]-s)/e[a][a]}for(o=1;o<=r;o+=1)for(a=r+1-o,n[a]=n[a]/e[a][a],s=-n[a],i=1;i<a;i+=1)n[i]=n[i]+s*e[i][a]}function a(e,t,r,n){var i,a,o,s,u,c;for(a=1;a<=r;a+=1){if(n[1]=a,c=0,o=a-1,o<1){if(c=e[a][a]-c,c<=0)break;e[a][a]=Math.sqrt(c)}else{for(s=1;s<=o;s+=1){for(u=e[s][a],i=1;i<s;i+=1)u-=e[i][a]*e[i][s];u/=e[s][s],e[s][a]=u,c+=u*u}if(c=e[a][a]-c,c<=0)break;e[a][a]=Math.sqrt(c)}n[1]=0}}function o(e,t,r,o,s,u,c,l,h,p,f,m,d,g,y,v){function b(){for(g[1]=g[1]+1,S=P,E=1;E<=p;E+=1){for(S+=1,j=-l[E],T=1;T<=o;T+=1)j+=c[T][E]*s[T];if(Math.abs(j)<X&&(j=0),E>f)y[S]=j;else if(y[S]=-Math.abs(j),j>0){for(T=1;T<=o;T+=1)c[T][E]=-c[T][E];l[E]=-l[E]}}for(E=1;E<=d;E+=1)y[P+m[E]]=0;for(F=0,V=0,E=1;E<=p;E+=1)y[P+E]<V*y[q+E]&&(F=E,V=y[P+E]/y[q+E]);return 0===F?999:0}function x(){for(E=1;E<=o;E+=1){for(j=0,T=1;T<=o;T+=1)j+=e[T][E]*c[T][F];y[E]=j}for(I=D,E=1;E<=o;E+=1)y[I+E]=0;for(T=d+1;T<=o;T+=1)for(E=1;E<=o;E+=1)y[I+E]=y[I+E]+e[E][T]*y[T];for(U=!0,E=d;E>=1;E-=1){for(j=y[E],S=O+E*(E+3)/2,I=S-E,T=E+1;T<=d;T+=1)j-=y[S]*y[A+T],S+=T;if(j/=y[I],y[A+E]=j,m[E]<f)break;if(j<0)break;U=!1,C=E}if(!U)for(z=y[k+C]/y[A+C],E=1;E<=d&&!(m[E]<f)&&!(y[A+E]<0);E+=1)V=y[k+E]/y[A+E],V<z&&(z=V,C=E);for(j=0,E=D+1;E<=D+o;E+=1)j+=y[E]*y[E];if(Math.abs(j)<=X){if(U)return v[1]=1,999;for(E=1;E<=d;E+=1)y[k+E]=y[k+E]-z*y[A+E];return y[k+d+1]=y[k+d+1]+z,700}for(j=0,E=1;E<=o;E+=1)j+=y[D+E]*c[E][F];for(R=-y[P+F]/j,Y=!0,U||z<R&&(R=z,Y=!1),E=1;E<=o;E+=1)s[E]=s[E]+R*y[D+E],Math.abs(s[E])<X&&(s[E]=0);for(u[1]=u[1]+R*j*(R/2+y[k+d+1]),E=1;E<=d;E+=1)y[k+E]=y[k+E]-R*y[A+E];if(y[k+d+1]=y[k+d+1]+R,!Y){for(j=-l[F],T=1;T<=o;T+=1)j+=s[T]*c[T][F];if(F>f)y[P+F]=j;else if(y[P+F]=-Math.abs(j),j>0){for(T=1;T<=o;T+=1)c[T][F]=-c[T][F];l[F]=-l[F]}return 700}for(d+=1,m[d]=F,S=O+(d-1)*d/2+1,E=1;E<=d-1;E+=1)y[S]=y[E],S+=1;if(d===o)y[S]=y[o];else{for(E=o;E>=d+1&&0!==y[E]&&(B=Math.max(Math.abs(y[E-1]),Math.abs(y[E])),$=Math.min(Math.abs(y[E-1]),Math.abs(y[E])),V=y[E-1]>=0?Math.abs(B*Math.sqrt(1+$*$/(B*B))):-Math.abs(B*Math.sqrt(1+$*$/(B*B))),B=y[E-1]/V,$=y[E]/V,1!==B);E-=1)if(0===B)for(y[E-1]=$*V,T=1;T<=o;T+=1)V=e[T][E-1],e[T][E-1]=e[T][E],e[T][E]=V;else for(y[E-1]=V,G=$/(1+B),T=1;T<=o;T+=1)V=B*e[T][E-1]+$*e[T][E],e[T][E]=G*(e[T][E-1]+V)-e[T][E],e[T][E-1]=V;y[S]=y[d]}return 0}function _(){if(S=O+C*(C+1)/2+1,I=S+C,0===y[I])return 798;if(B=Math.max(Math.abs(y[I-1]),Math.abs(y[I])),$=Math.min(Math.abs(y[I-1]),Math.abs(y[I])),V=y[I-1]>=0?Math.abs(B*Math.sqrt(1+$*$/(B*B))):-Math.abs(B*Math.sqrt(1+$*$/(B*B))),B=y[I-1]/V,$=y[I]/V,1===B)return 798;if(0===B){for(E=C+1;E<=d;E+=1)V=y[I-1],y[I-1]=y[I],y[I]=V,I+=E;for(E=1;E<=o;E+=1)V=e[E][C],e[E][C]=e[E][C+1],e[E][C+1]=V}else{for(G=$/(1+B),E=C+1;E<=d;E+=1)V=B*y[I-1]+$*y[I],y[I]=G*(y[I-1]+V)-y[I],y[I-1]=V,I+=E;for(E=1;E<=o;E+=1)V=B*e[E][C]+$*e[E][C+1],e[E][C+1]=G*(e[E][C]+V)-e[E][C+1],e[E][C]=V}return 0}function w(){for(I=S-C,E=1;E<=C;E+=1)y[I]=y[S],S+=1,I+=1;return y[k+C]=y[k+C+1],m[C]=m[C+1],C+=1,C<d?797:0}function M(){return y[k+d]=y[k+d+1],y[k+d+1]=0,m[d]=0,d-=1,g[2]=g[2]+1,0}var E,T,S,I,N,C,D,A,O,P,k,F,L,q,V,j,z,R,B,$,G,U,Y,X,Z,Q,W;L=Math.min(o,p),S=2*o+L*(L+5)/2+2*p+1,X=1e-60;do X+=X,Z=1+.1*X,Q=1+.2*X;while(Z<=1||Q<=1);for(E=1;E<=o;E+=1)y[E]=t[E];for(E=o+1;E<=S;E+=1)y[E]=0;for(E=1;E<=p;E+=1)m[E]=0;if(N=[],0===v[1]){if(a(e,r,o,N),0!==N[1])return void(v[1]=2);i(e,r,o,t),n(e,r,o)}else{for(T=1;T<=o;T+=1)for(s[T]=0,E=1;E<=T;E+=1)s[T]=s[T]+e[E][T]*t[E];for(T=1;T<=o;T+=1)for(t[T]=0,E=T;E<=o;E+=1)t[T]=t[T]+e[T][E]*s[E]}for(u[1]=0,T=1;T<=o;T+=1)for(s[T]=t[T],u[1]=u[1]+y[T]*s[T],y[T]=0,E=T+1;E<=o;E+=1)e[E][T]=0;for(u[1]=-u[1]/2,v[1]=0,D=o,A=D+o,k=A+L,O=k+L+1,P=O+L*(L+1)/2,q=P+p,E=1;E<=p;E+=1){for(j=0,T=1;T<=o;T+=1)j+=c[T][E]*c[T][E];y[q+E]=Math.sqrt(j)}for(d=0,g[1]=0,g[2]=0,W=0;;){if(W=b(),999===W)return;for(;;){if(W=x(),0===W)break;if(999===W)return;if(700===W)if(C===d)M();else{for(;;)if(_(),W=w(),797!==W)break;M()}}}}function s(e,n,i,a,s,u){e=t(e),n=t(n),i=t(i);var c,l,h,p,f,m,d=[],g=[],y=[],v=[],b=[];if(s=s||0,u=u?t(u):[void 0,0],a=a?t(a):[],l=e.length-1,h=i[1].length-1,!a)for(c=1;c<=h;c+=1)a[c]=0;for(c=1;c<=h;c+=1)g[c]=0;for(p=0,f=Math.min(l,h),c=1;c<=l;c+=1)y[c]=0;for(d[1]=0,c=1;c<=2*l+f*(f+5)/2+2*h+1;c+=1)v[c]=0;for(c=1;c<=2;c+=1)b[c]=0;return o(e,n,l,l,y,d,i,a,l,h,s,g,p,b,v,u),m="",1===u[1]&&(m="constraints are inconsistent, no solution!"),2===u[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:r(y),value:r(d),unconstrained_solution:r(n),iterations:r(b),iact:r(g),message:m}}e.solveQP=s}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var r,n=numeric.epsilon,i=1e-64/n,a=50,o=0,s=0,u=0,c=0,l=0,h=numeric.clone(e),p=h.length,f=h[0].length;if(p<f)throw"Need more rows than columns";var m=new Array(f),d=new Array(f);for(s=0;s<f;s++)m[s]=d[s]=0;var g=numeric.rep([f,f],0),y=0,v=0,b=0,x=0,_=0,w=0,M=0;for(s=0;s<f;s++){for(m[s]=v,M=0,l=s+1,u=s;u<p;u++)M+=h[u][s]*h[u][s];if(M<=i)v=0;else for(y=h[s][s],v=Math.sqrt(M),y>=0&&(v=-v),b=y*v-M,h[s][s]=y-v,u=l;u<f;u++){for(M=0,c=s;c<p;c++)M+=h[c][s]*h[c][u];for(y=M/b,c=s;c<p;c++)h[c][u]+=y*h[c][s]}for(d[s]=v,M=0,u=l;u<f;u++)M+=h[s][u]*h[s][u];if(M<=i)v=0;else{for(y=h[s][s+1],v=Math.sqrt(M),y>=0&&(v=-v),b=y*v-M,h[s][s+1]=y-v,u=l;u<f;u++)m[u]=h[s][u]/b;for(u=l;u<p;u++){for(M=0,c=l;c<f;c++)M+=h[u][c]*h[s][c];for(c=l;c<f;c++)h[u][c]+=M*m[c]}}_=Math.abs(d[s])+Math.abs(m[s]),_>x&&(x=_)}for(s=f-1;s!=-1;s+=-1){if(0!=v){for(b=v*h[s][s+1],u=l;u<f;u++)g[u][s]=h[s][u]/b;for(u=l;u<f;u++){for(M=0,c=l;c<f;c++)M+=h[s][c]*g[c][u];for(c=l;c<f;c++)g[c][u]+=M*g[c][s]}}for(u=l;u<f;u++)g[s][u]=0,g[u][s]=0;g[s][s]=1,v=m[s],l=s}for(s=f-1;s!=-1;s+=-1){for(l=s+1,v=d[s],u=l;u<f;u++)h[s][u]=0;if(0!=v){for(b=h[s][s]*v,u=l;u<f;u++){for(M=0,c=l;c<p;c++)M+=h[c][s]*h[c][u];for(y=M/b,c=s;c<p;c++)h[c][u]+=y*h[c][s]}for(u=s;u<p;u++)h[u][s]=h[u][s]/v}else for(u=s;u<p;u++)h[u][s]=0;h[s][s]+=1}for(n*=x,c=f-1;c!=-1;c+=-1)for(var E=0;E<a;E++){var T=!1;for(l=c;l!=-1;l+=-1){if(Math.abs(m[l])<=n){T=!0;break}if(Math.abs(d[l-1])<=n)break}if(!T){o=0,M=1;var S=l-1;for(s=l;s<c+1&&(y=M*m[s],m[s]=o*m[s],!(Math.abs(y)<=n));s++)for(v=d[s],b=t(y,v),d[s]=b,o=v/b,M=-y/b,u=0;u<p;u++)_=h[u][S],w=h[u][s],h[u][S]=_*o+w*M,h[u][s]=-_*M+w*o}if(w=d[c],l==c){if(w<0)for(d[c]=-w,u=0;u<f;u++)g[u][c]=-g[u][c];break}if(E>=a-1)throw"Error: no convergence.";for(x=d[l],_=d[c-1],v=m[c-1],b=m[c],y=((_-w)*(_+w)+(v-b)*(v+b))/(2*b*_),v=t(y,1),y=y<0?((x-w)*(x+w)+b*(_/(y-v)-b))/x:((x-w)*(x+w)+b*(_/(y+v)-b))/x,o=1,M=1,s=l+1;s<c+1;s++){for(v=m[s],_=d[s],b=M*v,v*=o,w=t(y,b),m[s-1]=w,o=y/w,M=b/w,y=x*o+v*M,v=-x*M+v*o,b=_*M,_*=o,u=0;u<f;u++)x=g[u][s-1],w=g[u][s],g[u][s-1]=x*o+w*M,g[u][s]=-x*M+w*o;for(w=t(y,b),d[s-1]=w,o=y/w,M=b/w,y=o*v+M*_,x=-M*v+o*_,u=0;u<p;u++)_=h[u][s-1],w=h[u][s],h[u][s-1]=_*o+w*M,h[u][s]=-_*M+w*o}m[l]=0,m[c]=y,d[c]=x}for(s=0;s<d.length;s++)d[s]<n&&(d[s]=0);for(s=0;s<f;s++)for(u=s-1;u>=0;u--)if(d[u]<d[s]){for(o=d[u],d[u]=d[s],d[s]=o,c=0;c<h.length;c++)r=h[c][s],h[c][s]=h[c][u],h[c][u]=r;for(c=0;c<g.length;c++)r=g[c][s],g[c][s]=g[c][u],g[c][u]=r;s=u}return{U:h,S:d,V:g}},numeric}),define("math/parsenode/optimizedregression",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e,r,n,i,a){t.init.call(this),this.parameters=e,this.residuals=r,this.statistics=n,this.model=i,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var o in e)e.hasOwnProperty(o)&&this._exports.push(o);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments);\n},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("math/parsenode/regression",["require","pjs","./base","numeric","math/distance","math/builtin","graphing/label","math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","math/types"],function(e){var t=e("pjs"),r=e("./base"),n=e("numeric"),i=e("math/distance"),a=e("math/builtin"),o=e("graphing/label"),s=e("math/errormsg"),u=e("./error"),c=e("./optimizedregression"),l=e("./list"),h=e("./functioncall"),p=e("./identifier"),f=e("./constant"),m=e("./freevariable"),d=e("./expressionTypes"),g=e("math/types"),y=d.Subtract;return t(r,function(e,t,r){function d(e,t){for(var r=0,n=e.fn.apply(void 0,t),i=0;i<n.length;i++){var a=n[i];r+=a*a}return r/n.length}function v(e,t){return e.fn.apply(void 0,t)}function b(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n].fn.apply(void 0,t);r.push(i)}return r}function x(e,t,r,i,a){for(var o=[],s=0;s<t.length;s++)o.push(0);for(var u=b(t,o),c=n.LU(n.dot(u,n.transpose(u)),!0),l=o,h=0;h<2;h++){var p=v(e,o),f=n.neg(n.LUsolve(c,n.dot(u,p)));if(!n.all(n.isFinite(f)))return w(e,t,r,i,a);o=n.add(l,f),l=o}return{solution:o,MSE:d(e,o)}}function _(e,t,r,i){for(var a=r,o=d(e,a),s=.001,u=2,c=.1,l=[],h=0;h<t.length;h++)l.push(1);for(var p=0,f=!1,m=b(t,a),g=a,y=o;p<i&&!f;){var x=v(e,a),_=n.transpose(m),w=n.dot(m,_);if(!n.all(n.isFinite(x)))break;if(!n.all(n.isFinite(w)))break;for(var M=!1;p<i&&!f&&!M;){p+=1;var E=n.LU(n.add(w,n.diag(n.mul(s,l))),!0),T=n.neg(n.LUsolve(E,n.dot(m,x))),S=T;if(a=n.add(g,S),o=d(e,a),f=n.all(n.eq(a,g))){g=a,y=o;break}var I;if(isFinite(o)&&o<=y&&(I=b(t,a),M=n.all(n.isFinite(I))),M){m=I,g=a,y=o,s*=c,s=Math.max(1e-64,s);break}s*=u}}return{solution:g,MSE:d(e,g)}}function w(e,t,r,n,a){var o,s=[];for(n||(n={}),a||(a={}),o=0;o<r.length;o++){var u=r[o];a[u]&&isFinite(a[u].constantValue)?s.push(+a[u].constantValue):n.hasOwnProperty(u)&&isFinite(n[u])?s.push(+n[u]):s.push(1)}var c=N(30,r),l=C(e,t,c,3,5),h=C(e,t,l,60,1),p=_(e,t,h[0],250),f=_(e,t,s,100);return isFinite(f.MSE)?f.MSE<p.MSE?f:i.approx(f.MSE,p.MSE,8)?f:p:p}function M(e,t,r,n){var i,a,o=t.getDependencies();for(a=0;a<o.length;a++)if(!e.validRegressionParameter(o[a]))throw s.invalidRegressionParameter(o[a]);var u=t.getCompiledFunction(o);if(o.length){var c={};for(a=1;a<o.length;a++)c[o[a]]=m(o[0]);var l=t.substitute(c).isLinear(o[0]),h=[];for(a=0;a<o.length;a++)h.push(t.takeDerivative(o[a]).getCompiledFunction(o));i=l?x(u,h,o,r,n):w(u,h,o,r,n)}else i={solution:[],MSE:d(u,[])};var p={};for(a=0;a<o.length;a++)p[o[a]]=f(i.solution[a]);return p}function E(e,t){var r=e.length,n=e[0],a=t[0],o=e[r-1],s=t[r-1];if(!(isFinite(n)&&isFinite(o)&&isFinite(a)&&isFinite(s)))return!1;if(s-a===0)return!1;var u=o-n;if(0===u)return!1;for(var c=1;c<r-1;c++){var l=e[c],h=t[c],p=(s*(l-n)+a*(o-l))/u;if(!i.approx(h,p,5))return!1}return!0}function T(e,t,r){var n=Object.create(t);for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return l.wrap(e.getConcreteTree(n))}e.init=function(e,r){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof p||e instanceof l,this._logLhs=h("ln",[e]),this._rhs=r,this._difference=y([e,r]),this._logDifference=y([h("ln",[e]),h("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=o.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var r,n=this.getDependencies(),i=0;i<n.length;i++){var a=n[i].match(/_(.*)/);if(a&&(r="e_"+a[1],!e[r]))return r}for(var s=1;;){if(r="e_"+s,!e[r])return r;s++}},e.getRHSModel=function(e,t){function r(e,t){for(var r=0;r<n.length;r++)if(n[r].node===this)return n[r].tmpVar;var a=m(this.tmpVar()),o=this.getConcreteTree(e);return o.getDependencies().length&&(i=!1),n.push({node:this,tmpVar:a,symbol:a._symbol,concrete:o}),a}var n=[],i=!0,a={List:r,TableColumn:r,Range:r},o=this._rhs.tryGetConcreteTree(e,a);return{node:o,substituted:o.isError?o:o.substitute(t),replacedNodes:n,isValid:i}};var S=[18.9,.105,.0113,.089,4.414,34.32,8.61,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1.89,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777],I=function(e){var t=503*e%S.length;return S[t]},N=function(e,t){for(var r,n=[],i=t.length,a=0;a<e;a++){r=[];for(var o=0;o<i;o++)0===a?r[o]=0:1===a?r[o]=1:r[o]=I(a*i+o);n.push(r)}return n},C=function(e,t,r,n,i){for(var a=[],o=0;o<r.length;o++)a.push({soln:_(e,t,r[o],n),startingVals:r[o]});a.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var s=[],u=0;u<i;u++)s.push(a[u].startingVals);return s};e.computeStatistics=function(e,t,r,n,o){if(r.getDependencies().length)throw s.optimizationError();var u=0;r.eachElement(function(e){var t=e.constantValue;u+=t*t});var c=u/r.length;if(!isFinite(c))throw s.optimizationError();if(e.getDependencies().length>0)return{RMSE:Math.sqrt(c)};var h=g.isList(e.valueType)?a.varp(e.asValue()):0;if(e.getDependencies().length||!isFinite(h)||h<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(c)};var p=1-c/h;if(t.isValid&&1===t.replacedNodes.length){var f=[],m=[],d=n&&(o===D.LINLOG||o===D.LOGLOG);l.eachArgs([t.replacedNodes[0].concrete,e],function(e){f.push(d?Math.log(e[0].constantValue):+e[0].constantValue),m.push(+e[1].constantValue)});var y=a.corr(f,m);if(i.approx(y*y,p,8))return{r:y,rsquared:y*y}}return{Rsquared:p}},e.getResidualSuggestionId=function(e,t){var r,n=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var a=t[i].rawTree.columns;if(a&&a.length){var o=a[0].getExports();if(1===o.length&&n.indexOf(o[0])!==-1){for(var s=1;s<a.length;s++)if(a[s].getDependencies().indexOf(e)!==-1)return;r=r?r:i}}}return r?r:void 0};var D={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t){if(!this.isLhsSimple)return D.NONE;var r=t.substituted;if(r.isError)return D.NONE;if(r.valueType!==g.Number)return D.NONE;var n=r.getDependencies();if(1!==n.length)return D.NONE;if(isFinite(t.node.polynomialOrder(n[0])))return D.NONE;var i=r.getCompiledFunction(n).fn,a=t.replacedNodes[0].concrete;if(r.valueType!==g.Number)return D.NONE;var o=a.mapElements(function(e){return+e.constantValue});if(o.length<3)return D.NONE;o.sort(function(e,t){return e-t});var s=o.map(i),u=s.map(Math.log),c=o.map(Math.log),h=!0;return l.wrap(e).eachElement(function(e){isFinite(Math.log(+e.constantValue))||(h=!1)}),E(o,u)&&h?D.LOGLIN:E(c,u)&&h?D.LOGLOG:E(c,s)?D.LINLOG:D.NONE},e.optimize=function(e,t,r,n,i){var a=this._lhs.getConcreteTree(t),s=this._rhs.getConcreteTree(t);this.typeCheck([a,s]);var u,h=l.wrap(this._difference.getConcreteTree(t)),p=M(e,h,this.userData.regressionParameters,n),f=this.getRHSModel(t,p),m=T(this._difference,t,p),d=this.linearizingTransformation(a,f);if(!this.userData.isLogModeRegression||d!==D.LOGLIN&&d!==D.LOGLOG)u=this.computeStatistics(a,f,m,this.userData.isLogModeRegression,d);else{var g=this._logDifference.getConcreteTree(t),y=this._logLhs.getConcreteTree(t);p=M(e,g,this.userData.regressionParamters,n),f=this.getRHSModel(t,p),m=T(this._difference,t,p);var v=T(this._logDifference,t,p);u=this.computeStatistics(y,f,v,this.userData.isLogModeRegression,d)}var b=this.chooseResidualVariable(r),x=this.getResidualSuggestionId(b,i);return this.userData.residualVariable=o.identifierToLatex(b),c(p,m,u,f.substituted,{isModelValid:f.isValid,residualVariable:b,residualSuggestionId:x,shouldSuggestLogMode:d!==D.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){if(e instanceof u)return e;throw e}},e.exportTo=function(e,t,r){if(!t.isError){for(var n in t.parameters)t.parameters.hasOwnProperty(n)&&(e.assignmentForbidden(n)||(r[n]=r[n]?s.multiplyDefined(n):t.parameters[n]));e.assignmentForbidden(t.residualVariable)||(r[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("math/parsenode/image",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t,r,n){e.isImage=!0,e.init=function(e,r){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.moveStrategy=r,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height)}})}),define("math/parsenode/table",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var r=0;r<e.length;r++)Array.prototype.push.apply(this._exports,e[r].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,r){for(var n=0;n<this.columns.length;n++){var i=this.columns[n].getExports();if(i.length){var a=i[0];e.assignmentForbidden(a)||r[a]||(t.isError?r[a]=t:this.columns[n].exportTo(e,t.columns[n],r))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){var t=e("pjs"),r=e("./base"),n=e("./list"),i=e("./constant"),a=e("./identifier");return t(r,function(e,t){function o(e){return e.isError?i(NaN):e}e.init=function(e,r,n){t.init.call(this),this.header=e,this.length=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof a?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var a=e[0];if(t.isError)i[a]=t;else try{i[a]=n(t.values.map(o))}catch(e){if(!(e instanceof r))throw e;i[a]=e}}},e.exportTo=function(e,t,r){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,r)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("math/parsenode/solvedequation",["require","pjs","./base"],function(e){var t=e("pjs"),r=e("./base");return t(r,function(e,t){e.init=function(e,r){t.init.call(this),this._symbol=e,this._expression=r,this.mergeDependencies(r)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("parsenodes",["require","math/parsenode/expressionTypes","math/parsenode/base","math/parsenode/expression","math/parsenode/scalarexpression","math/parsenode/error","math/parsenode/constant","math/parsenode/identifier","math/parsenode/ans","math/parsenode/freevariable","math/parsenode/dummyindex","math/parsenode/list","math/parsenode/range","math/parsenode/broadcast","math/parsenode/listaccess","math/parsenode/orderedpair","math/parsenode/movablepoint","math/parsenode/orderedpairaccess","math/parsenode/polygon","math/parsenode/basecomparator","math/parsenode/comparator","math/parsenode/doubleinequality","math/parsenode/repeatedoperator","math/parsenode/sum","math/parsenode/product","math/parsenode/integral","math/parsenode/functioncall","math/parsenode/functionexponent","math/parsenode/prime","math/parsenode/piecewise","math/parsenode/derivative","math/parsenode/builtinfunction","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/reducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/doublereducerfunction","math/parsenode/assignment","math/parsenode/functiondefinition","math/parsenode/equation","math/parsenode/regression","math/parsenode/image","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/solvedequation","math/parsenode/optimizedregression"],function(e){var t=e("math/parsenode/expressionTypes"),r={Base:e("math/parsenode/base"),Expression:e("math/parsenode/expression"),ScalarExpression:e("math/parsenode/scalarexpression"),Error:e("math/parsenode/error"),Constant:e("math/parsenode/constant"),Identifier:e("math/parsenode/identifier"),Ans:e("math/parsenode/ans"),FreeVariable:e("math/parsenode/freevariable"),DummyIndex:e("math/parsenode/dummyindex"),List:e("math/parsenode/list"),Range:e("math/parsenode/range"),Broadcast:e("math/parsenode/broadcast"),ListAccess:e("math/parsenode/listaccess"),OrderedPair:e("math/parsenode/orderedpair"),MovablePoint:e("math/parsenode/movablepoint"),OrderedPairAccess:e("math/parsenode/orderedpairaccess"),Polygon:e("math/parsenode/polygon"),BaseComparator:e("math/parsenode/basecomparator"),Comparator:e("math/parsenode/comparator"),DoubleInequality:e("math/parsenode/doubleinequality"),RepeatedOperator:e("math/parsenode/repeatedoperator"),Sum:e("math/parsenode/sum"),Product:e("math/parsenode/product"),Integral:e("math/parsenode/integral"),FunctionCall:e("math/parsenode/functioncall"),FunctionExponent:e("math/parsenode/functionexponent"),Prime:e("math/parsenode/prime"),Piecewise:e("math/parsenode/piecewise"),Derivative:e("math/parsenode/derivative"),BuiltInFunction:e("math/parsenode/builtinfunction"),NativeFunction:e("math/parsenode/nativefunction"),TypedFunction:e("math/parsenode/typedfunction"),ReducerFunction:e("math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("math/parsenode/doublereducerfunction"),Assignment:e("math/parsenode/assignment"),FunctionDefinition:e("math/parsenode/functiondefinition"),Equation:e("math/parsenode/equation"),Regression:e("math/parsenode/regression"),Image:e("math/parsenode/image"),Table:e("math/parsenode/table"),TableColumn:e("math/parsenode/tablecolumn"),SolvedEquation:e("math/parsenode/solvedequation"),OptimizedRegression:e("math/parsenode/optimizedregression")};for(var n in t)r[n]=t[n];for(var i in r)r.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(r[i].prototype.type=i);for(var a in r.Comparator)r.Comparator.hasOwnProperty(a)&&(r.Comparator[a].prototype.type="Comparator[\'"+a+"\']");for(var o in r.BuiltInFunction)r.BuiltInFunction.hasOwnProperty(o)&&(r.BuiltInFunction[o].prototype.type="BuiltInFunction[\'"+o+"\']");return r}),define("math/inverses",[],function(){var e={},t=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];return t.forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("math/baseparser",["require","jison","parsenodes","math/inverses","math/errormsg"],function(e){function t(){throw u.featureUnavailable()}function r(e){e=e||[];for(var r in o)a[r]=e.indexOf(r)<0?o[r]:t}function n(e){var t="\\\\operatorname";return e.slice(0,t.length)===t?"\\\\"+e.slice(t.length+1,e.length-1):e}var i=e("jison"),a=i.yy,o=e("parsenodes"),s=e("math/inverses"),u=e("math/errormsg"),c=function(e,t){t=t||{};var n,s;try{return n=a.currentIndex,a.currentIndex=t.index,r(t.disabledFeatures),s=i.parse("###"+e),a.currentIndex=n,s}catch(e){return e instanceof o.Error?e:u.parseError()}};return a.ErrorMsg=u,a.setInput=function(e,t){e.setInputString(a.lexer.matched.slice(Math.max(3,t.first_column),t.last_column))},r(),a.inverses=s,a.parseFunctionDeclaration=function(e){e=e.replace("###","");var t="(?:\\\\s|\\\\\\\\space|\\\\\\\\ |\\\\\\\\\\\\:)*",r="(?:\\\\\\\\operatorname\\\\{[a-zA-Z]+\\\\}|[a-zA-Z]|\\\\\\\\[a-zA-Z]+)",i="(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?",a=r+i,s="(?:"+a+"(?:\\\\,"+a+")*)",u="("+a+")(?:\\\\\\\\left)?\\\\(("+s+")(?:\\\\\\\\right)?\\\\)=",c=new RegExp(u),l=new RegExp(t,"g");e=e.replace(l,"");var h=c.exec(e);return{identifier:o.Identifier(n(h[1])),args:h[2].split(",").map(function(e){return o.Identifier(e)})}},{parse:c}}),define("math/rational-arithmetic-sequence",["require","math/distance","math/builtin"],function(e){function t(e,t){var i=n.toFraction(e),a=n.toFraction(t);if(r.approx(i.n/i.d,e)&&r.approx(a.n/a.d,t)){var o=n.lcm(i.d,a.d),s=i.n*(o/i.d),u=a.n*(o/a.d),c=u-s;return{nstart:s,nstep:c,lcm:o}}}var r=e("math/distance"),n=e("math/builtin");return t}),define("math/features/getConcreteTree",["require","parsenodes","math/errormsg","math/types","graphing/label","math/distance","math/rational-arithmetic-sequence"],function(e){function t(e,t,r,n,i){if(r<e.length&&!u.approx(i,e.elementAt(r).constantValue,10))throw a.nonArithmeticRange();if(n-r<=t.length&&n-r>1&&!u.approx(i,t.elementAt(t.length-n+r).constantValue,10))throw a.nonArithmeticRange()}function r(e,t){for(var r=!1,n=!1,i=0;i<e.length;i++){var a=e[i];(a.isList||a.isBroadcast)&&(n=!0);for(var o=a.getDependencies(),s=0;s<o.length;s++)if(t.indexOf(o[s])!==-1){if(a.isList||a.isBroadcast)return"list"}else r=!0}return n?r?"broadcast":"list":"none"}function n(e){var t,r=[],n=[],a=[];for(t=0;t<e.length;t++){var s,u=e[t];if(u.isList){for(var c=!1,l=0;l<a.length;l++)if(u===a[l]){c=!0,s=i.DummyIndex(n[l]),s.valueType=o.elementType(u.valueType),r.push(s);break}if(!c){var h=i.Base.prototype.tmpVar();n.push(h),a.push(u),s=i.DummyIndex(h),s.valueType=o.elementType(u.valueType),r.push(s)}}else u.isBroadcast?(Array.prototype.push.apply(n,u._replacedSymbols),Array.prototype.push.apply(a,u._lists),r.push(u._expression)):r.push(u)}return{replacedArgs:a,concreteArgs:r,replacedSymbols:n}}var i=e("parsenodes"),a=e("math/errormsg"),o=e("math/types"),s=e("graphing/label"),u=e("math/distance"),c=e("math/rational-arithmetic-sequence"),l=i.List,h=i.OrderedPair,p=i.ScalarExpression,f=i.Constant,m=i.Multiply,d=i.Identifier,g=i.DummyIndex,y=i.BuiltInFunction;i.Base.prototype.getConcreteTree=function(e,t){if(t)return this._getConcreteTree(e,t);if(this.isConcreteTreeCacheValid(e))return this.__cachedConcreteTree.value;for(var r=this._getConcreteTree(e,t),n={},i=this.getCacheKeys().slice();;){if(!i.length)break;var a=i.pop();if(!n.hasOwnProperty(a)){var o=e[a];n[a]=o,o&&Array.prototype.push.apply(i,o.getCacheKeys())}}return this.__cachedConcreteTree={keys:n,value:r},r},i.Base.prototype.getCacheKeys=function(){return this.getDependencies()},i.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},i.PercentOf.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):i.Divide([i.Multiply(this.args),i.Constant(100)]).getConcreteTree(e,t)},i.Assignment.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this._expression.getConcreteTree(e,t)},i.Identifier.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=e[this._symbol];if(r){if(r.isError)throw r;return r.isFunction?r.getConcreteInvocationTree(e,[],t):r.getConcreteTree(e,t)}if(y.hasOwnProperty(this._symbol))throw a.functionUnsupported(s.latexToIdentifier(this.getInputString()));return i.FreeVariable(this._symbol)},i.Ans.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(void 0===e[this._symbol])throw a.ansUndefined();return d.prototype._getConcreteTree.call(this,e,t)},i.Equation.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this.asComparator().getConcreteTree(e,t)},i.Constant.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this.constantValue)},i.Derivative.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r;if(e[this._symbol]){var n=Object.create(e);n[this._symbol]=i.FreeVariable(this._symbol);var s=e[this._symbol].getConcreteTree(e,t);if(s.valueType!==o.Number&&s.valueType!==o.ListOfNumber)throw a.derivativeVariableTypeError(this._symbol,[o.prettyPrint(s.valueType)]);var u={};return u[this._symbol]=s,r=this.args[0].getConcreteTree(n,t),this.typeCheck([r]),r.takeDerivative(this._symbol).substitute(u).getConcreteTree(e,t)}return r=this.args[0].getConcreteTree(e,t),this.typeCheck([r]),r.takeDerivative(this._symbol).getConcreteTree(e,t)},i.DoubleInequality.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor([i.Piecewise([this._indicator,this._expressions[0],f(NaN)]).getConcreteTree(e,t),this._operators[0],d(this._symbol),this._operators[1],i.Piecewise([this._indicator,this._expressions[1],f(NaN)]).getConcreteTree(e,t)])},i.Expression.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=0;n<this.args.length;n++)r.push(this.args[n].getConcreteTree(e,t));return this.typeCheck(r),this._constantCollapsedCopy(r)},i.Error.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},i.FreeVariable.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},i.FunctionCall.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=e[this._symbol];if(r&&r.isError)throw r;if(!r||!r.isFunction){if(y.hasOwnProperty(this._symbol))throw a.functionUnsupported(s.latexToIdentifier(this._identifier.getInputString()));if(1==this.args.length){var n=[d(this._symbol),this.args[0]];return m(n).getConcreteTree(e,t)}if(r)throw a.variableAsFunction(this._symbol);throw a.functionNotDefined(this._symbol)}for(var i=[],o=0;o<this.args.length;o++){var u=this.args[o].getConcreteTree(e,t);i.push(u)}return r.getConcreteInvocationTree(e,i,t)},i.FunctionExponent.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args[0]._symbol;return e[r]&&e[r].isFunction?i.Exponent([i.FunctionCall(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):m([this.args[0],i.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},i.FunctionDefinition.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=0;r<this._argSymbols.length;r++){if(e[this._argSymbols[r]])throw a.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw a.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},i.Image.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):i.Image({center:this.center.tryGetConcreteTree(e,t),radianAngle:this.radianAngle.tryGetConcreteTree(e,t),width:this.width.tryGetConcreteTree(e,t),height:this.height.tryGetConcreteTree(e,t)},this.moveStrategy)},i.Integral.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(e[this._differential._symbol])throw a.shadowedIntegrationVariable(this._differential._symbol);var r=this.args[0],n=this.args[1],i=this.args[2];if(n.dependsOn(r._symbol)||i.dependsOn(r._symbol))throw a.badIntegralBoundDependency(r._symbol);var o=Object.create(e);o[this._differential._symbol]=g(this._differential._symbol);var s=p.prototype._getConcreteTree.call(this,o,t);return s},i.ListAccess.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.index.getConcreteTree(e,t),n=this.list.getConcreteTree(e,t),i=[n,r];return this.typeCheck(i),this._constantCollapsedCopy(i)},i.List.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=0;n<this.args.length;n++){var i=this.args[n].getConcreteTree(e,t);r.push(i)}return this.typeCheck(r),new this.constructor(r)},i.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var a=[],o=0;o<this.args.length;o++)a.push(this.args[o].getConcreteTree(e,t));switch(r([a[1]],this.getDummyDependencies())){case"none":return this.typeCheck(a),this._constantCollapsedCopy(a);case"list":return i.List(i.List.mapArgs([a[1]],function(e){return e=[a[0]].concat(e),this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var s=n([a[1]]),u=[a[0]].concat(s.concreteArgs);return this.typeCheck(u),i.Broadcast(s.replacedSymbols,[this.copyWithArgs(u)].concat(s.replacedArgs))}},i.Prime.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args[0],n=r.args[0];if(!e[r._symbol])throw a.functionNotDefined(r._symbol);var i,o=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw a.primedFunctionArity();i=[d(o),r.args[1]]}else{if(1!==r.args.length)throw a.primedFunctionArity();i=[d(o)]}for(var s=r.copyWithArgs(i).getConcreteTree(e,t),u=0;u<this.order;u++)s=s.takeDerivative(o);var c={};return c[o]=n,s.substitute(c).getConcreteTree(e,t)},i.Range.prototype._getConcreteTree=function(e,r){if(r&&r[this.type])return r[this.type].call(this,e,r);var n=this.beginning.getConcreteTree(e,r),i=this.end.getConcreteTree(e,r);if(n.getDependencies().length)throw a.variableRange(n.getDependencies());if(i.getDependencies().length)throw a.variableRange(i.getDependencies());if(!n.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var o,s,u=n.elementAt(0).constantValue,h=i.elementAt(i.length-1).constantValue,p=h-u;if(1===n.length)o=p>=0?1:-1;else{var m=n.elementAt(1).constantValue;s=c(u,m),o=n.elementAt(1).constantValue-u}var d=Math.round(p/o)+1;if(!isFinite(d)||d<n.length||d<i.length)throw a.nonArithmeticRange();var g,y,v=[];if(s){var b=s.nstart;for(g=0;g<d;g++)y=b/s.lcm,t(n,i,g,d,y),v.push(f(y)),b+=s.nstep}else for(v.push(f(u)),g=1;g<d;g++)y=u+g*o,t(n,i,g,d,y),v.push(f(y));return l(v)},i.ReducerFunction.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(0===this.args.length)throw a.zeroArgReducer(this._symbol);for(var o=[],s=0;s<this.args.length;s++)o.push(this.args[s].getConcreteTree(e,t));if(1===this.args.length)return o=[i.List.wrap(o[0])],this.typeCheck(o),this._constantCollapsedCopy(o);switch(r(o,this.getDummyDependencies())){case"none":return o=[i.List(o)],this.typeCheck(o),this._constantCollapsedCopy(o);case"list":return i.List(i.List.mapArgs(o,function(e){return e=[i.List(e)],this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var u=n(o);return o=[i.List(u.concreteArgs)],this.typeCheck(o),i.Broadcast(u.replacedSymbols,[this.copyWithArgs(o)].concat(u.replacedArgs))}},i.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(e[this._index._symbol])throw a.shadowedIndex(this._index._symbol);var r=Object.create(e);r[this._index._symbol]=g(this._index._symbol);var n=p.prototype._getConcreteTree.call(this,r,t);return n},i.ScalarExpression.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var a=[],o=0;o<this.args.length;o++)a.push(this.args[o].getConcreteTree(e,t));switch(r(a,this.getDummyDependencies())){case"none":return this.typeCheck(a),this._constantCollapsedCopy(a);case"list":return i.List(i.List.mapArgs(a,function(e){return this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var s=n(a);return this.typeCheck(s.concreteArgs),i.Broadcast(s.replacedSymbols,[this.copyWithArgs(s.concreteArgs)].concat(s.replacedArgs))}},i.Regression.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._lhs,this._rhs)},i.Polygon.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var r=this.args.map(function(t){return t.getConcreteTree(e)});return this.typeCheck(r),1===r.length&&r[0].valueType===o.ListOfPoint?new this.constructor(r):r.every(function(e){return e.valueType===o.Point})?new this.constructor([l(r)]):2===r.length?new this.constructor([h(this.args).getConcreteTree(e)]):a.parseError()},i.SolvedEquation.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},i.Table.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var r=[],n=Object.create(e),i=0;i<this.columns.length;i++){var a=this.columns[i].getConcreteTree(n,e,t);a.isIndependent&&this.columns[i].exportToLocal(a,n),r.push(a)}return new this.constructor(r)},i.TableColumn.prototype._getConcreteTree=function(e,t){var r,n,i=this.header.getConcreteTree(e);if(i.isFreeVariable){r=[];for(var s=0;s<this.values.length;s++)if(this.values[s].tableError())r.push(a.invalidTableEntry(this.values[s].tableError()));else{var u=this.values[s].tryGetConcreteTree(e);u.isError?r.push(u):u.tableError()?r.push(a.invalidTableEntry(u.tableError())):u.valueType===o.Number?r.push(u):r.push(a.tableEntryTypeError([o.prettyPrint(u.valueType)]))}return n=new this.constructor(i,this.length,r),n.isIndependent=!0,n}if(i.isConstant){for(var c=[],l=0;l<this.length;l++)c.push(i);r=c}else r=i.isList?i.args:[];return i=this.header.getConcreteTree(t),i.isError||i.valueType===o.Number||i.valueType===o.ListOfNumber||(i=a.tableHeaderTypeError([o.prettyPrint(i.valueType)])),n=new this.constructor(i,this.length,r)}}),define("math/features/getValueType",["require","parsenodes","math/types"],function(e){function t(){return o.Number}function r(){return o.Bool}function n(){return o.Point}function i(){return o.Any}var a=e("parsenodes"),o=e("math/types"),s={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:r,Piecewise:function(e){return e[1].valueType},BaseComparator:r,RepeatedOperator:t,List:function(e){if(0===e.length)return o.ListOfAny;for(var t=e[0].valueType,r=1;r<e.length;r++)if(e[r].valueType!==t)return o.ListOfAny;return o.listType(t)},ListAccess:function(e){return o.elementType(e[0].valueType)},Broadcast:function(e){return o.listType(e[0].valueType)},OrderedPairAccess:t,OrderedPair:n,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,DummyIndex:t,FreeVariable:t,Constant:function(){switch(typeof this.constantValue){case"number":return o.Number;case"boolean":return o.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}},TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:i};for(var u in s)a[u].prototype._getValueType=s[u]}),define("math/features/typeCheck",["require","parsenodes","math/types","math/errormsg"],function(e){function t(e){for(var t=[],r=0;r<e.length;r++)t.push(i.prettyPrint(e[r].valueType));return t}function r(e,r){return function(n){for(var i=0;i<n.length;i++)if(n[i].valueType!==e[i])throw r(t(n))}}var n=e("parsenodes"),i=e("math/types"),a=e("math/errormsg"),o={Add:r([i.Number,i.Number],a.addTypeError),Multiply:r([i.Number,i.Number],a.multiplyTypeError),Divide:r([i.Number,i.Number],a.divideTypeError),Subtract:r([i.Number,i.Number],a.subtractTypeError),Exponent:r([i.Number,i.Number],a.exponentTypeError),Negative:r([i.Number],a.negativeTypeError),BaseComparator:r([i.Number,i.Number],a.comparatorTypeError),And:r([i.Bool,i.Bool],a.andTypeError),List:function(e){if(0!==e.length){var t=e[0].valueType;if(!i.hasListType(t))throw a.listTypeError([i.prettyPrint(t)]);for(var r=0;r<e.length;r++){var n=e[r].valueType;if(!i.hasListType(n))throw a.listTypeError([i.prettyPrint(n)]);if(n!==t)throw a.heterogeneousList()}}},Broadcast:function(e){},OrderedPair:r([i.Number,i.Number],a.pointTypeError),Piecewise:function(e){if(e[0].valueType!==i.Bool)throw a.piecewiseConditionTypeError(t(e));if(e[1].valueType!==i.Number)throw a.piecewiseBranchTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.piecewiseBranchTypeError([i.prettyPrint(e[2].valueType)])},ListAccess:function(e){if(!i.isList(e[0].valueType)||e[1].valueType!==i.Number)throw a.indexTypeError(t(e))},OrderedPairAccess:r([i.Point,i.Number],a.indexTypeError),\nSum:function(e){if(e[1].valueType!==i.Number)throw a.sumLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.sumUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw a.sumArgumentTypeError([i.prettyPrint(e[3].valueType)])},Product:function(e){if(e[1].valueType!==i.Number)throw a.productLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.productUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw a.productArgumentTypeError([i.prettyPrint(e[3].valueType)])},Integral:function(e){if(e[1].valueType!==i.Number)throw a.integralLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw a.integralUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw a.integralArgumentTypeError([i.prettyPrint(e[3].valueType)])},NativeFunction:function(e){for(var r=0;r<e.length;r++)if(e[r].valueType!==i.Number)throw a.functionTypeError(this._symbol,t(e))},ReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw a.functionTypeError(this._symbol,t(e))},DoubleReducerFunction:function(e){if(!i.isList(e[0].valueType)||!i.isList(e[1].valueType))throw a.nonListDoubleReducer(this._symbol);if(e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.ListOfNumber)throw a.functionTypeError(this._symbol,t(e))},ParametrizedReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw a.nonListParametrizedReducer(this._symbol);if(e[1].valueType!==i.Number)throw a.functionTypeError(this._symbol,t(e))},TypedFunction:function(e){for(var r=0;r<e.length;r++)if(e[r].valueType!==this._inputTypes[r])throw a.functionTypeError(this._symbol,t(e))},Derivative:function(e){if(e[0].valueType!==i.Number&&e[0].valueType!==i.ListOfNumber)throw a.derivativeTypeError(t(e))},Regression:function(e){if(e[0].valueType!==i.Number&&e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.Number&&e[1].valueType!==i.ListOfNumber)throw a.regressionTypeError(t(e))},Polygon:function(e){if(1===e.length&&e[0].valueType!==i.ListOfPoint)throw a.polygonListTypeError(t(e));if(2===e.length&&e[0].valueType===i.Number&&e[1].valueType===i.Number)throw a.polygonTwoNumbersError();if(e.length>2&&!e.every(function(e){return e.valueType===i.Point}))throw a.polygonPointArgsError()}};for(var s in o)n[s].prototype.typeCheck=o[s]}),define("math/features/repr",["require","parsenodes"],function(e){var t=e("parsenodes"),r=function(e,t,r){r=r||0;var n=Array(r+1).join("  "),i=n+"  ";return"[\\n"+i+e.map(function(e){return e.repr(t,r+1)}).join(",\\n"+i)+"\\n"+n+"]"},n=function(e,t){return t=t||"",""+t+e};t.Expression.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"([\\n"+i+this.args[0].repr(e,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(e,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(e,t+1)+"\\n"+r+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return n(this.type,e)+"(\'"+this._symbol+"\')"},t.Constant.prototype.repr=function(e){return n(this.type,e)+"("+this.constantValue+")"},t.FunctionCall.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,r){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+this._expression.repr(e,r)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return n(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+r(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._msg+"\')"},t.Derivative.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return n(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return n(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+r(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"center: "+this.center.repr(e,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\\n"+i+"width: "+this.width.repr(e,t+1)+",\\n"+i+"height: "+this.height.repr(e,t+1)+"},\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+r+")"},t.Broadcast.prototype.repr=function(e,t){return n(this.type,e)+"([\'"+this._replacedSymbols.join("\', ")+"\'], "+r(this.args,e,t)+")"}}),define("math/features/scalarEvalExpression",["require","parsenodes","math/functions"],function(e){var t=e("parsenodes"),r=e("math/functions"),n={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var a in n){var o=t[a].prototype;o.scalarEvalExpression=n[a],o.evaluate=r.createEvaluateFunction(o.scalarEvalExpression,i[a])}}),define("math/features/okForImplicitFunction",["require","parsenodes"],function(e){function t(){for(var e=0;e<this.args.length;e++)if(!this.args[e].okForImplicitFunction())return!1;return!0}var r=e("parsenodes");r.Add.prototype.okForImplicitFunction=t,r.Subtract.prototype.okForImplicitFunction=t,r.Add.prototype.okForImplicitFunction=t,r.Multiply.prototype.okForImplicitFunction=t,r.Divide.prototype.okForImplicitFunction=t,r.Exponent.prototype.okForImplicitFunction=t,r.Piecewise.prototype.okForImplicitFunction=function(){return this.args[1].isConstant&&1===this.args[1].constantValue&&this.args[2].isConstant&&this.args[2].isNaN()}}),define("math/reconstitute-node",["require","parsenodes","math/types"],function(e){function t(e,i){if(n.isList(e)){for(var a=[],o=0;o<i.length;o++)a.push(t(n.elementType(e),i[o]));var s=r.List(a);return s.valueType=e,s}switch(e){case n.Number:case n.Bool:return r.Constant(i);case n.Point:return r.OrderedPair([r.Constant(i[0]),r.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+n.prettyPrint(e)+".")}}var r=e("parsenodes"),n=e("math/types");return t}),define("math/features/constantcollapsedcopy",["require","parsenodes","math/builtin","math/distance","math/reconstitute-node"],function(e){var t=e("parsenodes"),r=t.Constant,n=t.Multiply,i=t.Subtract,a=t.RawExponent,o=t.BuiltInFunction,s=e("math/builtin"),u=e("math/distance"),c=e("math/reconstitute-node"),l={Expression:function(e){return this.copyWithArgs(e)},FreeVariable:function(e){return this},ScalarExpression:function(e){for(var t=[],n=0;n<e.length;n++){if(!e[n].isConstant)return this.copyWithArgs(e);t.push(e[n].constantValue)}return r(this.evaluate(t))},OrderedPair:function(e){return this.copyWithArgs(e)},Add:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?e[1]:0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Multiply:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[0].constantValue?e[1]:1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Subtract:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?t.Negative([e[1]]):0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Divide:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Exponent:function(e){if(e[0].isConstant&&e[1].isConstant)return r(this.evaluate([e[0].constantValue,e[1].constantValue]));if(e[0].isConstant){if(e[0].constantValue===Math.E)return o.exp([e[1]]);if(e[0].constantValue>0)return a(e)}if(e[1].isConstant){var t=e[1].constantValue;if(1===t)return e[0];if(t===Math.floor(t))return a(e);var i=s.toFraction(t,100);return u.approx(i.n/i.d,t,2)&&i.d%2===1?n([i.n%2===0?r(1):o.sign([e[0]]),a([o.abs([e[0]]),e[1]])]):a(e)}return this.copyWithArgs(e)},RawExponent:function(e){return e[0].isConstant&&e[1].isConstant?r(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Negative:function(e){return e[0].isConstant?r(-e[0].constantValue):e[0]instanceof t.Negative?e[0].args[0]:this.copyWithArgs(e)},And:function(e){return e[0].isConstant&&e[1].isConstant?r(e[0].constantValue&&e[1].constantValue):e[0].isConstant&&e[0]===!0?e[1]:e[0].isConstant&&e[0]===!1?r(!1):e[1].isConstant&&e[1]===!0?e[0]:e[1].isConstant&&e[1]===!1?r(!1):this.copyWithArgs(e)},Piecewise:function(e){return e[0].isConstant&&e[0].constantValue===!0?e[1]:e[0].isConstant&&e[0].constantValue===!1?e[2]:this.copyWithArgs(e)},Integral:function(e){var t=e[0],a=e[1],o=e[2],s=e[3],u=s.getDependencies();if(a.isConstant&&o.isConstant){var c=o.constantValue-a.constantValue;if(s.isConstant)return r(s.constantValue*c);if(!s.dependsOn(t._symbol))return n([s,r(c)]);if(1===u.length&&u[0]===t._symbol)return r(this.evaluate(a.constantValue,o.constantValue,s))}else if(!s.dependsOn(t._symbol))return n([s,i([o,a])]);return this.copyWithArgs(e)},ListAccess:function(e){return e[1].isConstant?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},OrderedPairAccess:function(e){return e[1].isConstant&&e[0]instanceof t.OrderedPair?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},Broadcast:function(e){var t=e[0].getDependencies();for(r=0;r<t.length;r++)if(this._replacedSymbols.indexOf(t[r])===-1)return this.copyWithArgs(e);for(var r=1;r<e.length;r++)if(0!==e[r].getDependencies().length)return this.copyWithArgs(e);return c(this.valueType,this.evaluate(e.slice(1).map(function(e){return e.asValue()})))},ReducerFunction:function(e){return 0===e[0].getDependencies().length?c(this.valueType,this.evaluate([e[0].asValue()])):this.copyWithArgs(e)},DoubleReducerFunction:function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var t=Math.min(e[0].length,e[1].length);return c(this.valueType,this.evaluate([e[0].asValue().slice(0,t),e[1].asValue().slice(0,t)]))}return this.copyWithArgs(e)},ParametrizedReducerFunction:function(e){var t=e[0],r=e[1];return r.isConstant&&0===t.getDependencies().length?c(this.valueType,this.evaluate([t.asValue(),r.asValue()])):this.copyWithArgs(e)},RepeatedOperator:function(e){if(e[1].isConstant&&e[2].isConstant){var t=e[1].constantValue,n=e[2].constantValue,i=e[3];if(i.isConstant)return r(this.evaluateConstant([t,n,i.constantValue]));var a=i.getDependencies();if(0===a.length||1===a.length&&a[0]===e[0]._symbol)return r(this.evaluate(t,n,i))}return this.copyWithArgs(e)}};for(var h in l)t[h].prototype._constantCollapsedCopy=l[h];o.distance.prototype._constantCollapsedCopy=function(e){return 0===e[0].getDependencies().length&&0===e[1].getDependencies().length?r(this.evaluate([e[0].asArray(),e[1].asArray()])):this.copyWithArgs(e)},o.midpoint.prototype._constantCollapsedCopy=function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var n=this.evaluate([e[0].asArray(),e[1].asArray()]);return t.OrderedPair([r(n[0]),r(n[1])])}return this.copyWithArgs(e)}}),define("math/features/polynomialorder",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"},n=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)};for(var i in r){var a=r[i];t[i].prototype.polynomialOrder=n(a)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),r=this.args[1].polynomialOrder(e);if(0===t&&0===r)return 0;var n=this.args[1];return n.isConstant&&n.constantValue===Math.round(n.constantValue)&&n.constantValue>0?t*n.constantValue:1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("math/features/polynomialcoefficients",["require","parsenodes"],function(e){var t=e("parsenodes"),r=t.Constant(0),n=t.Constant(1);t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[r,n]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Add([r[s],n[s]])):o.push(i>a?r[s]:n[s]);return o},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Subtract([r[s],n[s]])):o.push(i>a?r[s]:t.Negative([n[s]]));return o},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=[],i=0;i<r.length;i++)n.push(t.Negative([r[i]]));return n},t.Exponent.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),a=n.length-1,o=i.length-1;if(o>0)throw"can\'t solve for variable in exponent";if(0===a)return[t.Exponent([n[0],i[0]])];if(this.args[1].isConstant){var s=this.args[1].constantValue;switch(s){case 0:return[r];case 1:return n;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=i;s++)for(var u=0;u<=a;u++){var c=t.Multiply([r[s],n[u]]),l=o[s+u];void 0===l?o[s+u]=c:o[s+u]=t.Add([l,c])}return o},t.Divide.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=n.length-1,a=[];if(i>0)throw"Can\'t solve for variable in denominator";for(var o=0;o<r.length;o++)a.push(t.Divide([r[o],n[0]]));return a},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){if(!this.dependsOn(e))return[this];var t=this.args[1].getPolynomialCoefficients(e);return t}}),define("math/features/extractconditions",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){for(var r=0;r<this.args.length;r++){var n=this.args[r];t=n.extractConditions(e,t)}return t},t.Constant.prototype.extractConditions=function(e,t){return t},t.Piecewise.prototype.extractConditions=function(e,r){if(!this.dependsOn(e))return r;if(!this.args[0].dependsOn(e))return r=this.args[1].extractConditions(e,r),r=this.args[2].extractConditions(e,r);var n={};return n[e]=r,t.Piecewise([this.args[0].substitute(n),r,t.Constant(NaN)])}}),define("math/builtinconstants",["require","math/parsenode/constant"],function(e){var t=e("math/parsenode/constant");return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(1)}}),define("math/builtinframe",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}),define("math/features/bounddomain",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes"),i=t.Constant(0);t.Base.prototype.boundDomain=function(e){return n.unknownDomain()},t.List.prototype.boundDomain=function(e){return n.unknownDomain()},t.Expression.prototype.boundDomain=function(e){for(var t=n.allReals(),r=0;r<this.args.length;r++)t=n.intersectDomains(t,this.args[r].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?n.emptyDomain():n.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].constantValue)?n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):n.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if("="===this.operator)return n.unknownDomain();var t=this._difference,a=this._difference.boundDomain(e),o=t.polynomialOrder(e);if(o>1)return n.unknownDomain();var s=t.getPolynomialCoefficients(e),u=s[1]?s[1].getConcreteTree(r):i,c=s[0]?s[0].getConcreteTree(r):i;if(!u.isConstant||!c.isConstant)return n.unknownDomain();if(isNaN(u.constantValue)||isNaN(c.constantValue))return n.emptyDomain();if(0===u.constantValue)return c.constantValue>=0?a:n.emptyDomain();var l=-c.constantValue/u.constantValue,h=u.constantValue<0?[-(1/0),l]:[l,1/0];return n.intersectDomains(a,n.knownDomain(h))}}),define("math/features/derivative",["require","parsenodes","math/baseparser","math/builtinframe","math/parsenode/builtinfunction"],function(e){var t=e("parsenodes"),r=e("math/baseparser"),n=e("math/builtinframe"),i=e("math/parsenode/builtinfunction"),a=t.Constant(0),o=t.Constant(1),s=t.Constant(2),u={FreeVariable:function(e){return e===this._symbol?o:a},Constant:function(e){return isFinite(this.constantValue)?a:t.Constant(this.constantValue)},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([g(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([g(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],s])]))])},Exponent:function(e){return t.Add([g(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],o])])]),this.args[0].takeDerivative(e)])),g(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],a]),t.Piecewise([t.Comparator[">"]([this.args[1],a]),a,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(n)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var r=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([a,this.args[3]]),o,a])]),n=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([a,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([a,r]),n,t.Piecewise([t.Comparator["="]([o,r]),i,a])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var r=this.args[0],n=this.args[1],i=this.args[2],a=this.args[3],o={};o[r._symbol]=i;var s={};return s[r._symbol]=n,t.Add([g(e,a,this.copyWithArgs([r,n,i,a.takeDerivative(e)])),t.Subtract([g(e,i,t.Multiply([a.substitute(o),i.takeDerivative(e)])),g(e,n,t.Multiply([a.substitute(s),n.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){for(var r=this._replacedSymbols.slice(),n=this.args.slice(1),i=this._expression.takeDerivative(e),a=0;a<this._replacedSymbols.length;a++){var o=this._replacedSymbols[a],s=this.args[a+1];if(s.dependsOn(e)){var u=this.tmpVar(),c=t.DummyIndex(u);r.push(u),n.push(s.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(o),c])])}}return t.Broadcast(r,[i].concat(n))}},c={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",round:"\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{1}{\\\\normalpdf(\\\\invNorm(x))}"},l={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],TScore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],TTest:["\\\\tpdf(\\\\TScore(x,y),\\\\length(x)-1)\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\tpdf(\\\\TScore(x,y),\\\\length(x)-1)*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],poissoncdf:["0/0","y_1\\\\sum _{n=0}^{\\\\floor(x)}\\\\frac{e^{-y}(n-y)y^{(n-1)}}{n!}"],tcdf:["x_1*\\\\tpdf(x,y)","0/0"],tpdf:["x_1*\\\\tpdf(x,y)*\\\\frac{-(y+1)*x}{y+x^2}","0/0"]},h={normalcdf:["x_1\\\\normalpdf(x,y,z)","-y_1\\\\normalpdf(x,y,z)","z_1*\\\\frac{y-x}{z}\\\\normalpdf(x,y,z)"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\normalpdf(x,y,z)","y_1*\\\\frac{x-y}{z^2} \\\\normalpdf(x,y,z)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\normalpdf(x,y,z)"],binompdf:["0/0","0/0","z_1*\\\\binompdf(x,y,z)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z})"],binomcdf:["0/0","0/0","z_1*\\\\sum _{n=0}^{\\\\round(x)}\\\\binompdf(n,y,z)*(\\\\frac{n}{z}-\\\\frac{\\\\round(y)-n}{1-z})"]},p=function(e){return function(t){var r=this.args,i={x:r[0],x_1:r[0].takeDerivative(t)};return g(t,r[0],e.substitute(i)).getConcreteTree(n)}},f=function(e,r){return function(i){var a=this.args,o={x:a[0],x_1:a[0].takeDerivative(i),y:a[1],y_1:a[1].takeDerivative(i)};return t.Add([g(i,a[0],e.substitute(o)),g(i,a[1],r.substitute(o))]).getConcreteTree(n)}},m=function(e,r,i){return function(a){var o=this.args,s={x:o[0],x_1:o[0].takeDerivative(a),y:o[1],y_1:o[1].takeDerivative(a),z:o[2],z_1:o[2].takeDerivative(a)};return t.Add([t.Add([g(a,o[0],e.substitute(s)),g(a,o[1],r.substitute(s))]),g(a,o[2],i.substitute(s))]).getConcreteTree(n)}};for(var d in c)i[d].prototype.takeDerivative=p(r.parse(c[d]));for(d in l)i[d].prototype.takeDerivative=f(r.parse(l[d][0]),r.parse(l[d][1]));for(d in h)i[d].prototype.takeDerivative=m(r.parse(h[d][0]),r.parse(h[d][1]),r.parse(h[d][2]));i.distance.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],u=t.OrderedPairAccess([r,o]),c=t.OrderedPairAccess([r,s]),l=t.OrderedPairAccess([a,o]),h=t.OrderedPairAccess([a,s]),p=g(e,u,u.takeDerivative(e)),f=g(e,c,c.takeDerivative(e)),m=g(e,l,l.takeDerivative(e)),d=g(e,h,h.takeDerivative(e));return g(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([p,u]),t.Multiply([p,l])]),t.Subtract([t.Multiply([m,l]),t.Multiply([m,u])])]),t.Add([t.Subtract([t.Multiply([f,c]),t.Multiply([f,h])]),t.Subtract([t.Multiply([d,h]),t.Multiply([d,c])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(n)},i.midpoint.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],u=t.OrderedPairAccess([r,o]),c=t.OrderedPairAccess([r,s]),l=t.OrderedPairAccess([a,o]),h=t.OrderedPairAccess([a,s]),p=g(e,u,u.takeDerivative(e)),f=g(e,c,c.takeDerivative(e)),m=g(e,l,l.takeDerivative(e)),d=g(e,h,h.takeDerivative(e));return t.OrderedPair([i.mean([p,m]),i.mean([f,d])]).getConcreteTree(n)};var g=function(e,t,r){return t.dependsOn(e)?r:a};for(var y in u){var v=u[y];t[y].prototype.takeDerivative=v}}),define("math/features/substitute",["require","parsenodes"],function(e){var t=e("parsenodes"),r={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var n in r)t[n].prototype.substitute=r[n]}),define("math/features/solve",["require","math/baseparser","parsenodes","math/errormsg","math/builtinframe","worker/workerconfig"],function(e){function t(e){var t=Object.create(d);return t.a=e[2]?e[2].tryGetConcreteTree(d):y,t.b=e[1]?e[1].tryGetConcreteTree(d):y,t.c=e[0]?e[0].tryGetConcreteTree(d):y,t}function r(e){return 0===e.a.constantValue?0===e.b.constantValue?0:1:2}function n(e,n,i,a){for(var o,s,u=[],c=[],l=0;l<i.length;l++){var h=i[l],p=0;f.eachArgs([n],function(e){var t=e[0];p=Math.max(p,t.polynomialOrder(h))});var m=p>2,d=i.length>1&&!e.validSolvedVariable(h),g=a&&n.extractConditions(h,y)!==y;m||d||g?(c[l]={},u[l]=1/0):(c[l]=[],u[l]=0,f.eachArgs([n],function(e){var n=e[0];s=t(n.getPolynomialCoefficients(h)),c[l].push(s),u[l]=Math.max(u[l],r(s))}))}var v;if(1===i.length)s=c[0],o=i[0],v=u[0];else{var b;b=0===u[0]?1:0===u[1]?0:u[0]<u[1]?0:1,s=c[b],o=i[b],v=u[b]}return{localFrame:s,variableOfInterest:o,effectiveOrder:v}}function i(e,t){return t?S.inequality:S.generalEquation}function a(e){e.f=v.getConcreteTree(e),e.g=b.getConcreteTree(e),e.p=x.getConcreteTree(e),e.q=_.getConcreteTree(e),e.m=c(1e305)}var o=e("math/baseparser"),s=e("parsenodes"),u=s.Base,c=s.Constant,l=s.Equation,h=s.SolvedEquation,p=s.BaseComparator,f=s.List,m=e("math/errormsg"),d=e("math/builtinframe"),g=e("worker/workerconfig"),y=c(0),v=o.parse("b*b"),b=o.parse("4*a*c"),x=o.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),_=o.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),w=o.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),M=o.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),E=o.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),T=o.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]"),S={inequality:function(e){return a(e),T.getConcreteTree(e)},generalEquation:function(e){return a(e),e.a.isConstant&&0===e.a.constantValue?w.getConcreteTree(e):e.f.isConstant&&e.g.isConstant&&e.f.constantValue-e.g.constantValue===0?M.getConcreteTree(e):E.getConcreteTree(e)}};u.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof s.Error)return e;throw e}},l.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},p.prototype.solve=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return r;if(r.isConstant)return r;var a="="!==this.getOperator(),o=this._difference.tryGetConcreteTree(t);o.isBroadcast&&(o=f(o.mapElements(function(e){return e})));var s=o.getDependencies();if(0===s.length)return o.isList?f(o.args.map(function(e){return c(0===e.constantValue)})):c(0===o.constantValue);if(1===s.length&&o.isList&&!a)return o;if(1===s.length&&!a&&!g.plotSingleVariableImplicitEquations)return m.singleVariableImplicitEquationsDisabled();var u=f.wrap(o);if(s.length>2)return m.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(s);if(a&&!e.validInequalityVariables(s))return m.invalidInequalityVariables().setDependencies(s);var l=n(e,u,s,a),p=l.localFrame,d=l.effectiveOrder,y=l.variableOfInterest;if(e.complicatedPolarImplicit(y,d))return m.complicatedPolarImplicit().setDependencies(s);\nif(!e.validImplicitVariables(s))return m.invalidImplicitVariables();if(d>2)return o;for(var v=i(s,a),b=[],x=0;x<p.length;x++){var _=v(p[x]);if(_.isError)return _;if(_.isConstant)b.push(_);else for(var w=0;w<_.args.length;w++){var M=_.args[w],E=u.args[x].extractConditions(y,M).getConcreteTree(t);b.push(E)}}return h(y,f(b))}}),define("math/evaluationstate",["require","graphing/graphmode","parsenodes","graphing/label"],function(e){function t(e){return e.isError?e.getError():void 0===e.constantValue?"":+e.constantValue}function r(e,r,n){for(var i=[],a=0;a<r.columns.length;a++){var o=n.columns[a],s={dependent:!o.isIndependent,discrete:o.isIndependent};o.isError?(s.error=o.getError(),s.values=[]):s.values=o.values.map(t),i.push(s)}return{column_data:i}}function n(e,t,r){var n={variables:[],errorMap:{},dimensions:{}};if(r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.center.isError||r.radianAngle.isError||r.width.isError||r.height.isError)return n.variables=t.getSliderVariables(e,r),n;n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],a.List.eachArgs([r.center,r.radianAngle,r.width,r.height],function(e){n.dimensions.x.push(+e[0].args[0].constantValue),n.dimensions.y.push(+e[0].args[1].constantValue),n.dimensions.radianAngle.push(+e[1].constantValue),n.dimensions.width.push(+e[2].constantValue),n.dimensions.height.push(+e[3].constantValue)});var o=e.graphingEnabled()?t.getGraphMode(e,r):i.NONE;return o!==i.NONE&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),n}var i=e("graphing/graphmode"),a=e("parsenodes"),o=e("graphing/label"),s=function(){return{operator:"=",variables:[]}},u=function(e,t,u){if(t.isTable)return r(e,t,u);if(t.isImage)return n(e,t,u);var c=s();if(u.isError&&(!(t instanceof a.FunctionDefinition)||u.blocksExport))return c.error=u.getError(),c.variables=t.getSliderVariables(e,u),c.is_single_identifier=t instanceof a.Identifier,c;u.moveStrategy&&(c.move_strategy=u.moveStrategy,c.default_drag_mode=u.defaultDragMode),t.isInequality()&&(c.is_inequality=!0),c.operator=t.getOperator(),u instanceof a.SolvedEquation?u._expression.constantValue!==!0&&u._expression.constantValue!==!1&&(c.assignment=u._symbol):t instanceof a.Assignment&&(c.assignment=t._symbol);var l=e.graphingEnabled()?t.getGraphMode(e,u):i.NONE;if(l!==i.NONE){c.is_graphable=!0,c.expression_type=t.getExpressionType(l,u.valueType),u.isShadeBetween()&&(c.is_shade_between=!0);var h=t.tableInfo(e,u);h&&(c.is_tableable=!0,c.table_info=h)}c.variables=c.is_graphable?[]:t.getSliderVariables(e,u),c.is_single_identifier=t instanceof a.Identifier;var p=t.getSliderInfo();p?(c.is_slidable=!0,c.is_animatable=!c.is_graphable,c.constant_value=p.value):u.isConstant&&(c.constant_value=u.constantValue);var f=u.getEvaluationInfo();if(!f||"="!==c.operator||t.isConstant||t.isFunction||c.is_slidable||(c.is_evaluable=!0,c.zero_values=f),u instanceof a.OptimizedRegression){var m={};for(var d in u.parameters)u.parameters.hasOwnProperty(d)&&(m[o.identifierToLatex(d)]=+u.parameters[d].constantValue);c.is_regression=!0,c.regression={parameters:m,residualVariable:o.identifierToLatex(u.residualVariable),residualSuggestionId:u.residualSuggestionId,shouldSuggestLogMode:u.shouldSuggestLogMode,statistics:u.statistics}}return c};return u.default=s,u}),define("math/statementanalysis",["require","math/evaluationstate","pjs","graphing/graphmode","worker/workerconfig"],function(e){var t=e("math/evaluationstate"),r=e("pjs"),n=e("graphing/graphmode"),i=e("worker/workerconfig");return r(function(e){e.init=function(e,r,n){this.policy=e,this.rawTree=r,this.concreteTree=n,this.evaluationState=t(e,r,n)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===n.X||e===n.Y}})}),define("math/features/analyze",["require","parsenodes","math/statementanalysis","math/builtinframe","math/parsenode/builtinfunction","math/errormsg","math/comparators","math/types","graphing/graphmode"],function(e){function t(e,t,r,n){var a=n.getDependencies();switch(n.valueType){case c.Point:case c.ListOfPoint:return a.length?e.validParametricVariables(a)?i(e,r,n):i(e,r,s.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(a)):i(e,r,n);case c.Number:case c.ListOfNumber:switch(a.length){case 0:return i(e,r,n);case 1:return e.validExpressionVariable(a[0])?i(e,r,n):i(e,r,s.equationRequired(e.implicitDependency(a[0])).setDependencies(a));default:return e.validImplicitVariables(a)?i(e,r,s.equationRequired().setDependencies(a)):i(e,r,s.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(a))}}}function r(e,t){return e.filter(function(e){return!t[e]})}var n=e("parsenodes"),i=e("math/statementanalysis"),a=e("math/builtinframe"),o=e("math/parsenode/builtinfunction"),s=e("math/errormsg"),u=e("math/comparators"),c=e("math/types"),l=e("graphing/graphmode");n.Base.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},n.Expression.prototype.analyze=function(e,r){var n=this.tryGetConcreteTree(r);return n.isError?i(e,this,n):t(e,r,this,n)},n.Identifier.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},n.FunctionDefinition.prototype.analyze=function(e,t){var r=/^log_[\\d|e]/;if(a[this._symbol]||r.test(this._symbol))return i(e,this,s.cannotRedefine(this._symbol));var n=this._symbol.split("_")[0];if(o[n])return i(e,this,s.cannotRedefine(this._symbol,n));var u=this.tryGetConcreteTree(t);if(u.isError)return i(e,this,u);var c=this._argSymbols,l=u.getDependencies();if(l.indexOf(this._symbol)!==-1)return i(e,this,s.selfReferentialFunction(this._symbol));var h=l.filter(function(e){return c.indexOf(e)===-1});return e.unplottablePolarFunction(this._symbol,l)?i(e,this,s.unplottablePolarFunction()):h.some(e.assignmentForbidden)?i(e,this,s.addArgumentsToDefinition(h,this._symbol,c).setDependencies(l)):h.length?i(e,this,s.tooManyVariables(this.getSliderVariables(e,u)).setDependencies(l)):i(e,this,u)},n.Assignment.prototype.analyze=function(e,t,r){var o=this._symbol;if(!e.validLHS(o))return i(e,this,s.invalidLHS(o));if(a[o])return i(e,this,s.cannotRedefine(o));var u=this.tryGetConcreteTree(t);if(u.isError)return i(e,this,u);var c=u.getDependencies();if(this.isEquation(u)){var l=this.asEquation().analyze(e,t);return i(e,this,l.concreteTree)}if(c.length>1){var h=this.getSliderVariables(e,u);return h.length?i(e,this,s.tooManyVariables(h).allowExport().setDependencies(c)):i(e,this,u)}var p=this.getMoveStrategy(t,u,r);if(p){var f=this.getDefaultDragMode(p);return i(e,this,n.MovablePoint(u.args,p,f))}return i(e,this,u)},n.Regression.prototype.analyze=function(e,t,r,n,a){return i(e,this,this.tryOptimize(e,t,r,n,a))},n.Polygon.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t),n=r.getDependencies();return n.length?i(e,this,s.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):i(e,this,this.tryGetConcreteTree(t))},n.Equation.prototype.analyze=n.BaseComparator.prototype.analyze=function(e,t){var r=this.trySolve(e,t);if(r.isError)return i(e,this,r);if(r instanceof n.SolvedEquation&&r.getDependencies().length){var a=r.getDependencies().concat(r._symbol);if(!e.validImplicitVariables(a))return i(e,this,s.invalidImplicitVariables().setDependencies(a))}return this.getGraphMode(e,r)!==l.IMPLICIT||e.validImplicitVariables(r.getDependencies())?i(e,this,r):i(e,this,s.invalidImplicitVariables().setDependencies(r.getDependencies()))},n.DoubleInequality.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return i(e,this,r);var n=r.getDependencies();return u.table[this._operators[0]].direction!==u.table[this._operators[1]].direction?i(e,this,s.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(n)?n.length>2?i(e,this,s.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):r._expressions[0].getDependencies().indexOf(r._symbol)!==-1||r._expressions[1].getDependencies().indexOf(r._symbol)!==-1?i(e,this,s.complicatedDoubleInequality().setDependencies(n)):i(e,this,r):i(e,this,s.invalidDoubleInequalityVariables().setDependencies(n))},n.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return i(e,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?i(e,this,s.complicatedDoubleInequality().setDependencies(n)):i(e,this,s.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):i(e,this,r)},n.OrderedPair.prototype.analyze=function(e,r,a){var o=this.tryGetConcreteTree(r);if(o.isError)return i(e,this,o);var s=this.getMoveStrategy(r,o,a);if(s){var u=this.getDefaultDragMode(s);return i(e,this,n.MovablePoint(o.args,s,u))}return t(e,r,this,o)},n.Table.prototype.analyze=function(e,t){for(var a,o=Object.create(t),u=[],c=0;c<this.columns.length;c++){var l=this.columns[c].analyze(e,o,t);if(0===c&&(l.concreteTree.isIndependent?e.validFirstColumnVariable(l.concreteTree.header._symbol)?a=l.concreteTree.header._symbol:l=i(e,this.columns[c],s.invalidFirstTableColumn()):l=i(e,this.columns[c],s.invalidDependentFirstTableColumn())),l.concreteTree.isIndependent)l.rawTree.exportToLocal(l.concreteTree,o);else if(!l.concreteTree.isError){var h=l.concreteTree.header.getDependencies(),p=r(h,o);p.length&&(l=i(e,this.columns[c],s.tooManyVariables(p).setDependencies(p)))}u.push(l.concreteTree)}var f=n.Table(u),m=i(e,this,f);return m.evaluationState.is_graphable=!0,m},n.TableColumn.prototype.analyze=function(e,t,r){var n=this.header.tableError();if(n)return i(e,this,s.invalidTableHeader(n));var a=this.tryGetConcreteTree(t,r);if(a.isError)return i(e,this,a);if(a.header.isError)return i(e,this,a.header);if(a.values.isError)return i(e,this,a.values);for(var o=0;o<a.values.length;o++)if(!a.values[o].isError){var u=this.values[o]&&this.values[o].tableError();if(u)a.values[o]=s.invalidTableEntry(u);else{var c=a.values[o].getDependencies();c.length&&(a.values[o]=s.tooManyVariables(c).setDependencies(c))}}return i(e,this,a)},n.Image.prototype.analyze=function(e,t,r){var a=this.tryGetConcreteTree(t);if(a.radianAngle.isError||a.center.isError||a.width.isError||a.height.isError)return i(e,this,a);var o=a.center.getDependencies(),u=a.radianAngle.getDependencies(),c=a.width.getDependencies(),l=a.height.getDependencies();return"OrderedPair"!==this.center.type?i(e,this,n.Image({center:s.parseError(),radianAngle:a.radianAngle,width:a.width,height:a.height})):o.length||u.length||c.length||l.length?i(e,this,n.Image({center:o.length?s.tooManyVariables(u).setDependencies(o):a.center,radianAngle:u.length?s.tooManyVariables(u).setDependencies(u):a.radianAngle,width:c.length?s.tooManyVariables(c).setDependencies(c):a.width,height:l.length?s.tooManyVariables(l).setDependencies(l):a.height})):(a.moveStrategy=this.getMoveStrategy(t,a,r),i(e,this,a))}}),define("math/features/analyzeFourFunction",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/parsenode/builtinfunction"),o=e("math/builtinconstants");r.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var s=r.getDependencies();if(s.length>0){var u,c=s[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):o.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeFourFunction=t,r.DoubleInequality.prototype.analyzeFourFunction=t,r.BaseComparator.prototype.analyzeFourFunction=t,r.Regression.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/builtinframe"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/builtinframe");r.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var a=r.getDependencies();return a.length>0?n(e,this,i.tooManyVariables(a)):n(e,this,r)},r.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(a[r])return n(e,this,i.cannotRedefine(r));var o=this.tryGetConcreteTree(t);if(o.isError)return n(e,this,o);var s=o.getDependencies();return this.isEquation(o)?n(e,this,i.equationsUnsupported()):s.length>0?n(e,this,i.tooManyVariables(s)):n(e,this,o)},r.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(a[this._symbol])return n(e,this,i.cannotRedefine(this._symbol));var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var o=this._argSymbols,s=r.getDependencies();if(s.indexOf(this._symbol)!==-1)return n(e,this,i.selfReferentialFunction(this._symbol));var u=s.filter(function(e){return o.indexOf(e)===-1});return u.length?n(e,this,i.addArgumentsToDefinition(u,this._symbol,o)):n(e,this,r)},r.Equation.prototype.analyzeScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeScientific=t,r.DoubleInequality.prototype.analyzeScientific=t,r.BaseComparator.prototype.analyzeScientific=t,r.Regression.prototype.analyzeScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("math/features/analyzeSingleExpressionScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("math/statementanalysis"),i=e("math/errormsg"),a=e("math/parsenode/builtinfunction"),o=e("math/builtinconstants");r.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(t);if(r.isError)return n(e,this,r);var s=r.getDependencies();if(s.length>0){var u,c=s[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):o.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeSingleExpressionScientific=t,r.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,r.BaseComparator.prototype.analyzeSingleExpressionScientific=t,r.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("graphing/dragmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NONE="NONE",t.X="X",t.Y="Y",t.XY="XY",t.AUTO="AUTO"}),define("graphing/reconcileDragMode",["require","exports","graphing/dragmode"],function(e,t,r){"use strict";function n(e){return e?"none"===e[0].type&&"none"===e[1].type?r.NONE:"none"===e[1].type?r.X:"none"===e[0].type?r.Y:r.XY:r.NONE}function i(e,t){var i=n(t);switch(e){case r.NONE:return r.NONE;case r.AUTO:return i;case r.XY:return i;case r.X:return i===r.X||i===r.XY?r.X:r.NONE;case r.Y:return i===r.Y||i===r.XY?r.Y:r.NONE;default:return r.NONE}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("math/features/getgraphmode",["require","parsenodes","graphing/graphmode","graphing/reconcileDragMode","graphing/dragmode","math/types"],function(e){function t(e,t){var r;return r=e&&e.hasOwnProperty("dragMode")?e.dragMode===s.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,o(r,t.moveStrategy)}function r(e,r){var n=r.getDependencies();switch(r.valueType){case u.Point:case u.ListOfPoint:return r.isMovablePoint&&t(this.userData,r)!==s.NONE?a.XYPOINT_MOVABLE:0===n.length?a.XYPOINT:e.validParametricVariables(n)?a.PARAMETRIC:a.NONE;case u.Number:case u.ListOfNumber:return 1===n.length?a.Y:a.NONE;default:return a.NONE}}function n(e,t){var r=t._expression.getDependencies();if(r.length>1)return a.NONE;if(t._expression.valueType!==u.Number&&t._expression.valueType!==u.ListOfNumber)return a.NONE;var n=t._symbol,i=r[0];return e.graphMode(n,i)}var i=e("parsenodes"),a=e("graphing/graphmode"),o=e("graphing/reconcileDragMode").default,s=e("graphing/dragmode"),u=e("math/types");i.Base.prototype.getGraphMode=function(e,t){return a.NONE},i.Identifier.prototype.getGraphMode=function(e,t){return e.graphableAsBareIdentifier(this._symbol)?a.Y:a.NONE},i.Expression.prototype.getGraphMode=r,i.Equation.prototype.getGraphMode=i.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?a.NONE:t instanceof i.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):a.NONE:n(e,t):r.length<=2?a.IMPLICIT:a.NONE},i.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},i.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof i.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var o=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(o.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):a.NONE;case 1:return t.valueType!==u.ListOfNumber||e.graphableListVariables(this._symbol,o[0])?e.graphMode(this._symbol,o[0]):a.NONE;default:return a.NONE}break;default:return r.call(this,e,t)}},i.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return a.NONE;var r=e.graphMode(this._symbol,this._argSymbols[0]),n=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?a.NONE:r;default:return a.NONE}break;default:return a.NONE}},i.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?a.NONE:a.Y:a.NONE},i.Polygon.prototype.getGraphMode=function(e,t){return t.isError?a.NONE:a.POLYGONFILL},i.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError?a.NONE:a.XYPOINT:a.NONE}}),define("math/features/getgraphinfo",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),r=e("math/builtinframe"),n=e("math/domaintypes");t.Base.prototype.getGraphInfo=function(e,t){var r,i,a=t.getDependencies();switch(a.length){case 0:r=!0,i=t.boundDomain("x");break;case 1:i=t.boundDomain(a[0]),r="known"===i.type&&t.isLinear(a[0]);break;case 2:r=!1,i=n.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:r,linearCoefficients:r?t.getLinearCoefficients():void 0,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.constantValue,0];case 1:var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].getConcreteTree(r).constantValue:0,t[1]?+t[1].getConcreteTree(r).constantValue:0];default:return[NaN,NaN]}},t.OrderedPair.prototype.getLinearCoefficients=function(){return[this.args[0].getLinearCoefficients(),this.args[1].getLinearCoefficients()]}}),define("math/features/getMoveStrategy",["require","parsenodes","math/types"],function(e){function t(e){return{type:"none",inputString:e}}function r(e){return{type:"updateCoordinate",inputString:e}}function n(e,t,r){return{type:"updateSlider",inputString:e,id:t,coefficients:r}}function i(e,t){for(var r in t)if(t[r].evaluationState.assignment===e&&t[r].evaluationState.is_slidable)return r}function a(e,t,r,n){for(var a=e.getDependencies(),s=0;s<a.length;s++)if(n[a[s]])return!1;for(var c=a.length-1;c>=0;c--){var l=a[c],h=i(l,r);if(void 0!==h){var p=Object.create(t);p[l]=o.FreeVariable(l);var f=e.tryGetConcreteTree(p);if(!f.isError){var m=f.polynomialOrder(l);if(1===m){var d=f.getPolynomialCoefficients(l),g=d[1]?d[1].getConcreteTree(p):u,y=d[0]?d[0].getConcreteTree(p):u;if(y.isConstant&&g.isConstant&&isFinite(y.constantValue)&&isFinite(g.constantValue)&&0!==g.constantValue){var v=[-y.constantValue/g.constantValue,1/g.constantValue];return{symbol:l,id:h,coefficients:v}}}}}}return!1}var o=e("parsenodes"),s=e("math/types"),u=o.Constant(0);o.Base.prototype.getMoveStrategy=function(){},o.Assignment.prototype.getMoveStrategy=function(e,t,r){if(this._expression instanceof o.OrderedPair)return this._expression.getMoveStrategy(e,t,r)},o.OrderedPair.prototype.getMoveStrategy=function(e,i,o){if(i.valueType===s.Point&&0===i.getDependencies().length){for(var u=[],c={},l=0;l<2;l++){var h=this.args[l],p=h.getInputString();if(h.isConstant)u[l]=r(p);else{var f=a(h,e,o,c);f&&(u[l]=n(p,f.id,f.coefficients),c[f.symbol]=!0),u[l]||(u[l]=t(p))}}if("none"!==u[0].type||"none"!==u[1].type)return u}},o.Image.prototype.getMoveStrategy=function(e,i,o){if((!this.userData||this.userData.shouldGraph!==!1)&&"OrderedPair"===i.center.type&&i.center.args[0].isConstant&&i.center.args[1].isConstant&&i.width.isConstant&&i.height.isConstant&&i.radianAngle.isConstant){for(var s=[this.width,this.height,this.center.args[0],this.center.args[1]],u=[],c={},l=[2,3,0,1],h=0;h<l.length;h++){var p=l[h],f=s[p];if(f){var m=f.getInputString();if(f.isConstant)u[p]=r(m);else{var d=a(f,e,o,c);d&&(u[p]=n(m,d.id,d.coefficients),c[d.symbol]=!0),u[p]||(u[p]=t(m))}}else u[p]=t("")}if("none"!==u[0].type||"none"!==u[1].type||"none"!==u[2].type||"none"!==u[3].type)return u}}}),define("math/features/getDefaultDragMode",["require","parsenodes","graphing/dragmode"],function(e){var t=e("parsenodes"),r=e("graphing/dragmode");t.Base.prototype.getMoveStrategy=function(){return r.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?r.XY:"none"!==e[0].type?r.X:"none"!==e[1].type?r.Y:r.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?r.XY:"updateSlider"===e[0].type?r.X:"updateSlider"===e[1].type?r.Y:r.NONE}}),define("math/features/tableinfo",["require","parsenodes","math/types","graphing/label"],function(e){var t=e("parsenodes"),r=t.List,n=e("math/types"),i=e("graphing/label");t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.graphableAsBareIdentifier(this._symbol)&&(!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this._inputString,by_reference:!1})},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();switch(t.valueType){case n.Point:case n.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;var a=r.wrap(t).mapElements(function(e){return e.asArray()});return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:a};case n.Number:if(1!==i.length)return!1;var o=i[0];return!!e.validFirstColumnVariable(o)&&{independent_variable:o,dependent_column:this._inputString,by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,r){if(r instanceof t.SolvedEquation)return!1;if(!this._inputString.length)return!1;var n=r.getDependencies();if(n.length>1)return!1;var a;if(0===n.length){if(!e.tableableAsConstant(this._symbol))return!1;a=e.implicitIndependent(this._symbol)}else a=n[0];if(!e.validFirstColumnVariable(a))return!1;var o=e.assignmentForbidden(this._symbol)?i.trimLatex(this._inputString.replace(/[^=]*=/,"")):i.trimLatex(this._inputString.split("=")[0]);return{independent_variable:a,dependent_column:o,by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this._inputString.length)return!1;var r=t.getDependencies();if(r.length>1)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var a=e.assignmentForbidden(this._symbol),o=a?i.trimLatex(this._inputString.replace(/[^=]*=/,"")):i.trimLatex(this._inputString.split("=")[0]);return{independent_variable:n,dependent_column:o,by_reference:!a}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("math/features/tableerror",["require","parsenodes","lib/worker-i18n"],function(e){var t=e("parsenodes"),r=e("lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?r.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&r.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return r.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return r.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return r.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return r.t("Regressions are not allowed.")}}),define("math/features/islinear",["require","parsenodes"],function(e){var t=e("parsenodes");t.Base.prototype.isLinear=function(e){return!1},t.Expression.prototype.isLinear=function(e){return this.polynomialOrder(e)<=1},t.SolvedEquation.prototype.isLinear=function(e){return this._expression.isLinear(e)},t.OptimizedRegression.prototype.isLinear=function(e){return this.model.isLinear(e)},t.OrderedPair.prototype.isLinear=function(e){return this.args[0].isLinear(e)&&this.args[1].isLinear(e)},t.List.prototype.isLinear=function(e){return this.args.every(function(t){return t.isLinear(e)})},t.Broadcast.prototype.isLinear=function(e){for(var r=this._replacedSymbols,n=this._expression,i=this._lists,a={},o=0;o<i.length;o++)if(i[o].dependsOn(e)){if(!i[o].isLinear(e))return!1;a[r[o]]=t.FreeVariable(e)}return n.substitute(a).isLinear(e)}}),define("math/expression-types",["require","exports"],function(e,t){"use strict";function r(e,r){switch(e){case t.X_OR_Y:case t.SINGLE_POINT:case t.POINT_LIST:case t.PARAMETRIC:case t.POLAR:case t.IMPLICIT:case t.POLYGON:var n=t.EXPRESSION_PROP_DEFAULTS[e];return{points:void 0===r.points?n.points:r.points,lines:void 0===r.lines?n.lines:r.lines,fill:void 0===r.fill?n.fill:r.fill};default:var i=e;return i}}Object.defineProperty(t,"__esModule",{value:!0}),t.X_OR_Y="X_OR_Y",t.SINGLE_POINT="SINGLE_POINT",t.POINT_LIST="POINT_LIST",t.PARAMETRIC="PARAMETRIC",t.POLAR="POLAR",t.IMPLICIT="IMPLICIT",t.POLYGON="POLYGON",t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0}},t.getReconciledExpressionProps=r}),define("math/features/graph",["require","underscore","parsenodes","math/plotter","graphing/graphmode","math/comparators","graphing/dragmode","math/expression-types"],function(e){function t(e){for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}}function r(e){return Array.prototype.concat.apply([],e)}function n(e,t,r){return!!e&&(0===t&&0===r?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==r?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==r&&"none"!==e[1].type)}var i=e("underscore"),a=e("parsenodes"),o=e("math/plotter").default,s=e("graphing/graphmode"),u=e("math/comparators"),c=e("graphing/dragmode"),l=e("math/expression-types"),h=a.List;a.Base.prototype._graph=function(e,n,u,c){if(n instanceof a.SolvedEquation)return this._graph(e,n._expression,u,c);var p,f,m,d,g,y=this,v=n.getExpressionType(c.graphMode,n.valueType),b=l.getReconciledExpressionProps(v,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(c.graphMode){case s.XYPOINT_MOVABLE:return p=[n.asArray()],m=this.userData.shouldGraph&&b.points,g=this.userData.showLabel&&!m,m?[{segments:[p],graphMode:c.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labels:this.computedLabels||[],poi:t(p)}]:g?[{segments:[p],graphMode:s.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labels:this.computedLabels||[],poi:t(p)}]:[];case s.XYPOINT:return f=[],p=h.wrap(n).mapElements(function(e){return e.asArray()}),m=this.userData.shouldGraph&&b.points,d=this.userData.shouldGraph&&b.lines,g=this.userData.showLabel&&!m&&!d,(this.userData.showLabel||m)&&f.push({segments:[p],graphMode:c.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:m,labelSize:this.userData.labelSize,nakedLabel:g,labels:this.computedLabels||[],poi:t(p)}),d&&f.push({segments:[p].map(r),graphMode:s.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,poi:[]}),f;case s.PARAMETRIC:var x=this.userData,_=[];if(f=h.wrap(n).mapElements(function(r){var n=r.getDependencies();if(0===n.length)return p=[r.asArray()],{segments:[p],graphMode:s.XYPOINT,color:x.color,style:x.lineStyle,poi:t(p)};var i=r.getCompiledFunction().fn,a=y.getGraphInfo(e,r);return a.graphMode=c.graphMode,a.domain=y.userData.domain,a.style=y.userData.lineStyle,o.computeGraphData(u,a,i)}),b.fill){if(f.forEach(function(e){_.push({segments:e.segments,color:x.color,fillOpacity:x.fillOpacity,graphMode:s.POLYGONFILL,poi:[]})}),!b.lines)return _;f=f.concat(_)}return f;case s.X:case s.Y:case s.IMPLICIT:case s.POLAR:return f=[],h.wrap(n).eachElement(function(t){var r,n=c.graphMode===s.IMPLICIT?t.getCompiledFunction(["x","y"]):t.getCompiledFunction();try{r=t.getCompiledDerivative()}catch(e){}var a=y.getGraphInfo(e,t);a.graphMode=c.graphMode,a.style=y.userData.lineStyle;var l=r?o.computeGraphData(u,a,n.fn,r.fn):o.computeGraphData(u,a,n.fn);l.compiled=n,l.fillSegments?f.push(i.omit(l,"fillSegments")):f.push(l),a.graphMode===s.IMPLICIT&&"="!==a.operator&&f.push({graphMode:s.POLYGONFILL,segments:l.fillSegments,poi:{}})}),f;default:return!1}},a.Base.prototype.graph=function(e,t,r){\nvar n=this.getGraphInfo(e,t);return this._graph(e,t,r,n)},a.BaseComparator.prototype.graph=function(e,t,r){var n=this,i=this.getGraphInfo(e,t),c=i.graphMode;if(c===s.IMPLICIT)return this._graph(e,t,r,i);if(c===s.NONE)return!1;if(!(t instanceof a.SolvedEquation))return!1;var l=this.getOperator(),h=[],p=[],f=!0;t._expression.eachElement(function(e){h.push(e.getCompiledFunction());try{p.push(e.getCompiledDerivative())}catch(e){f=!1}}),f||(p=void 0);var m,d,g=[],y=[-1,0,0,1],v=h.length;for(d=0;d<v;d++){var b=this.getGraphInfo(e,t._expression.args[d]);b.graphMode=c,b.style=n.userData.lineStyle,m=p?o.computeGraphData(r,b,h[d].fn,p[d].fn):o.computeGraphData(r,b,h[d].fn),m.compiled=h[d],m.operator=u.get(u.table[l].inclusive,y[d%4]),g.push(m)}for(d=0;d<v;d+=4){var x=o.polygonsFromSegments(g[d+1].segments,g[d+2].segments,c);g.push({graphMode:s.POLYGONFILL,segments:x,poi:{}})}return g},a.DoubleInequality.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);if(n.graphMode===s.NONE)return!1;var i=[],a=u.get(u.table[this._operators[0]].inclusive,0),c=u.get(u.table[this._operators[1]].inclusive,0),l=this.userData,p=this;return h.eachArgs(t._expressions,function(t){var u,h;t[0].userData=t[1].userData=l,u=p._graph(e,t[0],r,n)[0],u.operator=a,i.push(u),h=p._graph(e,t[1],r,n)[0],h.operator=c,i.push(h);var f=o.polygonsFromSegments(u.segments,h.segments,u.graphMode);i.push({graphMode:s.POLYGONFILL,segments:f,poi:{}})}),i},a.Regression.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)},a.Polygon.prototype.graph=function(e,t,n){for(var i=this.getGraphInfo(e,t),a=t.args[0].asValue(),o=[],u=void 0===this.userData.lines||this.userData.lines,c=void 0===this.userData.fill||this.userData.fill,l=[],h=[],p=0;p<a.length;p++){var f=a[p][0],m=a[p][1];isFinite(f)&&isFinite(m)?(u||c)&&h.push([f,m]):(u||c)&&(h.length>1&&l.push(h),h=[])}if(l.length||h.length){h.push([a[0][0],a[0][1]]),l.push(h);var d=l.map(r);c&&o.push({segments:d,graphMode:s.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.userData.fillOpacity,style:i.style}),u&&o.push({segments:d,graphMode:s.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle})}return o},a.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;var n=this.columns[t],i=n.values,a=i&&i[r];return!(!a||!isFinite(a.constantValue)||0!==a._dependencies.length)},a.Table.prototype.graph=function(e,n,i){var a=[];if(n.columns[0].isError)return a;for(var o=n.columns[0],u=o.values,l=1;l<this.columns.length;l++){var h=n.columns[l];if(!h.isError){var p=this.columns[l].header.userData;if(!p.hidden){for(var f=p.dragMode,m=f===c.X||f===c.XY,d=f===c.Y||f===c.XY,g=!!p.points,y=!!p.lines,v=h.isDiscrete(o),b=y&&v,x=y&&!v,_=[],w=[],M=[],E=[],T=[],S=[],I=0;I<u.length;I++){var N=u[I],C=h.values[I];if(N&&C&&isFinite(N.constantValue)&&isFinite(C.constantValue)){if(g){var D=m&&this.isValueDraggable(n,0,I),A=d&&this.isValueDraggable(n,l,I);D||A?(M.push([N.constantValue,C.constantValue]),E.push({index:I,dragX:D,dragY:A})):w.push([N.constantValue,C.constantValue])}b&&S.push([N.constantValue,C.constantValue])}else b&&(S.length>1&&T.push(S),S=[])}if(M.length&&_.push({graphMode:s.XYPOINT_MOVABLE,segments:[M],color:p.color,tableId:p.tableId,poi:t(M),movablePointInfo:E}),w.length&&_.push({segments:[w],graphMode:s.XYPOINT,showPoint:!0,poi:t(w),color:p.color,style:p.pointStyle}),(T.length||S.length)&&(T.push(S),_.push({segments:T.map(r),graphMode:s.PARAMETRIC,poi:[],color:p.color,style:p.lineStyle})),x){var O=this.columns[l].header.graph(e,n.columns[l].header,i);O.length&&Array.prototype.push.apply(_,O)}_.length&&(a[p.id]=_)}}}return a},a.Image.prototype.graph=function(e,r,i){var a=[];if(!("OrderedPair"===r.center.type&&r.center.args[0].isConstant&&r.center.args[1].isConstant&&r.radianAngle.isConstant&&r.width.isConstant&&r.height.isConstant))return a;for(var o=[],u=[],c=r.width.constantValue/2,l=r.height.constantValue/2,h=r.radianAngle.constantValue,p=-1;p<=1;p++)for(var f=-1;f<=1;f++){var m=[r.center.args[0].constantValue+p*c*Math.cos(h)+f*l*Math.sin(h),r.center.args[1].constantValue-p*c*Math.sin(h)+f*l*Math.cos(h)],d=n(r.moveStrategy,p,f);d&&(o.push(m),u.push([p,f]))}return a.push({segments:[o],scaleFactors:[u],graphMode:s.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:t(o)}),a}}),define("math/features/elementAt",["require","parsenodes","math/builtinframe"],function(e){function t(e){for(var t=0;t<this.length;t++)e(this.elementAt(t))}function r(e){for(var t=[],r=0;r<this.length;r++)t.push(e(this.elementAt(r)));return t}var n=e("parsenodes"),i=e("math/builtinframe");n.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(e){if(e=Math.floor(e),e<0||e>=this.length)return n.Constant(NaN);for(var t={},r=0;r<this._replacedSymbols.length;r++)t[this._replacedSymbols[r]]=this._lists[r].elementAt(e);return this._expression.substitute(t).getConcreteTree(i)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=r,n.Broadcast.prototype.mapElements=r,n.OrderedPair.prototype.elementAt=function(e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}}}),define("lib/number-to-latex",["require","exports"],function(e,t){"use strict";function r(e){if("string"==typeof e)return e;var t=e+"";return t=t.replace(/1e\\+?([-\\d]+)/,"10^{$1}"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("math/features/printLatex",["require","parsenodes","graphing/label","lib/number-to-latex"],function(e){function t(){return u.identifierToLatex(this._symbol)}function r(e){switch(e){case">":return"\\\\gt";case"<":return"\\\\lt";case">=":return"\\\\ge";case"<=":return"\\\\le";case"=":return"="}}function n(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}function a(e){return e.isConstant&&e.constantValue===!0}function o(e){return e.isConstant&&e.isNaN()}var s=e("parsenodes"),u=e("graphing/label"),c=e("lib/number-to-latex").default;s.Identifier.prototype.printLatex=t,s.FreeVariable.prototype.printLatex=t,s.Constant.prototype.printLatex=function(){return c(this.constantValue)},s.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},s.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},s.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},s.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},s.Assignment.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},s.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},s.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.args[1])+this.args[2].printLatex()+r(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},s.And.prototype.printLatex=function(){if(!(this.args[0]instanceof s.BaseComparator&&this.args[1]instanceof s.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+r(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+r(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},s.NativeFunction.prototype.printLatex=i,s.TypedFunction.prototype.printLatex=i,s.ReducerFunction.prototype.printLatex=i,s.ParametrizedReducerFunction.prototype.printLatex=i,s.DoubleReducerFunction.prototype.printLatex=i,s.FunctionCall.prototype.printLatex=i,s.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(n).join(", ")+"\\\\right)"}},s.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(n).join(", ")+"\\\\right]"},s.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(n).join(", ")+" ... "+this.args[1].args.map(n).join(", ")+"\\\\right]"},s.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},s.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},s.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},s.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},s.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},s.Piecewise.prototype.printLatex=function(){var e=this;if(a(e.args[0]))return e.args[1].printLatex();for(var t=["\\\\left\\\\{"];;){if(a(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),o(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof s.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\\\right\\\\}"),t.join("")},s.FunctionDefinition.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(u.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},s.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+u.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},s.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},s.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}),define("math/features/getExpressionType",["require","parsenodes","graphing/graphmode","math/expression-types","math/types"],function(e){var t=e("parsenodes"),r=e("graphing/graphmode"),n=e("math/expression-types"),i=e("math/types");t.Base.prototype.getExpressionType=function(e,t){return e===r.X||e===r.Y?n.X_OR_Y:e===r.XYPOINT||e===r.XYPOINT_MOVABLE?t===i.Point?n.SINGLE_POINT:n.POINT_LIST:e===r.PARAMETRIC?n.PARAMETRIC:e===r.POLAR?n.POLAR:e===r.IMPLICIT?n.IMPLICIT:n.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return n.POLYGON}}),define("parser",["require","math/baseparser","math/features/getConcreteTree","math/features/getValueType","math/features/typeCheck","math/features/repr","math/features/scalarEvalExpression","math/features/okForImplicitFunction","math/features/constantcollapsedcopy","math/features/polynomialorder","math/features/polynomialcoefficients","math/features/extractconditions","math/features/bounddomain","math/features/derivative","math/features/substitute","math/features/solve","math/features/analyze","math/features/analyzeFourFunction","math/features/analyzeScientific","math/features/analyzeSingleExpressionScientific","math/features/getgraphmode","math/features/getgraphinfo","math/features/getMoveStrategy","math/features/getDefaultDragMode","math/features/tableinfo","math/features/tableerror","math/features/islinear","math/features/graph","math/features/elementAt","math/features/printLatex","math/features/getExpressionType"],function(e){var t=e("math/baseparser");return e("math/features/getConcreteTree"),e("math/features/getValueType"),e("math/features/typeCheck"),e("math/features/repr"),e("math/features/scalarEvalExpression"),e("math/features/okForImplicitFunction"),e("math/features/constantcollapsedcopy"),e("math/features/polynomialorder"),e("math/features/polynomialcoefficients"),e("math/features/extractconditions"),e("math/features/bounddomain"),e("math/features/derivative"),e("math/features/substitute"),e("math/features/solve"),e("math/features/analyze"),e("math/features/analyzeFourFunction"),e("math/features/analyzeScientific"),e("math/features/analyzeSingleExpressionScientific"),e("math/features/getgraphmode"),e("math/features/getgraphinfo"),e("math/features/getMoveStrategy"),e("math/features/getDefaultDragMode"),e("math/features/tableinfo"),e("math/features/tableerror"),e("math/features/islinear"),e("math/features/graph"),e("math/features/elementAt"),e("math/features/printLatex"),e("math/features/getExpressionType"),t}),define("math/finddependencyorder",["require","math/builtinframe","underscore"],function(e){function t(e,t,i){function a(e){y[e]=y[e]||{};var r,n=y[e];n.id=e,n.index=v,n.lowlink=v,b.push(n),n.instack=!0,v++;for(var i=t[e].getDependencies(),u=0;u<i.length;u++){var c=i[u];if(m.hasOwnProperty(c))for(var l=m[c],h=0;h<l.length;h++){var p=l[h];y.hasOwnProperty(p)?(r=y[p],r.instack&&(n.lowlink=Math.min(n.lowlink,r.index))):(a(p),r=y[p],n.lowlink=Math.min(n.lowlink,r.lowlink))}}if(n.lowlink===n.index)if(r=b.pop(),r.instack=!1,r===n)o(n);else{for(var f=[r];;)if(r=b.pop(),r.instack=!1,f.push(r),r===n)break;s(f)}}function o(e){x.push(e.id)}function s(r){var i,a,o=[];for(a=r.length-1;a>=0;a--){i=r[a];var s=t[i.id].getLegalExports(e);Array.prototype.push.apply(o,s),o.push(s[0]),x.push(i.id)}for(o=n.unique(o),o.sort(),a=0;a<o.length;a++)g[o[a]]=o}var u,c,l,h,p,f=[],m={},d={},g={},y={},v=0,b=[],x=[];if(!i){i=[];for(u in t)t.hasOwnProperty(u)&&i.push(u)}for(u in t)if(t.hasOwnProperty(u)){for(p=t[u].exportPenalty||0;f.length<p+1;)f.push([]);f[p].push(u)}for(p=0;p<f.length;p++){var _={};for(c=0;c<f[p].length;c++){u=f[p][c];var w=t[u].getLegalExports(e);for(l=0;l<w.length;l++)h=w[l],r[h]||m[h]||(_[h]=_[h]||[],_[h].push(u),_[h].length>1&&(d[h]=!0))}for(h in _)m[h]=_[h]}for(c=0;c<i.length;c++)y.hasOwnProperty(i[c])||a(i[c]);return{resolved:x,multiplyDefined:d,cyclicallyDefined:g}}var r=e("math/builtinframe"),n=e("underscore");return t}),define("math/findIntersections",["require","graphing/graphmode","./plotter","parsenodes","./distance"],function(e){function t(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function r(e,t,r,n){return r===l.X&&n===l.X||r===l.Y&&n===l.Y?function(r){return t(r)-e(r)}:(r===l.X&&n===l.Y||r===l.Y&&n===l.X)&&function(r){return r-t(e(r))}}function n(e){e instanceof p.SolvedEquation?e=e._expression:e instanceof p.OptimizedRegression&&(e=e.model);var t=[],r=[];return e instanceof p.DoubleInequality?p.List.eachArgs(e._expressions,function(e){t.push(e[0].getCompiledFunction()),r.push(e[0].isConstant&&e[1].isNaN()),t.push(e[1].getCompiledFunction()),r.push(e[1].isConstant&&e[1].isNaN())}):p.List.wrap(e).eachElement(function(e){t.push(e.getCompiledFunction()),r.push(e.isConstant&&e.isNaN())}),{functions:t,skipIntersecting:r}}function i(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var a=e[i],o=n(a.concreteTree);r.push({id:i,graphMode:a.getGraphMode(),functions:o.functions,skipIntersecting:o.skipIntersecting})}return r}function a(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function o(e,t){if(t===l.X){var r=e.y;e.y=e.x,e.x=r}}function s(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function u(e,t,r){var n=h.sampleXY(e,t),i=n.poi.zeros,a=n.poi.extrema,o=[],s=0,u=0;for(s=0;s<i.x.length;s++){for(;u<a.x.length&&a.x[u]<i.x[s];u++)f.approx(a.y[u],0)&&o.push(a.x[u]);o.push(i.x[s])}for(;u<a.x.length;u++)f.approx(a.y[u],0)&&o.push(a.x[u]);return{x:o,y:o.map(r)}}function c(e,c,l){var p=e[l],f=p.getGraphInfo(),d=p.getGraphMode(),g=n(p.concreteTree),y=t(g.functions.length),v=i(e,l);if(!v)return y;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],w=0;w<g.functions.length;w++)if(!g.skipIntersecting[w])for(var M=g.functions[w].fn,E=h.computeDomain(c,f,M),T=0;T<_.functions.length;T++)if(!v[x].skipIntersecting[T]){var S=_.functions[T].fn,I=r(M,S,d,_.graphMode);if(I){var N=u(I,E,M);if(b+=N.x.length,b>m)return t(g.functions.length);a(N,_.id),o(N,d),s(y[w],N)}}return y}var l=e("graphing/graphmode"),h=e("./plotter").default,p=e("parsenodes"),f=e("./distance"),m=100;return{findIntersections:c,findIndicatorZeros:u}}),define("math/interpolatedlabel",["require","exports","parsenodes","math/types","graphing/label"],function(e,t,r,n,i){"use strict";function a(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function o(e){for(var t,r=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"],n="\\\\$({"+r.join("})|\\\\$({")+"})",i=new RegExp(n,"g"),a=[],o=0,s=0;t=i.exec(e);){s=t.index,s>o&&a.push(e.substr(o,s-o));var u=t[0],c=u.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");a.push({symbol:c,str:u}),o=t.index+u.length}return o<e.length&&a.push(e.substr(o)),{raw:e,parts:a}}function s(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function u(e,t,i){for(var o=[],u=a(e.raw),c=0,l=e.parts;c<l.length;c++){var h=l[c];if("string"==typeof h)o.push(h);else{var p=r.Identifier(h.symbol).tryGetConcreteTree(t);if(p.valueType===n.Number){var f=p.constantValue;if("number"==typeof f){o.push(s(f,u));continue}}else if(p.valueType===n.ListOfNumber&&p.args[i]){var f=p.args[i].constantValue;if("number"==typeof f){o.push(s(f,u));continue}}u?o.push("{?}"):o.push("?")}}return o.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMathLabel=a,t.parse=o,t.interpolate=u}),define("math/policyFourFunction",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]}};return t}),define("math/policyScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"tmp"===e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policySingleExpressionScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!1},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]}};return t}),define("math/policyGraphing",["require","graphing/graphmode","math/parsenode/builtinfunction"],function(e){var t=e("graphing/graphmode"),r=e("math/parsenode/builtinfunction"),n={assignmentForbidden:function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},sliderForbidden:function(e){return n.assignmentForbidden(e)||"ans"===e.slice(0,3)},sliderVariables:function(e){return e.indexOf("theta")!==-1&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!n.sliderForbidden(e)})},graphingEnabled:function(){return!0},ansEnabled:function(){return!1},validRegressionParameter:function(e){return"x"!==e&&"y"!==e},validLHS:function(e){return"theta"!==e},unplottablePolarFunction:function(e,t){return"theta"===e&&t.indexOf("r")!==-1},validDoubleInequalitySymbol:function(e){return"x"===e||"y"===e},validDoubleInequalityVariables:function(e){return!(e.length>2)&&e.every(n.validDoubleInequalitySymbol)},validExpressionVariable:function(e){return"x"===e},validSolvedVariable:function(e){return"x"===e||"y"===e||"r"===e},validImplicitVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},graphableListVariables:function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},validParametricVariable:function(e){return"t"===e},validParametricVariables:function(e){return 1===e.length&&n.validParametricVariable(e[0])},validInequalityVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return n.validImplicitVariables(e);default:return!1}},validFirstColumnVariable:function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\\d+)/)},complicatedPolarImplicit:function(e,t){return"theta"===e||"r"===e&&1!==t},constantGraphMode:function(e){return"x"===e?t.X:"r"===e?t.POLAR:t.Y},graphMode:function(e,r){return"y"===r?t.X:"x"===e?t.X:"r"===e&&"theta"===r?t.POLAR:t.Y},tableableAsConstant:function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},implicitIndependent:function(e){return"x"},implicitDependency:function(e){return"y"===e?"x":"theta"===e?"r":"y"},graphableAsConstant:function(e){return"y"===e||"x"===e||"r"===e},graphableAsBareIdentifier:function(e){return"x"===e},disabledFeatures:function(){return[]}};return n}),define("math/frameFourFunction",["require"],function(e){return{frame:{},restrictedFunctionsFrame:{}}}),define("math/frameScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e,r,n,i){t(r,i),t(n,i);for(var a=0;a<r.length;a++){var o=r[a];n.indexOf(o)===-1&&(e[o]=i[o])}}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a={},o=["pi","e","trigAngleMultiplier"],s=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return r(a,o,[],n),r(a,s,[],i),{frame:a,restrictedFunctionsFrame:a}}),define("math/frameSingleExpressionScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e,r,n,i){t(r,i),t(n,i);for(var a=0;a<r.length;a++){var o=r[a];n.indexOf(o)===-1&&(e[o]=i[o])}}var n=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),a={},o=["pi","e","trigAngleMultiplier"],s=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return r(a,o,[],n),r(a,s,[],i),{frame:a,restrictedFunctionsFrame:a}}),define("math/frameGraphing",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,r=e("math/builtinconstants"),n=e("math/parsenode/builtinfunction"),i=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"],a={},o={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t],o[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t],i.indexOf(t)===-1&&(o[t]=n[t]));return{frame:a,restrictedFunctionsFrame:o}}),define("math/context",["require","console","pjs","underscore","./plotter","parser","math/parsenode/constant","math/parsenode/image","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/freevariable","math/parsenode/builtinfunction","math/finddependencyorder","math/errormsg","graphing/graphmode","worker/workerconfig","./findIntersections","./interpolatedlabel","math/types","math/policyFourFunction","math/policyScientific","math/policySingleExpressionScientific","math/policyGraphing","math/frameFourFunction","math/frameScientific","math/frameSingleExpressionScientific","math/frameGraphing"],function(e){function t(e,t,r){r||(r=[]);var n;return n=t?_[e].restrictedFunctionsFrame:_[e].frame,r.indexOf("sqrt")!==-1&&(n=Object.create(n),n.sqrt=p.sqrt),n}var r=e("console"),n=e("pjs"),i=e("underscore"),a=e("./plotter").default,o=e("parser"),s=e("math/parsenode/constant"),u=e("math/parsenode/image"),c=e("math/parsenode/table"),l=e("math/parsenode/tablecolumn"),h=e("math/parsenode/freevariable"),p=e("math/parsenode/builtinfunction"),f=e("math/finddependencyorder"),m=e("math/errormsg"),d=e("graphing/graphmode"),g=e("worker/workerconfig"),y=e("./findIntersections").findIntersections,v=e("./interpolatedlabel"),b=e("math/types"),x={fourFunction:e("math/policyFourFunction"),scientific:e("math/policyScientific"),singleExpressionScientific:e("math/policySingleExpressionScientific"),graphing:e("math/policyGraphing")},_={fourFunction:e("math/frameFourFunction"),scientific:e("math/frameScientific"),singleExpressionScientific:e("math/frameSingleExpressionScientific"),graphing:e("math/frameGraphing")};return n(function(e){function n(e){return"ans"!==e.slice(0,3)}function p(e,t){var r,i=e.multiplyDefined,a=e.cyclicallyDefined;for(r in i)i.hasOwnProperty(r)&&(t[r]=m.multiplyDefined(r));for(r in a)a.hasOwnProperty(r)&&(t[r]=m.cycle(a[r].filter(n)))}e.triggerGraphComputed=function(){},e.triggerStatusChange=function(){},e.triggerRemoveGraph=function(){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.triggerDidAddStatement=function(){},e.triggerDidRemoveStatement=function(){},e.triggerDidUpdateIntersections=function(){},e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unanalyzedIds={},this.unpublishedIds={},this.intersectIds={},this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.invalidate()},e.processChangeSet=function(e){e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("pointsOfInterest")&&this.setPointsOfInterest(e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setPlotSingleVariableImplicitEquations(e.plotSingleVariableImplicitEquations),e.hasOwnProperty("intersectIds")&&(this.intersectIds=e.intersectIds),this.processStatements(e),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId),this._publishAllStatuses(),this._computeAllLabels(),this._graphAllChanged(),this.unpublishedIds={},e.isCompleteState?this.triggerRenderSlowly():this.triggerRender()},e.processStatements=function(e){var t;if(e.statements)for(var r in e.statements){var n=e.statements[r];if(null===n){if(!e.isCompleteState&&this.statements.hasOwnProperty(r)&&(t=this.statements[r].getAllIds()),this.removeStatement(r),!e.isCompleteState&&t){for(var i=0;i<t.length;i++)this.triggerRemoveGraph(t[i]);this.triggerDidRemoveStatement(r)}}else this.addStatement(n),e.isCompleteState||this.triggerDidAddStatement(n)}},e.setViewState=function(e){if(!i.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.constantValue:e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=x[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setPointsOfInterest=function(e){e!==g.pointsOfInterest&&(g.pointsOfInterest=e,this.invalidate())},e.setPlotSingleVariableImplicitEquations=function(e){e!==g.plotSingleVariableImplicitEquations&&(g.plotSingleVariableImplicitEquations=e,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var n=this.analysis[r].evaluationState;JSON.stringify(n)!==JSON.stringify(t[r])&&(e[r]=n),this.currentStatus[r]=n}this.triggerStatusChange(e)},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var r=t.tryGetConcreteTree(this.frame),n=1;r.valueType===b.ListOfPoint&&(n=r.args.length);for(var a=[],o=0;o<n;o++)a.push(v.interpolate(this.currentLabel[e],this.frame,o));i.isEqual(a,t.computedLabels)||(t.computedLabels=a,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(){var e=this.getViewState();if(a.validateViewState(e)){for(var t in this.unpublishedIds)if(this.analysis.hasOwnProperty(t)){var r=this.analysis[t];if(r.rawTree.isTable)for(var n=r.graph(e),o=r.rawTree.getAllIds(),s=0;s<o.length;s++)n[o[s]]?this.triggerGraphComputed(o[s],n[o[s]]):this.triggerRemoveGraph(o[s]);else r.evaluationState.is_graphable&&(r.rawTree.userData.shouldGraph||r.rawTree.userData.showLabel)?(this.triggerGraphComputed(t,r.graph(e)),this.intersectIds.hasOwnProperty(t)&&this._updateIntersections(t)):this.triggerRemoveGraph(t)}if(i.keys(this.unpublishedIds).length)for(var u in this.intersectIds)this.unpublishedIds.hasOwnProperty(u)||this.intersectIds.hasOwnProperty(u)&&this._updateIntersections(u)}},e._updateIntersections=function(e){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void this.triggerDidUpdateIntersections(e,[]);var t=y(this.analysis,this.viewState,e);this.triggerDidUpdateIntersections(e,t)}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=this.functionDefinition===!1?t.concat("FunctionDefinition"):t;var r=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||r.indexOf("exponent")===-1)&&("PercentOf"!==e||r.indexOf("percent")===-1)}.bind(this))},e.addStatement=function(e){if(e){var t=e.id;this.markDirty(t);var r={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures()};switch(e.type){case"table":var n=[];this.statements.hasOwnProperty(t)&&(n=this.statements[t].getAllIds()),e.shouldGraph=!0;for(var i,a,h,p=e.columns,f=[],m=0,d=0;d<p.length;d++)m=Math.max(p[d].values.length,m);\nfor(var g=0;g<p.length;g++){i=o.parse(p[g].latex,r),a=[];for(var y=-1,b=0;b<p[g].values.length;b++)p[g].values[b].replace(/\\\\space/g,"").match(/\\S/)?(a.push(o.parse(p[g].values[b],r)),y=b):a.push(s(NaN));a=a.slice(0,y+1),h=l(i,m,a),h.id=p[g].id,h.header&&(h.header.userData=p[g]),f.push(h)}this.statements[t]=c(f);var x=this,_=this.statements[t].getAllIds();n.forEach(function(e){_.indexOf(e)===-1&&x.triggerRemoveGraph(e)});break;case"image":var w="-\\\\trigAngleMultiplier*\\\\arctan(\\\\sin("+e.angle+"),\\\\cos("+e.angle+"))";this.statements[t]=u({center:o.parse(e.center,r),radianAngle:o.parse(w,r),width:o.parse(e.width,r),height:o.parse(e.height,r)});break;default:this.statements[t]=o.parse(e.latex,r)}if(this.statements[t].userData=e,e.label){var M=this.currentLabel[t];M&&M.raw===e.label||(this.currentLabel[t]=v.parse(e.label))}else delete this.currentLabel[t];this.markClean(e.id),this.markDirty(e.id)}},e.removeStatement=function(e){if(this.statements.hasOwnProperty(e)){var t=this.statements[e];if(this.markDirty(e),t.isTable){var r=this;t.getAllIds().forEach(function(e){r.triggerRemoveGraph(e)})}else this.triggerRemoveGraph(e);delete this.currentLabel[e],delete this.statements[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markDirty(e,{});this.currentStatus={},this.parent_frame=Object.create(t(this.evaluationMode,this.restrictedFunctions,this.additionalFunctions)),this.parent_frame.trigAngleMultiplier=s(this.use_degrees?Math.PI/180:1),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.buildSymbolToExpressionDirtyMap=function(){var e,t,r={};for(var n in this.statements)if(this.statements.hasOwnProperty(n)){var i=this.statements[n].getDependencies();for(e=0;e<i.length;e++)t=i[e],r[t]||(r[t]=[]),r[t].push(n);var a=this.statements[n].getExports();for(e=0;e<a.length;e++)t=a[e],r[t]||(r[t]=[]),r[t].push(n)}return r},e.markDirty=function(e,t){if(this.statements[e]&&!this.unanalyzedIds[e]){t||(t=this.buildSymbolToExpressionDirtyMap()),this.unanalyzedIds[e]=!0,this.unpublishedIds[e]=!0,delete this.analysis[e];for(var r=this.statements[e],n=r.getLegalExports(this.policy),i=0;i<n.length;i++)this.markSymbolDirty(n[i],t);if(r.isRegression){var a=this.lastFrame;this.invalidate(),this.lastFrame=a}}},e.markSymbolDirty=function(e,t){delete this.frame[e],delete this.regressionFrame[e];var r=t[e];if(r)for(var n=0;n<r.length;n++)this.markDirty(r[n],t)},e.markClean=function(e){delete this.unanalyzedIds[e]},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,r=this.frame,n=this.lastFrame,i=this.regressionFrame,a=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&a.push(t);var o=this;a.sort(function(e,t){var r=o.statements[e].userData&&o.statements[e].userData.residualVariable,n=o.statements[t].userData&&o.statements[t].userData.residualVariable;return r&&!n?-1:n&&!r?1:0});var s=f(this.policy,e,a);p(s,i);for(var u=s.resolved,c={},l=0;l<u.length;l++)if(t=u[l],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,r,n,c),this.analysis[t].exportTo(this.policy,r),delete e[t];else{var h=e[t].tryGetConcreteTree(i);e[t].exportTo(this.policy,h,i),c[t]={rawTree:e[t],concreteTree:h}}},e.updateAnalysis=function(){var e,t={};for(e in this.unanalyzedIds)this.unanalyzedIds.hasOwnProperty(e)&&this.statements[e]&&(t[e]=this.statements[e]);"graphing"===this.evaluationMode&&this._updateRegressions(t);var r=this.analysis,n=this.frame,i=f(this.policy,t);p(i,n);for(var a=i.resolved,o=0;o<a.length;o++)switch(e=a[o],this.evaluationMode){case"fourFunction":r[e]=this.statements[e].analyzeFourFunction(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"scientific":r[e]=this.statements[e].analyzeScientific(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"singleExpressionScientific":r[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,n,r),r[e].exportTo(this.policy,n);break;case"graphing":if(n.r){var s=Object.create(n);if(s.r=h("r"),r[e]=this.statements[e].analyze(this.policy,s,r),r[e].getGraphMode()===d.POLAR){r[e].exportTo(this.policy,n);continue}}r[e]=this.statements[e].analyze(this.policy,n,r),r[e].exportTo(this.policy,n)}this.unanalyzedIds={},this.lastFrame=Object.create(this.parent_frame);for(var u in n)n.hasOwnProperty(u)&&(this.lastFrame[u]=n[u])},e.evaluateOnce=function(e){return r.log("Deprecated console.evaluateOnce - this should not run in production code"),this.analysis[e].concreteTree.constantValue},e.compile=function(e){return r.log("Deprecated console.compile - this should not run in production code"),this.analysis[e].concreteTree.getCompiledFunction()},e.evalStrings=function(e){return r.log("Deprecated console.evalStrings - this should not run in production code"),this.analysis[e].concreteTree.getEvalStrings()}})}),define("worker/workercore",["require","math/context","math/functions"],function(e){var t=e("math/context"),r=e("math/functions");return function(e){var n=t();return n.triggerGraphComputed=function(t,n){r.dehydrateGraphData(n),e("graphComputed",{id:t,graphData:n})},n.triggerDidUpdateIntersections=function(t,r){e("updateIntersections",{id:t,intersections:r})},n.triggerRender=function(){e("render")},n.triggerRenderSlowly=function(){e("renderSlowly")},n.triggerRemoveGraph=function(t){e("removeGraph",t)},n.triggerStatusChange=function(t){e("statusChange",t)},{processChangeSet:function(t){n.processChangeSet(t),e("processChangeSet",t)}}}}),define("worker/worker",["require","worker/workercore","console"],function(e){var t=e("worker/workercore"),r={},n=e("console");n.log=function(e){self.postMessage({log:JSON.stringify(e)})};var i=self;i.window=i,i.onmessage=function(e){var n=e.data&&e.data.connectionId;if(n)if("destroy"===e.data.originalMessage.type)delete r[n];else{var a=r[n];a||(a=t(function(e,t){i.postMessage({connectionId:n,originalMessage:{type:e,payload:t}})}),r[n]=a),a.processChangeSet(e.data.originalMessage)}},i.loadMessageQueue&&(i.loadMessageQueue.forEach(function(e){i.onmessage(e)}),delete i.loadMessageQueue)}),"undefined"==typeof window&&("undefined"==typeof requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"])),define("toplevel/worker",function(){});';
}),define("worker_src",["require","text!worker_src_underlying"],function(e){return e("text!worker_src_underlying")}),define("worker/create_worker_url",["require","worker_src"],function(e){var t=e("worker_src");return function(){if(window.MSBlobBuilder)return null;if(!t.length)return"/assets/generated/combined/toplevel/worker.js";var e;try{e=new Blob([t],{type:"application/javascript"})}catch(i){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new n;r.append(t),e=r.getBlob("application/javascript")}catch(e){return null}}var i=window.URL||window.webkitURL;return i.createObjectURL(e)}}),define("underscore_model",["require","underscore","pjs"],function(e){var t=e("underscore"),n=e("pjs"),r=n(function(e){var n=0,r="guid_"+Math.round(1e6*Math.random())+"_"+(new Date).getTime()+"_";e.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=r+ ++n},e.unobserveAll=function(){this.__observers={},this.__eventObservers={}},e.getProperty=function(e){return this[e]},e.getOldProperty=function(e){return this.__oldProperties[e]},e.setProperty=function(e,n){var r=this[e];this[e]=n;var i=this.__propertyComparators[e];if(i){if(i(r,n))return}else if(t.isEqual(r,n))return;this.__oldProperties[e]=r,this.notifyPropertyChange(e)},e.setProperties=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setProperty(t,e[t])},e.setPropertyComparator=function(e,t){this.__propertyComparators[e]=t},e.notifyPropertyChange=function(e){this.__callObservers(this.__observers,e,this)},e.observe=function(e,t){this.__addObservers(this.__observers,e,t)},e.unobserve=function(e){this.__removeObservers(this.__observers,e)},e.observeAndSync=function(e,t){this.observe(e,t);for(var n=e.split(" "),r=0;r<n.length;r++){var i=n[r].split("."),o=i[0];this.hasOwnProperty(o)&&t(o,this)}},e.triggerEvent=function(e,t){this.__callObservers(this.__eventObservers,e,t)},e.observeEvent=function(e,t){this.__addObservers(this.__eventObservers,e,t)},e.unobserveEvent=function(e){this.__removeObservers(this.__eventObservers,e)},e.__callObservers=function(e,t,n){var r=e[t];if(r)for(var i=0;i<r.length;i++)r[i].callback(t,n)},e.__removeObservers=function(e,t){for(var n=t.split(" "),r=0;r<n.length;r++){var i=n[r].split("."),o=i[0],s=i[1];if(o&&s){var a=e[o],c=[];if(!a)continue;for(var l=0;l<a.length;l++){var u=a[l];u.namespace!==s&&c.push(u)}e[o]=c}else if(o)delete e[o];else if(s)for(o in e)e.hasOwnProperty(o)&&this.__removeObservers(e,o+"."+s)}},e.__addObservers=function(e,t,n){for(var r=t.split(" "),i=0;i<r.length;i++){var o=r[i].split("."),s=o[0];if(!s)throw"Must supply a property to observe";var a=o[1],c={namespace:a,callback:n},l=e[s];l?l.push(c):e[s]=[c]}}});return r}),define("math/curve-accumulator",["require","exports","./distance"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,r){this.map&&(e=this.map(e),t=this.map(t),r=this.map(r));var i=n.pointToSegmentParameter(r[0],r[1],e[0],e[1],t[0],t[1]);if(i<1)return!1;var o=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1])];return Math.abs(r[0]-o[0])<=this.xtolerance&&Math.abs(r[1]-o[1])<=this.ytolerance},e.prototype.addPoint=function(e){if(this.xtolerance<0&&this.ytolerance<0)return void this.segment.push(e[0],e[1]);if(!this.segment.length)return void this.segment.push(e[0],e[1]);var t=[this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||n.hypot(t[0]-e[0],t[1]-e[1])<n.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1]))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push(this.pendingPoint[0],this.pendingPoint[1]),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>2&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.default=r}),define("math/implicit-plotter",["require","exports","./distance","./curve-accumulator"],function(e,t,n,r){"use strict";function i(e,t){var n=o(e,t);return{segments:n.contours.strokeSegments,fillSegments:n.contours.fillSegments,resolved:n.quadTree.resolved}}function o(e,t){var n=Math.pow(2,-$),r=l(t,n),i=l(t,2*n),o=d(e,r,i),s=T(o.root,e,r),a=B(s,e,r);return{paddedDomain:r,rootDomain:i,quadTree:o,triangles:s,contours:a}}function s(e,t,n){return{x:e,y:t,z:n}}function a(e,t,n){return{x:e,y:t,isZero:n}}function c(e,t,n){return{vertices:[e,t,n],visited:!1,next:void 0}}function l(e,t){var n=(1+t)*e.xmin-t*e.xmax,r=(1+t)*e.xmax-t*e.xmin,i=(1+t)*e.ymin-t*e.ymax,o=(1+t)*e.ymax-t*e.ymin;return{xmin:n,ymin:i,xmax:r,ymax:o,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function u(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function h(e,t,n){e.center=S(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,n)}function d(e,t,n){var r=p(e,n),i=[],o=[];o.push(r);var s=1,a=!0;e:for(;o.length;){var c=i;i=o,o=c;for(var l=void 0;l=i.pop();)if(m(l,e,t)){if(f(l,e),!l.children){a=!1;break e}if(o.push(l.children[0]),o.push(l.children[1]),o.push(l.children[2]),o.push(l.children[3]),s+=3,s>=H){a=!1;break e}}else h(l,e,t)}for(var u=0;u<i.length;u++)h(i[u],e,t);for(var u=0;u<o.length;u++)h(o[u],e,t);return{root:r,resolved:a}}function p(e,t){var n=t.xmin,r=t.xmax,i=t.ymin,o=t.ymax;return u(0,[_(n,o,e),_(r,o,e),_(r,i,e),_(n,i,e)])}function f(e,t){var n=e.depth+1,r=e.vertices[0],i=e.vertices[1],o=e.vertices[2],s=e.vertices[3],a=w(r,i,t),c=w(i,o,t),l=w(o,s,t),h=w(s,r,t),d=w(r,o,t);e.children=[u(n,[r,a,d,h]),u(n,[a,i,c,d]),u(n,[d,c,o,l]),u(n,[h,d,l,s])]}function m(e,t,n){if(e.depth<$)return!0;if(b(e,n))return!1;if(v(e,n))return!1;var r=e.vertices[0],i=e.vertices[1],o=e.vertices[2],s=e.vertices[3];if(isNaN(r.z)&&isNaN(i.z)&&isNaN(o.z)&&isNaN(s.z))return!1;if(isNaN(r.z)||isNaN(i.z)||isNaN(o.z)||isNaN(s.z))return!0;var a=S(r,i,o,s,t,n),c=E(r,i,t,n),l=E(i,o,t,n),u=E(o,s,t,n),h=E(s,r,t,n);return y(r,c,t)||y(i,c,t)||y(i,l,t)||y(o,l,t)||y(o,u,t)||y(s,u,t)||y(s,h,t)||y(r,h,t)||g(r,c,a,t,n)||g(c,i,a,t,n)||g(i,l,a,t,n)||g(l,o,a,t,n)||g(o,u,a,t,n)||g(u,s,a,t,n)||g(s,h,a,t,n)||g(h,r,a,t,n)}function g(e,t,r,i,o){if(e.z>0==t.z>0&&t.z>0==r.z>0)return!1;var s,a,c,l;if(e.z>0==t.z>0){if(s=w(e,t,i),s.z>0!=e.z>0)return!0;a=I(e,r,i,o),c=I(t,r,i,o),l=I(s,r,i,o)}else if(t.z>0==r.z>0){if(s=w(t,r,i),s.z>0!=t.z>0)return!0;a=I(t,e,i,o),c=I(r,e,i,o),l=I(s,e,i,o)}else{if(s=w(r,e,i),s.z>0!=r.z>0)return!0;a=I(r,t,i,o),c=I(e,t,i,o),l=I(s,t,i,o)}var u=o.xtolerance,h=o.ytolerance,d=n.pointToSegment(h*l.x,u*l.y,h*a.x,u*a.y,h*c.x,u*c.y);return d>u*h}function y(e,t,n){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var r=w(e,t,n),i=4*r.z-t.z-3*e.z,o=1e-4,s=(n((1-o)*e.x+o*t.x,(1-o)*e.y+o*t.y)-e.z)/o,a=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-s)>.125*a}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function _(e,t,n){return s(e,t,n(e,t))}function w(e,t,n){return _(.5*(e.x+t.x),.5*(e.y+t.y),n)}function E(e,t,n,r){if(x(e,r)||x(t,r))return w(e,t,n);if(isNaN(e.z)||isNaN(t.z))return k(e,t,n,r);if(e.z>0!=t.z>0)return w(e,t,n);var i=.01,o=n((1-i)*e.x+i*t.x,(1-i)*e.y+i*t.y)-e.z,a=t.z-n(i*e.x+(1-i)*t.x,i*e.y+(1-i)*t.y);return isNaN(o)||isNaN(a)?w(e,t,n):o>0==a>0?w(e,t,n):M(s(e.x,e.y,o),s(t.x,t.y,a),n)}function S(e,t,n,r,i,o){var s=E(e,n,i,o);return e.z>0==n.z>0&&s.z>0!=e.z>0?s:(s=E(t,r,i,o),t.z>0==r.z>0&&s.z>0!=t.z>0?s:w(e,n,i))}function M(e,t,n){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var r=1-e.z/t.z,i=1-t.z/e.z;return _(e.x/r+t.x/i,e.y/r+t.y/i,n)}return e}return t}return w(e,t,n)}function I(e,t,n,r){var i=e.x,o=t.x,c=e.y,l=t.y,u=e.z,h=t.z,d=r.xtolerance,p=r.ytolerance;if(x(e,r)||x(t,r)){var f=w(e,t,n);return a(f.x,f.y,!1)}for(;Math.abs(i-o)>d||Math.abs(c-l)>p;){var m=.5*(i+o),g=.5*(c+l),y=n(m,g);y>0==u>0?(i=m,c=g,u=y):(o=m,l=g,h=y)}if(isNaN(u))return a(o,l,!1);if(isNaN(h))return a(i,c,!1);var v=M(s(i,c,u),s(o,l,h),n),b=0===u||0===h||0===v.z||v.z>=u==h>=v.z&&Math.abs(v.z)<1e250;return a(v.x,v.y,b)}function k(e,t,n,r){if(isNaN(e.z)===isNaN(t.z))return w(e,t,n);if(isNaN(e.z)){var i=e;e=t,t=i}for(var o=e.x,a=t.x,c=e.y,l=t.y,u=e.z,h=r.xtolerance,d=r.ytolerance;Math.abs(o-a)>h||Math.abs(c-l)>d;){var p=.5*(o+a),f=.5*(c+l),m=n(p,f);isNaN(m)===isNaN(u)?(o=p,c=f,u=m):(a=p,l=f)}return s(o,c,u)}function T(e,t,n){var r={triangles:[],edgeCache:{},domain:n,fn:t};return C(e,r),r.triangles}function C(e,t){e.children&&(C(e.children[0],t),C(e.children[1],t),C(e.children[2],t),C(e.children[3],t),A(e.children[0],e.children[1],t),A(e.children[3],e.children[2],t),P(e.children[1],e.children[2],t),P(e.children[0],e.children[3],t))}function A(e,t,n){e.children&&t.children?(A(e.children[1],t.children[0],n),A(e.children[2],t.children[3],n)):e.children?(A(e.children[1],t,n),A(e.children[2],t,n)):t.children?(A(e,t.children[0],n),A(e,t.children[3],n)):O(e,t,n)}function P(e,t,n){e.children&&t.children?(P(e.children[2],t.children[1],n),P(e.children[3],t.children[0],n)):e.children?(P(e.children[2],t,n),P(e.children[3],t,n)):t.children?(P(e,t.children[1],n),P(e,t.children[0],n)):L(e,t,n)}function O(e,t,n){if(e.center&&t.center){var r,i;e.depth>=t.depth?(r=E(e.vertices[1],e.vertices[2],n.fn,n.domain),i=D(e.vertices[1],t.center,e.vertices[2],e.center,r)):(r=E(t.vertices[0],t.vertices[3],n.fn,n.domain),i=D(t.vertices[0],t.center,t.vertices[3],e.center,r)),q(i,n.edgeCache,n.domain);for(var o=0;o<4;o++)n.triangles.push(i[o])}}function L(e,t,n){if(e.center&&t.center){var r,i;e.depth>=t.depth?(r=E(e.vertices[3],e.vertices[2],n.fn,n.domain),i=D(e.vertices[2],t.center,e.vertices[3],e.center,r)):(r=E(t.vertices[1],t.vertices[0],n.fn,n.domain),i=D(t.vertices[1],t.center,t.vertices[0],e.center,r)),q(i,n.edgeCache,n.domain);for(var o=0;o<4;o++)n.triangles.push(i[o])}}function D(e,t,n,r,i){return[c(e,i,t),c(t,i,n),c(n,i,r),c(r,i,e)]}function N(e,t,n){return e.z>0&&!x(e,n)&&(!(t.z>0)||x(t,n))}function F(e,t){return""+e.x+","+e.y+","+t.x+","+t.y}function q(e,t,n){R(e[0],e[1],e[2],F(e[1].vertices[2],e[1].vertices[0]),t,n),R(e[1],e[2],e[3],F(e[2].vertices[0],e[2].vertices[2]),t,n),R(e[2],e[3],e[0],F(e[3].vertices[2],e[3].vertices[0]),t,n),R(e[3],e[0],e[1],F(e[0].vertices[0],e[0].vertices[2]),t,n)}function R(e,t,n,r,i,o){var s=t.vertices[0],a=t.vertices[1],c=t.vertices[2];N(a,c,o)&&(t.next=n),N(s,a,o)&&(t.next=e),N(c,s,o)&&V(t,r,i),N(s,c,o)&&j(t,r,i)}function j(e,t,n){n[t]?n[t].next=e:n[t]=e}function V(e,t,n){n[t]?e.next=n[t]:n[t]=e}function B(e,t,n){for(var i={fillAccumulator:new r.default(n),strokeAccumulator:new r.default(n),fn:t,domain:n},o=0;o<e.length;o++){var s=e[o];s.next&&!s.visited&&U(s,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function U(e,t){for(;;){var n=e.vertices[0],r=e.vertices[1],i=e.vertices[2];if(z(n,r,t),z(r,i,t),z(i,n,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function z(e,t,n){if(N(e,t,n.domain)){var r=I(e,t,n.fn,n.domain);n.fillAccumulator.addPoint([r.x,r.y]),r.isZero?n.strokeAccumulator.addPoint([r.x,r.y]):n.strokeAccumulator.breakSegment()}}function G(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push([r.vertices[0].x,r.vertices[0].y,r.vertices[1].x,r.vertices[1].y,r.vertices[2].x,r.vertices[2].y,r.vertices[0].x,r.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0});var $=5,H=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=o,t.buildQuadTree=d,t.triangulate=T,t.traceContours=B,t.displayTriangles=G}),define("worker/workerconfig",[],function(){return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0}}),function(){var e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g={};!function(e){function t(e,t){return function(n,r){return e[n]=t?t(n,r):r}}var n="object"==typeof g?g:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(r){e(t(n,t(r)))}):e("object"==typeof module&&"object"==typeof module.exports?t(n,t(module.exports)):t(n))}(function(g){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};e=function(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n},r=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=function(e,t){return function(n,r){t(n,r,e)}},o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},c=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},l=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},d=function(e){return this instanceof d?(this.v=e,this):new d(e)},p=function(e,t,n){function r(e){u[e]&&(l[e]=function(t){return new Promise(function(n,r){h.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(u[e](t))}catch(e){c(h[0][3],e)}}function o(e){e.value instanceof d?Promise.resolve(e.value.v).then(s,a):c(h[0][2],e)}function s(e){i("next",e)}function a(e){i("throw",e)}function c(e,t){e(t),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=n.apply(e,t||[]),h=[];return l={},r("next"),r("throw"),r("return"),l[Symbol.asyncIterator]=function(){return this},l},f=function(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:d(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},m=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof l?l(e):e[Symbol.iterator]()},g("__extends",e),g("__assign",t),g("__rest",n),g("__decorate",r),g("__param",i),g("__metadata",o),g("__awaiter",s),g("__generator",a),g("__exportStar",c),g("__values",l),g("__read",u),g("__spread",h),g("__await",d),g("__asyncGenerator",p),g("__asyncDelegator",f),g("__asyncValues",m)})}(),define("math/poi-finding-accumulator",["require","exports","worker/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,n,r,i,o){"use strict";function s(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.domain=t,i.fn=n,i.derivative=r,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.flatLeft=void 0,i}return r.__extends(t,e),t.prototype.getPOI=function(){return n.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.flushPending=function(){if(this.pendingPoint){var e=this.pendingPoint[0],t=this.pendingPoint[1];this.pivotPoint=void 0,this.pendingPoint=void 0;var n=this.segment.length,r=void 0,i=void 0;if(i=this.checkForZero(this.segment[n-2],this.segment[n-1],e,t),n>=4&&(r=this.checkForExtremum(this.segment[n-4],this.segment[n-3],this.segment[n-2],this.segment[n-1],e,t)),i&&(this.poiData.zeros.x.push(i[0]),this.poiData.zeros.y.push(i[1])),r){this.poiData.extrema.x.push(r[0]),this.poiData.extrema.y.push(r[1]);var s=void 0;r[0]<this.segment[n-2]?(s=!!this.fn&&!!o.default.bisectJump(this.segment[n-4],this.segment[n-3],r[0],r[1],this.segment[n-2],this.segment[n-1],this.fn,this.ytolerance),s||this.segment.splice(-2,0,r[0],r[1])):(s=!!this.fn&&!!o.default.bisectJump(this.segment[n-2],this.segment[n-1],r[0],r[1],e,t,this.fn,this.ytolerance),s||r[0]===e||this.segment.push(r[0],r[1]))}this.segment.push(e,t)}},t.prototype.breakSegment=function(){if(this.flushPending(),this.segment.length>2){this.segments.push(this.segment);var e=this.segment.length;s(this.segment[1])&&(this.poiData.zeros.x.push(this.segment[0]),this.poiData.zeros.y.push(this.segment[1])),s(this.segment[e-1])&&(this.poiData.zeros.x.push(this.segment[e-2]),this.poiData.zeros.y.push(this.segment[e-1]))}this.segment=[],this.flatLeft=void 0},t.prototype.checkForZero=function(e,t,n,r){if(this.fn){var i;return 0===this.segment[1]&&(this.flatLeft=[this.segment[0],this.segment[1]]),this.flatLeft?0!==r&&(this.flatLeft[0]!==this.segment[0]&&(i=o.default.flatCenter(this.flatLeft[0],this.flatLeft[1],e,t,n,r,this.fn)),this.flatLeft=void 0):0===r?this.flatLeft=[e,t]:t<0!=r<0&&(i=o.default.bisectZero(e,t,n,r,this.fn)),i}},t.prototype.checkForExtremum=function(e,t,n,r,i,s){if(this.fn){var a;if(isFinite(t)&&isFinite(r)&&isFinite(s)){if(t!==r&&r===s)this.flatLeft=[e,t];else if(t===r&&r!==s&&this.flatLeft)r>this.flatLeft[1]==r>s&&(a=o.default.flatCenter(this.flatLeft[0],this.flatLeft[1],n,r,i,s,this.fn));else{if(t===r&&r===s)return;if(r>t==r>s)if(this.derivative){if(this.derivative(e)>0==this.derivative(i)>0)return;if(a=o.default.bisectZero(e,this.derivative(e),i,this.derivative(i),this.derivative),a||(a=o.default.bisectExtremum(e,t,n,r,i,s,this.fn)),a)return[a[0],this.fn(a[0])]}else a=o.default.bisectExtremum(e,t,n,r,i,s,this.fn)}return a}}},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.default);t.default=a}),define("graphing/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10}),define("math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-(1/0),1/0])},t.intersectDomains=function(e,n){if("empty"===e.type||"empty"===n.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===n.type)return t.unknownDomain();if(e.bounds&&n.bounds){var r=[Math.max(e.bounds[0],n.bounds[0]),Math.min(e.bounds[1],n.bounds[1])];return t.knownDomain(r)}return t.emptyDomain()}}),define("math/plotter",["require","exports","./distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","graphing/graphmode","./domaintypes"],function(e,t,n,r,i,o,s,a,c){"use strict";function l(e,t){for(var n,r=new o.default,i=t.min;i<=t.max+t.step/2;i+=t.step)n=e(i),isFinite(n[0])&&isFinite(n[1])?r.addPoint(n):r.breakSegment();return r.finish()}function u(e,t){for(var n,r=new s.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)n=e(i),isFinite(n)?r.addPoint([i,n]):r.breakSegment();return r.finish()}function h(e,t){var n=new s.default(t);return n.addPoint([t.min,e[0]+t.min*e[1]]),n.addPoint([t.max,e[0]+t.max*e[1]]),n.addLinearZero(e),n.addLinearIntercept(e),n.finish()}function d(e,t){var n=h(e[0],t),r=h(e[1],t);return n.segments.length&&r.segments.length&&4===n.segments[0].length&&4===r.segments[0].length?{segments:[[n.segments[0][1],r.segments[0][1],n.segments[0][3],r.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function p(e,t,i){var o,s,a,c,l,u,h=i.fn,d=i.jumpTolerance,p=i.stepPerturbation;o=e[0],s=e[1],l=t[0],u=t[1],a=n.mean(o,l),c=h(a);var f;if(f=r.default.bisectJump(o,s,a,c,l,u,h,d))for(var m=[-p,p],g=0;g<m.length;g++)if(o=e[0]+m[g],s=h(o),isFinite(s)||(o=e[0],s=e[1]),l=t[0]+m[g],u=h(l),isFinite(u)||(l=t[0],u=t[1]),a=n.mean(o,l),c=h(a),r.default.bisectJump(o,s,a,c,l,u,h,d))return f}function f(e,t,n){var i,o=new k(e,t,n),s=t.min,a=e(s),c=[s,a];for(isFinite(a)&&o.accumulator.addPoint([s,a]),s+=t.step;s<=t.max+t.step/2;s+=t.step){var l=s;a=e(l),isFinite(a)||(l=s+o.stepPerturbation,a=e(l)),isFinite(a)||(l=s-o.stepPerturbation,a=e(l)),isFinite(a)&&isFinite(c[1])?(I(c,[l,a],o),o.accumulator.addPoint([l,a])):isFinite(a)&&!isFinite(c[1])?(i=r.default.bisectFinite(c[0],c[1],l,a,e),i&&(i[0]!==l&&o.accumulator.addPoint(i),I(i,[l,a],o),o.accumulator.addPoint([l,a]))):!isFinite(a)&&isFinite(c[1])&&(i=r.default.bisectFinite(c[0],c[1],l,a,e),i&&(I(c,i,o),i[0]!==c[0]&&o.accumulator.addPoint(i),o.accumulator.breakSegment())),c=[l,a]}return o.accumulator.finish()}function m(e,t,n,r){function i(e,t){var i=t%2===0?1:-1;if(!r&&i===-1)return!1;for(var o=t*(Math.PI/n),s=[c,c+1,c+2,c+3],a=!1,l=0,h=s.length;l<h;l++){var d=e(s[l]),p=e(s[l]+o);if(isFinite(d)&&isFinite(p)&&(a=!0),isFinite(d)!==isFinite(p)||Math.abs(d-i*p)>u)return!1}return!!a}var o,s,a,c=t.min,l=t.max-t.min,u=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,h=Math.floor(l/(Math.PI/n));for(o=1;o<=h;o++)if(i(e,o)){for(a=o,s=2;s*o<=h;s++)i(e,s*o)||(a=void 0);if(a)break}return a?a*(Math.PI/n):null}function g(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function y(e,t){return t.map=g,f(e,t)}function v(e,t){for(var n=e.min,r=e.max,i=e.step,o=r-n,s=Math.ceil(o/i),a=o/s,c=0;c<s;c++)t(n+c*a);t(r)}function b(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var n=new o.default(t),r=10,i=t.min,s=e(i);isFinite(s[0])&&isFinite(s[1])&&n.addPoint(s);var a;return v(t,function(t){a=e(t),x(e,i,s,t,a,r,n),i=t,s=a}),n.finish()}function x(e,t,r,i,o,s,a){if(i!==t){var c=a.xtolerance,l=a.ytolerance,u=n.mean(t,i),h=e(u),d=isFinite(r[0])&&isFinite(r[1]),p=isFinite(o[0])&&isFinite(o[1]),f=isFinite(h[0])&&isFinite(h[1]);if(0===s||u===t||u===i)return a.breakSegment(),void(p&&a.addPoint(o));if(d||p){if(d!==p){for(var m=t,g=i,y=r,v=o;t!==u&&u!==i;)f==d?(t=u,r=h,d=f):(i=u,o=h,p=f),u=t+(i-t)/2,h=e(u),f=isFinite(h[0])&&isFinite(h[1]);return void(d?(x(e,m,y,t,r,s-1,a),a.breakSegment()):(a.breakSegment(),a.addPoint(o),x(e,i,o,g,v,s-1,a)))}if(d&&f&&p){var b=n.pointToSegmentParameter(h[0],h[1],r[0],r[1],o[0],o[1]);if(b>.2&&b<.8&&Math.abs(h[0]-(r[0]+b*(o[0]-r[0])))<=c&&Math.abs(h[1]-(r[1]+b*(o[1]-r[1])))<=l)return void a.addPoint(o)}r[0]===h[0]&&r[1]===h[1]||x(e,t,r,u,h,s-1,a),o[0]===h[0]&&o[1]===h[1]||x(e,u,h,i,o,s-1,a)}}}function _(e){if(!e)return!1;var t=e.viewport.xmin,n=e.viewport.xmax,r=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(n)||n<=t)&&(!(!isFinite(r)||!isFinite(i)||i<=r)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function w(e,t,n){var r,i,o=e.viewport.xmin,s=e.viewport.xmax,l=e.viewport.ymin,u=e.viewport.ymax,h=e.trigAngleMultiplier||1,d=e.oversample||4,p=1/d*(s-o)/e.screen.width,f=1/d*(u-l)/e.screen.height,g=t.domainBound;switch(t.graphMode){case a.X:switch(r=c.intersectDomains(c.knownDomain([l,u]),g),r.type){case"empty":return!1;case"known":l=r.bounds[0],u=r.bounds[1]}i={min:l,max:u,xtolerance:f,ytolerance:p,step:f};break;case a.Y:switch(r=c.intersectDomains(c.knownDomain([o,s]),g),r.type){case"empty":return!1;case"known":o=r.bounds[0],s=r.bounds[1]}i={min:o,max:s,xtolerance:p,ytolerance:f,step:p};break;case a.POLAR:i={min:0,max:2*Math.PI/h*6,step:2*Math.PI/h/1e3,tolerance:Math.min(p,f)};var y=m(n,i,h,"="===t.operator);y&&(i.max=i.min+y);break;case a.PARAMETRIC:var v=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(r=c.intersectDomains(c.knownDomain([v,b]),g),r.type){case"empty":return!1;case"known":v=r.bounds[0],b=r.bounds[1]}i={min:v,max:b,step:x,xtolerance:p,ytolerance:f};break;case a.IMPLICIT:i={xmin:o,xmax:s,ymin:l,ymax:u,xtolerance:p,ytolerance:f};break;default:return!1}return i}function E(e,t,n,r){var o,s,c,l=w(e,t,n);if(l){switch(t.graphMode){case a.X:case a.Y:o=t.isLinear?h(t.linearCoefficients,l):f(n,l,r);break;case a.POLAR:o=y(n,l);break;case a.IMPLICIT:o=i.sampleImplicit(n,l);break;default:l.step||(l.step=(l.max-l.min)/1e3),o=t.isLinear?d(t.linearCoefficients,l):b(n,l)}c=o.poi}else o={segments:[],resolved:!0};if((!c||c.zeros.x.length+c.extrema.x.length+c.intercept.x.length>250)&&(c={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),t.graphMode===a.X)for(var u in c)c.hasOwnProperty(u)&&(s=c[u].y,c[u].y=c[u].x,c[u].x=s);var p={segments:o.segments,resolved:o.resolved,graphMode:t.graphMode,color:t.color,style:t.lineStyle,operator:t.operator,poi:c,expr:null};return o.fillSegments&&(p.fillSegments=o.fillSegments),p}function S(e,t,n){var r,i,o,s,c=[],l=null;switch(n){case a.POLAR:l=g;break;case a.X:l=function(e){return[e[1],e[0]]}}for(r=0;r<e.length;r++)for(s=e[r],i=0;i<s.length;i+=2)o=[s[i],s[i+1]],l&&(o=l(o)),c.push(o[0],o[1]);for(r=t.length-1;r>=0;r--)for(s=t[r],i=s.length-2;i>=0;i-=2)o=[s[i],s[i+1]],l&&(o=l(o)),c.push(o[0],o[1]);return c}function M(e,t,r){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},o=[],s=0,a=0,c=[],l=[],u=-(1/0),h=-(1/0);;){if(u<=h){if(s>=t.length)break;l.push(t[s++])}if(h<=u){if(a>=e.length)break;c.push(e[a++])}if(u=i(l),h=i(c),n.approx(u,h,4)){o.push(S(c,l,r)),l=[],c=[];var d=Math.max(u,h);u=d,h=d}}return o}Object.defineProperty(t,"__esModule",{value:!0});var I=function(e,t,n){if(isFinite(n.jumpTolerance)&&!(n.jumpTolerance<=0)){var r;if(r=p(e,t,n)){var i=r[0],o=r[1];i&&n.accumulator.addPoint(i),n.accumulator.breakSegment(),o&&n.accumulator.addPoint(o)}}},k=function(){function e(e,t,n){this.derivative=n,this.accumulator=new s.default(t,e,n),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0,this.stepPerturbation=t.step/10}return e}();t.default={sampleParametricNaive:l,sampleXYNaive:u,sampleLinear:h,sampleXY:f,findPiPeriod:m,samplePolar:y,sampleParametricRecursive:b,subsampleParametricRecursive:x,validateViewState:_,computeDomain:w,computeGraphData:E,polygonsFromSegments:M}}),define("jison",[],function(){var e={trace:function(){},yy:{},symbols_:{error:2,sentence:3,expr:4,EOF:5,assignment:6,equation:7,function_declaration:8,regression:9,polygon:10,ordered_pair_list:11,double_inequality:12,boolean:13,identifier:14,"=":15,FUNCTION_PROTOTYPE:16,",":17,"~":18,POLYGON:19,"(":20,")":21,function_argument_list:22,comparator:23,IDENTIFIER_BASE:24,ordered_pair:25,ordered_pair_list_elements:26,list:27,"[":28,list_elements:29,"]":30,range:31,optional_commas_ellipsis:32,"...":33,list_element_access_impmul:34,expr_atom_impmul:35,list_element_access:36,expr_atom:37,expr_sum:38,"<":39,">":40,">=":41,"<=":42,"+":43,expr_product:44,"-":45,"*":46,"/":47,"%":48,OF:49,exponent:50,"^N":51,"^I":52,"^":53,"{":54,"}":55,subscript:56,_N:57,_I:58,_:59,function_call:60,primed_function_call:61,function_call_unary:62,trig_function_call:63,ln_log_function_call:64,logbase_function_call:65,ANS:66,"left|":67,"right|":68,FRAC:69,SQRT:70,"!":71,repeated_operator:72,integral:73,DERIVATIVE:74,expr_piecewise:75,constant:76,expr_atom_error:77,repeated_operator_symbol:78,SUM:79,PROD:80,INT:81,DIFFERENTIAL:82,"{_visible":83,piecewise_list:84,"}_visible":85,incomplete_piecewise_list:86,piecewise_element:87,":":88,NUMBER:89,trig_function:90,TRIG_FUNCTION:91,logbase_prefix:92,LOG:93,LOG_BASE_N:94,ln_log_prefix:95,LN:96,primes:97,PRIME:98,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",15:"=",16:"FUNCTION_PROTOTYPE",17:",",18:"~",19:"POLYGON",20:"(",21:")",24:"IDENTIFIER_BASE",28:"[",30:"]",33:"...",39:"<",40:">",41:">=",42:"<=",43:"+",45:"-",46:"*",47:"/",48:"%",49:"OF",51:"^N",52:"^I",53:"^",54:"{",55:"}",57:"_N",58:"_I",59:"_",66:"ANS",67:"left|",68:"right|",69:"FRAC",70:"SQRT",71:"!",74:"DERIVATIVE",79:"SUM",80:"PROD",81:"INT",82:"DIFFERENTIAL",83:"{_visible",85:"}_visible",88:":",89:"NUMBER",91:"TRIG_FUNCTION",93:"LOG",94:"LOG_BASE_N",96:"LN",98:"PRIME"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,3],[3,2],[3,4],[3,1],[6,3],[9,3],[10,4],[10,4],[7,3],[12,5],[14,1],[11,3],[26,1],[26,3],[25,5],[27,3],[31,5],[32,1],[32,2],[32,2],[32,3],[29,1],[29,3],[34,4],[36,4],[4,1],[23,1],[23,1],[23,1],[23,1],[13,3],[13,3],[13,5],[38,3],[38,3],[38,2],[38,2],[38,1],[44,2],[44,3],[44,3],[44,4],[44,3],[44,3],[44,2],[44,2],[44,2],[44,1],[50,1],[50,1],[50,4],[56,1],[56,1],[56,4],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,3],[35,3],[35,3],[35,2],[35,5],[35,6],[35,6],[35,7],[35,4],[35,7],[35,2],[35,1],[35,1],[35,2],[35,1],[37,1],[37,2],[37,2],[37,2],[37,2],[37,1],[37,1],[37,1],[37,1],[37,1],[37,1],[77,1],[77,2],[77,1],[77,2],[78,1],[78,1],[72,9],[73,5],[73,4],[73,2],[75,3],[75,2],[84,3],[84,1],[86,3],[86,1],[87,3],[87,1],[76,1],[62,5],[62,4],[90,1],[63,4],[63,2],[63,7],[63,9],[63,3],[63,5],[92,2],[92,1],[65,4],[65,2],[65,5],[65,3],[95,1],[95,1],[64,4],[64,2],[64,5],[64,3],[60,4],[61,5],[61,5],[61,5],[61,5],[61,5],[97,2],[97,1],[22,3],[22,3],[8,2]],
performAction:function(e,t,n,r,i,o,s){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return o[a-1];case 3:return o[a-1];case 4:return o[a-1];case 5:return o[a-1];case 6:return o[a-1];case 7:return o[a-1];case 8:return o[a-1];case 9:return o[a-1];case 10:return r.ErrorMsg.missingRHS(o[a-2]._symbol);case 11:var c=r.parseFunctionDeclaration(o[a-1]).identifier._symbol;return r.ErrorMsg.missingRHS(c);case 12:return r.ErrorMsg.malformedPoint();case 13:return r.ErrorMsg.blankExpression();case 14:this.$=r.Assignment(o[a-2],o[a]),r.setInput(this.$,this._$);break;case 15:this.$=r.Regression(o[a-2],o[a]),r.setInput(this.$,this._$);break;case 16:this.$=r.Polygon([o[a-1]]);break;case 17:this.$=r.Polygon(o[a-1]);break;case 18:this.$=r.Equation(o[a-2],o[a]),r.setInput(this.$,this._$);break;case 19:this.$=r.DoubleInequality([o[a-4],o[a-3],o[a-2],o[a-1],o[a]]),r.setInput(this.$,this._$);break;case 20:this.$=r.Identifier(e),r.setInput(this.$,this._$);break;case 21:o[a].unshift(o[a-2]),this.$=r.List(o[a]),r.setInput(this.$,this._$);break;case 22:this.$=[o[a]];break;case 23:o[a-2].push(o[a]),this.$=o[a-2];break;case 24:this.$=r.OrderedPair([o[a-3],o[a-1]]);break;case 25:this.$=r.List(o[a-1]),r.setInput(this.$,this._$);break;case 26:this.$=r.Range([r.List(o[a-3]),r.List(o[a-1])]);break;case 31:this.$=[o[a]];break;case 32:o[a-2].push(o[a]),this.$=o[a-2];break;case 33:this.$=r.ListAccess([o[a-3],o[a-1]]);break;case 34:this.$=r.ListAccess([o[a-3],o[a-1]]);break;case 35:this.$=o[a],r.setInput(this.$,this._$);break;case 36:this.$="<";break;case 37:this.$=">";break;case 38:this.$=">=";break;case 39:this.$="<=";break;case 40:this.$=r.Comparator[o[a-1]]([o[a-2],o[a]]),r.setInput(this.$,this._$);break;case 41:this.$=r.Comparator["="]([o[a-2],o[a]]),r.setInput(this.$,this._$);break;case 42:var l=r.Comparator[o[a-3]]([o[a-4],o[a-2]]),u=r.Comparator[o[a-1]]([o[a-2],o[a]]);this.$=r.And([l,u]),r.setInput(this.$,this._$);break;case 43:this.$=r.Add([o[a-2],o[a]]);break;case 44:this.$=r.Subtract([o[a-2],o[a]]);break;case 45:throw r.ErrorMsg.binaryOperatorMissingOperand("+");case 46:throw r.ErrorMsg.binaryOperatorMissingOperand("-");case 47:this.$=o[a];break;case 48:this.$=r.Multiply([o[a-1],o[a]]);break;case 49:this.$=r.Multiply([o[a-2],o[a]]);break;case 50:this.$=r.Divide([o[a-2],o[a]]);break;case 51:this.$=r.PercentOf([o[a-3],o[a]]);break;case 52:throw r.ErrorMsg.binaryOperatorMissingOperand("% of");case 53:throw r.ErrorMsg.percentMissingOf();case 54:throw r.ErrorMsg.percentMissingOf();case 55:throw r.ErrorMsg.binaryOperatorMissingOperand("*");case 56:throw r.ErrorMsg.binaryOperatorMissingOperand("÷");case 57:this.$=o[a];break;case 58:this.$=r.Constant(Number(o[a]));break;case 59:this.$=r.Identifier(o[a]),r.setInput(this.$,this._$);break;case 60:this.$=o[a-1];break;case 61:this.$=r.Constant(Number(o[a]));break;case 62:this.$=r.Identifier(o[a]),r.setInput(this.$,this._$);break;case 63:this.$=o[a-1];break;case 64:this.$=o[a];break;case 65:this.$=o[a];break;case 66:this.$=o[a];break;case 67:this.$=o[a];break;case 68:this.$=o[a];break;case 69:this.$=o[a];break;case 70:this.$=o[a];break;case 71:this.$=o[a];break;case 72:if(void 0===r.currentIndex)throw r.ErrorMsg.badAnsContext();this.$=r.Ans("ans_{"+(r.currentIndex-1)+"}");break;case 73:this.$=o[a-1];break;case 74:this.$=o[a-1];break;case 75:this.$=r.FunctionCall("\\abs",[o[a-1]]);break;case 76:this.$=r.Exponent([o[a-1],o[a]]);break;case 77:throw r.ErrorMsg.fractionEmpty();case 78:throw r.ErrorMsg.fractionMissingNumerator();case 79:throw r.ErrorMsg.fractionMissingDenominator();case 80:this.$=r.Divide([o[a-4],o[a-1]]);break;case 81:this.$=r.FunctionCall("\\sqrt",[o[a-1]]);break;case 82:this.$=r.FunctionCall("\\nthroot",[o[a-1],o[a-4]]);break;case 83:this.$=r.FunctionCall("\\factorial",[o[a-1]]);break;case 84:this.$=o[a];break;case 85:this.$=o[a];break;case 86:this.$=r.Derivative(o[a-1],[o[a]]);break;case 87:this.$=o[a];break;case 88:this.$=o[a];break;case 89:this.$=r.Exponent([o[a-1],o[a]]);break;case 90:this.$=r.FunctionCall("\\factorial",[o[a-1]]);break;case 91:this.$=o[a].isConstant?r.Constant(-o[a].constantValue):r.Negative([o[a]]);break;case 92:this.$=o[a];break;case 93:this.$=o[a];break;case 94:this.$=o[a];break;case 95:this.$=o[a];break;case 96:this.$=o[a];break;case 97:this.$=o[a];break;case 98:this.$=o[a];break;case 99:throw r.ErrorMsg.binaryOperatorMissingOperand("*");case 100:throw r.ErrorMsg.binaryOperatorMissingOperand("*");case 101:throw r.ErrorMsg.binaryOperatorMissingOperand("÷");case 102:throw r.ErrorMsg.binaryOperatorMissingOperand("÷");case 103:this.$=r.Sum;break;case 104:this.$=r.Product;break;case 105:this.$=o[a-8]([o[a-5],o[a-3],o[a-1],o[a]]);break;case 106:this.$=r.Integral([r.Identifier(o[a]),o[a-3],o[a-2],o[a-1]]);break;case 107:this.$=r.Integral([r.Identifier(o[a]),o[a-2],o[a-1],r.Constant(1)]);break;case 108:throw r.ErrorMsg.missingIntegralBounds();case 109:this.$=r.Piecewise.chain(o[a-1]);break;case 110:this.$=r.Piecewise.empty();break;case 111:o[a-2].push({condition:r.Constant(!0),if_expr:o[a]}),this.$=o[a-2];break;case 112:this.$=o[a];break;case 113:o[a-2].push(o[a]),this.$=o[a-2];break;case 114:this.$=[o[a]];break;case 115:this.$={condition:o[a-2],if_expr:o[a]};break;case 116:this.$={condition:o[a],if_expr:r.Constant(1)};break;case 117:this.$=r.Constant(Number(e));break;case 118:this.$=r.FunctionExponent([o[a-4],o[a-2],o[a]]);break;case 119:this.$=r.FunctionCall(o[a-3],[o[a-1]]);break;case 120:this.$=r.Identifier(e),r.setInput(this.$,this._$);break;case 121:this.$=r.FunctionCall(o[a-3],[o[a-1]]);break;case 122:if(o[a]instanceof r.OrderedPair)this.$=r.FunctionCall(o[a-1],o[a].args);else{if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply(o[a-1]._symbol);this.$=r.FunctionCall(o[a-1],[o[a]])}break;case 123:if(1!=o[a-2].constantValue)throw r.ErrorMsg.badTrigExponent(o[a-6]._symbol);if(o[a]instanceof r.OrderedPair)this.$=r.FunctionCall(r.inverses[o[a-6]._symbol],o[a].args);else{if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply(o[a-6]._symbol);this.$=r.FunctionCall(r.inverses[o[a-6]._symbol],[o[a]])}break;case 124:if(1!=o[a-4].constantValue)throw r.ErrorMsg.badTrigExponent(o[a-8]._symbol);this.$=r.FunctionCall(r.inverses[o[a-8]._symbol],[o[a-1]]);break;case 125:if("2"!=o[a-1])throw r.ErrorMsg.badTrigExponent(o[a-2]._symbol);if(o[a]instanceof r.OrderedPair)this.$=r.Exponent([r.FunctionCall(o[a-2],o[a].args),r.Constant(2)]);else{if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply(o[a-2]._symbol);this.$=r.Exponent([r.FunctionCall(o[a-2],[o[a]]),r.Constant(2)])}break;case 126:if("2"!=o[a-3])throw r.ErrorMsg.badTrigExponent(o[a-4]._symbol);this.$=r.Exponent([r.FunctionCall(o[a-4],[o[a-1]]),r.Constant(2)]);break;case 127:this.$=o[a];break;case 128:this.$=r.Constant(Number(e));break;case 129:this.$=r.FunctionCall("logbase",[o[a-1],o[a-3]]);break;case 130:if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply("logbase");this.$=r.FunctionCall("logbase",[o[a],o[a-1]]);break;case 131:if("2"!=o[a-3])throw r.ErrorMsg.badLogExponent("logbase");this.$=r.Exponent([r.FunctionCall("logbase",[o[a-1],o[a-4]]),r.Constant(2)]);break;case 132:if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply("logbase");if("2"!=o[a-1])throw r.ErrorMsg.badLogExponent("logbase");this.$=r.Exponent([r.FunctionCall("logbase",[o[a],o[a-2]]),r.Constant(2)]);break;case 133:this.$="ln";break;case 134:this.$="log";break;case 135:this.$=r.FunctionCall(o[a-3],[o[a-1]]);break;case 136:if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply(o[a-1]);this.$=r.FunctionCall(o[a-1],[o[a]]);break;case 137:if("2"!=o[a-3])throw r.ErrorMsg.badLogExponent(o[a-4]);this.$=r.Exponent([r.FunctionCall(o[a-4],[o[a-1]]),r.Constant(2)]);break;case 138:if(!o[a].okForImplicitFunction())throw r.ErrorMsg.badImplicitMultiply(o[a-2]);if("2"!=o[a-1])throw r.ErrorMsg.badLogExponent(o[a-2]);this.$=r.Exponent([r.FunctionCall(o[a-2],[o[a]]),r.Constant(2)]);break;case 139:this.$=r.FunctionCall(o[a-3],o[a-1]);break;case 140:this.$=r.Prime(o[a-3],[r.FunctionCall(o[a-4],[o[a-1]])]);break;case 141:this.$=r.Prime(o[a-3],[r.FunctionCall(o[a-4],[o[a-1]])]);break;case 142:this.$=r.Prime(o[a-3],[r.FunctionCall(o[a-4],[o[a-1]])]);break;case 143:this.$=r.Prime(o[a-3],[r.FunctionCall("logbase",[o[a-1],o[a-4]])]);break;case 144:throw r.ErrorMsg.primedFunctionArity();case 145:this.$=o[a-1]+1;break;case 146:this.$=1;break;case 147:this.$=o[a-2].concat([o[a]]);break;case 148:this.$=[o[a-2],o[a]];break;case 149:var h=r.parseFunctionDeclaration(o[a-1]);this.$=r.FunctionDefinition(h.identifier,h.args,o[a]),r.setInput(this.$,this._$)}},table:[{3:1,4:2,5:[1,13],6:3,7:4,8:5,9:6,10:7,11:8,12:9,13:10,14:11,16:[1,12],19:[1,15],20:[1,19],24:[1,17],25:16,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{1:[3]},{5:[1,61],15:[1,63],17:[1,62],18:[1,64],23:65,39:[1,66],40:[1,67],41:[1,68],42:[1,69]},{5:[1,70]},{5:[1,71]},{5:[1,72]},{5:[1,73]},{5:[1,74]},{5:[1,75]},{5:[1,76]},{5:[1,77]},{5:[2,64],15:[1,78],17:[2,64],18:[2,64],20:[1,79],24:[2,64],28:[2,64],39:[2,64],40:[2,64],41:[2,64],42:[2,64],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],51:[2,64],52:[2,64],53:[2,64],54:[2,64],66:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64],74:[2,64],79:[2,64],80:[2,64],81:[2,64],83:[2,64],91:[2,64],93:[2,64],94:[2,64],96:[2,64],97:80,98:[1,81]},{4:83,5:[1,82],14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{1:[2,13]},{5:[2,35],15:[2,35],17:[2,35],18:[2,35],20:[2,35],21:[2,35],24:[2,35],28:[2,35],30:[2,35],33:[2,35],39:[2,35],40:[2,35],41:[2,35],42:[2,35],43:[1,86],45:[1,87],46:[2,35],47:[2,35],48:[2,35],51:[2,35],52:[2,35],53:[2,35],54:[2,35],55:[2,35],66:[2,35],67:[2,35],68:[2,35],69:[2,35],70:[2,35],71:[2,35],74:[2,35],79:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],85:[2,35],88:[2,35],91:[2,35],93:[2,35],94:[2,35],96:[2,35]},{20:[1,88]},{5:[2,96],15:[2,96],17:[1,89],18:[2,96],20:[2,96],24:[2,96],28:[2,96],39:[2,96],40:[2,96],41:[2,96],42:[2,96],43:[2,96],45:[2,96],46:[2,96],47:[2,96],48:[2,96],51:[2,96],52:[2,96],53:[2,96],54:[2,96],66:[2,96],67:[2,96],69:[2,96],70:[2,96],71:[2,96],74:[2,96],79:[2,96],80:[2,96],81:[2,96],83:[2,96],91:[2,96],93:[2,96],94:[2,96],96:[2,96]},{5:[2,20],15:[2,20],17:[2,20],18:[2,20],20:[2,20],21:[2,20],24:[2,20],28:[2,20],30:[2,20],33:[2,20],39:[2,20],40:[2,20],41:[2,20],42:[2,20],43:[2,20],45:[2,20],46:[2,20],47:[2,20],48:[2,20],51:[2,20],52:[2,20],53:[2,20],54:[2,20],55:[2,20],66:[2,20],67:[2,20],68:[2,20],69:[2,20],70:[2,20],71:[2,20],74:[2,20],79:[2,20],80:[2,20],81:[2,20],82:[2,20],83:[2,20],85:[2,20],88:[2,20],91:[2,20],93:[2,20],94:[2,20],96:[2,20],98:[2,20]},{5:[2,47],14:85,15:[2,47],17:[2,47],18:[2,47],20:[1,94],21:[2,47],24:[1,17],28:[2,47],30:[2,47],33:[2,47],34:37,35:90,39:[2,47],40:[2,47],41:[2,47],42:[2,47],43:[2,47],45:[2,47],46:[1,91],47:[1,92],48:[1,93],51:[2,47],52:[2,47],53:[2,47],54:[1,39],55:[2,47],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,47],69:[1,41],70:[1,42],71:[2,47],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,47],83:[1,54],85:[2,47],88:[2,47],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:95,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,57],15:[2,57],17:[2,57],18:[2,57],20:[2,57],21:[2,57],24:[2,57],28:[1,98],30:[2,57],33:[2,57],39:[2,57],40:[2,57],41:[2,57],42:[2,57],43:[2,57],45:[2,57],46:[2,57],47:[2,57],48:[2,57],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,57],55:[2,57],66:[2,57],67:[2,57],68:[2,57],69:[2,57],70:[2,57],71:[1,97],74:[2,57],79:[2,57],80:[2,57],81:[2,57],82:[2,57],83:[2,57],85:[2,57],88:[2,57],91:[2,57],93:[2,57],94:[2,57],96:[2,57]},{5:[2,88],15:[2,88],17:[2,88],18:[2,88],20:[2,88],21:[2,88],24:[2,88],28:[2,88],30:[2,88],33:[2,88],39:[2,88],40:[2,88],41:[2,88],42:[2,88],43:[2,88],45:[2,88],46:[2,88],47:[2,88],48:[2,88],51:[2,88],52:[2,88],53:[2,88],54:[2,88],55:[2,88],66:[2,88],67:[2,88],68:[2,88],69:[2,88],70:[2,88],71:[2,88],74:[2,88],79:[2,88],80:[2,88],81:[2,88],82:[2,88],83:[2,88],85:[2,88],88:[2,88],91:[2,88],93:[2,88],94:[2,88],96:[2,88]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:102,43:[1,23],45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:103,43:[1,23],45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,93],15:[2,93],17:[2,93],18:[2,93],20:[2,93],21:[2,93],24:[2,93],28:[2,93],30:[2,93],33:[2,93],39:[2,93],40:[2,93],41:[2,93],42:[2,93],43:[2,93],45:[2,93],46:[2,93],47:[2,93],48:[2,93],51:[2,93],52:[2,93],53:[2,93],54:[2,93],55:[2,93],66:[2,93],67:[2,93],68:[2,93],69:[2,93],70:[2,93],71:[2,93],74:[2,93],79:[2,93],80:[2,93],81:[2,93],82:[2,93],83:[2,93],85:[2,93],88:[2,93],91:[2,93],93:[2,93],94:[2,93],96:[2,93]},{5:[2,94],15:[2,94],17:[2,94],18:[2,94],20:[2,94],21:[2,94],24:[2,94],28:[2,94],30:[2,94],33:[2,94],39:[2,94],40:[2,94],41:[2,94],42:[2,94],43:[2,94],45:[2,94],46:[2,94],47:[2,94],48:[2,94],51:[2,94],52:[2,94],53:[2,94],54:[2,94],55:[2,94],66:[2,94],67:[2,94],68:[2,94],69:[2,94],70:[2,94],71:[2,94],74:[2,94],79:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],85:[2,94],88:[2,94],91:[2,94],93:[2,94],94:[2,94],96:[2,94]},{5:[2,95],15:[2,95],17:[2,95],18:[2,95],20:[2,95],21:[2,95],24:[2,95],28:[2,95],30:[2,95],33:[2,95],39:[2,95],40:[2,95],41:[2,95],42:[2,95],43:[2,95],45:[2,95],46:[2,95],47:[2,95],48:[2,95],51:[2,95],52:[2,95],53:[2,95],54:[2,95],55:[2,95],66:[2,95],67:[2,95],68:[2,95],69:[2,95],70:[2,95],71:[2,95],74:[2,95],79:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],85:[2,95],88:[2,95],91:[2,95],93:[2,95],94:[2,95],96:[2,95]},{5:[2,97],15:[2,97],17:[2,97],18:[2,97],20:[2,97],21:[2,97],24:[2,97],28:[1,106],30:[2,97],33:[2,97],39:[2,97],40:[2,97],41:[2,97],42:[2,97],43:[2,97],45:[2,97],46:[2,97],47:[2,97],48:[2,97],50:104,51:[1,99],52:[1,100],53:[1,101],54:[2,97],55:[2,97],66:[2,97],67:[2,97],68:[2,97],69:[2,97],70:[2,97],71:[1,105],74:[2,97],79:[2,97],80:[2,97],81:[2,97],82:[2,97],83:[2,97],85:[2,97],88:[2,97],91:[2,97],93:[2,97],94:[2,97],96:[2,97]},{5:[2,98],15:[2,98],17:[2,98],18:[2,98],20:[2,98],21:[2,98],24:[2,98],28:[2,98],30:[2,98],33:[2,98],39:[2,98],40:[2,98],41:[2,98],42:[2,98],43:[2,98],45:[2,98],46:[2,98],47:[2,98],48:[2,98],51:[2,98],52:[2,98],53:[2,98],54:[2,98],55:[2,98],66:[2,98],67:[2,98],68:[2,98],69:[2,98],70:[2,98],71:[2,98],74:[2,98],79:[2,98],80:[2,98],81:[2,98],82:[2,98],83:[2,98],85:[2,98],88:[2,98],91:[2,98],93:[2,98],94:[2,98],96:[2,98]},{5:[2,117],15:[2,117],17:[2,117],18:[2,117],20:[2,117],21:[2,117],24:[2,117],28:[2,117],30:[2,117],33:[2,117],39:[2,117],40:[2,117],41:[2,117],42:[2,117],43:[2,117],45:[2,117],46:[2,117],47:[2,117],48:[2,117],51:[2,117],52:[2,117],53:[2,117],54:[2,117],55:[2,117],66:[2,117],67:[2,117],68:[2,117],69:[2,117],70:[2,117],71:[2,117],74:[2,117],79:[2,117],80:[2,117],81:[2,117],82:[2,117],83:[2,117],85:[2,117],88:[2,117],91:[2,117],93:[2,117],94:[2,117],96:[2,117]},{4:108,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],29:107,31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,65],15:[2,65],17:[2,65],18:[2,65],20:[2,65],21:[2,65],24:[2,65],28:[2,65],30:[2,65],33:[2,65],39:[2,65],40:[2,65],41:[2,65],42:[2,65],43:[2,65],45:[2,65],46:[2,65],47:[2,65],48:[2,65],51:[2,65],52:[2,65],53:[2,65],54:[2,65],55:[2,65],66:[2,65],67:[2,65],68:[2,65],69:[2,65],70:[2,65],71:[2,65],74:[2,65],79:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],85:[2,65],88:[2,65],91:[2,65],93:[2,65],94:[2,65],96:[2,65]},{5:[2,66],15:[2,66],17:[2,66],18:[2,66],20:[2,66],21:[2,66],24:[2,66],28:[2,66],30:[2,66],33:[2,66],39:[2,66],40:[2,66],41:[2,66],42:[2,66],43:[2,66],45:[2,66],46:[2,66],47:[2,66],48:[2,66],51:[2,66],52:[2,66],53:[2,66],54:[2,66],55:[2,66],66:[2,66],67:[2,66],68:[2,66],69:[2,66],70:[2,66],71:[2,66],74:[2,66],79:[2,66],80:[2,66],81:[2,66],82:[2,66],83:[2,66],85:[2,66],88:[2,66],91:[2,66],93:[2,66],94:[2,66],96:[2,66]},{5:[2,67],15:[2,67],17:[2,67],18:[2,67],20:[2,67],21:[2,67],24:[2,67],28:[2,67],30:[2,67],33:[2,67],39:[2,67],40:[2,67],41:[2,67],42:[2,67],43:[2,67],45:[2,67],46:[2,67],47:[2,67],48:[2,67],51:[2,67],52:[2,67],53:[2,67],54:[2,67],55:[2,67],66:[2,67],67:[2,67],68:[2,67],69:[2,67],70:[2,67],71:[2,67],74:[2,67],79:[2,67],80:[2,67],81:[2,67],82:[2,67],83:[2,67],85:[2,67],88:[2,67],91:[2,67],93:[2,67],94:[2,67],96:[2,67]},{5:[2,68],15:[2,68],17:[2,68],18:[2,68],20:[2,68],21:[2,68],24:[2,68],28:[2,68],30:[2,68],33:[2,68],39:[2,68],40:[2,68],41:[2,68],42:[2,68],43:[2,68],45:[2,68],46:[2,68],47:[2,68],48:[2,68],51:[2,68],52:[2,68],53:[2,68],54:[2,68],55:[2,68],66:[2,68],67:[2,68],68:[2,68],69:[2,68],70:[2,68],71:[2,68],74:[2,68],79:[2,68],80:[2,68],81:[2,68],82:[2,68],83:[2,68],85:[2,68],88:[2,68],91:[2,68],93:[2,68],94:[2,68],96:[2,68]},{5:[2,69],15:[2,69],17:[2,69],18:[2,69],20:[2,69],21:[2,69],24:[2,69],28:[2,69],30:[2,69],33:[2,69],39:[2,69],40:[2,69],41:[2,69],42:[2,69],43:[2,69],45:[2,69],46:[2,69],47:[2,69],48:[2,69],51:[2,69],52:[2,69],53:[2,69],54:[2,69],55:[2,69],66:[2,69],67:[2,69],68:[2,69],69:[2,69],70:[2,69],71:[2,69],74:[2,69],79:[2,69],80:[2,69],81:[2,69],82:[2,69],83:[2,69],85:[2,69],88:[2,69],91:[2,69],93:[2,69],94:[2,69],96:[2,69]},{5:[2,70],15:[2,70],17:[2,70],18:[2,70],20:[2,70],21:[2,70],24:[2,70],28:[2,70],30:[2,70],33:[2,70],39:[2,70],40:[2,70],41:[2,70],42:[2,70],43:[2,70],45:[2,70],46:[2,70],47:[2,70],48:[2,70],51:[2,70],52:[2,70],53:[2,70],54:[2,70],55:[2,70],66:[2,70],67:[2,70],68:[2,70],69:[2,70],70:[2,70],71:[2,70],74:[2,70],79:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],85:[2,70],88:[2,70],91:[2,70],93:[2,70],94:[2,70],96:[2,70]},{5:[2,71],15:[2,71],17:[2,71],18:[2,71],20:[2,71],21:[2,71],24:[2,71],28:[2,71],30:[2,71],33:[2,71],39:[2,71],40:[2,71],41:[2,71],42:[2,71],43:[2,71],45:[2,71],46:[2,71],47:[2,71],48:[2,71],51:[2,71],52:[2,71],53:[2,71],54:[2,71],55:[2,71],66:[2,71],67:[2,71],68:[2,71],69:[2,71],70:[2,71],71:[2,71],74:[2,71],79:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],85:[2,71],88:[2,71],91:[2,71],93:[2,71],94:[2,71],96:[2,71]},{5:[2,72],15:[2,72],17:[2,72],18:[2,72],20:[2,72],21:[2,72],24:[2,72],28:[2,72],30:[2,72],33:[2,72],39:[2,72],40:[2,72],41:[2,72],42:[2,72],43:[2,72],45:[2,72],46:[2,72],47:[2,72],48:[2,72],51:[2,72],52:[2,72],53:[2,72],54:[2,72],55:[2,72],66:[2,72],67:[2,72],68:[2,72],69:[2,72],70:[2,72],71:[2,72],74:[2,72],79:[2,72],80:[2,72],81:[2,72],82:[2,72],83:[2,72],85:[2,72],88:[2,72],91:[2,72],93:[2,72],94:[2,72],96:[2,72]},{4:109,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:110,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,111]},{28:[1,113],54:[1,112]},{5:[2,84],15:[2,84],17:[2,84],18:[2,84],20:[2,84],21:[2,84],24:[2,84],28:[2,84],30:[2,84],33:[2,84],39:[2,84],40:[2,84],41:[2,84],42:[2,84],43:[2,84],45:[2,84],46:[2,84],47:[2,84],48:[2,84],51:[2,84],52:[2,84],53:[2,84],54:[2,84],55:[2,84],66:[2,84],67:[2,84],68:[2,84],69:[2,84],70:[2,84],71:[2,84],74:[2,84],79:[2,84],80:[2,84],81:[2,84],82:[2,84],83:[2,84],85:[2,84],88:[2,84],91:[2,84],93:[2,84],94:[2,84],96:[2,84]},{5:[2,85],15:[2,85],17:[2,85],18:[2,85],20:[2,85],21:[2,85],24:[2,85],28:[2,85],30:[2,85],33:[2,85],39:[2,85],40:[2,85],41:[2,85],42:[2,85],43:[2,85],45:[2,85],46:[2,85],47:[2,85],48:[2,85],51:[2,85],52:[2,85],53:[2,85],54:[2,85],55:[2,85],66:[2,85],67:[2,85],68:[2,85],69:[2,85],70:[2,85],71:[2,85],74:[2,85],79:[2,85],80:[2,85],81:[2,85],82:[2,85],83:[2,85],85:[2,85],88:[2,85],91:[2,85],93:[2,85],94:[2,85],96:[2,85]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:114,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,87],15:[2,87],17:[2,87],18:[2,87],20:[2,87],21:[2,87],24:[2,87],28:[2,87],30:[2,87],33:[2,87],39:[2,87],40:[2,87],41:[2,87],42:[2,87],43:[2,87],45:[2,87],46:[2,87],47:[2,87],48:[2,87],51:[2,87],52:[2,87],53:[2,87],54:[2,87],55:[2,87],66:[2,87],67:[2,87],68:[2,87],69:[2,87],70:[2,87],71:[2,87],74:[2,87],79:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],85:[2,87],88:[2,87],91:[2,87],93:[2,87],94:[2,87],96:[2,87]},{5:[2,99],14:85,15:[2,99],17:[2,99],18:[2,99],20:[1,19],21:[2,99],24:[1,17],25:84,27:24,28:[1,30],30:[2,99],31:25,33:[2,99],34:37,35:27,36:26,37:115,39:[2,99],40:[2,99],41:[2,99],42:[2,99],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,99],51:[2,99],52:[2,99],53:[2,99],54:[1,39],55:[2,99],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,99],69:[1,41],70:[1,42],71:[2,99],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,99],83:[1,54],85:[2,99],88:[2,99],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,101],14:85,15:[2,101],17:[2,101],18:[2,101],20:[1,19],21:[2,101],24:[1,17],25:84,27:24,28:[1,30],30:[2,101],31:25,33:[2,101],34:37,35:27,36:26,37:116,39:[2,101],40:[2,101],41:[2,101],42:[2,101],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,101],51:[2,101],52:[2,101],53:[2,101],54:[1,39],55:[2,101],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,101],69:[1,41],70:[1,42],71:[2,101],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,101],83:[1,54],85:[2,101],88:[2,101],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,118],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:119,45:[1,22],46:[1,47],47:[1,48],51:[1,121],53:[1,120],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56],97:117,98:[1,81]},{14:85,20:[1,123],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:124,45:[1,22],46:[1,47],47:[1,48],51:[1,125],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56],97:122,98:[1,81]},{14:85,20:[1,127],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:128,45:[1,22],46:[1,47],47:[1,48],51:[1,129],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56],97:126,98:[1,81]},{59:[1,130]},{4:132,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],56:131,57:[1,133],58:[1,134],59:[1,135],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:141,13:140,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],84:136,85:[1,137],86:138,87:139,89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,120],24:[2,120],28:[2,120],43:[2,120],45:[2,120],46:[2,120],47:[2,120],51:[2,120],53:[2,120],54:[2,120],66:[2,120],67:[2,120],69:[2,120],70:[2,120],74:[2,120],79:[2,120],80:[2,120],81:[2,120],83:[2,120],89:[2,120],91:[2,120],93:[2,120],94:[2,120],96:[2,120],98:[2,120]},{20:[2,133],24:[2,133],28:[2,133],43:[2,133],45:[2,133],46:[2,133],47:[2,133],51:[2,133],54:[2,133],66:[2,133],67:[2,133],69:[2,133],70:[2,133],74:[2,133],79:[2,133],80:[2,133],81:[2,133],83:[2,133],89:[2,133],91:[2,133],93:[2,133],94:[2,133],96:[2,133],98:[2,133]},{20:[2,134],24:[2,134],28:[2,134],43:[2,134],45:[2,134],46:[2,134],47:[2,134],51:[2,134],54:[2,134],56:142,57:[1,133],58:[1,134],59:[1,135],66:[2,134],67:[2,134],69:[2,134],70:[2,134],74:[2,134],79:[2,134],80:[2,134],81:[2,134],83:[2,134],89:[2,134],91:[2,134],93:[2,134],94:[2,134],96:[2,134],98:[2,134]},{20:[2,128],24:[2,128],28:[2,128],43:[2,128],45:[2,128],46:[2,128],47:[2,128],51:[2,128],54:[2,128],66:[2,128],67:[2,128],69:[2,128],70:[2,128],74:[2,128],79:[2,128],80:[2,128],81:[2,128],83:[2,128],89:[2,128],91:[2,128],93:[2,128],94:[2,128],96:[2,128],98:[2,128]},{59:[2,103]},{59:[2,104]},{1:[2,1]},{4:143,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:144,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:145,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:147,14:146,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,36],24:[2,36],28:[2,36],43:[2,36],45:[2,36],46:[2,36],47:[2,36],54:[2,36],66:[2,36],67:[2,36],69:[2,36],70:[2,36],74:[2,36],79:[2,36],80:[2,36],81:[2,36],83:[2,36],89:[2,36],91:[2,36],93:[2,36],94:[2,36],96:[2,36]},{20:[2,37],24:[2,37],28:[2,37],43:[2,37],45:[2,37],46:[2,37],47:[2,37],54:[2,37],66:[2,37],67:[2,37],69:[2,37],70:[2,37],74:[2,37],79:[2,37],80:[2,37],81:[2,37],83:[2,37],89:[2,37],91:[2,37],93:[2,37],94:[2,37],96:[2,37]},{20:[2,38],24:[2,38],28:[2,38],43:[2,38],45:[2,38],46:[2,38],47:[2,38],54:[2,38],66:[2,38],67:[2,38],69:[2,38],70:[2,38],74:[2,38],79:[2,38],80:[2,38],81:[2,38],83:[2,38],89:[2,38],91:[2,38],93:[2,38],94:[2,38],96:[2,38]},{20:[2,39],24:[2,39],28:[2,39],43:[2,39],45:[2,39],46:[2,39],47:[2,39],54:[2,39],66:[2,39],67:[2,39],69:[2,39],70:[2,39],74:[2,39],79:[2,39],80:[2,39],81:[2,39],83:[2,39],89:[2,39],91:[2,39],93:[2,39],94:[2,39],96:[2,39]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{1:[2,8]},{1:[2,9]},{4:149,5:[1,148],14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:151,14:85,20:[1,19],22:150,24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,152],98:[1,153]},{20:[2,146],98:[2,146]},{1:[2,11]},{5:[2,149]},{5:[2,96],15:[2,96],17:[2,96],18:[2,96],20:[2,96],21:[2,96],24:[2,96],28:[2,96],30:[2,96],33:[2,96],39:[2,96],40:[2,96],41:[2,96],42:[2,96],43:[2,96],45:[2,96],46:[2,96],47:[2,96],48:[2,96],51:[2,96],52:[2,96],53:[2,96],54:[2,96],55:[2,96],66:[2,96],67:[2,96],68:[2,96],69:[2,96],70:[2,96],71:[2,96],74:[2,96],79:[2,96],80:[2,96],81:[2,96],82:[2,96],83:[2,96],85:[2,96],88:[2,96],91:[2,96],93:[2,96],94:[2,96],96:[2,96]},{5:[2,64],15:[2,64],17:[2,64],18:[2,64],20:[1,79],21:[2,64],24:[2,64],28:[2,64],30:[2,64],33:[2,64],39:[2,64],40:[2,64],41:[2,64],42:[2,64],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],51:[2,64],52:[2,64],53:[2,64],54:[2,64],55:[2,64],66:[2,64],67:[2,64],68:[2,64],69:[2,64],70:[2,64],71:[2,64],74:[2,64],79:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],85:[2,64],88:[2,64],91:[2,64],93:[2,64],94:[2,64],96:[2,64],97:80,98:[1,81]},{5:[2,45],14:85,15:[2,45],17:[2,45],18:[2,45],20:[1,19],21:[2,45],24:[1,17],25:84,27:24,28:[1,30],30:[2,45],31:25,33:[2,45],34:37,35:27,36:26,37:20,39:[2,45],40:[2,45],41:[2,45],42:[2,45],43:[1,23],44:154,45:[1,22],46:[1,47],47:[1,48],48:[2,45],51:[2,45],52:[2,45],53:[2,45],54:[1,39],55:[2,45],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,45],69:[1,41],70:[1,42],71:[2,45],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,45],83:[1,54],85:[2,45],88:[2,45],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,46],14:85,15:[2,46],17:[2,46],18:[2,46],20:[1,19],21:[2,46],24:[1,17],25:84,27:24,28:[1,30],30:[2,46],31:25,33:[2,46],34:37,35:27,36:26,37:20,39:[2,46],40:[2,46],41:[2,46],42:[2,46],43:[1,23],44:155,45:[1,22],46:[1,47],47:[1,48],48:[2,46],51:[2,46],52:[2,46],53:[2,46],54:[1,39],55:[2,46],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,46],69:[1,41],70:[1,42],71:[2,46],72:43,73:44,74:[1,45],75:46,76:21,
77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,46],83:[1,54],85:[2,46],88:[2,46],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:156,14:85,20:[1,19],22:157,24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,160],25:159,26:158},{5:[2,48],15:[2,48],17:[2,48],18:[2,48],20:[2,48],21:[2,48],24:[2,48],28:[1,106],30:[2,48],33:[2,48],39:[2,48],40:[2,48],41:[2,48],42:[2,48],43:[2,48],45:[2,48],46:[2,48],47:[2,48],48:[2,48],50:104,51:[1,99],52:[1,100],53:[1,101],54:[2,48],55:[2,48],66:[2,48],67:[2,48],68:[2,48],69:[2,48],70:[2,48],71:[1,105],74:[2,48],79:[2,48],80:[2,48],81:[2,48],82:[2,48],83:[2,48],85:[2,48],88:[2,48],91:[2,48],93:[2,48],94:[2,48],96:[2,48]},{5:[2,55],14:85,15:[2,55],17:[2,55],18:[2,55],20:[1,19],21:[2,55],24:[1,17],25:84,27:24,28:[1,30],30:[2,55],31:25,33:[2,55],34:37,35:27,36:26,37:161,39:[2,55],40:[2,55],41:[2,55],42:[2,55],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,55],51:[2,55],52:[2,55],53:[2,55],54:[1,39],55:[2,55],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,55],69:[1,41],70:[1,42],71:[2,55],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,55],83:[1,54],85:[2,55],88:[2,55],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,56],14:85,15:[2,56],17:[2,56],18:[2,56],20:[1,19],21:[2,56],24:[1,17],25:84,27:24,28:[1,30],30:[2,56],31:25,33:[2,56],34:37,35:27,36:26,37:162,39:[2,56],40:[2,56],41:[2,56],42:[2,56],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,56],51:[2,56],52:[2,56],53:[2,56],54:[1,39],55:[2,56],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,56],69:[1,41],70:[1,42],71:[2,56],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,56],83:[1,54],85:[2,56],88:[2,56],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,54],14:85,15:[2,54],17:[2,54],18:[2,54],20:[1,19],21:[2,54],24:[1,17],25:84,27:24,28:[1,30],30:[2,54],31:25,33:[2,54],34:37,35:27,36:26,37:164,39:[2,54],40:[2,54],41:[2,54],42:[2,54],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,54],49:[1,163],51:[2,54],52:[2,54],53:[2,54],54:[1,39],55:[2,54],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,54],69:[1,41],70:[1,42],71:[2,54],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,54],83:[1,54],85:[2,54],88:[2,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:165,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,167]},{5:[2,89],15:[2,89],17:[2,89],18:[2,89],20:[2,89],21:[2,89],24:[2,89],28:[2,89],30:[2,89],33:[2,89],39:[2,89],40:[2,89],41:[2,89],42:[2,89],43:[2,89],45:[2,89],46:[2,89],47:[2,89],48:[2,89],51:[2,89],52:[2,89],53:[2,89],54:[2,89],55:[2,89],66:[2,89],67:[2,89],68:[2,89],69:[2,89],70:[2,89],71:[2,89],74:[2,89],79:[2,89],80:[2,89],81:[2,89],82:[2,89],83:[2,89],85:[2,89],88:[2,89],91:[2,89],93:[2,89],94:[2,89],96:[2,89]},{5:[2,90],15:[2,90],17:[2,90],18:[2,90],20:[2,90],21:[2,90],24:[2,90],28:[2,90],30:[2,90],33:[2,90],39:[2,90],40:[2,90],41:[2,90],42:[2,90],43:[2,90],45:[2,90],46:[2,90],47:[2,90],48:[2,90],51:[2,90],52:[2,90],53:[2,90],54:[2,90],55:[2,90],66:[2,90],67:[2,90],68:[2,90],69:[2,90],70:[2,90],71:[2,90],74:[2,90],79:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],85:[2,90],88:[2,90],91:[2,90],93:[2,90],94:[2,90],96:[2,90]},{4:168,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,58],15:[2,58],17:[2,58],18:[2,58],20:[2,58],21:[2,58],24:[2,58],28:[2,58],30:[2,58],33:[2,58],39:[2,58],40:[2,58],41:[2,58],42:[2,58],43:[2,58],45:[2,58],46:[2,58],47:[2,58],48:[2,58],51:[2,58],52:[2,58],53:[2,58],54:[2,58],55:[2,58],66:[2,58],67:[2,58],68:[2,58],69:[2,58],70:[2,58],71:[2,58],74:[2,58],79:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],85:[2,58],88:[2,58],89:[2,58],91:[2,58],93:[2,58],94:[2,58],96:[2,58]},{5:[2,59],15:[2,59],17:[2,59],18:[2,59],20:[2,59],21:[2,59],24:[2,59],28:[2,59],30:[2,59],33:[2,59],39:[2,59],40:[2,59],41:[2,59],42:[2,59],43:[2,59],45:[2,59],46:[2,59],47:[2,59],48:[2,59],51:[2,59],52:[2,59],53:[2,59],54:[2,59],55:[2,59],66:[2,59],67:[2,59],68:[2,59],69:[2,59],70:[2,59],71:[2,59],74:[2,59],79:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],85:[2,59],88:[2,59],89:[2,59],91:[2,59],93:[2,59],94:[2,59],96:[2,59]},{54:[1,169]},{5:[2,91],15:[2,91],17:[2,91],18:[2,91],20:[2,91],21:[2,91],24:[2,91],28:[1,98],30:[2,91],33:[2,91],39:[2,91],40:[2,91],41:[2,91],42:[2,91],43:[2,91],45:[2,91],46:[2,91],47:[2,91],48:[2,91],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,91],55:[2,91],66:[2,91],67:[2,91],68:[2,91],69:[2,91],70:[2,91],71:[1,97],74:[2,91],79:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],85:[2,91],88:[2,91],91:[2,91],93:[2,91],94:[2,91],96:[2,91]},{5:[2,92],15:[2,92],17:[2,92],18:[2,92],20:[2,92],21:[2,92],24:[2,92],28:[1,98],30:[2,92],33:[2,92],39:[2,92],40:[2,92],41:[2,92],42:[2,92],43:[2,92],45:[2,92],46:[2,92],47:[2,92],48:[2,92],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,92],55:[2,92],66:[2,92],67:[2,92],68:[2,92],69:[2,92],70:[2,92],71:[1,97],74:[2,92],79:[2,92],80:[2,92],81:[2,92],82:[2,92],83:[2,92],85:[2,92],88:[2,92],91:[2,92],93:[2,92],94:[2,92],96:[2,92]},{5:[2,76],15:[2,76],17:[2,76],18:[2,76],20:[2,76],21:[2,76],24:[2,76],28:[2,76],30:[2,76],33:[2,76],39:[2,76],40:[2,76],41:[2,76],42:[2,76],43:[2,76],45:[2,76],46:[2,76],47:[2,76],48:[2,76],51:[2,76],52:[2,76],53:[2,76],54:[2,76],55:[2,76],66:[2,76],67:[2,76],68:[2,76],69:[2,76],70:[2,76],71:[2,76],74:[2,76],79:[2,76],80:[2,76],81:[2,76],82:[2,76],83:[2,76],85:[2,76],88:[2,76],91:[2,76],93:[2,76],94:[2,76],96:[2,76]},{5:[2,83],15:[2,83],17:[2,83],18:[2,83],20:[2,83],21:[2,83],24:[2,83],28:[2,83],30:[2,83],33:[2,83],39:[2,83],40:[2,83],41:[2,83],42:[2,83],43:[2,83],45:[2,83],46:[2,83],47:[2,83],48:[2,83],51:[2,83],52:[2,83],53:[2,83],54:[2,83],55:[2,83],66:[2,83],67:[2,83],68:[2,83],69:[2,83],70:[2,83],71:[2,83],74:[2,83],79:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],85:[2,83],88:[2,83],91:[2,83],93:[2,83],94:[2,83],96:[2,83]},{4:170,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,173],30:[1,171],32:172,33:[1,174]},{17:[2,31],30:[2,31],33:[2,31]},{55:[1,175]},{68:[1,176]},{4:178,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],55:[1,177],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:179,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:180,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,86],14:85,15:[2,86],17:[2,86],18:[2,86],20:[1,94],21:[2,86],24:[1,17],28:[2,86],30:[2,86],33:[2,86],34:37,35:90,39:[2,86],40:[2,86],41:[2,86],42:[2,86],43:[2,86],45:[2,86],46:[1,91],47:[1,92],48:[1,93],51:[2,86],52:[2,86],53:[2,86],54:[1,39],55:[2,86],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,86],69:[1,41],70:[1,42],71:[2,86],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,86],83:[1,54],85:[2,86],88:[2,86],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,100],15:[2,100],17:[2,100],18:[2,100],20:[2,100],21:[2,100],24:[2,100],28:[1,98],30:[2,100],33:[2,100],39:[2,100],40:[2,100],41:[2,100],42:[2,100],43:[2,100],45:[2,100],46:[2,100],47:[2,100],48:[2,100],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,100],55:[2,100],66:[2,100],67:[2,100],68:[2,100],69:[2,100],70:[2,100],71:[1,97],74:[2,100],79:[2,100],80:[2,100],81:[2,100],82:[2,100],83:[2,100],85:[2,100],88:[2,100],91:[2,100],93:[2,100],94:[2,100],96:[2,100]},{5:[2,102],15:[2,102],17:[2,102],18:[2,102],20:[2,102],21:[2,102],24:[2,102],28:[1,98],30:[2,102],33:[2,102],39:[2,102],40:[2,102],41:[2,102],42:[2,102],43:[2,102],45:[2,102],46:[2,102],47:[2,102],48:[2,102],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,102],55:[2,102],66:[2,102],67:[2,102],68:[2,102],69:[2,102],70:[2,102],71:[1,97],74:[2,102],79:[2,102],80:[2,102],81:[2,102],82:[2,102],83:[2,102],85:[2,102],88:[2,102],91:[2,102],93:[2,102],94:[2,102],96:[2,102]},{20:[1,181],98:[1,153]},{4:182,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,122],14:85,15:[2,122],17:[2,122],18:[2,122],20:[1,94],21:[2,122],24:[1,17],28:[2,122],30:[2,122],33:[2,122],34:37,35:90,39:[2,122],40:[2,122],41:[2,122],42:[2,122],43:[2,122],45:[2,122],46:[1,91],47:[1,92],48:[1,93],51:[2,122],52:[2,122],53:[2,122],54:[1,39],55:[2,122],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,122],69:[1,41],70:[1,42],71:[2,122],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,122],83:[1,54],85:[2,122],88:[2,122],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,183]},{14:85,20:[1,185],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:184,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,186],98:[1,153]},{4:187,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,136],14:85,15:[2,136],17:[2,136],18:[2,136],20:[1,94],21:[2,136],24:[1,17],28:[2,136],30:[2,136],33:[2,136],34:37,35:90,39:[2,136],40:[2,136],41:[2,136],42:[2,136],43:[2,136],45:[2,136],46:[1,91],47:[1,92],48:[1,93],51:[2,136],52:[2,136],53:[2,136],54:[1,39],55:[2,136],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,136],69:[1,41],70:[1,42],71:[2,136],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,136],83:[1,54],85:[2,136],88:[2,136],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,188],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:189,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[1,190],98:[1,153]},{4:191,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,130],14:85,15:[2,130],17:[2,130],18:[2,130],20:[1,94],21:[2,130],24:[1,17],28:[2,130],30:[2,130],33:[2,130],34:37,35:90,39:[2,130],40:[2,130],41:[2,130],42:[2,130],43:[2,130],45:[2,130],46:[1,91],47:[1,92],48:[1,93],51:[2,130],52:[2,130],53:[2,130],54:[1,39],55:[2,130],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,130],69:[1,41],70:[1,42],71:[2,130],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,130],83:[1,54],85:[2,130],88:[2,130],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:85,20:[1,192],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:193,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,194]},{50:195,51:[1,99],52:[1,100],53:[1,101]},{5:[2,108],15:[2,108],17:[2,108],18:[2,108],20:[2,108],21:[2,108],24:[2,108],28:[2,108],30:[2,108],33:[2,108],39:[2,108],40:[2,108],41:[2,108],42:[2,108],43:[2,108],45:[2,108],46:[2,108],47:[2,108],48:[2,108],51:[2,108],52:[2,108],53:[2,108],54:[2,108],55:[2,108],66:[2,108],67:[2,108],68:[2,108],69:[2,108],70:[2,108],71:[2,108],74:[2,108],79:[2,108],80:[2,108],81:[2,108],82:[2,108],83:[2,108],85:[2,108],88:[2,108],91:[2,108],93:[2,108],94:[2,108],96:[2,108]},{20:[2,61],24:[2,61],28:[2,61],43:[2,61],45:[2,61],46:[2,61],47:[2,61],51:[2,61],52:[2,61],53:[2,61],54:[2,61],66:[2,61],67:[2,61],69:[2,61],70:[2,61],74:[2,61],79:[2,61],80:[2,61],81:[2,61],83:[2,61],89:[2,61],91:[2,61],93:[2,61],94:[2,61],96:[2,61],98:[2,61]},{20:[2,62],24:[2,62],28:[2,62],43:[2,62],45:[2,62],46:[2,62],47:[2,62],51:[2,62],52:[2,62],53:[2,62],54:[2,62],66:[2,62],67:[2,62],69:[2,62],70:[2,62],74:[2,62],79:[2,62],80:[2,62],81:[2,62],83:[2,62],89:[2,62],91:[2,62],93:[2,62],94:[2,62],96:[2,62],98:[2,62]},{54:[1,196]},{85:[1,197]},{5:[2,110],15:[2,110],17:[2,110],18:[2,110],20:[2,110],21:[2,110],24:[2,110],28:[2,110],30:[2,110],33:[2,110],39:[2,110],40:[2,110],41:[2,110],42:[2,110],43:[2,110],45:[2,110],46:[2,110],47:[2,110],48:[2,110],51:[2,110],52:[2,110],53:[2,110],54:[2,110],55:[2,110],66:[2,110],67:[2,110],68:[2,110],69:[2,110],70:[2,110],71:[2,110],74:[2,110],79:[2,110],80:[2,110],81:[2,110],82:[2,110],83:[2,110],85:[2,110],88:[2,110],91:[2,110],93:[2,110],94:[2,110],96:[2,110]},{17:[1,198],85:[2,112]},{17:[2,114],85:[2,114]},{17:[2,116],85:[2,116],88:[1,199]},{15:[1,201],23:200,39:[1,66],40:[1,67],41:[1,68],42:[1,69]},{20:[2,127],24:[2,127],28:[2,127],43:[2,127],45:[2,127],46:[2,127],47:[2,127],51:[2,127],54:[2,127],66:[2,127],67:[2,127],69:[2,127],70:[2,127],74:[2,127],79:[2,127],80:[2,127],81:[2,127],83:[2,127],89:[2,127],91:[2,127],93:[2,127],94:[2,127],96:[2,127],98:[2,127]},{5:[1,202]},{5:[2,18]},{5:[2,15]},{5:[2,64],20:[1,79],23:203,24:[2,64],28:[2,64],39:[1,66],40:[1,67],41:[1,68],42:[1,69],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],51:[2,64],52:[2,64],53:[2,64],54:[2,64],66:[2,64],67:[2,64],69:[2,64],70:[2,64],71:[2,64],74:[2,64],79:[2,64],80:[2,64],81:[2,64],83:[2,64],91:[2,64],93:[2,64],94:[2,64],96:[2,64],97:80,98:[1,81]},{5:[2,40],17:[2,40],23:204,39:[1,66],40:[1,67],41:[1,68],42:[1,69],85:[2,40],88:[2,40]},{1:[2,10]},{5:[2,14]},{17:[1,206],21:[1,205]},{17:[1,208],21:[1,207]},{4:209,14:85,20:[1,19],22:210,24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,145],98:[2,145]},{5:[2,43],14:85,15:[2,43],17:[2,43],18:[2,43],20:[1,94],21:[2,43],24:[1,17],28:[2,43],30:[2,43],33:[2,43],34:37,35:90,39:[2,43],40:[2,43],41:[2,43],42:[2,43],43:[2,43],45:[2,43],46:[1,91],47:[1,92],48:[1,93],51:[2,43],52:[2,43],53:[2,43],54:[1,39],55:[2,43],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,43],69:[1,41],70:[1,42],71:[2,43],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,43],83:[1,54],85:[2,43],88:[2,43],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,44],14:85,15:[2,44],17:[2,44],18:[2,44],20:[1,94],21:[2,44],24:[1,17],28:[2,44],30:[2,44],33:[2,44],34:37,35:90,39:[2,44],40:[2,44],41:[2,44],42:[2,44],43:[2,44],45:[2,44],46:[1,91],47:[1,92],48:[1,93],51:[2,44],52:[2,44],53:[2,44],54:[1,39],55:[2,44],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,44],69:[1,41],70:[1,42],71:[2,44],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,44],83:[1,54],85:[2,44],88:[2,44],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,208],21:[1,211]},{17:[1,206],21:[1,212]},{5:[2,21],17:[1,213]},{5:[2,22],17:[2,22]},{4:214,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,49],15:[2,49],17:[2,49],18:[2,49],20:[2,49],21:[2,49],24:[2,49],28:[1,98],30:[2,49],33:[2,49],39:[2,49],40:[2,49],41:[2,49],42:[2,49],43:[2,49],45:[2,49],46:[2,49],47:[2,49],48:[2,49],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,49],55:[2,49],66:[2,49],67:[2,49],68:[2,49],69:[2,49],70:[2,49],71:[1,97],74:[2,49],79:[2,49],80:[2,49],81:[2,49],82:[2,49],83:[2,49],85:[2,49],88:[2,49],91:[2,49],93:[2,49],94:[2,49],96:[2,49]},{5:[2,50],15:[2,50],17:[2,50],18:[2,50],20:[2,50],21:[2,50],24:[2,50],28:[1,98],30:[2,50],33:[2,50],39:[2,50],40:[2,50],41:[2,50],42:[2,50],43:[2,50],45:[2,50],46:[2,50],47:[2,50],48:[2,50],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,50],55:[2,50],66:[2,50],67:[2,50],68:[2,50],69:[2,50],70:[2,50],71:[1,97],74:[2,50],79:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],85:[2,50],88:[2,50],91:[2,50],93:[2,50],94:[2,50],96:[2,50]},{5:[2,52],14:85,15:[2,52],17:[2,52],18:[2,52],20:[1,19],21:[2,52],24:[1,17],25:84,27:24,28:[1,30],30:[2,52],31:25,33:[2,52],34:37,35:27,36:26,37:215,39:[2,52],40:[2,52],41:[2,52],42:[2,52],43:[1,23],45:[1,22],46:[1,47],47:[1,48],48:[2,52],51:[2,52],52:[2,52],53:[2,52],54:[1,39],55:[2,52],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,52],69:[1,41],70:[1,42],71:[2,52],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,52],83:[1,54],85:[2,52],88:[2,52],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,53],15:[2,53],17:[2,53],18:[2,53],20:[2,53],21:[2,53],24:[2,53],28:[1,98],30:[2,53],33:[2,53],39:[2,53],40:[2,53],41:[2,53],42:[2,53],43:[2,53],45:[2,53],46:[2,53],47:[2,53],48:[2,53],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,53],55:[2,53],66:[2,53],67:[2,53],68:[2,53],69:[2,53],70:[2,53],71:[1,97],74:[2,53],79:[2,53],80:[2,53],81:[2,53],82:[2,53],83:[2,53],85:[2,53],88:[2,53],91:[2,53],93:[2,53],94:[2,53],96:[2,53]},{21:[1,167]},{4:216,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,73],15:[2,73],17:[2,73],18:[2,73],20:[2,73],21:[2,73],24:[2,73],28:[2,73],30:[2,73],33:[2,73],39:[2,73],40:[2,73],41:[2,73],42:[2,73],43:[2,73],45:[2,73],46:[2,73],47:[2,73],48:[2,73],51:[2,73],52:[2,73],53:[2,73],54:[2,73],55:[2,73],66:[2,73],67:[2,73],68:[2,73],69:[2,73],70:[2,73],71:[2,73],74:[2,73],79:[2,73],80:[2,73],81:[2,73],82:[2,73],83:[2,73],85:[2,73],88:[2,73],91:[2,73],93:[2,73],94:[2,73],96:[2,73]},{30:[1,217]},{4:218,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{30:[1,219]},{5:[2,25],15:[2,25],17:[2,25],18:[2,25],20:[2,25],21:[2,25],24:[2,25],28:[2,25],30:[2,25],33:[2,25],39:[2,25],40:[2,25],41:[2,25],42:[2,25],43:[2,25],45:[2,25],46:[2,25],47:[2,25],48:[2,25],51:[2,25],52:[2,25],53:[2,25],54:[2,25],55:[2,25],66:[2,25],67:[2,25],68:[2,25],69:[2,25],70:[2,25],71:[2,25],74:[2,25],79:[2,25],80:[2,25],81:[2,25],82:[2,25],83:[2,25],85:[2,25],88:[2,25],91:[2,25],93:[2,25],94:[2,25],96:[2,25]},{4:108,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],29:220,31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:221,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,33:[1,222],34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,223],20:[2,27],24:[2,27],28:[2,27],43:[2,27],45:[2,27],46:[2,27],47:[2,27],54:[2,27],66:[2,27],67:[2,27],69:[2,27],70:[2,27],74:[2,27],79:[2,27],80:[2,27],81:[2,27],83:[2,27],89:[2,27],91:[2,27],93:[2,27],94:[2,27],96:[2,27]},{5:[2,74],15:[2,74],17:[2,74],18:[2,74],20:[2,74],21:[2,74],24:[2,74],28:[2,74],30:[2,74],33:[2,74],39:[2,74],40:[2,74],41:[2,74],42:[2,74],43:[2,74],45:[2,74],46:[2,74],47:[2,74],48:[2,74],51:[2,74],52:[2,74],53:[2,74],54:[2,74],55:[2,74],66:[2,74],67:[2,74],68:[2,74],69:[2,74],70:[2,74],71:[2,74],74:[2,74],79:[2,74],80:[2,74],81:[2,74],82:[2,74],83:[2,74],85:[2,74],88:[2,74],91:[2,74],93:[2,74],94:[2,74],96:[2,74]},{5:[2,75],15:[2,75],17:[2,75],18:[2,75],20:[2,75],21:[2,75],24:[2,75],28:[2,75],30:[2,75],33:[2,75],39:[2,75],40:[2,75],41:[2,75],42:[2,75],43:[2,75],45:[2,75],46:[2,75],47:[2,75],48:[2,75],51:[2,75],52:[2,75],53:[2,75],54:[2,75],55:[2,75],66:[2,75],67:[2,75],68:[2,75],69:[2,75],70:[2,75],71:[2,75],74:[2,75],79:[2,75],80:[2,75],81:[2,75],82:[2,75],83:[2,75],85:[2,75],88:[2,75],91:[2,75],93:[2,75],94:[2,75],96:[2,75]},{54:[1,224]},{55:[1,225]},{55:[1,226]},{30:[1,227]},{4:228,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,229]},{45:[1,230]},{5:[2,125],14:85,15:[2,125],17:[2,125],18:[2,125],20:[1,94],21:[2,125],24:[1,17],28:[2,125],30:[2,125],33:[2,125],34:37,35:90,39:[2,125],40:[2,125],41:[2,125],42:[2,125],43:[2,125],45:[2,125],46:[1,91],47:[1,92],48:[1,93],51:[2,125],52:[2,125],53:[2,125],54:[1,39],55:[2,125],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,125],69:[1,41],70:[1,42],71:[2,125],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,125],83:[1,54],85:[2,125],88:[2,125],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:231,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:232,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,233]},{4:234,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,138],14:85,15:[2,138],17:[2,138],18:[2,138],20:[1,94],21:[2,138],24:[1,17],28:[2,138],30:[2,138],33:[2,138],34:37,35:90,39:[2,138],40:[2,138],41:[2,138],42:[2,138],43:[2,138],45:[2,138],46:[1,91],47:[1,92],48:[1,93],51:[2,138],52:[2,138],53:[2,138],54:[1,39],55:[2,138],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,138],69:[1,41],70:[1,42],71:[2,138],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,138],83:[1,54],85:[2,138],88:[2,138],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:235,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,166],21:[1,236]},{4:237,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,132],14:85,15:[2,132],17:[2,132],18:[2,132],20:[1,94],21:[2,132],24:[1,17],28:[2,132],30:[2,132],33:[2,132],34:37,35:90,39:[2,132],40:[2,132],41:[2,132],42:[2,132],43:[2,132],45:[2,132],46:[1,91],47:[1,92],48:[1,93],51:[2,132],52:[2,132],53:[2,132],54:[1,39],55:[2,132],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,132],69:[1,41],70:[1,42],71:[2,132],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,132],83:[1,54],85:[2,132],88:[2,132],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{14:238,24:[1,17]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:239,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],82:[1,240],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:241,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,109],15:[2,109],17:[2,109],18:[2,109],20:[2,109],21:[2,109],24:[2,109],28:[2,109],30:[2,109],33:[2,109],39:[2,109],40:[2,109],41:[2,109],42:[2,109],43:[2,109],45:[2,109],46:[2,109],47:[2,109],48:[2,109],51:[2,109],52:[2,109],53:[2,109],54:[2,109],55:[2,109],66:[2,109],67:[2,109],68:[2,109],69:[2,109],70:[2,109],71:[2,109],74:[2,109],79:[2,109],80:[2,109],81:[2,109],82:[2,109],83:[2,109],85:[2,109],88:[2,109],91:[2,109],93:[2,109],94:[2,109],96:[2,109]},{4:242,13:140,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],87:243,89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:244,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:147,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:245,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{1:[2,12]},{4:246,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:247,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,139],15:[2,139],17:[2,139],18:[2,139],20:[2,139],21:[2,139],24:[2,139],28:[2,139],30:[2,139],33:[2,139],39:[2,139],40:[2,139],41:[2,139],42:[2,139],43:[2,139],45:[2,139],46:[2,139],47:[2,139],48:[2,139],51:[2,139],52:[2,139],53:[2,139],54:[2,139],55:[2,139],66:[2,139],67:[2,139],68:[2,139],69:[2,139],70:[2,139],71:[2,139],74:[2,139],79:[2,139],80:[2,139],81:[2,139],82:[2,139],83:[2,139],85:[2,139],88:[2,139],91:[2,139],93:[2,139],94:[2,139],96:[2,139]},{4:248,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],
92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,119],15:[2,119],17:[2,119],18:[2,119],20:[2,119],21:[2,119],24:[2,119],28:[2,119],30:[2,119],33:[2,119],39:[2,119],40:[2,119],41:[2,119],42:[2,119],43:[2,119],45:[2,119],46:[2,119],47:[2,119],48:[2,119],50:249,51:[1,99],52:[1,100],53:[1,101],54:[2,119],55:[2,119],66:[2,119],67:[2,119],68:[2,119],69:[2,119],70:[2,119],71:[2,119],74:[2,119],79:[2,119],80:[2,119],81:[2,119],82:[2,119],83:[2,119],85:[2,119],88:[2,119],91:[2,119],93:[2,119],94:[2,119],96:[2,119]},{4:250,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{17:[1,208],21:[1,251]},{17:[1,206],21:[1,252]},{5:[2,16]},{5:[2,17]},{20:[1,160],25:253},{17:[1,166]},{5:[2,51],15:[2,51],17:[2,51],18:[2,51],20:[2,51],21:[2,51],24:[2,51],28:[1,98],30:[2,51],33:[2,51],39:[2,51],40:[2,51],41:[2,51],42:[2,51],43:[2,51],45:[2,51],46:[2,51],47:[2,51],48:[2,51],50:96,51:[1,99],52:[1,100],53:[1,101],54:[2,51],55:[2,51],66:[2,51],67:[2,51],68:[2,51],69:[2,51],70:[2,51],71:[1,97],74:[2,51],79:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],85:[2,51],88:[2,51],91:[2,51],93:[2,51],94:[2,51],96:[2,51]},{21:[1,254]},{5:[2,34],15:[2,34],17:[2,34],18:[2,34],20:[2,34],21:[2,34],24:[2,34],28:[2,34],30:[2,34],33:[2,34],39:[2,34],40:[2,34],41:[2,34],42:[2,34],43:[2,34],45:[2,34],46:[2,34],47:[2,34],48:[2,34],51:[2,34],52:[2,34],53:[2,34],54:[2,34],55:[2,34],66:[2,34],67:[2,34],68:[2,34],69:[2,34],70:[2,34],71:[2,34],74:[2,34],79:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],85:[2,34],88:[2,34],91:[2,34],93:[2,34],94:[2,34],96:[2,34]},{55:[1,255]},{5:[2,33],15:[2,33],17:[2,33],18:[2,33],20:[2,33],21:[2,33],24:[2,33],28:[2,33],30:[2,33],33:[2,33],39:[2,33],40:[2,33],41:[2,33],42:[2,33],43:[2,33],45:[2,33],46:[2,33],47:[2,33],48:[2,33],51:[2,33],52:[2,33],53:[2,33],54:[2,33],55:[2,33],66:[2,33],67:[2,33],68:[2,33],69:[2,33],70:[2,33],71:[2,33],74:[2,33],79:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],85:[2,33],88:[2,33],91:[2,33],93:[2,33],94:[2,33],96:[2,33]},{17:[1,257],30:[1,256]},{17:[2,32],30:[2,32],33:[2,32]},{17:[1,258],20:[2,28],24:[2,28],28:[2,28],43:[2,28],45:[2,28],46:[2,28],47:[2,28],54:[2,28],66:[2,28],67:[2,28],69:[2,28],70:[2,28],74:[2,28],79:[2,28],80:[2,28],81:[2,28],83:[2,28],89:[2,28],91:[2,28],93:[2,28],94:[2,28],96:[2,28]},{20:[2,29],24:[2,29],28:[2,29],43:[2,29],45:[2,29],46:[2,29],47:[2,29],54:[2,29],66:[2,29],67:[2,29],69:[2,29],70:[2,29],74:[2,29],79:[2,29],80:[2,29],81:[2,29],83:[2,29],89:[2,29],91:[2,29],93:[2,29],94:[2,29],96:[2,29]},{4:260,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],55:[1,259],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{54:[1,261]},{5:[2,81],15:[2,81],17:[2,81],18:[2,81],20:[2,81],21:[2,81],24:[2,81],28:[2,81],30:[2,81],33:[2,81],39:[2,81],40:[2,81],41:[2,81],42:[2,81],43:[2,81],45:[2,81],46:[2,81],47:[2,81],48:[2,81],51:[2,81],52:[2,81],53:[2,81],54:[2,81],55:[2,81],66:[2,81],67:[2,81],68:[2,81],69:[2,81],70:[2,81],71:[2,81],74:[2,81],79:[2,81],80:[2,81],81:[2,81],82:[2,81],83:[2,81],85:[2,81],88:[2,81],91:[2,81],93:[2,81],94:[2,81],96:[2,81]},{54:[1,262]},{21:[1,263]},{5:[2,121],15:[2,121],17:[2,121],18:[2,121],20:[2,121],21:[2,121],24:[2,121],28:[2,121],30:[2,121],33:[2,121],39:[2,121],40:[2,121],41:[2,121],42:[2,121],43:[2,121],45:[2,121],46:[2,121],47:[2,121],48:[2,121],51:[2,121],52:[2,121],53:[2,121],54:[2,121],55:[2,121],66:[2,121],67:[2,121],68:[2,121],69:[2,121],70:[2,121],71:[2,121],74:[2,121],79:[2,121],80:[2,121],81:[2,121],82:[2,121],83:[2,121],85:[2,121],88:[2,121],91:[2,121],93:[2,121],94:[2,121],96:[2,121]},{76:264,89:[1,29]},{17:[1,166],21:[1,265]},{21:[1,266]},{5:[2,135],15:[2,135],17:[2,135],18:[2,135],20:[2,135],21:[2,135],24:[2,135],28:[2,135],30:[2,135],33:[2,135],39:[2,135],40:[2,135],41:[2,135],42:[2,135],43:[2,135],45:[2,135],46:[2,135],47:[2,135],48:[2,135],51:[2,135],52:[2,135],53:[2,135],54:[2,135],55:[2,135],66:[2,135],67:[2,135],68:[2,135],69:[2,135],70:[2,135],71:[2,135],74:[2,135],79:[2,135],80:[2,135],81:[2,135],82:[2,135],83:[2,135],85:[2,135],88:[2,135],91:[2,135],93:[2,135],94:[2,135],96:[2,135]},{17:[1,166],21:[1,267]},{21:[1,268]},{5:[2,129],15:[2,129],17:[2,129],18:[2,129],20:[2,129],21:[2,129],24:[2,129],28:[2,129],30:[2,129],33:[2,129],39:[2,129],40:[2,129],41:[2,129],42:[2,129],43:[2,129],45:[2,129],46:[2,129],47:[2,129],48:[2,129],51:[2,129],52:[2,129],53:[2,129],54:[2,129],55:[2,129],66:[2,129],67:[2,129],68:[2,129],69:[2,129],70:[2,129],71:[2,129],74:[2,129],79:[2,129],80:[2,129],81:[2,129],82:[2,129],83:[2,129],85:[2,129],88:[2,129],91:[2,129],93:[2,129],94:[2,129],96:[2,129]},{17:[1,166],21:[1,269]},{15:[1,270]},{14:85,20:[1,94],24:[1,17],34:37,35:90,46:[1,91],47:[1,92],48:[1,93],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[1,271],83:[1,54],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,107],15:[2,107],17:[2,107],18:[2,107],20:[2,107],21:[2,107],24:[2,107],28:[2,107],30:[2,107],33:[2,107],39:[2,107],40:[2,107],41:[2,107],42:[2,107],43:[2,107],45:[2,107],46:[2,107],47:[2,107],48:[2,107],51:[2,107],52:[2,107],53:[2,107],54:[2,107],55:[2,107],66:[2,107],67:[2,107],68:[2,107],69:[2,107],70:[2,107],71:[2,107],74:[2,107],79:[2,107],80:[2,107],81:[2,107],82:[2,107],83:[2,107],85:[2,107],88:[2,107],91:[2,107],93:[2,107],94:[2,107],96:[2,107]},{55:[1,272]},{15:[1,201],23:200,39:[1,66],40:[1,67],41:[1,68],42:[1,69],85:[2,111]},{17:[2,113],85:[2,113]},{17:[2,115],85:[2,115]},{17:[2,41],85:[2,41],88:[2,41]},{5:[2,19]},{5:[2,42],17:[2,42],85:[2,42],88:[2,42]},{17:[2,147],21:[2,147]},{5:[2,118],15:[2,118],17:[2,118],18:[2,118],20:[2,118],21:[2,118],24:[2,118],28:[2,118],30:[2,118],33:[2,118],39:[2,118],40:[2,118],41:[2,118],42:[2,118],43:[2,118],45:[2,118],46:[2,118],47:[2,118],48:[2,118],51:[2,118],52:[2,118],53:[2,118],54:[2,118],55:[2,118],66:[2,118],67:[2,118],68:[2,118],69:[2,118],70:[2,118],71:[2,118],74:[2,118],79:[2,118],80:[2,118],81:[2,118],82:[2,118],83:[2,118],85:[2,118],88:[2,118],91:[2,118],93:[2,118],94:[2,118],96:[2,118]},{17:[2,148],21:[2,148]},{5:[2,140],15:[2,140],17:[2,140],18:[2,140],20:[2,140],21:[2,140],24:[2,140],28:[2,140],30:[2,140],33:[2,140],39:[2,140],40:[2,140],41:[2,140],42:[2,140],43:[2,140],45:[2,140],46:[2,140],47:[2,140],48:[2,140],51:[2,140],52:[2,140],53:[2,140],54:[2,140],55:[2,140],66:[2,140],67:[2,140],68:[2,140],69:[2,140],70:[2,140],71:[2,140],74:[2,140],79:[2,140],80:[2,140],81:[2,140],82:[2,140],83:[2,140],85:[2,140],88:[2,140],91:[2,140],93:[2,140],94:[2,140],96:[2,140]},{5:[2,144],15:[2,144],17:[2,144],18:[2,144],20:[2,144],21:[2,144],24:[2,144],28:[2,144],30:[2,144],33:[2,144],39:[2,144],40:[2,144],41:[2,144],42:[2,144],43:[2,144],45:[2,144],46:[2,144],47:[2,144],48:[2,144],51:[2,144],52:[2,144],53:[2,144],54:[2,144],55:[2,144],66:[2,144],67:[2,144],68:[2,144],69:[2,144],70:[2,144],71:[2,144],74:[2,144],79:[2,144],80:[2,144],81:[2,144],82:[2,144],83:[2,144],85:[2,144],88:[2,144],91:[2,144],93:[2,144],94:[2,144],96:[2,144]},{5:[2,23],17:[2,23]},{5:[2,24],15:[2,24],17:[2,24],18:[2,24],20:[2,24],21:[2,24],24:[2,24],28:[2,24],30:[2,24],33:[2,24],39:[2,24],40:[2,24],41:[2,24],42:[2,24],43:[2,24],45:[2,24],46:[2,24],47:[2,24],48:[2,24],51:[2,24],52:[2,24],53:[2,24],54:[2,24],55:[2,24],66:[2,24],67:[2,24],68:[2,24],69:[2,24],70:[2,24],71:[2,24],74:[2,24],79:[2,24],80:[2,24],81:[2,24],82:[2,24],83:[2,24],85:[2,24],88:[2,24],91:[2,24],93:[2,24],94:[2,24],96:[2,24]},{5:[2,60],15:[2,60],17:[2,60],18:[2,60],20:[2,60],21:[2,60],24:[2,60],28:[2,60],30:[2,60],33:[2,60],39:[2,60],40:[2,60],41:[2,60],42:[2,60],43:[2,60],45:[2,60],46:[2,60],47:[2,60],48:[2,60],51:[2,60],52:[2,60],53:[2,60],54:[2,60],55:[2,60],66:[2,60],67:[2,60],68:[2,60],69:[2,60],70:[2,60],71:[2,60],74:[2,60],79:[2,60],80:[2,60],81:[2,60],82:[2,60],83:[2,60],85:[2,60],88:[2,60],89:[2,60],91:[2,60],93:[2,60],94:[2,60],96:[2,60]},{5:[2,26],15:[2,26],17:[2,26],18:[2,26],20:[2,26],21:[2,26],24:[2,26],28:[2,26],30:[2,26],33:[2,26],39:[2,26],40:[2,26],41:[2,26],42:[2,26],43:[2,26],45:[2,26],46:[2,26],47:[2,26],48:[2,26],51:[2,26],52:[2,26],53:[2,26],54:[2,26],55:[2,26],66:[2,26],67:[2,26],68:[2,26],69:[2,26],70:[2,26],71:[2,26],74:[2,26],79:[2,26],80:[2,26],81:[2,26],82:[2,26],83:[2,26],85:[2,26],88:[2,26],91:[2,26],93:[2,26],94:[2,26],96:[2,26]},{4:221,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{20:[2,30],24:[2,30],28:[2,30],43:[2,30],45:[2,30],46:[2,30],47:[2,30],54:[2,30],66:[2,30],67:[2,30],69:[2,30],70:[2,30],74:[2,30],79:[2,30],80:[2,30],81:[2,30],83:[2,30],89:[2,30],91:[2,30],93:[2,30],94:[2,30],96:[2,30]},{5:[2,77],15:[2,77],17:[2,77],18:[2,77],20:[2,77],21:[2,77],24:[2,77],28:[2,77],30:[2,77],33:[2,77],39:[2,77],40:[2,77],41:[2,77],42:[2,77],43:[2,77],45:[2,77],46:[2,77],47:[2,77],48:[2,77],51:[2,77],52:[2,77],53:[2,77],54:[2,77],55:[2,77],66:[2,77],67:[2,77],68:[2,77],69:[2,77],70:[2,77],71:[2,77],74:[2,77],79:[2,77],80:[2,77],81:[2,77],82:[2,77],83:[2,77],85:[2,77],88:[2,77],91:[2,77],93:[2,77],94:[2,77],96:[2,77]},{55:[1,273]},{4:275,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],55:[1,274],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:276,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,141],15:[2,141],17:[2,141],18:[2,141],20:[2,141],21:[2,141],24:[2,141],28:[2,141],30:[2,141],33:[2,141],39:[2,141],40:[2,141],41:[2,141],42:[2,141],43:[2,141],45:[2,141],46:[2,141],47:[2,141],48:[2,141],51:[2,141],52:[2,141],53:[2,141],54:[2,141],55:[2,141],66:[2,141],67:[2,141],68:[2,141],69:[2,141],70:[2,141],71:[2,141],74:[2,141],79:[2,141],80:[2,141],81:[2,141],82:[2,141],83:[2,141],85:[2,141],88:[2,141],91:[2,141],93:[2,141],94:[2,141],96:[2,141]},{55:[1,277]},{5:[2,126],15:[2,126],17:[2,126],18:[2,126],20:[2,126],21:[2,126],24:[2,126],28:[2,126],30:[2,126],33:[2,126],39:[2,126],40:[2,126],41:[2,126],42:[2,126],43:[2,126],45:[2,126],46:[2,126],47:[2,126],48:[2,126],51:[2,126],52:[2,126],53:[2,126],54:[2,126],55:[2,126],66:[2,126],67:[2,126],68:[2,126],69:[2,126],70:[2,126],71:[2,126],74:[2,126],79:[2,126],80:[2,126],81:[2,126],82:[2,126],83:[2,126],85:[2,126],88:[2,126],91:[2,126],93:[2,126],94:[2,126],96:[2,126]},{5:[2,142],15:[2,142],17:[2,142],18:[2,142],20:[2,142],21:[2,142],24:[2,142],28:[2,142],30:[2,142],33:[2,142],39:[2,142],40:[2,142],41:[2,142],42:[2,142],43:[2,142],45:[2,142],46:[2,142],47:[2,142],48:[2,142],51:[2,142],52:[2,142],53:[2,142],54:[2,142],55:[2,142],66:[2,142],67:[2,142],68:[2,142],69:[2,142],70:[2,142],71:[2,142],74:[2,142],79:[2,142],80:[2,142],81:[2,142],82:[2,142],83:[2,142],85:[2,142],88:[2,142],91:[2,142],93:[2,142],94:[2,142],96:[2,142]},{5:[2,137],15:[2,137],17:[2,137],18:[2,137],20:[2,137],21:[2,137],24:[2,137],28:[2,137],30:[2,137],33:[2,137],39:[2,137],40:[2,137],41:[2,137],42:[2,137],43:[2,137],45:[2,137],46:[2,137],47:[2,137],48:[2,137],51:[2,137],52:[2,137],53:[2,137],54:[2,137],55:[2,137],66:[2,137],67:[2,137],68:[2,137],69:[2,137],70:[2,137],71:[2,137],74:[2,137],79:[2,137],80:[2,137],81:[2,137],82:[2,137],83:[2,137],85:[2,137],88:[2,137],91:[2,137],93:[2,137],94:[2,137],96:[2,137]},{5:[2,143],15:[2,143],17:[2,143],18:[2,143],20:[2,143],21:[2,143],24:[2,143],28:[2,143],30:[2,143],33:[2,143],39:[2,143],40:[2,143],41:[2,143],42:[2,143],43:[2,143],45:[2,143],46:[2,143],47:[2,143],48:[2,143],51:[2,143],52:[2,143],53:[2,143],54:[2,143],55:[2,143],66:[2,143],67:[2,143],68:[2,143],69:[2,143],70:[2,143],71:[2,143],74:[2,143],79:[2,143],80:[2,143],81:[2,143],82:[2,143],83:[2,143],85:[2,143],88:[2,143],91:[2,143],93:[2,143],94:[2,143],96:[2,143]},{5:[2,131],15:[2,131],17:[2,131],18:[2,131],20:[2,131],21:[2,131],24:[2,131],28:[2,131],30:[2,131],33:[2,131],39:[2,131],40:[2,131],41:[2,131],42:[2,131],43:[2,131],45:[2,131],46:[2,131],47:[2,131],48:[2,131],51:[2,131],52:[2,131],53:[2,131],54:[2,131],55:[2,131],66:[2,131],67:[2,131],68:[2,131],69:[2,131],70:[2,131],71:[2,131],74:[2,131],79:[2,131],80:[2,131],81:[2,131],82:[2,131],83:[2,131],85:[2,131],88:[2,131],91:[2,131],93:[2,131],94:[2,131],96:[2,131]},{4:278,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,106],15:[2,106],17:[2,106],18:[2,106],20:[2,106],21:[2,106],24:[2,106],28:[2,106],30:[2,106],33:[2,106],39:[2,106],40:[2,106],41:[2,106],42:[2,106],43:[2,106],45:[2,106],46:[2,106],47:[2,106],48:[2,106],51:[2,106],52:[2,106],53:[2,106],54:[2,106],55:[2,106],66:[2,106],67:[2,106],68:[2,106],69:[2,106],70:[2,106],71:[2,106],74:[2,106],79:[2,106],80:[2,106],81:[2,106],82:[2,106],83:[2,106],85:[2,106],88:[2,106],91:[2,106],93:[2,106],94:[2,106],96:[2,106]},{20:[2,63],24:[2,63],28:[2,63],43:[2,63],45:[2,63],46:[2,63],47:[2,63],51:[2,63],52:[2,63],53:[2,63],54:[2,63],66:[2,63],67:[2,63],69:[2,63],70:[2,63],74:[2,63],79:[2,63],80:[2,63],81:[2,63],83:[2,63],89:[2,63],91:[2,63],93:[2,63],94:[2,63],96:[2,63],98:[2,63]},{5:[2,78],15:[2,78],17:[2,78],18:[2,78],20:[2,78],21:[2,78],24:[2,78],28:[2,78],30:[2,78],33:[2,78],39:[2,78],40:[2,78],41:[2,78],42:[2,78],43:[2,78],45:[2,78],46:[2,78],47:[2,78],48:[2,78],51:[2,78],52:[2,78],53:[2,78],54:[2,78],55:[2,78],66:[2,78],67:[2,78],68:[2,78],69:[2,78],70:[2,78],71:[2,78],74:[2,78],79:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],85:[2,78],88:[2,78],91:[2,78],93:[2,78],94:[2,78],96:[2,78]},{5:[2,79],15:[2,79],17:[2,79],18:[2,79],20:[2,79],21:[2,79],24:[2,79],28:[2,79],30:[2,79],33:[2,79],39:[2,79],40:[2,79],41:[2,79],42:[2,79],43:[2,79],45:[2,79],46:[2,79],47:[2,79],48:[2,79],51:[2,79],52:[2,79],53:[2,79],54:[2,79],55:[2,79],66:[2,79],67:[2,79],68:[2,79],69:[2,79],70:[2,79],71:[2,79],74:[2,79],79:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],85:[2,79],88:[2,79],91:[2,79],93:[2,79],94:[2,79],96:[2,79]},{55:[1,279]},{55:[1,280]},{14:85,20:[1,282],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:281,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{55:[1,283]},{5:[2,80],15:[2,80],17:[2,80],18:[2,80],20:[2,80],21:[2,80],24:[2,80],28:[2,80],30:[2,80],33:[2,80],39:[2,80],40:[2,80],41:[2,80],42:[2,80],43:[2,80],45:[2,80],46:[2,80],47:[2,80],48:[2,80],51:[2,80],52:[2,80],53:[2,80],54:[2,80],55:[2,80],66:[2,80],67:[2,80],68:[2,80],69:[2,80],70:[2,80],71:[2,80],74:[2,80],79:[2,80],80:[2,80],81:[2,80],82:[2,80],83:[2,80],85:[2,80],88:[2,80],91:[2,80],93:[2,80],94:[2,80],96:[2,80]},{5:[2,82],15:[2,82],17:[2,82],18:[2,82],20:[2,82],21:[2,82],24:[2,82],28:[2,82],30:[2,82],33:[2,82],39:[2,82],40:[2,82],41:[2,82],42:[2,82],43:[2,82],45:[2,82],46:[2,82],47:[2,82],48:[2,82],51:[2,82],52:[2,82],53:[2,82],54:[2,82],55:[2,82],66:[2,82],67:[2,82],68:[2,82],69:[2,82],70:[2,82],71:[2,82],74:[2,82],79:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],85:[2,82],88:[2,82],91:[2,82],93:[2,82],94:[2,82],96:[2,82]},{5:[2,123],14:85,15:[2,123],17:[2,123],18:[2,123],20:[1,94],21:[2,123],24:[1,17],28:[2,123],30:[2,123],33:[2,123],34:37,35:90,39:[2,123],40:[2,123],41:[2,123],42:[2,123],43:[2,123],45:[2,123],46:[1,91],47:[1,92],48:[1,93],51:[2,123],52:[2,123],53:[2,123],54:[1,39],55:[2,123],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,123],69:[1,41],70:[1,42],71:[2,123],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,123],83:[1,54],85:[2,123],88:[2,123],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{4:284,14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,38:14,43:[1,23],44:18,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{50:285,51:[1,99],52:[1,100],53:[1,101]},{17:[1,166],21:[1,286]},{14:85,20:[1,19],24:[1,17],25:84,27:24,28:[1,30],31:25,34:37,35:27,36:26,37:20,43:[1,23],44:287,45:[1,22],46:[1,47],47:[1,48],54:[1,39],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],69:[1,41],70:[1,42],72:43,73:44,74:[1,45],75:46,76:21,77:28,78:52,79:[1,59],80:[1,60],81:[1,53],83:[1,54],89:[1,29],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]},{5:[2,124],15:[2,124],17:[2,124],18:[2,124],20:[2,124],21:[2,124],24:[2,124],28:[2,124],30:[2,124],33:[2,124],39:[2,124],40:[2,124],41:[2,124],42:[2,124],43:[2,124],45:[2,124],46:[2,124],47:[2,124],48:[2,124],51:[2,124],52:[2,124],53:[2,124],54:[2,124],55:[2,124],66:[2,124],67:[2,124],68:[2,124],69:[2,124],70:[2,124],71:[2,124],74:[2,124],79:[2,124],80:[2,124],81:[2,124],82:[2,124],83:[2,124],85:[2,124],88:[2,124],91:[2,124],93:[2,124],94:[2,124],96:[2,124]},{5:[2,105],14:85,15:[2,105],17:[2,105],18:[2,105],20:[1,94],21:[2,105],24:[1,17],28:[2,105],30:[2,105],33:[2,105],34:37,35:90,39:[2,105],40:[2,105],41:[2,105],42:[2,105],43:[2,105],45:[2,105],46:[1,91],47:[1,92],48:[1,93],51:[2,105],52:[2,105],53:[2,105],54:[1,39],55:[2,105],60:31,61:32,62:33,63:34,64:35,65:36,66:[1,38],67:[1,40],68:[2,105],69:[1,41],70:[1,42],71:[2,105],72:43,73:44,74:[1,45],75:46,78:52,79:[1,59],80:[1,60],81:[1,53],82:[2,105],83:[1,54],85:[2,105],88:[2,105],90:49,91:[1,55],92:51,93:[1,57],94:[1,58],95:50,96:[1,56]}],defaultActions:{13:[2,13],59:[2,103],60:[2,104],61:[2,1],70:[2,2],71:[2,3],72:[2,4],73:[2,5],74:[2,6],75:[2,7],76:[2,8],77:[2,9],82:[2,11],83:[2,149],144:[2,18],145:[2,15],148:[2,10],149:[2,14],202:[2,12],211:[2,16],212:[2,17],246:[2,19]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],o=[],s=this.table,a="",c=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,y,v,b,x,_,w={};;){if(m=r[r.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==p&&"undefined"!=typeof p||(p=t()),g=s[m]&&s[m][p]),"undefined"==typeof g||!g.length||!g[0]){var E="";if(!u){_=[];for(v in s[m])this.terminals_[v]&&v>2&&_.push("'"+this.terminals_[v]+"'");E=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:_})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:r.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(g[1]),p=null,f?(p=f,f=null):(l=this.lexer.yyleng,a=this.lexer.yytext,c=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],w.$=i[i.length-b],w._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(w._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(w,a,l,c,this.yy,g[1],i,o),"undefined"!=typeof y)return y;b&&(r=r.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),r.push(this.productions_[g[1]][0]),i.push(w.$),o.push(w._$),x=s[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(n=this._input.match(this.rules[o[s]]),!n||t&&!(n[0].length>t[0].length)||(t=n,r=s,this.options.flex));s++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,r){switch(n){case 0:break;case 1:return 54;case 2:return 55;case 3:return"MATH_SHIFT";case 4:return t.yytext=this.matches[this.matches.length-1],51;case 5:return t.yytext=this.matches[this.matches.length-1],52;case 6:return t.yytext=this.matches[this.matches.length-1],57;case 7:return t.yytext=this.matches[this.matches.length-1],58;case 8:return"...";case 9:return 53;case 10:return t.yytext=Number(this.matches[2])+Number(this.matches[5])/Number(this.matches[6]),89;case 11:return 89;case 12:return 98;case 13:return 46;case 14:return 46;case 15:return 47;case 16:return 47;case 17:return t.yytext=this.matches[3],74;case 18:return t.yytext=this.matches[2],this.popState(),82;case 19:return t.yytext=this.matches[this.matches.length-1],94;case 20:return 96;case 21:return 93;case 22:return 69;case 23:return 70;case 24:return"\\";case 25:return 79;case 26:return 80;case 27:return 66;case 28:return 66;case 29:return 19;case 30:return 19;case 31:return 49;case 32:return this.begin("integral"),81;case 33:return 24;case 34:return 18;case 35:return 67;case 36:return 68;case 37:return 45;case 38:return 43;case 39:return 15;case 40:return 18;case 41:return 59;case 42:return 71;case 43:return 48;case 44:return 5;case 45:return 20;case 46:return 21;case 47:return 28;case 48:return 30;case 49:return 83;case 50:return 85;case 51:return 88;case 52:return 41;case 53:return 42;case 54:return 40;case 55:return 39;case 56:return 17;case 57:return 16;case 58:return 91;case 59:return t.yytext="\\sign",24;case 60:return t.yytext="\\gcd",24;case 61:return t.yytext="\\lcm",24;case 62:return t.yytext="\\stdevp",24;case 63:return t.yytext="\\stdevp",24;case 64:return t.yytext="\\stdev",24;case 65:return t.yytext="\\stdev",24;case 66:return t.yytext="\\var",24;case 67:return t.yytext="\\sign",24;case 68:return t.yytext="\\gcd",24;case 69:return t.yytext="\\lcm",24;case 70:return t.yytext="\\stdevp",24;case 71:return t.yytext="\\stdevp",24;case 72:return t.yytext="\\stdev",24;case 73:return t.yytext="\\stdev",24;case 74:return t.yytext="\\var",24;case 75:return/^(arc)?(sin|cos|tan|cot|sec|csc)h?$/.test(this.matches[3])?(t.yytext="\\"+this.matches[3],91):(t.yytext="\\"+this.matches[3]+this.matches[4],"IDENTIFIER_BASE");case 76:return 24;case 77:break;case 78:return"UNRECOGNIZED"}},e.rules=[/^(?:(\\space|\\:|\s|\\ )+)/,/^(?:\{)/,/^(?:\})/,/^(?:\$)/,/^(?:\^([0-9]))/,/^(?:\^([a-zA-Z]))/,/^(?:_([0-9]))/,/^(?:_([a-zA-Z]))/,/^(?:\.\.\.)/,/^(?:\^)/,/^(?:(([0-9]+)((?:\s|\\space|\\:|\\ )*)\\frac((?:\s|\\space|\\:|\\ )*)\{([0-9]+)\}\{([0-9]+)\}))/,/^(?:[0-9]+(\.[0-9]+|\.(?![.0-9]))?|(\.[0-9]+))/,/^(?:')/,/^(?:\*|(\\cdot))/,/^(?:(\\times))/,/^(?:\/)/,/^(?:(\\div))/,/^(?:(\\frac((?:\s|\\space|\\:|\\ )*)\{d\}\{d((((?!\\left)(\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))\}))/,/^(?:(d((((?!\\left)(\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))))/,/^(?:(\\log)((?:\s|\\space|\\:|\\ )*)*_([0-9]))/,/^(?:(\\ln))/,/^(?:(\\log))/,/^(?:(\\frac))/,/^(?:(\\sqrt))/,/^(?:(\\backslash))/,/^(?:(\\sum))/,/^(?:(\\prod))/,/^(?:(\\ans))/,/^(?:(\\operatorname{ans}))/,/^(?:(\\polygon))/,/^(?:(\\operatorname{polygon}))/,/^(?:(\\operatorname{of}|\\of))/,/^(?:(\\int))/,/^(?:(\\length))/,/^(?:(\\sim))/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:-)/,/^(?:\+)/,/^(?:=)/,/^(?:~)/,/^(?:[_])/,/^(?:!)/,/^(?:\\%)/,/^(?:$)/,/^(?:(\()|\\left\()/,/^(?:(\))|\\right\))/,/^(?:(\[)|\\left\[)/,/^(?:(\])|\\right\])/,/^(?:(\\\{)|\\left\\\{)/,/^(?:(\\\})|\\right\\\})/,/^(?::)/,/^(?:(\\ge|>=))/,/^(?:(\\le|<=))/,/^(?:(\\gt|>))/,/^(?:(\\lt|<))/,/^(?:,)/,/^(?:(###)(((?:\s|\\space|\\:|\\ )*)(?:(((?!\\left)(\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)|((\\operatorname\{([a-zA-Z]+)\})((_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)))((?:\s|\\space|\\:|\\ )*)(\\left\(|\()((?:\s|\\space|\\:|\\ )*)(((?!\\left)(\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)(((?:\s|\\space|\\:|\\ )*),((?:\s|\\space|\\:|\\ )*)(((?!\\left)(\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)((?:\s|\\space|\\:|\\ )*))*((?:\s|\\space|\\:|\\ )*)(\\right\)|\))((?:\s|\\space|\\:|\\ )*)=))/,/^(?:(\\(arc)?(sin|cos|tan|cot|sec|csc)h?))/,/^(?:(\\signum))/,/^(?:(\\(gcf|mcd)))/,/^(?:(\\mcm))/,/^(?:(\\stdDevP))/,/^(?:(\\stddevp))/,/^(?:(\\stdDev))/,/^(?:(\\stddev))/,/^(?:(\\variance))/,/^(?:(\\operatorname\{signum\}))/,/^(?:(\\operatorname\{(gcf|mcd)\}))/,/^(?:(\\operatorname\{mcm\}))/,/^(?:(\\operatorname\{stdDevP\}))/,/^(?:(\\operatorname\{stddevp\}))/,/^(?:(\\operatorname\{stdDev\}))/,/^(?:(\\operatorname\{stddev\}))/,/^(?:(\\operatorname\{variance\}))/,/^(?:((\\operatorname\{([a-zA-Z]+)\})((_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?)))/,/^(?:(((?!\\left)(\\[a-zA-Z]+|[a-zA-Z]))(_[a-zA-Z0-9]|_\{[a-zA-Z0-9]+\})?))/,/^(?:(###))/,/^(?:.)/],e.conditions={integral:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78],inclusive:!0},conditional:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78],inclusive:!0}},e}();return e.lexer=t,e});var define_enum_constant,enum_strings={},debuggable_enums=!0;if(debuggable_enums)define_enum_constant=function(e){this[e]=e};else{var next_enum=1e3;define_enum_constant=function(e){enum_strings[next_enum]=e,this[e]=next_enum++}}define_enum_constant("EXPRESSION"),define_enum_constant("FUNCTION_DEFINITION"),define_enum_constant("VARIABLE_DEFINITION"),define_enum_constant("ORDERED_PAIR_LIST"),define_enum_constant("DOUBLE_INEQUALITY"),define_enum_constant("COMPARATOR"),define_enum_constant("CHAINED_COMPARATOR"),define_enum_constant("EQUATION"),define_enum_constant("CONSTANT"),define_enum_constant("IDENTIFIER"),define_enum_constant("LIST"),define("math/enums",function(){}),define("math/parsenode/base",["require","pjs","math/functions","../enums"],function(e){var t=e("pjs"),n=e("math/functions");return e("../enums"),t(function(e,t,r){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._inputString="",this._exports=[]},e.exportPenalty=0;var i=0;e.tmpVar=function(){return"tmp"+i++},e.statementType=EXPRESSION,e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(e),n=t.getEvaluationInfo();return n?n[0].val:NaN},e.setInputString=function(e){this._inputString=e},e.getInputString=function(){return this._inputString},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},
e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){this._dummyDependencies.indexOf(e)===-1&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){var e=this._exports||[];return e.concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,n){for(var r=this.getLegalExports(e),i=0;i<r.length;i++){var o=r[i];if(n[o])return;n[o]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.getSliderInfo=function(){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.okForImplicitFunction=function(){return!1},e.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){if(!(t instanceof r))throw t;e=t}return e},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),r=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(i!==-1){var o=e[0];e[0]=e[i],e[i]=o}}return{args:e,source:r,fn:n.closureFunctionWithBuiltIn(e,r)}},e.getCompiledDerivative=function(){var e=this.getDependencies(),t=this.takeDerivative(e[0]||"x");return t.getCompiledFunction()}})}),define("lib/worker-i18n",["require","exports"],function(e,t){"use strict";function n(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=n}),define("math/parsenode/error",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("graphing/label",["require","exports","underscore","math/distance","math/tofraction"],function(e,t,n,r,i){"use strict";function o(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var n,o,s,a=i.default(e/Math.PI,24);if(p(t)&&r.approx(a.n/a.d*Math.PI,e,3))return n=0===a.n?"0":1===a.n?"π":a.n===-1?"-π":a.n.toString()+"π",o=1===a.d?"":"/"+a.d.toString(),s=n+o,{ariaString:c(s),string:s,value:a.n/a.d*Math.PI};if(p(t))return s=d(u(e.toFixed(f(t)))),{ariaString:c(s),string:s,value:parseFloat(s)};var l=h(e.toExponential(f(t/e))).split("e"),m=l[0]+"×10",g=l[1].replace("+","");return s=h(e.toExponential(f(t/e))).replace("+",""),{ariaString:c(s),string:s,mantissa:m,superscript:g,value:parseFloat(s)}}function s(e){return M["["+e+"]"]}function a(e){return e[0]+e.slice(1).split("").join(" ")}function c(e){return e.replace(k,a).replace(I,s).replace(/ +/gi," ").trim()}function l(e,t,n,r){var i=o(e,t),s=o(r(i.value),n);return[i,s]}function u(e){return e.indexOf(".")===-1?e:e.replace(T,"")}function h(e){var t=/\.?0+e/;return e.replace(t,"e")}function d(e){return"-0"===e?"0":e}function p(e){return e=Math.abs(e),1e-4<e&&e<1e7}function f(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function m(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var n=t.smallCutoff||.001,r=t.bigCutoff||1e6,i=t.digits||10;if(Math.abs(e)>r||Math.abs(e)<n){var o=h(e.toExponential(i-2)),s=o.match(/([\d\.\-]+)e\+?([\d\-]+)/);return s?{type:"scientific",mantissa:s[1],exponent:s[2]}:{type:"undefined"}}var a=u(e.toPrecision(i));return e!==Number(a)&&t.addEllipses&&(a+="..."),{type:"decimal",value:a}}function g(e,t){var n=m(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"<span class='dcg-cross'>×</span>10<sup>"+n.exponent+"</sup>";default:var r=n;return r}}function y(e,t){var n=m(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+" * 10^"+n.exponent;default:var r=n;return r}}function v(e,t){var n=m(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"\\times10^{"+n.exponent+"}";default:var r=n;return r}}function b(e,t){var n=m(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return c(n.value);case"scientific":return c(n.mantissa+"e"+n.exponent);default:var r=n;return r}}function x(e){var t={pi:"π",tau:"τ",theta:"θ",phi:"ϕ"};return t.hasOwnProperty(e)?t[e]:e}function _(e){var t=e.split("_"),n="";return t[0].length>1&&(n+="\\"),n+=t[0],t[1]&&(n+=1===t[1].length?"_"+t[1]:"_{"+t[1]+"}"),n}function w(e){if(!e)return"";var t=e.split("_").map(x).map(n.escape),r=t[0];return t[1]&&(r+="<sub>"+t[1]+"</sub>"),r}function E(e){return e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,"")}function S(e){return e.replace(/^(\\ | |\\space)+/,"").replace(/(\\ | |\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.value=o;var M={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[π]":" pi ","[τ]":" tau ","[θ]":" theta ","[ϕ]":" phi "},I=new RegExp(Object.keys(M).join("|"),"gi"),k=/\.\d+/g;t.point=l;var T=/\.?0+$/;t.numericLabel=m,t.truncatedHTMLLabel=g,t.truncatedPlainmathLabel=y,t.truncatedLatexLabel=v,t.truncatedAriaLabel=b,t.formatSymbol=x,t.identifierToLatex=_,t.identifierToHTML=w,t.latexToIdentifier=E,t.trimLatex=S}),define("math/types",["require","lib/worker-i18n"],function(e){function t(e){switch(e){case c:return"Any";case l:return"Number";case u:return"Bool";case h:return"Point";case d:return"ListOfAny";case p:return"ListOfNumber";case f:return"ListOfBool";case m:return"ListOfPoint";case g:return"ErrorType";default:throw new Error("Invalid type")}}function n(e){switch(e){case c:return a.t("an unknown object");case l:return a.t("a number");case u:return a.t("a true/false value");case h:return a.t("a point");case d:return a.t("a list of unknown objects");case p:return a.t("a list of numbers");case f:return a.t("a list of true/false values");case m:return a.t("a list of points");case g:return a.t("an error object");default:throw new Error("Invalid type")}}function r(e){switch(e){case d:return!0;case p:return!0;case f:return!0;case m:return!0;default:return!1}}function i(e){switch(e){case d:return c;case p:return l;case f:return u;case m:return h;default:return c}}function o(e){switch(e){case c:return d;case l:return p;case u:return f;case h:return m;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function s(e){switch(e){case c:return!0;case l:return!0;case u:return!0;case h:return!0;default:return!1}}var a=e("lib/worker-i18n"),c=0,l=1,u=2,h=3,d=4,p=5,f=6,m=7,g=8;return{Any:c,Number:l,Bool:u,Point:h,ListOfAny:d,ListOfNumber:p,ListOfBool:f,ListOfPoint:m,ErrorType:g,repr:t,prettyPrint:n,isList:r,elementType:i,listType:o,hasListType:s}}),define("math/errormsg",["require","lib/worker-i18n","math/parsenode/error","graphing/label","math/types"],function(e){var t=e("lib/worker-i18n"),n=e("math/parsenode/error"),r=e("graphing/label"),i=e("math/types");return{parseError:function(){return n(t.t("Sorry, I don't understand this."))},addTypeError:function(e){return n(t.t("Cannot add __symbol2__ and __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},subtractTypeError:function(e){return n(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return n(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return n(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return n(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return n(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return n(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return n(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return n(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return n(t.t("Cannot use __symbol1__ and __symbol2__ as the coordinates of __symbol3__.",{symbol1:e[0],symbol2:e[1],symbol3:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return n(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return n(t.t("Function '__fn__' cannot be applied to __arg__.",{fn:r.formatSymbol(e),arg:i[0]})).allowExport();case 2:return n(t.t("Function '__fn__' cannot be applied to __arg1__ and __arg2__.",{fn:r.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return n(t.t("Function '__fn__' cannot be applied to these arguments.",{fn:r.formatSymbol(e)})).allowExport()}},sumLowerBoundTypeError:function(e){return n(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return n(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumArgumentTypeError:function(e){return n(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return n(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return n(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productArgumentTypeError:function(e){return n(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return n(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return n(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralArgumentTypeError:function(e){return n(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return n(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return n(t.t("Cannot take derivative with respect to '__symbol1__' because it is __symbol2__.",{symbol1:r.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return n(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return n(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return n(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return n(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return n(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return n(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return n(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return n(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return n(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return n(t.t("Cannot make a polygon from two numbers."))},wrongArity:function(e,i,o){e=r.formatSymbol(e);var s,a;if(1===i)a=t.t("For example, try typing: __dependency__(x).",{dependency:e}),s=o>1?t.t("Function '__dependency__' requires only 1 argument. __supplement__",{dependency:e,supplement:a}):t.t("Function '__dependency__' requires an argument. __supplement__",{dependency:e,supplement:a});else{for(var c=[],l=0;l<i;l++)c[l]=l+1;var u=r.formatSymbol(e)+"("+c.join(", ")+")";a=t.t("For example, try typing: __recommendation__.",{recommendation:u}),s=t.t("Function '__dependency__' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:a})}return n(s)},wrongParametrizedReducerArity:function(e){return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return n(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return n(t.t("Function '__symbol__' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:r.formatSymbol(e)}))},missingRHS:function(e){return e=r.formatSymbol(e),n(t.t("What do you want '__symbol__' to equal?",{symbol:e}))},malformedPoint:function(){return n(t.t("Points are written like this: (1, 2)."))},badImplicitMultiply:function(e){return e=r.formatSymbol(e),n(t.t("Use parentheses around the argument of '__symbol__'.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return n(t.t("You need something on both sides of the '__symbol__' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return n(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return n(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return n(t.t("You need a numerator and denominator for your fraction."))},badTrigExponent:function(e){var r=e+"^2",i=e+"^-1";return n(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:r,form2:i}))},badLogExponent:function(e){var r=e+"^2";return n(t.t("Only __form__ is supported. Otherwise, use parens.",{form:r}))},blankExpression:function(){return n(t.t("You haven't written anything yet."))},functionNotDefined:function(e){return e=r.formatSymbol(e),n(t.t("Function '__dependency__' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=r.formatSymbol(e),n(t.t("You can't use '__dependency__' as a parameter of this function because '__dependency__' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=r.formatSymbol(e),n(void 0===i?t.t("You can't redefine '__symbol__' because it's already defined.",{symbol:e}):t.t("You can't redefine '__symbol__' because '__symbolRoot__' is already defined.",{symbol:e,symbolRoot:i}))},multiplyDefined:function(e){return e=r.formatSymbol(e),n(t.t("You've defined '__dependency__' in more than one place. Try picking a different variable, or deleting some of the definitions of '__dependency__'.",{dependency:e}))},shadowedIndex:function(e){return e=r.formatSymbol(e),n(t.t("You can't use '__symbol__' as an index because it's already defined.",{symbol:e}))},cycle:function(e){e=e.map(r.formatSymbol);var i=e.pop();return n(t.t("'__symbols__' and '__lastSymbol__' can't be defined in terms of each other.",{symbols:e.join("', '"),lastSymbol:i}))},selfReferentialFunction:function(e){return n(t.t("The definition of function '__symbol__' cannot depend on '__symbol__'.",{symbol:r.formatSymbol(e)}))},tooManyVariables:function(e){if(e=e.map(r.formatSymbol),0===e.length)return n(t.t("Too many variables, I don't know what to do with this."));var i=e.pop();return n(t.t("Too many variables. Try defining '__variables__'.",{variables:(e.length?e.join("', '")+"' or '":"")+i}))},addArgumentsToDefinition:function(e,i,o){e=e.map(r.formatSymbol),i=r.formatSymbol(i),o=o.map(r.formatSymbol);var s=i+"("+o.join(",")+","+e.join(",")+")",a=e.pop(),c={symbols:e.join("', '"),lastSymbol:a,newSignature:s};return n(e.length?t.t("Try including '__symbols__' and '__lastSymbol__' as arguments by defining the function as '__newSignature__'.",c):t.t("Try including '__lastSymbol__' as an argument by defining the function as '__newSignature__'.",c))},invalidLHS:function(e){return e=r.formatSymbol(e),n(t.t("Sorry, you can't graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return n(t.t("We can't plot θ as a function of r. Try plotting r(θ) instead."))},invalidInequalityVariables:function(){return n(t.t("We only plot inequalities of x and y, or r and θ."))},invalidImplicitVariables:function(){return n(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return n(t.t("Plotting single-variable implicit equations is disabled."))},complicatedImplicitInequality:function(){return n(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return n(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return n(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return n(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return n(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=r.formatSymbol(e),n(t.t("Try adding '__lhs__' to the beginning of this equation.",{lhs:e+"="}))):n(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=r.formatSymbol(e),n(t.t("Variable '__dependency__' can't be used as a function.",{dependency:e}))},emptyList:function(){return n(t.t("Empty lists are not allowed."))},invalidTableHeader:function(e){return n(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return n(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return n(t.t("First column may not be __most__ or __last__.",{most:"'y', 'r',",last:"'θ'"}))},invalidDependentFirstTableColumn:function(){return n(t.t("This column header can't be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return n(t.t("'__symbol__' may not be used as a regression parameter.",{symbol:r.formatSymbol(e)}))},optimizationError:function(){return n(t.t("We couldn't find any region where this model is defined."))},badListInReducer:function(e){return n(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:r.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return n(t.t("Both arguments of '__symbol__' must be lists. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return n(t.t("The first argument of '__symbol__' must be a list. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},variableRange:function(e){return n(t.t("Range cannot depend on free variable '__symbol__'.",{symbol:r.formatSymbol(e[0])})).allowExport()},nonArithmeticRange:function(e){return n(t.t("Ranges must be arithmetic sequences.")).allowExport()},missingIntegralBounds:function(){return n(t.t("Integrals must have upper and lower bounds."))},shadowedIntegrationVariable:function(e){return n(t.t("You can't use '__symbol__' as an integration variable because it's already defined.",{symbol:r.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return n(t.t("Integration bounds can't depend on integration variable '__symbol__'.",{symbol:r.formatSymbol(e)}))},percentMissingOf:function(){return n(t.t("'%' must be used with 'of'. Try '25% of 12'."))},badAnsContext:function(){return n(t.t("You can't use 'ans' in this context."))},ansUndefined:function(){return n(t.t("The previous expression didn't define any value for ans."))},variablesUnsupported:function(e){return n(t.t("This calculator does not support variables like '__variable__'.",{variable:r.formatSymbol(e)}))},functionUnsupported:function(e){return n(t.t("This calculator does not support the '__symbol__' function.",{symbol:r.formatSymbol(e)}))},constantUnsupported:function(e){return n(t.t("This calculator does not support the constant '__symbol__'.",{symbol:r.formatSymbol(e)}))},assignmentsUnsupported:function(){return n(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return n(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return n(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return n(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return n(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return n(t.t("This calculator does not support points."))},featureUnavailable:function(){return n(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return n(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return n(t.t("Only square matrices have an inverse."))},singularInverse:function(){return n(t.t("Singular matrices do not have an inverse."))},matrixAssignment:function(){return n(t.t("This calculator does not support this type of variable definition. Try using 'New Matrix'."))},matrixAddDimensions:function(){return n(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return n(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return n(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return n(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return n(t.t("Only square matrices can be raised to a power."))},matrixElementTypeError:function(e){return n(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return n(t.t("Cannot use '__symbol__' as a variable.",{symbol:r.formatSymbol(e)}))}}}),define("math/parsenode/expression",["require","pjs","./base","math/errormsg","math/types"],function(e){var t=e("pjs"),n=e("./base"),r=e("math/errormsg"),i=e("math/types");return t(n,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){this.mergeDependencies.apply(this,this.args)},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,e>1e4)throw r.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var r=this.args[n].getEvalStrings();e=e.concat(r.statements),t.push(r.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r={Add:t(n,{}),Subtract:t(n,{}),Multiply:t(n,{}),Divide:t(n,{}),Exponent:t(n,{}),Negative:t(n,{}),And:t(n,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(n,{})};return r.RawExponent=t(r.Exponent,{}),r}),define("math/parsenode/constant",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t){e.init=function(e){this.constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return this.constantValue},e.scalarExprString=function(){return this.constantValue>0?String(this.constantValue):"("+String(this.constantValue)+")"},e.getEvaluationInfo=function(){return[{val:this.constantValue}]},e.isNaN=function(){return"number"==typeof this.constantValue&&isNaN(this.constantValue)},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/identifier",["require","pjs","./expression","graphing/label"],function(e){var t=e("pjs"),n=e("./expression"),r=e("graphing/label");return t(n,function(e,t,n){e.init=function(e){t.init.call(this,[]),this._symbol=r.latexToIdentifier(e),this.setInputString(e),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol},e.okForImplicitFunction=function(){return!0}})}),define("math/parsenode/ans",["require","pjs","./identifier"],function(e){var t=e("pjs"),n=e("./identifier");return t(n,function(e,t,n){})}),define("math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){var t=e("pjs"),n=e("./freevariable");return t(n,function(){})}),define("math/parsenode/list",["require","pjs","./expression","math/errormsg","math/types"],function(e){var t=e("pjs"),n=e("./expression"),r=e("math/errormsg"),i=e("math/types");return t(n,function(e,t,n){function o(e){for(var t=1/0,n=0;n<e.length;n++)(e[n].isList||e[n].isBroadcast)&&(t=Math.min(t,e[n].length));return t}e.init=function(e){if(t.init.call(this,e),this.length=e.length,0===this.length)throw r.emptyList()},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var r=this.args[n].getEvalStrings();Array.prototype.push.apply(e,r.statements),t.push(r.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.constantValue})}]},n.eachArgs=function(e,t){var n=o(e);if(!isFinite(n))return void t(e);for(var r=0;r<n;r++){for(var s=[],a=0;a<e.length;a++)s.push(e[a].isList||i.isList(e[a].valueType)?e[a].elementAt(r):e[a]);t(s)}},n.mapArgs=function(e,t){var r=[];return n.eachArgs(e,function(e){r.push(t(e))}),r},n.wrap=function(e){return e.isList||i.isList(e.valueType)?e:n([e])}})}),define("math/parsenode/range",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t,n){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]}})}),define("math/parsenode/broadcast",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t,n){e.init=function(e,n){if(t.init.call(this,n),this._replacedSymbols=e,this._expression=n[0],this._lists=n.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var r=0;r<e.length;r++)this.removeDependency(e[r]);for(var i=1/0,o=0;o<this._lists.length;o++){if(!this._lists[o].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[o].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.evaluate=function(e){for(var t=this._expression.getCompiledFunction(this._replacedSymbols).fn,n=[],r=0;r<this.length;r++){for(var i=[],o=0;o<e.length;o++)i.push(e[o][r]);n.push(t.apply(void 0,i))}return n},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var n,r=[],i=[];for(n=0;n<this._lists.length;n++){var o=this._lists[n].getEvalStrings();Array.prototype.push.apply(e,o.statements);var s=this.tmpVar();i.push(s),r.push("var "+s+" = "+o.expression)}var a=this.tmpVar(),c=this.tmpVar();r.push("var "+a+" = []");var l=[];for(n=0;n<i.length;n++)l.push("var "+this._replacedSymbols[n]+" = "+i[n]+"["+c+"]");return r.push("for (var "+c+" = 0; "+c+" < "+this.length+"; "+c+"++) {\n  "+l.join(";\n  ")+";\n  "+a+".push("+t.expression+");\n}"),{statements:e.concat(r),expression:a}}})}),define("math/parsenode/listaccess",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),n=e.statements.concat(t.statements),r=this.tmpVar();n.push(r+" = "+t.expression);var i=this.tmpVar();return n.push(i+" = Math.floor("+e.expression+") - 1"),{statements:n,expression:"("+i+" >= 0 && "+i+" < "+r+".length ? "+r+"["+i+"] : NaN)"}}})}),define("math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t,n){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var r=this.args[n].getEvalStrings();e=e.concat(r.statements),t.push(r.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){var t=e("pjs"),n=e("./orderedpair");return t(n,function(e,t){e.init=function(e,n,r){t.init.call(this,e),this.moveStrategy=n,this.defaultDragMode=r},e.isMovablePoint=!0})}),define("math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){var t=e("pjs"),n=e("./scalarexpression");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),n=[];Array.prototype.push.apply(n,e.statements),Array.prototype.push.apply(n,t.statements);var r=t.expression+"["+e.expression+"-1]";return{statements:n,expression:r}}})}),define("math/parsenode/polygon",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t){e.init=function(e){t.init.call(this,e)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("math/comparators",["require","exports"],function(e,t){
"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},r=function(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}};t.table=n,t.get=r}),define("math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","math/comparators","math/functions"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r=e("./expressionTypes").Subtract,i=e("math/comparators").table,o=e("math/functions");return t(n,function(e,n,s){s.create=function(e,n){return n=n||e,t(s,function(t,r){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=n,t.scalarEvalExpression=function(e){return e.join(n)},t.evaluate=o.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){n.init.call(this,e),this._difference=r(i[this.operator].direction===-1?[e[1],e[0]]:[e[0],e[1]])}})}),define("math/parsenode/comparator",["require","math/parsenode/basecomparator"],function(e){var t=e("math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("math/parsenode/doubleinequality",["require","pjs","./base","math/comparators","./comparator"],function(e){var t=e("pjs"),n=e("./base"),r=e("math/comparators"),i=e("./comparator");return t(n,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var n=r.get(r.table[e[1]].inclusive&&r.table[e[3]].inclusive,r.table[e[1]].direction);this._indicator=i[n]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r=e("./dummyindex");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof r&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),n=this._index._symbol,r=this.tmpVar(),i=this.tmpVar(),o=this.args[1].getEvalStrings(),s=this.args[2].getEvalStrings(),a=this.args[3].getEvalStrings();Array.prototype.push.apply(e,o.statements),e.push("var "+r+" = Math.round("+o.expression+")"),Array.prototype.push.apply(e,s.statements),e.push("var "+i+" = Math.round("+s.expression+")"),e.push("var "+t+"="+this.starting_value);var c="for (var "+n+"="+r+";"+n+"<="+i+";"+n+"++) {"+a.statements.join(";")+";"+t+this.in_place_operator+a.expression+"};",l="if(!isFinite("+i+"-"+r+")) {"+t+"=("+i+"<"+r+"?"+this.starting_value+":NaN);}else{"+c+"}";return e.push(l),{statements:e,expression:t}},e.evaluate=function(e,t,n){var r=n.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,o=e;o<=t;o++)i=this.update(i,r(o));return i}})}),define("math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),n=e("./repeatedoperator");return t(n,function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){var t=e("pjs"),n=e("./repeatedoperator");return t(n,function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","math/builtin"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r=e("./dummyindex"),i=e("math/builtin");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof r&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],n=this.args[2],r=this.args[3],i=[],o=this.tmpVar(),s=e._symbol,a=this.tmpVar(),c=this.tmpVar(),l=t.getEvalStrings(),u=n.getEvalStrings(),h=r.getEvalStrings();Array.prototype.push.apply(i,l.statements),Array.prototype.push.apply(i,u.statements),i.push("var "+a+" = "+l.expression),i.push("var "+c+" = "+u.expression),i.push("var "+o+" = function ("+s+") { "+h.statements.join("; ")+"; return "+h.expression+";}");var d="BuiltIn.quad("+[o,a,c].join(", ")+")";return{statements:i,expression:d}},e.evaluate=function(e,t,n){var r=this.args[0],o=n.getCompiledFunction([r._symbol]).fn;return i.quad(o,e,t)}})}),define("math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){var t=e("pjs"),n=e("./expression"),r=e("./identifier");return t(n,function(e,t){e.init=function(e,n){"string"==typeof e&&(e=r(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,n),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(r(this._symbol),e)}})}),define("math/parsenode/functionexponent",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t){})}),define("math/parsenode/prime",["require","pjs","./expression"],function(e){var t=e("pjs"),n=e("./expression");return t(n,function(e,t){e.init=function(e,n){t.init.call(this,n),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r=e("./constant"),i=t(n,{});return i.chain=function(e){for(var t,n=r(NaN);e.length;)t=e.pop(),n=i([t.condition,t.if_expr,n]);return n},i.empty=function(){return i([r(!0),r(1),r(NaN)])},i}),define("math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r=e("./identifier");return t(n,function(e,t){e.init=function(e,n){this._symbol=r(e)._symbol,t.init.call(this,n)}})}),define("math/parsenode/nativefunction",["require","pjs","./scalarexpression","math/errormsg","math/functions"],function(e){var t=e("pjs"),n=e("./scalarexpression"),r=e("math/errormsg"),i=e("math/functions");return t(n,function(e,n,o){e.init=function(e){if(e.length<this._requiredArity)throw r.wrongArity(this._symbol,this._requiredArity,e.length);if(e.length>this._maxArity)throw r.wrongArity(this._symbol,this._maxArity,e.length);for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);n.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},o.create=function(e,n,r,o){return t(this,function(t,s,a){a.isFunction=!0,t._symbol=e,t.head=n,t._requiredArity=r,t._optionalArguments=o||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=i.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),a.getConcreteInvocationTree=function(e,t,n){return a(t).getConcreteTree(e,n)},a.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){var t=e("pjs"),n=e("./nativefunction");return t(n,function(e,t,n,r){n.create=function(e,t,n,i){var o=n.length,s=r.create.call(this,e,t,o);return s.prototype._inputTypes=n,s.prototype._outputType=i,s}})}),define("math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),n=e("./nativefunction"),r=e("./expressionTypes").Multiply;return t(n,function(e,t,n,i){n.create=function(e,t){var n=1,o=i.create(e,t,n);return o.getConcreteInvocationTree=function(e,t,n){var i=e.trigAngleMultiplier?[r([t[0],e.trigAngleMultiplier])].concat(t.slice(1)):t;return o(i).getConcreteTree(e,n)},o.getCacheKeys=function(){return["trigAngleMultiplier"]},o}})}),define("math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){var t=e("pjs"),n=e("./nativefunction"),r=e("./expressionTypes").Divide;return t(n,function(e,t,n,i){n.create=function(e,t,n){var o=1,s=i.create(e,t,o,n);return s.getConcreteInvocationTree=function(e,t,n){var i=s(t),o=e.trigAngleMultiplier?r([i,e.trigAngleMultiplier]):i;return o.getConcreteTree(e,n)},s.getCacheKeys=function(){return["trigAngleMultiplier"]},s}})}),define("math/parsenode/reducerfunction",["require","pjs","./expression","math/functions"],function(e){var t=e("pjs"),n=e("./expression"),r=e("math/functions");return t(n,function(e,n,i){e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},i.create=function(e,n){return t(i,function(t,i,o){t._symbol=e,t.head=n,t._arity=1,o.isFunction=!0,t.evaluate=r.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,n){return o(t).getConcreteTree(e,n)},o.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/doublereducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),r=e("math/functions"),i=e("math/errormsg");return t(n,function(e,n,o){e.init=function(){if(n.init.apply(this,arguments),2!==this.args.length)throw i.wrongDoubleReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],n=Math.min(this.args[0].length,this.args[1].length),r=0;r<this.args.length;r++){var i=this.args[r],o=i.getEvalStrings();Array.prototype.push.apply(e,o.statements),t.push(i.length===n?o.expression:o.expression+".slice(0,"+n+")")}return{statements:e,expression:this.evalExpression(t)}},o.create=function(e,n){return t(o,function(t,i,o){t._symbol=e,t.head=n,t._arity=2,o.isFunction=!0,t.evaluate=r.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,n){return o(t).getConcreteTree(e,n)},o.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","math/functions","math/errormsg"],function(e){var t=e("pjs"),n=e("./expression"),r=e("math/functions"),i=e("math/errormsg");return t(n,function(e,n,o){e.init=function(){if(n.init.apply(this,arguments),2!==this.args.length)throw i.wrongParametrizedReducerArity(this._symbol)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),n=this.args[1].getEvalStrings();Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,n.statements);var r=this.evalExpression([t.expression,n.expression]);return{statements:e,expression:r}},o.create=function(e,n){return t(o,function(t,i,o){t._symbol=e,t.head=n,t._arity=2,o.isFunction=!0,t.evaluate=r.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,n){return o(t).getConcreteTree(e,n)},o.getCacheKeys=function(){return[]}})}})}),define("math/parsenode/builtinfunction",["require","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/trigfunction","math/parsenode/inversetrigfunction","math/parsenode/reducerfunction","math/parsenode/doublereducerfunction","math/parsenode/parametrizedreducerfunction","math/types","math/parsenode/constant"],function(e){var t=e("math/parsenode/nativefunction"),n=e("math/parsenode/typedfunction"),r=e("math/parsenode/trigfunction"),i=e("math/parsenode/inversetrigfunction"),o=e("math/parsenode/reducerfunction"),s=e("math/parsenode/doublereducerfunction"),a=e("math/parsenode/parametrizedreducerfunction"),c=e("math/types"),l=e("math/parsenode/constant"),u=l(1),h=l(0),d=l(.5);return{sin:r.create("sin","BuiltIn.sin"),cos:r.create("cos","BuiltIn.cos"),tan:r.create("tan","BuiltIn.tan"),cot:r.create("cot","BuiltIn.cot"),sec:r.create("sec","BuiltIn.sec"),csc:r.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[u]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","Math.round",1),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:o.create("lcm","BuiltIn.listLCM"),gcd:o.create("gcd","BuiltIn.listGCD"),mean:o.create("mean","BuiltIn.mean"),total:o.create("total","BuiltIn.total"),stdev:o.create("stdev","BuiltIn.stdev"),stdevp:o.create("stdevp","BuiltIn.stdevp"),mad:o.create("mad","BuiltIn.mad"),length:o.create("length","BuiltIn.length"),min:o.create("min","BuiltIn.listMin"),max:o.create("max","BuiltIn.listMax"),argmin:o.create("argmin","BuiltIn.argMin"),argmax:o.create("argmax","BuiltIn.argMax"),median:o.create("median","BuiltIn.median"),var:o.create("var","BuiltIn.var"),varp:o.create("varp","BuiltIn.varp"),cov:s.create("cov","BuiltIn.cov"),covp:s.create("covp","BuiltIn.covp"),corr:s.create("corr","BuiltIn.corr"),quantile:a.create("quantile","BuiltIn.quantile"),quartile:a.create("quartile","BuiltIn.quartile"),upperQuantileIndex:a.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:a.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:a.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:a.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:a.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",1,[h,u]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[h,u]),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",2,[d]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[d]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",2),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),invNorm:t.create("invNorm","BuiltIn.invNorm",1),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",2),TTest:a.create("TTest","BuiltIn.TTest"),TScore:a.create("TScore","BuiltIn.TScore"),distance:n.create("distance","BuiltIn.distance",[c.Point,c.Point],c.Number),midpoint:n.create("midpoint","BuiltIn.midpoint",[c.Point,c.Point],c.Point)}}),define("math/parsenode/equation",["require","./base","pjs","./expressionTypes","math/parsenode/comparator"],function(e){var t=e("./base"),n=e("pjs"),r=e("./expressionTypes").Subtract,i=e("math/parsenode/comparator");return n(t,function(e,t){e.init=function(e,n){t.init.call(this),this.mergeDependencies(e,n),this._lhs=e,this._rhs=n,this._difference=r([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){var t=e("./base"),n=e("./equation"),r=e("./identifier"),i=e("pjs");return i(t,function(e,t){e.init=function(e,n){t.init.call(this),e=e._symbol,this.mergeDependencies(n),this._expression=n,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),n=0;n<t.length;n++)if(t[n]===e)return[];return[e]},e.isEquation=function(e){return e.getDependencies().indexOf(this._symbol)!==-1},e.asEquation=function(){var e=n(r(this._symbol),this._expression);return e.userData=this.userData,e},e.getSliderInfo=function(){if(this._expression.isConstant&&"number"==typeof this._expression.constantValue&&isFinite(this._expression.constantValue))return{value:this._expression.constantValue}}})}),define("math/parsenode/functiondefinition",["require","pjs","./base","math/errormsg"],function(e){var t=e("pjs"),n=e("./base"),r=e("math/errormsg");return t(n,function(e,t){e.init=function(e,n,r){t.init.call(this),e=e._symbol,this._argSymbols=n.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=r,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,n){if(t.length!==this._argSymbols.length)throw r.wrongArity(this._symbol,this._argSymbols.length,t.length);for(var i=Object.create(e),o=0;o<this._argSymbols.length;o++)i[this._argSymbols[o]]=t[o];return this._expression.getConcreteTree(i,n)},e.getArgs=function(){return this._args},e.getSliderVariables=function(e,t){var n=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return n.indexOf(e)===-1})}})}),define("numeric",[],function(){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i,o;for("undefined"==typeof t&&(t=15),i=.5,n=new Date;;){for(i*=2,o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;if(r=new Date,r-n>t)break}for(o=i;o>3;o-=4)e(),e(),e(),e();for(;o>0;)e(),o--;return r=new Date,1e3*(3*i-1)/(r-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.precision=4,numeric.largeArray=50,numeric.compile=function(){var e=Array.prototype.slice.call(arguments),t=e.pop();return t="return function ("+e.join(",")+") {"+t+"}",new Function(["numeric"],t)(numeric)},numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,r=1,i=r.toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}function n(e){var i;if("undefined"==typeof e)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return r.push('"'+e+'"'),!1;if("boolean"==typeof e)return r.push(e.toString()),!1;if("number"==typeof e){var o=t(e),s=e.toPrecision(numeric.precision),a=parseFloat(e.toString()).toString(),c=[o,s,a,parseFloat(s).toString(),parseFloat(a).toString()];for(i=1;i<c.length;i++)c[i].length<o.length&&(o=c[i]);return r.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===e)return r.push("null"),!1;if("function"==typeof e){r.push(e.toString());var l=!1;for(i in e)e.hasOwnProperty(i)&&(l?r.push(",\n"):r.push("\n{"),l=!0,r.push(i),r.push(": \n"),n(e[i]));return l&&r.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return r.push("...Large Array..."),!0;var l=!1;for(r.push("["),i=0;i<e.length;i++)i>0&&(r.push(","),l&&r.push("\n ")),l=n(e[i]);return r.push("]"),!0}r.push("{");var l=!1;for(i in e)e.hasOwnProperty(i)&&(l&&r.push(",\n"),l=!0,r.push(i),r.push(": \n"),n(e[i]));return r.push("}"),!0}var r=[];return n(e),r.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseCSV=function(e){var t,n,r=e.split("\n"),i=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,a=function(e){return e.substr(0,e.length-1)},c=0;for(n=0;n<r.length;n++){var l,u=(r[n]+",").match(o);if(u.length>0){for(i[c]=[],t=0;t<u.length;t++)l=a(u[t]),s.test(l)?i[c][t]=parseFloat(l):i[c][t]=l;c++}}return i},numeric.toCSV=function(e){var t,n,r,i,o,s,a=numeric.dim(e);for(r=a[0],i=a[1],s=[],t=0;t<r;t++){for(o=[],n=0;n<r;n++)o[n]=e[t][n].toString();s[t]=o.join(", ")}return s.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,n,r,i,o,s,a,c,l=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(t=0;t<l;t+=3)n=e[t],r=e[t+1],i=e[t+2],o=n>>2,s=((3&n)<<4)+(r>>4),a=((15&r)<<2)+(i>>6),c=63&i,t+1>=l?a=c=64:t+2>=l&&(c=64),h+=u.charAt(o)+u.charAt(s)+u.charAt(a)+u.charAt(c);return h}function n(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1,s=0;e.length;for(r=t;r<n;r++)s=255&(o^e[r]),o=o>>>8^i[s];return o^-1}var r,i,o,s,a,c,l,u,h,d,p=e[0].length,f=e[0][0].length,m=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,p>>24&255,p>>16&255,p>>8&255,255&p,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(m,12,29),m[29]=d>>24&255,m[30]=d>>16&255,m[31]=d>>8&255,m[32]=255&d,r=1,i=0,l=0;l<p;l++){for(l<p-1?m.push(0):m.push(1),a=3*f+1+(0===l)&255,c=3*f+1+(0===l)>>8&255,m.push(a),m.push(c),m.push(255&~a),m.push(255&~c),0===l&&m.push(0),u=0;u<f;u++)for(o=0;o<3;o++)a=e[o][l][u],a=a>255?255:a<0?0:Math.round(a),r=(r+a)%65521,i=(i+r)%65521,m.push(a);m.push(0)}return h=(i<<16)+r,m.push(h>>24&255),m.push(h>>16&255),m.push(h>>8&255),m.push(255&h),s=m.length-41,m[33]=s>>24&255,m[34]=s>>16&255,m[35]=s>>8&255,m[36]=255&s,d=n(m,37),m.push(d>>24&255),m.push(d>>16&255),m.push(d>>8&255),m.push(255&d),m.push(0),m.push(0),m.push(0),m.push(0),m.push(73),m.push(69),m.push(78),m.push(68),m.push(174),m.push(66),m.push(96),m.push(130),"data:image/png;base64,"+t(m)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return numeric.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return numeric.compile("x","var n = x.length;\nvar i,xi;\n"+t+"\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if(i=t.length,i!==n.length)return!1;for(r=0;r<i;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){"undefined"==typeof n&&(n=0);var r,i=e[n],o=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)o[r+1]=t,o[r]=t;return r===-1&&(o[0]=t),o}for(r=i-1;r>=0;r--)o[r]=numeric.rep(e,t,n+1);return o},numeric.dotMMsmall=function(e,t){var n,r,i,o,s,a,c,l,u,h,d;for(o=e.length,s=t.length,a=t[0].length,c=Array(o),n=o-1;n>=0;n--){for(l=Array(a),u=e[n],i=a-1;i>=0;i--){for(h=u[s-1]*t[s-1][i],r=s-2;r>=1;r-=2)d=r-1,h+=u[r]*t[r][i]+u[d]*t[d][i];0===r&&(h+=u[0]*t[0][i]),l[i]=h}c[n]=l}return c},numeric._getCol=function(e,t,n){var r,i=e.length;for(r=i-1;r>0;--r)n[r]=e[r][t],--r,n[r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,o,s=numeric._getCol,a=t.length,c=Array(a),l=e.length,u=t[0].length,h=new Array(l),d=numeric.dotVV;for(--a,--l,r=l;r!==-1;--r)h[r]=Array(u);for(--u,r=u;r!==-1;--r)for(s(t,r,c),i=l;i!==-1;--i)o=0,n=e[i],h[i][r]=d(n,c);return h},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),o=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=o(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,o,s,a,c;for(i=e.length,o=t[0].length,s=Array(o),r=o-1;r>=0;r--){for(a=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)c=n-1,a+=e[n]*t[n][r]+e[c]*t[c][r];0===n&&(a+=e[0]*t[0][r]),s[r]=a}return s},numeric.dotVV=function(e,t){var n,r,i=e.length,o=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,o+=e[n]*t[n]+e[r]*t[r];return 0===n&&(o+=e[0]*t[0]),o},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,o=e.length,s=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),n=t+2,r=o-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),s[t]=i}return s},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],--t,r[t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,o=[],s=/\[i\]$/,a="",c=!1;for(r=0;r<e.length;r++)s.test(e[r])?(i=e[r].substring(0,e[r].length-3),a=i):i=e[r],"ret"===i&&(c=!0),o.push(i);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+a+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(c?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",numeric.compile.apply(null,o)},numeric.pointwise2=function(e,t,n){"undefined"==typeof n&&(n="");var r,i,o=[],s=/\[i\]$/,a="",c=!1;for(r=0;r<e.length;r++)s.test(e[r])?(i=e[r].substring(0,e[r].length-3),a=i):i=e[r],"ret"===i&&(c=!0),o.push(i);return o[e.length]="var _n = "+a+".length;\nvar i"+(c?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",numeric.compile.apply(null,o)},numeric._biforeach=function e(t,n,r,i,o){if(i===r.length-1)return void o(t,n);var s,a=r[i];for(s=a-1;s>=0;s--)e("object"==typeof t?t[s]:t,"object"==typeof n?n[s]:n,r,i+1,o)},numeric._biforeach2=function e(t,n,r,i,o){if(i===r.length-1)return o(t,n);var s,a=r[i],c=Array(a);for(s=a-1;s>=0;--s)c[s]=e("object"==typeof t?t[s]:t,"object"==typeof n?n[s]:n,r,i+1,o);return c},numeric._foreach=function e(t,n,r,i){if(r===n.length-1)return void i(t);var o,s=n[r];for(o=s-1;o>=0;o--)e(t[o],n,r+1,i)},numeric._foreach2=function e(t,n,r,i){if(r===n.length-1)return i(t);var o,s=n[r],a=Array(s);for(o=s-1;o>=0;o--)a[o]=e(t[o],n,r+1,i);return a},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],
inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";numeric.myIndexOf.call(numeric.mathfuns2,e)!==-1?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=numeric.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],numeric.myIndexOf.call(numeric.mathfuns,e)!==-1&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=numeric.compile("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=numeric.compile("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=numeric.compile("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+'\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+"\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,o,s,a,e,c=numeric.dim(e),l=Math.abs,u=c[0],h=c[1],d=numeric.clone(e),p=numeric.identity(u);for(s=0;s<h;++s){var f=-1,m=-1;for(o=s;o!==u;++o)a=l(d[o][s]),a>m&&(f=o,m=a);for(n=d[f],d[f]=d[s],d[s]=n,i=p[f],p[f]=p[s],p[s]=i,e=n[s],a=s;a!==h;++a)n[a]/=e;for(a=h-1;a!==-1;--a)i[a]/=e;for(o=u-1;o!==-1;--o)if(o!==s){for(t=d[o],r=p[o],e=t[s],a=s+1;a!==h;++a)t[a]-=n[a]*e;for(a=h-1;a>0;--a)r[a]-=i[a]*e,--a,r[a]-=i[a]*e;0===a&&(r[0]-=i[0]*e)}}return p},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,o,s,a,c,l,u=t[0],h=1,d=numeric.clone(e);for(r=0;r<u-1;r++){for(i=r,n=r+1;n<u;n++)Math.abs(d[n][r])>Math.abs(d[i][r])&&(i=n);for(i!==r&&(c=d[i],d[i]=d[r],d[r]=c,h*=-1),o=d[r],n=r+1;n<u;n++){for(s=d[n],a=s[r]/o[r],i=r+1;i<u-1;i+=2)l=i+1,s[i]-=o[i]*a,s[l]-=o[l]*a;i!==u&&(s[i]-=o[i]*a)}if(0===o[r])return 0;h*=o[r]}return h*d[r][r]},numeric.transpose=function(e){var t,n,r,i,o,s=e.length,a=e[0].length,c=Array(a);for(n=0;n<a;n++)c[n]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=a-1;n>=1;--n)o=c[n],o[t]=i[n],o[t-1]=r[n],--n,o=c[n],o[t]=i[n],o[t-1]=r[n];0===n&&(o=c[0],o[t]=i[0],o[t-1]=r[0])}if(0===t){for(r=e[0],n=a-1;n>=1;--n)c[n][0]=r[n],--n,c[n][0]=r[n];0===n&&(c[0][0]=r[0])}return c},numeric.negtranspose=function(e){var t,n,r,i,o,s=e.length,a=e[0].length,c=Array(a);for(n=0;n<a;n++)c[n]=Array(s);for(t=s-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=a-1;n>=1;--n)o=c[n],o[t]=-i[n],o[t-1]=-r[n],--n,o=c[n],o[t]=-i[n],o[t-1]=-r[n];0===n&&(o=c[0],o[t]=-i[0],o[t-1]=-r[0])}if(0===t){for(r=e[0],n=a-1;n>=1;--n)c[n][0]=-r[n],--n,c[n][0]=-r[n];0===n&&(c[0][0]=-r[0])}return c},numeric._random=function e(t,n){var r,i,o=t[n],s=Array(o);if(n===t.length-1){for(i=Math.random,r=o-1;r>=1;r-=2)s[r]=i(),s[r-1]=i();return 0===r&&(s[0]=i()),s}for(r=o-1;r>=0;r--)s[r]=e(t,n+1);return s},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if("undefined"==typeof n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,i=Array(n);for(n--,r=n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){function r(e,o){var s,a=t[o],c=n[o]-a,l=Array(c);if(o===i.length-1){for(s=c;s>=0;s--)l[s]=e[s+a];return l}for(s=c;s>=0;s--)l[s]=r(e[s+a],o+1);return l}var i=numeric.dim(e);return r(e,0)},numeric.setBlock=function(e,t,n,r){function i(e,r,s){var a,c=t[s],l=n[s]-c;if(s===o.length-1)for(a=l;a>=0;a--)e[a+c]=r[a];for(a=l;a>=0;a--)i(e[a+c],r[a],s+1)}var o=numeric.dim(e);return i(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,o,s,a=t.length,c=n.length,l=Array(a);for(r=a-1;r!==-1;--r)for(l[r]=Array(c),o=l[r],s=e[t[r]],i=c-1;i!==-1;--i)o[i]=s[n[i]];return l},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,o,s,a=t[0],c=t[1];for(n=0,r=0,i=0;i<a;++i)n+=e[i][0].length;for(o=0;o<c;++o)r+=e[0][o][0].length;var l=Array(n);for(i=0;i<n;++i)l[i]=Array(r);var u,h,d,p,f,m=0;for(i=0;i<a;++i){for(u=r,o=c-1;o!==-1;--o)for(s=e[i][o],u-=s[0].length,d=s.length-1;d!==-1;--d)for(f=s[d],h=l[m+d],p=f.length-1;p!==-1;--p)h[u+p]=f[p];m+=e[i][0].length}return l},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,s,a,c=n[0],l=r[0],u=Array(c);for(o=c-1;o>=0;o--){for(i=Array(l),a=e[o],s=l-1;s>=3;--s)i[s]=a*t[s],--s,i[s]=a*t[s],--s,i[s]=a*t[s],--s,i[s]=a*t[s];for(;s>=0;)i[s]=a*t[s],--s;u[o]=i}return u},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){numeric.indexOf;if("string"!=typeof i){var o;i="";for(o in numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||t.indexOf(o)>=0||n.indexOf(o)>=0||r.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n")}return numeric.compile(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function e(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var e=numeric.div;return this.y?new numeric.T(e(this.x,t.x),e(this.y,t.x)):new numeric.T(e(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),numeric.compile("var x = this;\n"+n+"\nif(x.y) {  "+t+"\n}\n"+e+"\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex);","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex));","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x));","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x));","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,o,s,a,c,l,u,h,t,n,r,d,p,f,m,g,y,v,b=e.x.length,x=numeric.identity(b),_=numeric.rep([b,b],0),w=numeric.clone(e.x),E=numeric.clone(e.y);for(t=0;t<b;t++){for(f=w[t][t],m=E[t][t],d=f*f+m*m,r=t,n=t+1;n<b;n++)f=w[n][t],m=E[n][t],p=f*f+m*m,p>d&&(r=n,d=p);for(r!==t&&(v=w[t],w[t]=w[r],w[r]=v,v=E[t],E[t]=E[r],E[r]=v,v=x[t],x[t]=x[r],x[r]=v,v=_[t],_[t]=_[r],_[r]=v),i=w[t],o=E[t],c=x[t],l=_[t],f=i[t],m=o[t],n=t+1;n<b;n++)g=i[n],y=o[n],i[n]=(g*f+y*m)/d,o[n]=(y*f-g*m)/d;for(n=0;n<b;n++)g=c[n],y=l[n],c[n]=(g*f+y*m)/d,l[n]=(y*f-g*m)/d;for(n=t+1;n<b;n++){for(s=w[n],a=E[n],u=x[n],h=_[n],f=s[t],m=a[t],r=t+1;r<b;r++)g=i[r],y=o[r],s[r]-=g*f-y*m,a[r]-=y*f+g*m;for(r=0;r<b;r++)g=c[r],y=l[r],u[r]-=g*f-y*m,h[r]-=y*f+g*m}}for(t=b-1;t>0;t--)for(c=x[t],l=_[t],n=t-1;n>=0;n--)for(u=x[n],h=_[n],f=w[n][t],m=E[n][t],r=b-1;r>=0;r--)g=c[r],y=l[r],u[r]-=f*g-m*y,h[r]-=f*y+m*g;return new numeric.T(x,_)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,o=e.length;if(r){for(;i<o;)t=e[i],n=n[t],r=r[t],i++;return new numeric.T(n,r)}for(;i<o;)t=e[i],n=n[t],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,o=0,s=e.length,a=t.x,c=t.y;if(0===s)return c?this.y=c:i&&(this.y=void 0),this.x=r,this;if(c){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);o<s-1;)n=e[o],r=r[n],i=i[n],o++;return n=e[o],r[n]=a,i[n]=c,this}if(i){for(;o<s-1;)n=e[o],r=r[n],i=i[n],o++;return n=e[o],r[n]=a,a instanceof Array?i[n]=numeric.rep(numeric.dim(a),0):i[n]=0,this}for(;o<s-1;)n=e[o],r=r[n],o++;return n=e[o],r[n]=a,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,o=Array(i),s=this.x,a=this.y;for(n=e;n<=t;n++)o[n-e]=s[n];if(a){for(r=Array(i),n=e;n<=t;n++)r[n-e]=a[n];return new numeric.T(o,r)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,o=this.y,s=n.x,a=n.y;for(r=e;r<=t;r++)i[r]=s[r-e];if(a)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),r=e;r<=t;r++)o[r]=a[r-e];else if(o)for(r=e;r<=t;r++)o[r]=numeric.rep([s[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,o=t.y;return n[e]=i,o?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=o):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,o=numeric.setBlock,s=n.x,a=n.y;return a?(i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(r,e,t,s),o(i,e,t,a),this):(o(r,e,t,s),void(i&&o(i,e,t,numeric.rep(numeric.dim(s),0))))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,o=numeric.rep;return i?new n(o(e,r),o(e,i)):new n(o(e,r))},numeric.T.diag=function e(t){t instanceof numeric.T||(t=new numeric.T(t));var n=t.x,r=t.y,e=numeric.diag;return r?new numeric.T(e(n),e(r)):new numeric.T(e(n))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=e[0]>=0?1:-1,r=n*numeric.norm2(e);t[0]+=r;var i=numeric.norm2(t);if(0===i)throw new Error("eig: internal error");return numeric.div(t,i)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,o,s,a,c,l,u,h,d=t[0],p=numeric.clone(e),f=numeric.identity(d);for(r=0;r<d-2;r++){for(o=Array(d-r-1),n=r+1;n<d;n++)o[n-r-1]=p[n][r];if(numeric.norm2(o)>0){for(s=numeric.house(o),a=numeric.getBlock(p,[r+1,r],[d-1,d-1]),c=numeric.tensor(s,numeric.dot(s,a)),n=r+1;n<d;n++)for(l=p[n],u=c[n-r-1],i=r;i<d;i++)l[i]-=2*u[i-r];for(a=numeric.getBlock(p,[0,r+1],[d-1,d-1]),c=numeric.tensor(numeric.dot(a,s),s),n=0;n<d;n++)for(l=p[n],u=c[n],i=r+1;i<d;i++)l[i]-=2*u[i-r-1];for(a=Array(d-r-1),n=r+1;n<d;n++)a[n-r-1]=f[n];for(c=numeric.tensor(s,numeric.dot(s,a)),n=r+1;n<d;n++)for(h=f[n],u=c[n-r-1],i=0;i<d;i++)h[i]-=2*u[i]}}return{H:p,Q:f}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b,x=(numeric.clone(e),numeric.dim(e)),_=x[0],w=numeric.identity(_);if(_<3)return{Q:w,B:[[0,_-1]]};var E=numeric.epsilon;for(b=0;b<t;b++){for(y=0;y<_-1;y++)if(Math.abs(e[y+1][y])<E*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var S=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),M=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[_-1,_-1]),t);for(p=Array(y+1),g=0;g<=y;g++)p[g]=w[g];for(f=numeric.dot(S.Q,p),g=0;g<=y;g++)w[g]=f[g];for(p=Array(_-y-1),g=y+1;g<_;g++)p[g-y-1]=w[g];for(f=numeric.dot(M.Q,p),g=y+1;g<_;g++)w[g]=f[g-y-1];return{Q:w,B:S.B.concat(numeric.add(M.B,y+1))}}if(i=e[_-2][_-2],o=e[_-2][_-1],s=e[_-1][_-2],a=e[_-1][_-1],l=i+a,c=i*a-o*s,u=numeric.getBlock(e,[0,0],[2,2]),l*l>=4*c){var I,k;I=.5*(l+Math.sqrt(l*l-4*c)),k=.5*(l-Math.sqrt(l*l-4*c)),u=numeric.add(numeric.sub(numeric.dot(u,u),numeric.mul(u,I+k)),numeric.diag(numeric.rep([3],I*k)))}else u=numeric.add(numeric.sub(numeric.dot(u,u),numeric.mul(u,l)),numeric.diag(numeric.rep([3],c)));for(n=[u[0][0],u[1][0],u[2][0]],r=numeric.house(n),p=[e[0],e[1],e[2]],f=numeric.tensor(r,numeric.dot(r,p)),g=0;g<3;g++)for(d=e[g],m=f[g],v=0;v<_;v++)d[v]-=2*m[v];for(p=numeric.getBlock(e,[0,0],[_-1,2]),f=numeric.tensor(numeric.dot(p,r),r),g=0;g<_;g++)for(d=e[g],m=f[g],v=0;v<3;v++)d[v]-=2*m[v];for(p=[w[0],w[1],w[2]],f=numeric.tensor(r,numeric.dot(r,p)),g=0;g<3;g++)for(h=w[g],m=f[g],v=0;v<_;v++)h[v]-=2*m[v];var T;for(y=0;y<_-2;y++){for(v=y;v<=y+1;v++)if(Math.abs(e[v+1][v])<E*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var S=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),M=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[_-1,_-1]),t);for(p=Array(v+1),g=0;g<=v;g++)p[g]=w[g];for(f=numeric.dot(S.Q,p),g=0;g<=v;g++)w[g]=f[g];for(p=Array(_-v-1),g=v+1;g<_;g++)p[g-v-1]=w[g];for(f=numeric.dot(M.Q,p),g=v+1;g<_;g++)w[g]=f[g-v-1];return{Q:w,B:S.B.concat(numeric.add(M.B,v+1))}}for(T=Math.min(_-1,y+3),n=Array(T-y),g=y+1;g<=T;g++)n[g-y-1]=e[g][y];for(r=numeric.house(n),p=numeric.getBlock(e,[y+1,y],[T,_-1]),f=numeric.tensor(r,numeric.dot(r,p)),g=y+1;g<=T;g++)for(d=e[g],m=f[g-y-1],v=y;v<_;v++)d[v]-=2*m[v-y];for(p=numeric.getBlock(e,[0,y+1],[_-1,T]),f=numeric.tensor(numeric.dot(p,r),r),g=0;g<_;g++)for(d=e[g],m=f[g],v=y+1;v<=T;v++)d[v]-=2*m[v-y-1];for(p=Array(T-y),g=y+1;g<=T;g++)p[g-y-1]=w[g];for(f=numeric.tensor(r,numeric.dot(r,p)),g=y+1;g<=T;g++)for(h=w[g],m=f[g-y-1],v=0;v<_;v++)h[v]-=2*m[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b=numeric.toUpperHessenberg(e),x=numeric.QRFrancis(b.H,t),_=numeric.T,w=e.length,E=x.B,S=numeric.dot(x.Q,numeric.dot(b.H,numeric.transpose(x.Q))),M=new _(numeric.dot(x.Q,b.Q)),I=E.length,k=Math.sqrt;for(r=0;r<I;r++)if(n=E[r][0],n===E[r][1]);else{if(o=n+1,s=S[n][n],a=S[n][o],c=S[o][n],l=S[o][o],0===a&&0===c)continue;u=-s-l,h=s*l-a*c,d=u*u-4*h,d>=0?(p=u<0?-.5*(u-k(d)):-.5*(u+k(d)),y=(s-p)*(s-p)+a*a,v=c*c+(l-p)*(l-p),y>v?(y=k(y),m=(s-p)/y,g=a/y):(v=k(v),m=c/v,g=(l-p)/v),i=new _([[g,-m],[m,g]]),M.setRows(n,o,i.dot(M.getRows(n,o)))):(p=-.5*u,f=.5*k(-d),y=(s-p)*(s-p)+a*a,v=c*c+(l-p)*(l-p),y>v?(y=k(y+f*f),m=(s-p)/y,g=a/y,p=0,f/=y):(v=k(v+f*f),m=c/v,g=(l-p)/v,p=f/v,f=0),i=new _([[g,-m],[m,g]],[[p,f],[f,-p]]),M.setRows(n,o,i.dot(M.getRows(n,o))))}var T=M.dot(e).dot(M.transjugate()),w=e.length,C=numeric.T.identity(w);for(o=0;o<w;o++)if(o>0)for(r=o-1;r>=0;r--){var A=T.get([r,r]),P=T.get([o,o]);numeric.neq(A.x,P.x)||numeric.neq(A.y,P.y)?(p=T.getRow(r).getBlock([r],[o-1]),f=C.getRow(o).getBlock([r],[o-1]),C.set([o,r],T.get([r,o]).neg().sub(p.dot(f)).div(A.sub(P)))):C.setRow(o,C.getRow(r))}for(o=0;o<w;o++)p=C.getRow(o),C.setRow(o,p.div(p.norm2()));return C=C.transpose(),C=M.transjugate().dot(C),{lambda:T.getDiag(),E:C}},numeric.ccsSparse=function(e){var t,n,r,i,o=e.length,s=[];for(r=o-1;r!==-1;--r){n=e[r];for(i in n){for(i=parseInt(i);i>=s.length;)s[s.length]=0;0!==n[i]&&s[i]++}}var t=s.length,a=Array(t+1);for(a[0]=0,r=0;r<t;++r)a[r+1]=a[r]+s[r];var c=Array(a[t]),l=Array(a[t]);for(r=o-1;r!==-1;--r){n=e[r];for(i in n)0!==n[i]&&(s[i]--,c[a[i]+s[i]]=r,l[a[i]+s[i]]=n[i])}return[a,c,l]},numeric.ccsFull=function(e){var t,n,r,i,o=e[0],s=e[1],a=e[2],c=numeric.ccsDim(e),l=c[0],u=c[1],h=numeric.rep([l,u],0);for(t=0;t<u;t++)for(r=o[t],i=o[t+1],n=r;n<i;++n)h[s[n]][t]=a[n];return h},numeric.ccsTSolve=function(e,t,n,r,i){function o(e){var t;if(0===n[e]){for(n[e]=1,t=s[e];t<s[e+1];++t)o(a[t]);i[h]=e,++h}}var s=e[0],a=e[1],c=e[2],l=s.length-1,u=Math.max,h=0;"undefined"==typeof r&&(n=numeric.rep([l],0)),"undefined"==typeof r&&(r=numeric.linspace(0,n.length-1)),"undefined"==typeof i&&(i=[]);var d,p,f,m,g,y,v;for(d=r.length-1;d!==-1;--d)o(r[d]);for(i.length=h,d=i.length-1;d!==-1;--d)n[i[d]]=0;for(d=r.length-1;d!==-1;--d)p=r[d],n[p]=t[p];for(d=i.length-1;d!==-1;--d){for(p=i[d],f=s[p],m=u(s[p+1],f),g=f;g!==m;++g)if(a[g]===p){n[p]/=c[g];break}for(v=n[p],g=f;g!==m;++g)y=a[g],y!==p&&(n[y]-=v*c[g])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,o){var s,a,c,l=0,u=i.length,h=this.k,d=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,h[0]=a=t[e],d[0]=c=t[e+1];;)if(a>=c){if(i[u]=p[l],0===l)return;++u,--l,a=h[l],c=d[l]}else s=o[n[a]],0===r[s]?(r[s]=1,h[l]=a,++l,p[l]=s,a=t[s],d[l]=c=t[s+1]):++a},numeric.ccsLPSolve=function(e,t,n,r,i,o,s){var a,c,l,u,h,d,p,f,m,g=e[0],y=e[1],v=e[2],b=(g.length-1,t[0]),x=t[1],_=t[2];for(c=b[i],l=b[i+1],r.length=0,a=c;a<l;++a)s.dfs(o[x[a]],g,y,n,r,o);for(a=r.length-1;a!==-1;--a)n[r[a]]=0;for(a=c;a!==l;++a)u=o[x[a]],n[u]=_[a];for(a=r.length-1;a!==-1;--a){for(u=r[a],h=g[u],d=g[u+1],p=h;p<d;++p)if(o[y[p]]===u){n[u]/=v[p];break}for(m=n[u],p=h;p<d;++p)f=o[y[p]],f!==u&&(n[f]-=m*v[p])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,o,s,a,c,l=e[0].length-1,u=[numeric.rep([l+1],0),[],[]],h=[numeric.rep([l+1],0),[],[]],d=u[0],p=u[1],f=u[2],m=h[0],g=h[1],y=h[2],v=numeric.rep([l],0),b=numeric.rep([l],0),x=numeric.ccsLPSolve,_=(Math.max,Math.abs),w=numeric.linspace(0,l-1),E=numeric.linspace(0,l-1),S=new numeric.ccsDFS(l);for("undefined"==typeof t&&(t=1),n=0;n<l;++n){for(x(u,e,v,b,n,E,S),o=-1,s=-1,r=b.length-1;r!==-1;--r)i=b[r],i<=n||(a=_(v[i]),a>o&&(s=i,o=a));for(_(v[n])<t*o&&(r=w[n],o=w[s],w[n]=o,E[o]=n,w[s]=r,E[r]=s,o=v[n],v[n]=v[s],v[s]=o),o=d[n],s=m[n],c=v[n],p[o]=w[n],f[o]=1,++o,r=b.length-1;r!==-1;--r)i=b[r],a=v[i],b[r]=0,v[i]=0,i<=n?(g[s]=i,y[s]=a,++s):(p[o]=w[i],f[o]=a/c,++o);d[n+1]=o,m[n+1]=s}for(r=p.length-1;r!==-1;--r)p[r]=E[p[r]];return{L:u,U:h,P:w,Pinv:E}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,o,s){var a,c,l,u=0,h=i.length,d=this.k,p=this.k1,f=this.j;if(0===r[e])for(r[e]=1,f[0]=e,d[0]=c=t[o[e]],p[0]=l=t[o[e]+1];;){if(isNaN(c))throw new Error("Ow!");if(c>=l){if(i[h]=o[f[u]],0===u)return;++h,--u,c=d[u],l=p[u]}else a=n[c],0===r[a]?(r[a]=1,d[u]=c,++u,f[u]=a,a=o[a],c=t[a],p[u]=l=t[a+1]):++c}},numeric.ccsLPSolve0=function(e,t,n,r,i,o,s,a){var c,l,u,h,d,p,f,m,g,y=e[0],v=e[1],b=e[2],x=(y.length-1,t[0]),_=t[1],w=t[2];for(l=x[i],u=x[i+1],r.length=0,c=l;c<u;++c)a.dfs(_[c],y,v,n,r,o,s);for(c=r.length-1;c!==-1;--c)h=r[c],n[s[h]]=0;for(c=l;c!==u;++c)h=_[c],n[h]=w[c];for(c=r.length-1;c!==-1;--c){for(h=r[c],m=s[h],d=y[h],p=y[h+1],f=d;f<p;++f)if(v[f]===m){n[m]/=b[f];break}for(g=n[m],f=d;f<p;++f)n[v[f]]-=g*b[f];n[m]=g}},numeric.ccsLUP0=function(e,t){var n,r,i,o,s,a,c,l=e[0].length-1,u=[numeric.rep([l+1],0),[],[]],h=[numeric.rep([l+1],0),[],[]],d=u[0],p=u[1],f=u[2],m=h[0],g=h[1],y=h[2],v=numeric.rep([l],0),b=numeric.rep([l],0),x=numeric.ccsLPSolve0,_=(Math.max,Math.abs),w=numeric.linspace(0,l-1),E=numeric.linspace(0,l-1),S=new numeric.ccsDFS0(l);for("undefined"==typeof t&&(t=1),n=0;n<l;++n){for(x(u,e,v,b,n,E,w,S),o=-1,s=-1,r=b.length-1;r!==-1;--r)i=b[r],i<=n||(a=_(v[w[i]]),a>o&&(s=i,o=a));for(_(v[w[n]])<t*o&&(r=w[n],o=w[s],w[n]=o,E[o]=n,w[s]=r,E[r]=s),o=d[n],s=m[n],c=v[w[n]],p[o]=w[n],f[o]=1,++o,r=b.length-1;r!==-1;--r)i=b[r],a=v[w[i]],b[r]=0,v[w[i]]=0,i<=n?(g[s]=i,y[s]=a,++s):(p[o]=w[i],f[o]=a/c,++o);d[n+1]=o,m[n+1]=s}for(r=p.length-1;r!==-1;--r)p[r]=E[p[r]];return{L:u,U:h,P:w,Pinv:E}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],o=r[1];"undefined"==typeof t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),"undefined"==typeof n?n=numeric.linspace(0,o-1):"number"==typeof n&&(n=[n]);var s,a,c,l,u,h=t.length,d=n.length,p=numeric.rep([o],0),f=[],m=[],g=[p,f,m],y=e[0],v=e[1],b=e[2],x=numeric.rep([i],0),_=0,w=numeric.rep([i],0);for(a=0;a<d;++a){l=n[a];var E=y[l],S=y[l+1];for(s=E;s<S;++s)c=v[s],w[c]=1,x[c]=b[s];for(s=0;s<h;++s)u=t[s],w[u]&&(f[_]=s,m[_]=x[t[s]],++_);for(s=E;s<S;++s)c=v[s],w[c]=0;p[a+1]=_}return g},numeric.ccsDot=function(e,t){var n,r,i,o,s,a,c,l,u,h,d,p=e[0],f=e[1],m=e[2],g=t[0],y=t[1],v=t[2],b=numeric.ccsDim(e),x=numeric.ccsDim(t),_=b[0],w=(b[1],x[1]),E=numeric.rep([_],0),S=numeric.rep([_],0),M=Array(_),I=numeric.rep([w],0),k=[],T=[],C=[I,k,T];for(i=0;i!==w;++i){for(o=g[i],s=g[i+1],u=0,r=o;r<s;++r)for(h=y[r],d=v[r],a=p[h],c=p[h+1],n=a;n<c;++n)l=f[n],0===S[l]&&(M[u]=l,S[l]=1,u+=1),E[l]=E[l]+m[n]*d;for(o=I[i],s=o+u,I[i+1]=s,r=u-1;r!==-1;--r)d=o+r,n=M[r],k[d]=n,T[d]=E[n],S[n]=0,E[n]=0;I[i+1]=I[i]+u}return C},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),o=!1;"object"!=typeof i&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],i=t[0],o=!0);var s,a,c,l,u,h,d=t[1],p=t[2],f=n[0].length-1,m=i.length-1,g=numeric.rep([f],0),y=Array(f),v=numeric.rep([f],0),b=Array(f),x=numeric.rep([m+1],0),_=[],w=[],E=numeric.ccsTSolve,S=0;for(s=0;s<m;++s){for(u=0,c=i[s],l=i[s+1],a=c;a<l;++a)h=e.Pinv[d[a]],b[u]=h,v[h]=p[a],++u;for(b.length=u,E(n,v,g,b,y),a=b.length-1;a!==-1;--a)v[b[a]]=0;if(E(r,g,v,y,b),o)return v;for(a=y.length-1;a!==-1;--a)g[y[a]]=0;for(a=b.length-1;a!==-1;--a)h=b[a],_[S]=h,w[S]=v[h],v[h]=0,++S;x[s+1]=S}return[x,_,w]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),numeric.compile("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=numeric.compile("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],o=numeric.sup(r)+1,s=n.length,a=numeric.rep([o],0),c=Array(s),l=Array(s),u=numeric.rep([o],0);for(t=0;t<s;++t)u[r[t]]++;for(t=0;t<o;++t)a[t+1]=a[t]+u[t];var h,d,p=a.slice(0);for(t=0;t<s;++t)d=r[t],h=p[d],c[h]=n[t],l[h]=i[t],p[d]=p[d]+1;return[a,c,l]},numeric.ccsGather=function(e){var t,n,r,i,o,s=e[0],a=e[1],c=e[2],l=s.length-1,u=a.length,h=Array(u),d=Array(u),p=Array(u);for(o=0,t=0;t<l;++t)for(r=s[t],i=s[t+1],n=r;n!==i;++n)d[o]=t,h[o]=a[n],p[o]=c[n],++o;return[h,d,p]},numeric.sdim=function e(t,n,r){if("undefined"==typeof n&&(n=[]),"object"!=typeof t)return n;"undefined"==typeof r&&(r=0),r in n||(n[r]=0),t.length>n[r]&&(n[r]=t.length);var i;for(i in t)t.hasOwnProperty(i)&&e(t[i],n,r+1);return n},numeric.sclone=function e(t,n,r){"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=numeric.sdim(t).length);var i,o=Array(t.length);if(n===r-1){for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return o}for(i in t)t.hasOwnProperty(i)&&(o[i]=e(t[i],n+1,r));return o},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t)){r=e[t];for(n in r)r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n])}return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,o,s,a,c,l=e.length,u=(t.length,numeric.stranspose(t)),h=u.length,d=Array(l);for(i=l-1;i>=0;i--){for(c=[],n=e[i],s=h-1;s>=0;s--){a=0,r=u[s];for(o in n)n.hasOwnProperty(o)&&o in r&&(a+=n[o]*r[o]);a&&(c[s]=a)}d[i]=c}return d},numeric.sdotMV=function(e,t){var n,r,i,o,s=e.length,a=Array(s);for(r=s-1;r>=0;r--){n=e[r],o=0;for(i in n)n.hasOwnProperty(i)&&t[i]&&(o+=n[i]*t[i]);o&&(a[r]=o)}return a},numeric.sdotVM=function(e,t){var n,r,i,o,s=[];for(n in e)if(e.hasOwnProperty(n)){i=t[n],o=e[n];for(r in i)i.hasOwnProperty(r)&&(s[r]||(s[r]=0),s[r]+=o*i[r])}return s},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length,i=1e3*n+r;switch(i){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,o=e[0].length,s=e.length,a=[];for(n=o-1;n>=0;--n)if(e[s-1][n]){for(i=a,r=0;r<s-2;r++)t=e[r][n],i[t]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return a},numeric.sgather=function e(t,n,r){"undefined"==typeof n&&(n=[]),"undefined"==typeof r&&(r=[]);var i,o,s;i=r.length;for(o in t)if(t.hasOwnProperty(o))if(r[i]=parseInt(o),s=t[o],"number"==typeof s){if(s){if(0===n.length)for(o=i+1;o>=0;--o)n[o]=[];for(o=i;o>=0;--o)n[o].push(r[o]);n[i+1].push(s)}}else e(s,n,r);return r.length>i&&r.pop(),n},numeric.cLU=function(e){var t,n,r,i,o,s,a=e[0],c=e[1],l=e[2],u=a.length,h=0;for(t=0;t<u;t++)a[t]>h&&(h=a[t]);h++;var d,p,f,m=Array(h),g=Array(h),y=numeric.rep([h],1/0),v=numeric.rep([h],-(1/0));for(r=0;r<u;r++)t=a[r],n=c[r],n<y[t]&&(y[t]=n),n>v[t]&&(v[t]=n);for(t=0;t<h-1;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=h-1;t>=1;t--)y[t]<y[t-1]&&(y[t-1]=y[t]);var b=0,x=0;for(t=0;t<h;t++)g[t]=numeric.rep([v[t]-y[t]+1],0),m[t]=numeric.rep([t-y[t]],0),b+=t-y[t]+1,x+=v[t]-t+1;for(r=0;r<u;r++)t=a[r],g[t][c[r]-y[t]]=l[r];for(t=0;t<h-1;t++)for(i=t-y[t],d=g[t],n=t+1;y[n]<=t&&n<h;n++)if(o=t-y[n],s=v[t]-t,p=g[n],f=p[o]/d[i]){for(r=1;r<=s;r++)p[r+o]-=f*d[r+i];m[n][t-y[n]]=f}var u,_,w,d=[],p=[],E=[],S=[],M=[],I=[];for(u=0,_=0,t=0;t<h;t++){for(i=y[t],o=v[t],w=g[t],n=t;n<=o;n++)w[n-i]&&(d[u]=t,p[u]=n,E[u]=w[n-i],u++);for(w=m[t],n=i;n<t;n++)w[n-i]&&(S[_]=t,M[_]=n,I[_]=w[n-i],_++);S[_]=t,M[_]=t,I[_]=1,_++}return{U:[d,p,E],L:[S,M,I]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,o=e.U,s=numeric.clone(t),a=i[0],c=i[1],l=i[2],u=o[0],h=o[1],d=o[2],p=u.length,f=(a.length,s.length);for(r=0,n=0;n<f;n++){for(;c[r]<n;)s[n]-=l[r]*s[c[r]],r++;r++}for(r=p-1,n=f-1;n>=0;n--){for(;h[r]>n;)s[n]-=d[r]*s[h[r]],r--;s[n]/=d[r],r--}return s},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,o=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(o[n][r]=i,i++);return o},numeric.cdelsq=function(e){var t,n,r,i,o,s=[[-1,0],[0,-1],[0,1],[1,0]],a=numeric.dim(e),c=a[0],l=a[1],u=[],h=[],d=[];for(t=1;t<c-1;t++)for(n=1;n<l-1;n++)if(!(e[t][n]<0)){for(r=0;r<4;r++)i=t+s[r][0],o=n+s[r][1],e[i][o]<0||(u.push(e[t][n]),h.push(e[i][o]),d.push(-1));u.push(e[t][n]),h.push(e[t][n]),
d.push(4)}return[u,h,d]},numeric.cdotMV=function(e,t){var n,r,i,o=e[0],s=e[1],a=e[2],c=o.length;for(i=0,r=0;r<c;r++)o[r]>i&&(i=o[r]);for(i++,n=numeric.rep([i],0),r=0;r<c;r++)n[o[r]]+=a[r]*t[s[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var e,n,r,i,o=this.x,s=this.yl,a=this.yr,c=this.kl,l=this.kr,u=numeric.add,h=numeric.sub,d=numeric.mul;n=h(d(c[t],o[t+1]-o[t]),h(a[t+1],s[t])),r=u(d(l[t+1],o[t]-o[t+1]),h(a[t+1],s[t])),i=(e-o[t])/(o[t+1]-o[t]);var p=i*(1-i);return u(u(u(d(1-i,s[t]),d(i,a[t+1])),d(n,p*(1-i))),d(r,p*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,o=i.length,s=Math.floor;for(t=0,n=o-1;n-t>1;)r=s((t+n)/2),i[r]<=e?t=r:n=r;return this._at(e,t)}var a,o=e.length,c=Array(o);for(a=o-1;a!==-1;--a)c[a]=this.at(e[a]);return c},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,o=this.yr,s=this.kl,a=this.kr,c=i.length,l=s,u=a,h=Array(c),d=Array(c),p=numeric.add,f=numeric.mul,m=numeric.div,g=numeric.sub;for(e=c-1;e!==-1;--e)t=r[e+1]-r[e],n=g(o[e+1],i[e]),h[e]=m(p(f(n,6),f(s[e],-4*t),f(a[e+1],-2*t)),t*t),d[e+1]=m(p(f(n,-6),f(s[e],2*t),f(a[e+1],4*t)),t*t);return new numeric.Spline(r,l,u,h,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,o=this.kl,s=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],o=[o],s=[s]);var a,c,l,u,h,d,p,f,m,g,y,v,b,x,_,w,E,S,M,I,k,T,C,A,P=r.length,O=n.length-1,t=Array(P),L=Math.sqrt;for(a=0;a!==P;++a){for(u=r[a],h=i[a],d=o[a],p=s[a],f=[],c=0;c!==O;c++){for(c>0&&h[c]*u[c]<0&&f.push(n[c]),w=n[c+1]-n[c],E=n[c],y=u[c],v=h[c+1],m=d[c]/w,g=p[c+1]/w,_=e(m-g+3*(y-v))+12*g*y,b=g+3*y+2*m-3*v,x=3*(g+m+2*(y-v)),_<=0?(M=b/x,S=M>n[c]&&M<n[c+1]?[n[c],M,n[c+1]]:[n[c],n[c+1]]):(M=(b-L(_))/x,I=(b+L(_))/x,S=[n[c]],M>n[c]&&M<n[c+1]&&S.push(M),I>n[c]&&I<n[c+1]&&S.push(I),S.push(n[c+1])),T=S[0],M=this._at(T,c),l=0;l<S.length-1;l++)if(C=S[l+1],I=this._at(C,c),0!==M)if(0===I||M*I>0)T=C,M=I;else{for(var D=0;;){if(A=(M*C-I*T)/(M-I),A<=T||A>=C)break;if(k=this._at(A,c),k*I>0)C=A,I=k,D===-1&&(M*=.5),D=-1;else{if(!(k*M>0))break;T=A,M=k,1===D&&(I*=.5),D=1}}f.push(A),T=S[l+1],M=this._at(T,c)}else f.push(T),T=C,M=I;0===I&&f.push(C)}t[a]=f}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,o=e.length,s=[],a=[],c=[],l=numeric.sub,u=numeric.mul,h=numeric.add;for(i=o-2;i>=0;i--)a[i]=e[i+1]-e[i],c[i]=l(t[i+1],t[i]);"string"!=typeof n&&"string"!=typeof r||(n=r="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":s[0]=u(3/(a[0]*a[0]),c[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/a[0],1/a[0]);break;case"string":s[0]=h(u(3/(a[o-2]*a[o-2]),c[o-2]),u(3/(a[0]*a[0]),c[0])),d[0].push(0,0,0),d[1].push(o-2,0,1),d[2].push(1/a[o-2],2/a[o-2]+2/a[0],1/a[0]);break;default:s[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(i=1;i<o-1;i++)s[i]=h(u(3/(a[i-1]*a[i-1]),c[i-1]),u(3/(a[i]*a[i]),c[i])),d[0].push(i,i,i),d[1].push(i-1,i,i+1),d[2].push(1/a[i-1],2/a[i-1]+2/a[i],1/a[i]);switch(typeof r){case"undefined":s[o-1]=u(3/(a[o-2]*a[o-2]),c[o-2]),d[0].push(o-1,o-1),d[1].push(o-2,o-1),d[2].push(1/a[o-2],2/a[o-2]);break;case"string":d[1][d[1].length-1]=0;break;default:s[o-1]=r,d[0].push(o-1),d[1].push(o-1),d[2].push(1)}s="number"!=typeof s[0]?numeric.transpose(s):[s];var p=Array(s.length);if("string"==typeof n)for(i=p.length-1;i!==-1;--i)p[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),s[i]),p[i][o-1]=p[i][0];else for(i=p.length-1;i!==-1;--i)p[i]=numeric.cLUsolve(numeric.cLU(d),s[i]);return p="number"==typeof t[0]?p[0]:numeric.transpose(p),new numeric.Spline(e,t,t,p,p)},numeric.fftpow2=function e(t,n){var r=t.length;if(1!==r){var i,o,s=Math.cos,a=Math.sin,c=Array(r/2),l=Array(r/2),u=Array(r/2),h=Array(r/2);for(o=r/2,i=r-1;i!==-1;--i)--o,u[o]=t[i],h[o]=n[i],--i,c[o]=t[i],l[o]=n[i];e(c,l),e(u,h),o=r/2;var d,p,f,m=-6.283185307179586/r;for(i=r-1;i!==-1;--i)--o,o===-1&&(o=r/2-1),d=m*i,p=s(d),f=a(d),t[i]=c[o]+p*u[o]-f*h[o],n[i]=l[o]+p*h[o]+f*u[o]}},numeric._ifftpow2=function e(t,n){var r=t.length;if(1!==r){var i,o,s=Math.cos,a=Math.sin,c=Array(r/2),l=Array(r/2),u=Array(r/2),h=Array(r/2);for(o=r/2,i=r-1;i!==-1;--i)--o,u[o]=t[i],h[o]=n[i],--i,c[o]=t[i],l[o]=n[i];e(c,l),e(u,h),o=r/2;var d,p,f,m=6.283185307179586/r;for(i=r-1;i!==-1;--i)--o,o===-1&&(o=r/2-1),d=m*i,p=s(d),f=a(d),t[i]=c[o]+p*u[o]-f*h[o],n[i]=l[o]+p*h[o]+f*u[o]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){numeric.fftpow2(e,t),numeric.fftpow2(n,r);var i,o,s,a,c,l=e.length;for(i=l-1;i!==-1;--i)o=e[i],a=t[i],s=n[i],c=r[i],e[i]=o*s-a*c,t[i]=o*c+a*s;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,s=o(2),a=Math.ceil(o(2*i-1)/s),c=Math.pow(2,a),l=numeric.rep([c],0),u=numeric.rep([c],0),h=Math.cos,d=Math.sin,p=-3.141592653589793/i,f=numeric.rep([c],0),m=numeric.rep([c],0);Math.floor(i/2);for(e=0;e<i;e++)f[e]=n[e];if("undefined"!=typeof r)for(e=0;e<i;e++)m[e]=r[e];for(l[0]=1,e=1;e<=c/2;e++)t=p*e*e,l[e]=h(t),u[e]=d(t),l[c-e]=h(t),u[c-e]=d(t);var g=new numeric.T(f,m),y=new numeric.T(l,u);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,s=o(2),a=Math.ceil(o(2*i-1)/s),c=Math.pow(2,a),l=numeric.rep([c],0),u=numeric.rep([c],0),h=Math.cos,d=Math.sin,p=3.141592653589793/i,f=numeric.rep([c],0),m=numeric.rep([c],0);Math.floor(i/2);for(e=0;e<i;e++)f[e]=n[e];if("undefined"!=typeof r)for(e=0;e<i;e++)m[e]=r[e];for(l[0]=1,e=1;e<=c/2;e++)t=p*e*e,l[e]=h(t),u[e]=d(t),l[c-e]=h(t),u[c-e]=d(t);var g=new numeric.T(f,m),y=new numeric.T(l,u);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),g=g.mul(y),g.x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,o,s,a,c,l,u,h,d,p,f=Math.max,m=numeric.clone(t),g=Array(n),f=(numeric.div,numeric.sub,Math.max),y=.001,v=Math.abs,b=Math.min,x=0;for(i=0;i<n;i++)for(var _=f(1e-6*r,1e-8);;){if(++x,x>20)throw new Error("Numerical gradient fails");if(m[i]=t[i]+_,o=e(m),m[i]=t[i]-_,s=e(m),m[i]=t[i],isNaN(o)||isNaN(s))_/=16;else{if(g[i]=(o-s)/(2*_),c=t[i]-_,l=t[i],u=t[i]+_,h=(o-r)/_,d=(r-s)/_,p=f(v(g[i]),v(r),v(o),v(s),v(c),v(l),v(u),1e-8),a=b(f(v(h-g[i]),v(d-g[i]),v(h-d))/p,_/p),!(a>y))break;_/=16}}return g},numeric.uncmin=function(e,t,n,r,i,o,s){var a=numeric.gradient;"undefined"==typeof s&&(s={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof r&&(r=function(t){return a(e,t)}),"undefined"==typeof i&&(i=1e3),t=numeric.clone(t);var c,l,u=t.length,h=e(t);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,p=numeric.norm2;n=d(n,numeric.epsilon);var f,m,g,y,v,b,x,_,w,E,S=s.Hinv||numeric.identity(u),M=numeric.dot,I=(numeric.inv,numeric.sub),k=numeric.add,T=numeric.tensor,C=numeric.div,A=numeric.mul,P=numeric.all,O=numeric.isFinite,L=numeric.neg,D=0,N="";for(m=r(t);D<i;){if("function"==typeof o&&o(D,t,h,m,S)){N="Callback returned true";break}if(!P(O(m))){N="Gradient has Infinity or NaN";break}if(f=L(M(S,m)),!P(O(f))){N="Search direction has Infinity or NaN";break}if(E=p(f),E<n){N="Newton step smaller than tol";break}for(w=1,l=M(m,f),v=t;D<i&&!(w*E<n)&&(y=A(f,w),v=k(t,y),c=e(v),c-h>=.1*w*l||isNaN(c));)w*=.5,++D;if(w*E<n){N="Line search step size smaller than tol";break}if(D===i){N="maxit reached during line search";break}g=r(v),b=I(g,m),_=M(b,y),x=M(S,b),S=I(k(S,A((_+M(b,x))/(_*_),T(y,y))),C(k(T(x,y),T(y,x)),_)),t=v,h=c,m=g,++D}return{solution:t,f:h,gradient:m,invHessian:S,iterations:D,message:N}},numeric.Dopri=function(e,t,n,r,i,o,s){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=s,this.message=o},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,o,s,a,c,e,l,u,h,d,p=this,f=p.x,m=p.y,g=p.f,y=p.ymid,v=(f.length,Math.floor,.5),b=numeric.add,x=numeric.mul,_=numeric.sub;return r=f[t],i=f[t+1],s=m[t],a=m[t+1],l=i-r,o=r+v*l,c=y[t],u=_(g[t],x(s,1/(r-o)+2/(r-i))),h=_(g[t+1],x(a,1/(i-o)+2/(i-r))),d=[n(e-i)*(e-o)/n(r-i)/(r-o),n(e-r)*n(e-i)/n(r-o)/n(i-o),n(e-r)*(e-o)/n(i-r)/(i-o),(e-r)*n(e-i)*(e-o)/n(r-i)/(r-o),(e-i)*n(e-r)*(e-o)/n(r-i)/(i-o)],b(b(b(b(x(s,d[0]),x(c,d[1])),x(a,d[2])),x(u,d[3])),x(h,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var o=e.length,s=Array(o);for(t=o-1;t!==-1;--t)s[t]=this.at(e[t]);return s}var a=this.x;for(t=0,n=a.length-1;n-t>1;)r=i(.5*(t+n)),a[r]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,o,s){"undefined"==typeof i&&(i=1e-6),"undefined"==typeof o&&(o=1e3);var a,c,l,u,h,d,p,f,m,g,y,v,b,x=[e],_=[n],w=[r(e,n)],E=[],S=.2,M=[.075,.225],I=[44/45,-56/15,32/9],k=[19372/6561,-25360/2187,64448/6561,-212/729],T=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],C=[35/384,0,500/1113,125/192,-2187/6784,11/84],A=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],P=[.2,.3,.8,8/9,1,1],O=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],L=0,D=(t-e)/10,N=0,F=numeric.add,q=numeric.mul,R=(Math.max,Math.min),j=Math.abs,V=numeric.norminf,B=Math.pow,U=numeric.any,z=numeric.lt,G=numeric.and,$=(numeric.sub,new numeric.Dopri(x,_,w,E,-1,""));for("function"==typeof s&&(y=s(e,n));e<t&&N<o;)if(++N,e+D>t&&(D=t-e),a=r(e+P[0]*D,F(n,q(S*D,w[L]))),c=r(e+P[1]*D,F(F(n,q(M[0]*D,w[L])),q(M[1]*D,a))),l=r(e+P[2]*D,F(F(F(n,q(I[0]*D,w[L])),q(I[1]*D,a)),q(I[2]*D,c))),u=r(e+P[3]*D,F(F(F(F(n,q(k[0]*D,w[L])),q(k[1]*D,a)),q(k[2]*D,c)),q(k[3]*D,l))),h=r(e+P[4]*D,F(F(F(F(F(n,q(T[0]*D,w[L])),q(T[1]*D,a)),q(T[2]*D,c)),q(T[3]*D,l)),q(T[4]*D,u))),m=F(F(F(F(F(n,q(w[L],D*C[0])),q(c,D*C[2])),q(l,D*C[3])),q(u,D*C[4])),q(h,D*C[5])),d=r(e+D,m),p=F(F(F(F(F(q(w[L],D*O[0]),q(c,D*O[2])),q(l,D*O[3])),q(u,D*O[4])),q(h,D*O[5])),q(d,D*O[6])),g="number"==typeof p?j(p):V(p),g>i){if(D=.2*D*B(i/g,.25),e+D===e){$.msg="Step size became too small";break}}else{if(E[L]=F(F(F(F(F(F(n,q(w[L],D*A[0])),q(c,D*A[2])),q(l,D*A[3])),q(u,D*A[4])),q(h,D*A[5])),q(d,D*A[6])),++L,x[L]=e+D,_[L]=m,w[L]=d,"function"==typeof s){var H,Y,X=e,W=e+.5*D;if(v=s(W,E[L-1]),b=G(z(y,0),z(0,v)),U(b)||(X=W,W=e+D,y=v,v=s(W,m),b=G(z(y,0),z(0,v))),U(b)){for(var K,Q,Z=0,J=1,ee=1;;){if("number"==typeof y)Y=(ee*v*X-J*y*W)/(ee*v-J*y);else for(Y=W,f=y.length-1;f!==-1;--f)y[f]<0&&v[f]>0&&(Y=R(Y,(ee*v[f]*X-J*y[f]*W)/(ee*v[f]-J*y[f])));if(Y<=X||Y>=W)break;H=$._at(Y,L-1),Q=s(Y,H),K=G(z(y,0),z(0,Q)),U(K)?(W=Y,v=Q,b=K,ee=1,Z===-1?J*=.5:J=1,Z=-1):(X=Y,y=Q,J=1,1===Z?ee*=.5:ee=1,Z=1)}return m=$._at(.5*(e+Y),L-1),$.f[L]=r(Y,H),$.x[L]=Y,$.y[L]=H,$.ymid[L-1]=m,$.events=b,$.iterations=N,$}}e+=D,n=m,y=v,D=R(.8*D*B(i/g,.25),4*D)}return $.iterations=N,$},numeric.LU=function(e,t){t=t||!1;var n,r,i,o,s,a,c,l,u,h=Math.abs,d=e.length,p=d-1,f=new Array(d);for(t||(e=numeric.clone(e)),i=0;i<d;++i){for(c=i,a=e[i],u=h(a[i]),r=i+1;r<d;++r)o=h(e[r][i]),u<o&&(u=o,c=r);for(f[i]=c,c!=i&&(e[i]=e[c],e[c]=a,a=e[i]),s=a[i],n=i+1;n<d;++n)e[n][i]/=s;for(n=i+1;n<d;++n){for(l=e[n],r=i+1;r<p;++r)l[r]-=l[i]*a[r],++r,l[r]-=l[i]*a[r];r===p&&(l[r]-=l[i]*a[r])}}return{LU:e,P:f}},numeric.LUsolve=function(e,t){var n,r,i,o,s,a=e.LU,c=a.length,l=numeric.clone(t),u=e.P;for(n=c-1;n!==-1;--n)l[n]=t[n];for(n=0;n<c;++n)for(i=u[n],u[n]!==n&&(s=l[n],l[n]=l[i],l[i]=s),o=a[n],r=0;r<n;++r)l[n]-=l[r]*o[r];for(n=c-1;n>=0;--n){for(o=a[n],r=n+1;r<c;++r)l[n]-=l[r]*o[r];l[n]/=o[n]}return l},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,o,s,a,c,l=numeric.dim(e),u=l[0],h=l[1],d=numeric.identity(u),p=Array(u),f=Math.abs,m=numeric.diveq;for(e=numeric.clone(e),t=0;t<u;++t){for(r=0,o=e[t],s=d[t],n=1;n<h;++n)f(o[r])<f(o[n])&&(r=n);for(p[t]=r,m(s,o[r]),m(o,o[r]),n=0;n<u;++n)if(n!==t){for(a=e[n],c=a[r],i=h-1;i!==-1;--i)a[i]-=o[i]*c;for(a=d[n],i=u-1;i!==-1;--i)a[i]-=s[i]*c}}return{I:d,A:e,P:p}},numeric.__solveLP=function(e,t,n,r,i,o,s){var a,c,l,u,h=numeric.sum,d=(numeric.log,numeric.mul),p=numeric.sub,f=numeric.dot,m=numeric.div,g=numeric.add,y=e.length,v=n.length,b=!1,x=0,_=1,w=(numeric.transpose(t),numeric.svd,numeric.transpose),E=(numeric.leq,Math.sqrt),S=Math.abs,M=(numeric.muleq,numeric.norminf,numeric.any,Math.min),I=numeric.all,k=numeric.gt,T=Array(y),C=Array(v),A=(numeric.rep([v],1),numeric.solve),P=p(n,f(t,o)),O=f(e,e);for(l=x;l<i;++l){var L,D;for(L=v-1;L!==-1;--L)C[L]=m(t[L],P[L]);var N=w(C);for(L=y-1;L!==-1;--L)T[L]=h(N[L]);_=.25*S(O/f(e,T));var F=100*E(O/f(T,T));for((!isFinite(_)||_>F)&&(_=F),u=g(e,d(_,T)),c=f(N,C),L=y-1;L!==-1;--L)c[L][L]+=1;D=A(c,m(u,_),!0);var q=m(P,f(t,D)),R=1;for(L=v-1;L!==-1;--L)q[L]<0&&(R=M(R,-.999*q[L]));if(a=p(o,d(D,R)),P=p(n,f(t,a)),!I(k(P,0)))return{solution:o,message:"",iterations:l};if(o=a,_<r)return{solution:a,message:"",iterations:l};if(s){var j=f(e,u),V=f(t,u);for(b=!0,L=v-1;L!==-1;--L)if(j*V[L]<0){b=!1;break}}else b=!(o[y-1]>=0);if(b)return{solution:a,message:"Unbounded",iterations:l}}return{solution:o,message:"maximum iteration count exceeded",iterations:l}},numeric._solveLP=function(e,t,n,r,i){var o,s=e.length,a=n.length,c=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([s],0).concat([1])),h=numeric.rep([a,1],-1),d=numeric.blockMatrix([[t,h]]),p=n,o=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),f=numeric.__solveLP(u,d,p,r,i,o,!1),m=numeric.clone(f.solution);m.length=s;var g=numeric.inf(c(n,l(t,m)));if(g<0)return{solution:NaN,message:"Infeasible",iterations:f.iterations};var y=numeric.__solveLP(e,t,n,r,i-f.iterations,m,!0);return y.iterations+=f.iterations,y},numeric.solveLP=function(e,t,n,r,i,o,s){if("undefined"==typeof s&&(s=1e3),"undefined"==typeof o&&(o=numeric.epsilon),"undefined"==typeof r)return numeric._solveLP(e,t,n,o,s);var a,c=r.length,l=r[0].length,u=t.length,h=numeric.echelonize(r),d=numeric.rep([l],0),p=h.P,f=[];for(a=p.length-1;a!==-1;--a)d[p[a]]=1;for(a=l-1;a!==-1;--a)0===d[a]&&f.push(a);var m=numeric.getRange,g=numeric.linspace(0,c-1),y=numeric.linspace(0,u-1),v=m(r,g,f),b=m(t,y,p),x=m(t,y,f),_=numeric.dot,w=numeric.sub,E=_(b,h.I),S=w(x,_(E,v)),M=w(n,_(E,i)),I=Array(p.length),k=Array(f.length);for(a=p.length-1;a!==-1;--a)I[a]=e[p[a]];for(a=f.length-1;a!==-1;--a)k[a]=e[f[a]];var T=w(k,_(I,_(h.I,v))),C=numeric._solveLP(T,S,M,o,s),A=C.solution;if(A!==A)return C;var P=_(h.I,w(i,_(v,A))),O=Array(e.length);for(a=p.length-1;a!==-1;--a)O[p[a]]=P[a];for(a=f.length-1;a!==-1;--a)O[f[a]]=A[a];return{solution:O,message:C.message,iterations:C.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+a[s]+"\n")}e instanceof String&&e.split("\n");var n,r,i,o,s=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],c=e.length,l=0,u={},h=[],d=0,p={},f=0,m=[],g=[],y=[];for(n=0;n<c;++n){i=e[n];var v=i.match(/\S*/g),b=[];for(r=0;r<v.length;++r)""!==v[r]&&b.push(v[r]);if(0!==b.length){for(r=0;r<a.length&&i.substr(0,a[r].length)!==a[r];++r);if(r<a.length){if(s=r,1===r&&(o=b[1]),6===r)return{name:o,c:m,A:numeric.transpose(g),b:y,rows:u,vars:p}}else switch(s){case 0:case 1:t("Unexpected line");case 2:switch(b[0]){case"N":0===l?l=b[1]:t("Two or more N rows");break;case"L":u[b[1]]=d,h[d]=1,y[d]=0,++d;break;case"G":u[b[1]]=d,h[d]=-1,y[d]=0,++d;break;case"E":u[b[1]]=d,h[d]=0,y[d]=0,++d;break;default:t("Parse error "+numeric.prettyPrint(b))}break;case 3:p.hasOwnProperty(b[0])||(p[b[0]]=f,m[f]=0,g[f]=numeric.rep([d],0),++f);var x=p[b[0]];for(r=1;r<b.length;r+=2)if(b[r]!==l){var _=u[b[r]];g[x][_]=(h[_]<0?-1:1)*parseFloat(b[r+1])}else m[x]=parseFloat(b[r+1]);break;case 4:for(r=1;r<b.length;r+=2)y[u[b[r]]]=(h[u[b[r]]]<0?-1:1)*parseFloat(b[r+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,o,s){function a(e){var t,r,i=this,o=e.length,s=0,a=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(e=[o++]);s<n;)i.S[s]=s++;for(s=0;s<n;s++)t=i.S[s],a=u(a+t+e[s%o]),r=i.S[a],i.S[s]=r,i.S[a]=t;i.g=function(e){var t=i.S,r=u(i.i+1),o=t[r],s=u(i.j+o),a=t[s];t[r]=a,t[s]=o;for(var c=t[u(o+a)];--e;)r=u(r+1),o=t[r],s=u(s+o),a=t[s],t[r]=a,t[s]=o,c=c*n+t[u(o+a)];return i.i=r,i.j=s,c},i.g(n)}function c(e,t,n,r,i){if(n=[],i=typeof e,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{n.push(c(e[r],t-1))}catch(e){}return n.length?n:e+("string"!=i?"\0":"")}function l(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[u(r)]=u((n^=19*t[u(r)])+e.charCodeAt(r));e="";for(r in t)e+=String.fromCharCode(t[r]);return e}function u(e){return e&n-1}t.seedrandom=function(u,h){var d,p=[];return u=l(c(h?[u,e]:arguments.length?u:[(new Date).getTime(),e,window],3),p),d=new a(p),l(d.S,e),t.random=function(){for(var e=d.g(r),t=s,a=0;e<i;)e=(e+a)*n,t*=n,a=d.g(1);for(;e>=o;)e/=2,t/=2,a>>>=1;return(e+a)/t},u},s=t.pow(n,r),i=t.pow(2,i),o=2*i,l(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;n<i;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;t<i;t++)r[t-1]=n(e[t]);return r}function r(e,t,n){var r,i,o,s,a;for(o=1;o<=n;o+=1){for(e[o][o]=1/e[o][o],a=-e[o][o],r=1;r<o;r+=1)e[r][o]=a*e[r][o];if(s=o+1,n<s)break;for(i=s;i<=n;i+=1)for(a=e[o][i],e[o][i]=0,r=1;r<=o;r+=1)e[r][i]=e[r][i]+a*e[r][o]}}function i(e,t,n,r){var i,o,s,a;for(o=1;o<=n;o+=1){for(a=0,i=1;i<o;i+=1)a+=e[i][o]*r[i];r[o]=(r[o]-a)/e[o][o]}for(s=1;s<=n;s+=1)for(o=n+1-s,r[o]=r[o]/e[o][o],a=-r[o],i=1;i<o;i+=1)r[i]=r[i]+a*e[i][o]}function o(e,t,n,r){var i,o,s,a,c,l;for(o=1;o<=n;o+=1){if(r[1]=o,l=0,s=o-1,s<1){if(l=e[o][o]-l,l<=0)break;e[o][o]=Math.sqrt(l)}else{for(a=1;a<=s;a+=1){for(c=e[a][o],i=1;i<a;i+=1)c-=e[i][o]*e[i][a];c/=e[a][a],e[a][o]=c,l+=c*c}if(l=e[o][o]-l,l<=0)break;e[o][o]=Math.sqrt(l)}r[1]=0}}function s(e,t,n,s,a,c,l,u,h,d,p,f,m,g,y,v){function b(){for(g[1]=g[1]+1,I=L,S=1;S<=d;S+=1){for(I+=1,j=-u[S],M=1;M<=s;M+=1)j+=l[M][S]*a[M];if(Math.abs(j)<Y&&(j=0),S>p)y[I]=j;else if(y[I]=-Math.abs(j),j>0){for(M=1;M<=s;M+=1)l[M][S]=-l[M][S];u[S]=-u[S]}}for(S=1;S<=m;S+=1)y[L+f[S]]=0;for(N=0,R=0,S=1;S<=d;S+=1)y[L+S]<R*y[q+S]&&(N=S,R=y[L+S]/y[q+S]);return 0===N?999:0}function x(){for(S=1;S<=s;S+=1){for(j=0,M=1;M<=s;M+=1)j+=e[M][S]*l[M][N];y[S]=j}for(k=A,S=1;S<=s;S+=1)y[k+S]=0;for(M=m+1;M<=s;M+=1)for(S=1;S<=s;S+=1)y[k+S]=y[k+S]+e[S][M]*y[M];for($=!0,S=m;S>=1;S-=1){for(j=y[S],I=O+S*(S+3)/2,k=I-S,M=S+1;M<=m;M+=1)j-=y[I]*y[P+M],I+=M;if(j/=y[k],y[P+S]=j,f[S]<p)break;if(j<0)break;$=!1,C=S}if(!$)for(V=y[D+C]/y[P+C],S=1;S<=m&&!(f[S]<p)&&!(y[P+S]<0);S+=1)R=y[D+S]/y[P+S],R<V&&(V=R,C=S);for(j=0,S=A+1;S<=A+s;S+=1)j+=y[S]*y[S];if(Math.abs(j)<=Y){if($)return v[1]=1,999;for(S=1;S<=m;S+=1)y[D+S]=y[D+S]-V*y[P+S];return y[D+m+1]=y[D+m+1]+V,700}for(j=0,S=1;S<=s;S+=1)j+=y[A+S]*l[S][N];for(B=-y[L+N]/j,H=!0,$||V<B&&(B=V,H=!1),S=1;S<=s;S+=1)a[S]=a[S]+B*y[A+S],Math.abs(a[S])<Y&&(a[S]=0);for(c[1]=c[1]+B*j*(B/2+y[D+m+1]),S=1;S<=m;S+=1)y[D+S]=y[D+S]-B*y[P+S];if(y[D+m+1]=y[D+m+1]+B,!H){for(j=-u[N],M=1;M<=s;M+=1)j+=a[M]*l[M][N];if(N>p)y[L+N]=j;else if(y[L+N]=-Math.abs(j),j>0){for(M=1;M<=s;M+=1)l[M][N]=-l[M][N];u[N]=-u[N]}return 700}for(m+=1,f[m]=N,I=O+(m-1)*m/2+1,S=1;S<=m-1;S+=1)y[I]=y[S],I+=1;if(m===s)y[I]=y[s];else{for(S=s;S>=m+1&&0!==y[S]&&(U=Math.max(Math.abs(y[S-1]),Math.abs(y[S])),z=Math.min(Math.abs(y[S-1]),Math.abs(y[S])),R=y[S-1]>=0?Math.abs(U*Math.sqrt(1+z*z/(U*U))):-Math.abs(U*Math.sqrt(1+z*z/(U*U))),U=y[S-1]/R,z=y[S]/R,1!==U);S-=1)if(0===U)for(y[S-1]=z*R,M=1;M<=s;M+=1)R=e[M][S-1],e[M][S-1]=e[M][S],e[M][S]=R;else for(y[S-1]=R,G=z/(1+U),M=1;M<=s;M+=1)R=U*e[M][S-1]+z*e[M][S],e[M][S]=G*(e[M][S-1]+R)-e[M][S],e[M][S-1]=R;y[I]=y[m]}return 0}function _(){if(I=O+C*(C+1)/2+1,k=I+C,0===y[k])return 798;if(U=Math.max(Math.abs(y[k-1]),Math.abs(y[k])),z=Math.min(Math.abs(y[k-1]),Math.abs(y[k])),R=y[k-1]>=0?Math.abs(U*Math.sqrt(1+z*z/(U*U))):-Math.abs(U*Math.sqrt(1+z*z/(U*U))),U=y[k-1]/R,z=y[k]/R,1===U)return 798;if(0===U){for(S=C+1;S<=m;S+=1)R=y[k-1],y[k-1]=y[k],y[k]=R,k+=S;for(S=1;S<=s;S+=1)R=e[S][C],e[S][C]=e[S][C+1],e[S][C+1]=R}else{for(G=z/(1+U),S=C+1;S<=m;S+=1)R=U*y[k-1]+z*y[k],y[k]=G*(y[k-1]+R)-y[k],y[k-1]=R,k+=S;for(S=1;S<=s;S+=1)R=U*e[S][C]+z*e[S][C+1],e[S][C+1]=G*(e[S][C]+R)-e[S][C+1],e[S][C]=R}return 0}function w(){for(k=I-C,S=1;S<=C;S+=1)y[k]=y[I],I+=1,k+=1;return y[D+C]=y[D+C+1],f[C]=f[C+1],C+=1,C<m?797:0}function E(){return y[D+m]=y[D+m+1],y[D+m+1]=0,f[m]=0,m-=1,g[2]=g[2]+1,0}var S,M,I,k,T,C,A,P,O,L,D,N,F,q,R,j,V,B,U,z,G,$,H,Y,X,W,K;F=Math.min(s,d),I=2*s+F*(F+5)/2+2*d+1,Y=1e-60;do Y+=Y,X=1+.1*Y,W=1+.2*Y;while(X<=1||W<=1);for(S=1;S<=s;S+=1)y[S]=t[S];for(S=s+1;S<=I;S+=1)y[S]=0;for(S=1;S<=d;S+=1)f[S]=0;if(T=[],0===v[1]){if(o(e,n,s,T),0!==T[1])return void(v[1]=2);i(e,n,s,t),r(e,n,s)}else{for(M=1;M<=s;M+=1)for(a[M]=0,S=1;S<=M;S+=1)a[M]=a[M]+e[S][M]*t[S];for(M=1;M<=s;M+=1)for(t[M]=0,S=M;S<=s;S+=1)t[M]=t[M]+e[M][S]*a[S]}for(c[1]=0,M=1;M<=s;M+=1)for(a[M]=t[M],c[1]=c[1]+y[M]*a[M],y[M]=0,S=M+1;S<=s;S+=1)e[S][M]=0;for(c[1]=-c[1]/2,v[1]=0,A=s,P=A+s,D=P+F,O=D+F+1,L=O+F*(F+1)/2,q=L+d,S=1;S<=d;S+=1){for(j=0,M=1;M<=s;M+=1)j+=l[M][S]*l[M][S];y[q+S]=Math.sqrt(j)}for(m=0,g[1]=0,g[2]=0,K=0;;){if(K=b(),999===K)return;for(;;){if(K=x(),0===K)break;if(999===K)return;if(700===K)if(C===m)E();else{for(;;)if(_(),K=w(),797!==K)break;E()}}}}function a(e,r,i,o,a,c){e=t(e),r=t(r),i=t(i);var l,u,h,d,p,f,m=[],g=[],y=[],v=[],b=[];if(a=a||0,c=c?t(c):[void 0,0],o=o?t(o):[],u=e.length-1,h=i[1].length-1,!o)for(l=1;l<=h;l+=1)o[l]=0;for(l=1;l<=h;l+=1)g[l]=0;for(d=0,p=Math.min(u,h),l=1;l<=u;l+=1)y[l]=0;for(m[1]=0,l=1;l<=2*u+p*(p+5)/2+2*h+1;l+=1)v[l]=0;for(l=1;l<=2;l+=1)b[l]=0;return s(e,r,u,u,y,m,i,o,u,h,a,g,d,b,v,c),f="",1===c[1]&&(f="constraints are inconsistent, no solution!"),2===c[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:n(y),value:n(m),unconstrained_solution:n(r),iterations:n(b),iact:n(g),message:f}}e.solveQP=a}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,r=numeric.epsilon,i=1e-64/r,o=50,s=0,a=0,c=0,l=0,u=0,h=numeric.clone(e),d=h.length,p=h[0].length;if(d<p)throw"Need more rows than columns";var f=new Array(p),m=new Array(p);for(a=0;a<p;a++)f[a]=m[a]=0;var g=numeric.rep([p,p],0),y=0,v=0,b=0,x=0,_=0,w=0,E=0;for(a=0;a<p;a++){for(f[a]=v,E=0,u=a+1,c=a;c<d;c++)E+=h[c][a]*h[c][a];if(E<=i)v=0;else for(y=h[a][a],v=Math.sqrt(E),y>=0&&(v=-v),b=y*v-E,h[a][a]=y-v,c=u;c<p;c++){for(E=0,l=a;l<d;l++)E+=h[l][a]*h[l][c];for(y=E/b,l=a;l<d;l++)h[l][c]+=y*h[l][a]}for(m[a]=v,E=0,c=u;c<p;c++)E+=h[a][c]*h[a][c];if(E<=i)v=0;else{for(y=h[a][a+1],v=Math.sqrt(E),y>=0&&(v=-v),b=y*v-E,h[a][a+1]=y-v,c=u;c<p;c++)f[c]=h[a][c]/b;for(c=u;c<d;c++){for(E=0,l=u;l<p;l++)E+=h[c][l]*h[a][l];for(l=u;l<p;l++)h[c][l]+=E*f[l]}}_=Math.abs(m[a])+Math.abs(f[a]),_>x&&(x=_)}for(a=p-1;a!=-1;a+=-1){if(0!=v){for(b=v*h[a][a+1],c=u;c<p;c++)g[c][a]=h[a][c]/b;for(c=u;c<p;c++){for(E=0,l=u;l<p;l++)E+=h[a][l]*g[l][c];for(l=u;l<p;l++)g[l][c]+=E*g[l][a]}}for(c=u;c<p;c++)g[a][c]=0,g[c][a]=0;g[a][a]=1,v=f[a],u=a}for(a=p-1;a!=-1;a+=-1){for(u=a+1,v=m[a],c=u;c<p;c++)h[a][c]=0;if(0!=v){for(b=h[a][a]*v,c=u;c<p;c++){for(E=0,l=u;l<d;l++)E+=h[l][a]*h[l][c];for(y=E/b,l=a;l<d;l++)h[l][c]+=y*h[l][a]}for(c=a;c<d;c++)h[c][a]=h[c][a]/v}else for(c=a;c<d;c++)h[c][a]=0;h[a][a]+=1}for(r*=x,l=p-1;l!=-1;l+=-1)for(var S=0;S<o;S++){var M=!1;for(u=l;u!=-1;u+=-1){if(Math.abs(f[u])<=r){M=!0;break}if(Math.abs(m[u-1])<=r)break}if(!M){s=0,E=1;var I=u-1;for(a=u;a<l+1&&(y=E*f[a],f[a]=s*f[a],!(Math.abs(y)<=r));a++)for(v=m[a],b=t(y,v),m[a]=b,s=v/b,E=-y/b,c=0;c<d;c++)_=h[c][I],w=h[c][a],h[c][I]=_*s+w*E,h[c][a]=-_*E+w*s}if(w=m[l],u==l){if(w<0)for(m[l]=-w,c=0;c<p;c++)g[c][l]=-g[c][l];break}if(S>=o-1)throw"Error: no convergence.";for(x=m[u],_=m[l-1],v=f[l-1],b=f[l],y=((_-w)*(_+w)+(v-b)*(v+b))/(2*b*_),v=t(y,1),y=y<0?((x-w)*(x+w)+b*(_/(y-v)-b))/x:((x-w)*(x+w)+b*(_/(y+v)-b))/x,s=1,E=1,a=u+1;a<l+1;a++){for(v=f[a],_=m[a],b=E*v,v*=s,w=t(y,b),f[a-1]=w,s=y/w,E=b/w,y=x*s+v*E,v=-x*E+v*s,b=_*E,_*=s,c=0;c<p;c++)x=g[c][a-1],w=g[c][a],g[c][a-1]=x*s+w*E,g[c][a]=-x*E+w*s;for(w=t(y,b),m[a-1]=w,s=y/w,E=b/w,y=s*v+E*_,x=-E*v+s*_,c=0;c<d;c++)_=h[c][a-1],w=h[c][a],h[c][a-1]=_*s+w*E,h[c][a]=-_*E+w*s}f[u]=0,f[l]=y,m[l]=x}for(a=0;a<m.length;a++)m[a]<r&&(m[a]=0);for(a=0;a<p;a++)for(c=a-1;c>=0;c--)if(m[c]<m[a]){for(s=m[c],m[c]=m[a],m[a]=s,l=0;l<h.length;l++)n=h[l][a],h[l][a]=h[l][c],h[l][c]=n;for(l=0;l<g.length;l++)n=g[l][a],g[l][a]=g[l][c],g[l][c]=n;a=c}return{U:h,S:m,V:g}},numeric}),define("math/parsenode/optimizedregression",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e,n,r,i,o){t.init.call(this),this.parameters=e,this.residuals=n,this.statistics=r,this.model=i,this.isModelValid=o.isModelValid,this.residualVariable=o.residualVariable,this.residualSuggestionId=o.residualSuggestionId,this.shouldSuggestLogMode=o.shouldSuggestLogMode,this._exports=[this.residualVariable];for(var s in e)e.hasOwnProperty(s)&&this._exports.push(s);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("math/parsenode/regression",["require","pjs","./base","numeric","math/distance","math/builtin","graphing/label","math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","math/types"],function(e){var t=e("pjs"),n=e("./base"),r=e("numeric"),i=e("math/distance"),o=e("math/builtin"),s=e("graphing/label"),a=e("math/errormsg"),c=e("./error"),l=e("./optimizedregression"),u=e("./list"),h=e("./functioncall"),d=e("./identifier"),p=e("./constant"),f=e("./freevariable"),m=e("./expressionTypes"),g=e("math/types"),y=m.Subtract;return t(n,function(e,t,n){function m(e,t){for(var n=0,r=e.fn.apply(void 0,t),i=0;i<r.length;i++){var o=r[i];n+=o*o}return n/r.length}function v(e,t){return e.fn.apply(void 0,t)}function b(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r].fn.apply(void 0,t);n.push(i)}return n}function x(e,t,n,i,o){for(var s=[],a=0;a<t.length;a++)s.push(0);for(var c=b(t,s),l=r.LU(r.dot(c,r.transpose(c)),!0),u=s,h=0;h<2;h++){var d=v(e,s),p=r.neg(r.LUsolve(l,r.dot(c,d)));if(!r.all(r.isFinite(p)))return w(e,t,n,i,o);s=r.add(u,p),u=s}return{solution:s,MSE:m(e,s)}}function _(e,t,n,i){for(var o=n,s=m(e,o),a=.001,c=2,l=.1,u=[],h=0;h<t.length;h++)u.push(1);for(var d=0,p=!1,f=b(t,o),g=o,y=s;d<i&&!p;){var x=v(e,o),_=r.transpose(f),w=r.dot(f,_);if(!r.all(r.isFinite(x)))break;if(!r.all(r.isFinite(w)))break;for(var E=!1;d<i&&!p&&!E;){d+=1;var S=r.LU(r.add(w,r.diag(r.mul(a,u))),!0),M=r.neg(r.LUsolve(S,r.dot(f,x))),I=M;if(o=r.add(g,I),s=m(e,o),p=r.all(r.eq(o,g))){g=o,y=s;break}var k;if(isFinite(s)&&s<=y&&(k=b(t,o),E=r.all(r.isFinite(k))),E){f=k,g=o,y=s,a*=l,a=Math.max(1e-64,a);break}a*=c}}return{solution:g,MSE:m(e,g)}}function w(e,t,n,r,o){var s,a=[];for(r||(r={}),o||(o={}),s=0;s<n.length;s++){var c=n[s];o[c]&&isFinite(o[c].constantValue)?a.push(+o[c].constantValue):r.hasOwnProperty(c)&&isFinite(r[c])?a.push(+r[c]):a.push(1)}var l=T(30,n),u=C(e,t,l,3,5),h=C(e,t,u,60,1),d=_(e,t,h[0],250),p=_(e,t,a,100);return isFinite(p.MSE)?p.MSE<d.MSE?p:i.approx(p.MSE,d.MSE,8)?p:d:d}function E(e,t,n,r){var i,o,s=t.getDependencies();for(o=0;o<s.length;o++)if(!e.validRegressionParameter(s[o]))throw a.invalidRegressionParameter(s[o]);var c=t.getCompiledFunction(s);if(s.length){var l={};for(o=1;o<s.length;o++)l[s[o]]=f(s[0]);var u=t.substitute(l).isLinear(s[0]),h=[];for(o=0;o<s.length;o++)h.push(t.takeDerivative(s[o]).getCompiledFunction(s));i=u?x(c,h,s,n,r):w(c,h,s,n,r)}else i={solution:[],MSE:m(c,[])};var d={};for(o=0;o<s.length;o++)d[s[o]]=p(i.solution[o]);return d}function S(e,t){var n=e.length,r=e[0],o=t[0],s=e[n-1],a=t[n-1];if(!(isFinite(r)&&isFinite(s)&&isFinite(o)&&isFinite(a)))return!1;if(a-o===0)return!1;var c=s-r;if(0===c)return!1;for(var l=1;l<n-1;l++){var u=e[l],h=t[l],d=(a*(u-r)+o*(s-u))/c;if(!i.approx(h,d,5))return!1}return!0}function M(e,t,n){var r=Object.create(t);for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return u.wrap(e.getConcreteTree(r))}e.init=function(e,n){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof d||e instanceof u,this._logLhs=h("ln",[e]),this._rhs=n,this._difference=y([e,n]),this._logDifference=y([h("ln",[e]),h("ln",[n])]),this.mergeDependencies(e,n)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=s.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var n,r=this.getDependencies(),i=0;i<r.length;i++){var o=r[i].match(/_(.*)/);if(o&&(n="e_"+o[1],!e[n]))return n}for(var a=1;;){if(n="e_"+a,!e[n])return n;a++}},e.getRHSModel=function(e,t){function n(e,t){for(var n=0;n<r.length;n++)if(r[n].node===this)return r[n].tmpVar;var o=f(this.tmpVar()),s=this.getConcreteTree(e);return s.getDependencies().length&&(i=!1),r.push({node:this,tmpVar:o,symbol:o._symbol,concrete:s}),o}var r=[],i=!0,o={List:n,TableColumn:n,Range:n},s=this._rhs.tryGetConcreteTree(e,o);return{node:s,substituted:s.isError?s:s.substitute(t),replacedNodes:r,isValid:i}};var I=[18.9,.105,.0113,.089,4.414,34.32,8.61,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1.89,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777],k=function(e){var t=503*e%I.length;return I[t]},T=function(e,t){for(var n,r=[],i=t.length,o=0;o<e;o++){n=[];for(var s=0;s<i;s++)0===o?n[s]=0:1===o?n[s]=1:n[s]=k(o*i+s);r.push(n)}return r},C=function(e,t,n,r,i){for(var o=[],s=0;s<n.length;s++)o.push({soln:_(e,t,n[s],r),startingVals:n[s]});o.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var a=[],c=0;c<i;c++)a.push(o[c].startingVals);return a};e.computeStatistics=function(e,t,n,r,s){if(n.getDependencies().length)throw a.optimizationError();var c=0;n.eachElement(function(e){var t=e.constantValue;c+=t*t});var l=c/n.length;if(!isFinite(l))throw a.optimizationError();if(e.getDependencies().length>0)return{RMSE:Math.sqrt(l)};var h=g.isList(e.valueType)?o.varp(e.asValue()):0;if(e.getDependencies().length||!isFinite(h)||h<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(l)};var d=1-l/h;if(t.isValid&&1===t.replacedNodes.length){var p=[],f=[],m=r&&(s===A.LINLOG||s===A.LOGLOG);u.eachArgs([t.replacedNodes[0].concrete,e],function(e){p.push(m?Math.log(e[0].constantValue):+e[0].constantValue),f.push(+e[1].constantValue)});var y=o.corr(p,f);if(i.approx(y*y,d,8))return{r:y,rsquared:y*y}}return{Rsquared:d}},e.getResidualSuggestionId=function(e,t){var n,r=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var o=t[i].rawTree.columns;if(o&&o.length){var s=o[0].getExports();if(1===s.length&&r.indexOf(s[0])!==-1){for(var a=1;a<o.length;a++)if(o[a].getDependencies().indexOf(e)!==-1)return;n=n?n:i}}}return n?n:void 0};var A={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t){if(!this.isLhsSimple)return A.NONE;var n=t.substituted;if(n.isError)return A.NONE;if(n.valueType!==g.Number)return A.NONE;var r=n.getDependencies();if(1!==r.length)return A.NONE;if(isFinite(t.node.polynomialOrder(r[0])))return A.NONE;var i=n.getCompiledFunction(r).fn,o=t.replacedNodes[0].concrete;if(n.valueType!==g.Number)return A.NONE;var s=o.mapElements(function(e){return+e.constantValue});if(s.length<3)return A.NONE;s.sort(function(e,t){return e-t});var a=s.map(i),c=a.map(Math.log),l=s.map(Math.log),h=!0;return u.wrap(e).eachElement(function(e){isFinite(Math.log(+e.constantValue))||(h=!1)}),S(s,c)&&h?A.LOGLIN:S(l,c)&&h?A.LOGLOG:S(l,a)?A.LINLOG:A.NONE},e.optimize=function(e,t,n,r,i){var o=this._lhs.getConcreteTree(t),a=this._rhs.getConcreteTree(t);
this.typeCheck([o,a]);var c,h=u.wrap(this._difference.getConcreteTree(t)),d=E(e,h,this.userData.regressionParameters,r),p=this.getRHSModel(t,d),f=M(this._difference,t,d),m=this.linearizingTransformation(o,p);if(!this.userData.isLogModeRegression||m!==A.LOGLIN&&m!==A.LOGLOG)c=this.computeStatistics(o,p,f,this.userData.isLogModeRegression,m);else{var g=this._logDifference.getConcreteTree(t),y=this._logLhs.getConcreteTree(t);d=E(e,g,this.userData.regressionParamters,r),p=this.getRHSModel(t,d),f=M(this._difference,t,d);var v=M(this._logDifference,t,d);c=this.computeStatistics(y,p,v,this.userData.isLogModeRegression,m)}var b=this.chooseResidualVariable(n),x=this.getResidualSuggestionId(b,i);return this.userData.residualVariable=s.identifierToLatex(b),l(d,f,c,p.substituted,{isModelValid:p.isValid,residualVariable:b,residualSuggestionId:x,shouldSuggestLogMode:m!==A.NONE})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){if(e instanceof c)return e;throw e}},e.exportTo=function(e,t,n){if(!t.isError){for(var r in t.parameters)t.parameters.hasOwnProperty(r)&&(e.assignmentForbidden(r)||(n[r]=n[r]?a.multiplyDefined(r):t.parameters[r]));e.assignmentForbidden(t.residualVariable)||(n[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("math/parsenode/image",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t,n,r){e.isImage=!0,e.init=function(e,n){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.moveStrategy=n,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height)}})}),define("math/parsenode/table",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var n=0;n<e.length;n++)Array.prototype.push.apply(this._exports,e[n].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,n){for(var r=0;r<this.columns.length;r++){var i=this.columns[r].getExports();if(i.length){var o=i[0];e.assignmentForbidden(o)||n[o]||(t.isError?n[o]=t:this.columns[r].exportTo(e,t.columns[r],n))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){var t=e("pjs"),n=e("./base"),r=e("./list"),i=e("./constant"),o=e("./identifier");return t(n,function(e,t){function s(e){return e.isError?i(NaN):e}e.init=function(e,n,r){t.init.call(this),this.header=e,this.length=n,this.values=r,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof o?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var o=e[0];if(t.isError)i[o]=t;else try{i[o]=r(t.values.map(s))}catch(e){if(!(e instanceof n))throw e;i[o]=e}}},e.exportTo=function(e,t,n){var r=this.getLegalExports(e);this._exportSymbolsTo(r,t,n)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("math/parsenode/solvedequation",["require","pjs","./base"],function(e){var t=e("pjs"),n=e("./base");return t(n,function(e,t){e.init=function(e,n){t.init.call(this),this._symbol=e,this._expression=n,this.mergeDependencies(n)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("parsenodes",["require","math/parsenode/expressionTypes","math/parsenode/base","math/parsenode/expression","math/parsenode/scalarexpression","math/parsenode/error","math/parsenode/constant","math/parsenode/identifier","math/parsenode/ans","math/parsenode/freevariable","math/parsenode/dummyindex","math/parsenode/list","math/parsenode/range","math/parsenode/broadcast","math/parsenode/listaccess","math/parsenode/orderedpair","math/parsenode/movablepoint","math/parsenode/orderedpairaccess","math/parsenode/polygon","math/parsenode/basecomparator","math/parsenode/comparator","math/parsenode/doubleinequality","math/parsenode/repeatedoperator","math/parsenode/sum","math/parsenode/product","math/parsenode/integral","math/parsenode/functioncall","math/parsenode/functionexponent","math/parsenode/prime","math/parsenode/piecewise","math/parsenode/derivative","math/parsenode/builtinfunction","math/parsenode/nativefunction","math/parsenode/typedfunction","math/parsenode/reducerfunction","math/parsenode/parametrizedreducerfunction","math/parsenode/doublereducerfunction","math/parsenode/assignment","math/parsenode/functiondefinition","math/parsenode/equation","math/parsenode/regression","math/parsenode/image","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/solvedequation","math/parsenode/optimizedregression"],function(e){var t=e("math/parsenode/expressionTypes"),n={Base:e("math/parsenode/base"),Expression:e("math/parsenode/expression"),ScalarExpression:e("math/parsenode/scalarexpression"),Error:e("math/parsenode/error"),Constant:e("math/parsenode/constant"),Identifier:e("math/parsenode/identifier"),Ans:e("math/parsenode/ans"),FreeVariable:e("math/parsenode/freevariable"),DummyIndex:e("math/parsenode/dummyindex"),List:e("math/parsenode/list"),Range:e("math/parsenode/range"),Broadcast:e("math/parsenode/broadcast"),ListAccess:e("math/parsenode/listaccess"),OrderedPair:e("math/parsenode/orderedpair"),MovablePoint:e("math/parsenode/movablepoint"),OrderedPairAccess:e("math/parsenode/orderedpairaccess"),Polygon:e("math/parsenode/polygon"),BaseComparator:e("math/parsenode/basecomparator"),Comparator:e("math/parsenode/comparator"),DoubleInequality:e("math/parsenode/doubleinequality"),RepeatedOperator:e("math/parsenode/repeatedoperator"),Sum:e("math/parsenode/sum"),Product:e("math/parsenode/product"),Integral:e("math/parsenode/integral"),FunctionCall:e("math/parsenode/functioncall"),FunctionExponent:e("math/parsenode/functionexponent"),Prime:e("math/parsenode/prime"),Piecewise:e("math/parsenode/piecewise"),Derivative:e("math/parsenode/derivative"),BuiltInFunction:e("math/parsenode/builtinfunction"),NativeFunction:e("math/parsenode/nativefunction"),TypedFunction:e("math/parsenode/typedfunction"),ReducerFunction:e("math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("math/parsenode/doublereducerfunction"),Assignment:e("math/parsenode/assignment"),FunctionDefinition:e("math/parsenode/functiondefinition"),Equation:e("math/parsenode/equation"),Regression:e("math/parsenode/regression"),Image:e("math/parsenode/image"),Table:e("math/parsenode/table"),TableColumn:e("math/parsenode/tablecolumn"),SolvedEquation:e("math/parsenode/solvedequation"),OptimizedRegression:e("math/parsenode/optimizedregression")};for(var r in t)n[r]=t[r];for(var i in n)n.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(n[i].prototype.type=i);for(var o in n.Comparator)n.Comparator.hasOwnProperty(o)&&(n.Comparator[o].prototype.type="Comparator['"+o+"']");for(var s in n.BuiltInFunction)n.BuiltInFunction.hasOwnProperty(s)&&(n.BuiltInFunction[s].prototype.type="BuiltInFunction['"+s+"']");return n}),define("math/inverses",[],function(){var e={},t=["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"];return t.forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("math/baseparser",["require","jison","parsenodes","math/inverses","math/errormsg"],function(e){function t(){throw c.featureUnavailable()}function n(e){e=e||[];for(var n in s)o[n]=e.indexOf(n)<0?s[n]:t}function r(e){var t="\\operatorname";return e.slice(0,t.length)===t?"\\"+e.slice(t.length+1,e.length-1):e}var i=e("jison"),o=i.yy,s=e("parsenodes"),a=e("math/inverses"),c=e("math/errormsg"),l=function(e,t){t=t||{};var r,a;try{return r=o.currentIndex,o.currentIndex=t.index,n(t.disabledFeatures),a=i.parse("###"+e),o.currentIndex=r,a}catch(e){return e instanceof s.Error?e:c.parseError()}};return o.ErrorMsg=c,o.setInput=function(e,t){e.setInputString(o.lexer.matched.slice(Math.max(3,t.first_column),t.last_column))},n(),o.inverses=a,o.parseFunctionDeclaration=function(e){e=e.replace("###","");var t="(?:\\s|\\\\space|\\\\ |\\\\\\:)*",n="(?:\\\\operatorname\\{[a-zA-Z]+\\}|[a-zA-Z]|\\\\[a-zA-Z]+)",i="(?:_[a-zA-Z0-9]|_{[a-zA-Z0-9]+})?",o=n+i,a="(?:"+o+"(?:\\,"+o+")*)",c="("+o+")(?:\\\\left)?\\(("+a+")(?:\\\\right)?\\)=",l=new RegExp(c),u=new RegExp(t,"g");e=e.replace(u,"");var h=l.exec(e);return{identifier:s.Identifier(r(h[1])),args:h[2].split(",").map(function(e){return s.Identifier(e)})}},{parse:l}}),define("math/rational-arithmetic-sequence",["require","math/distance","math/builtin"],function(e){function t(e,t){var i=r.toFraction(e),o=r.toFraction(t);if(n.approx(i.n/i.d,e)&&n.approx(o.n/o.d,t)){var s=r.lcm(i.d,o.d),a=i.n*(s/i.d),c=o.n*(s/o.d),l=c-a;return{nstart:a,nstep:l,lcm:s}}}var n=e("math/distance"),r=e("math/builtin");return t}),define("math/features/getConcreteTree",["require","parsenodes","math/errormsg","math/types","graphing/label","math/distance","math/rational-arithmetic-sequence"],function(e){function t(e,t,n,r,i){if(n<e.length&&!c.approx(i,e.elementAt(n).constantValue,10))throw o.nonArithmeticRange();if(r-n<=t.length&&r-n>1&&!c.approx(i,t.elementAt(t.length-r+n).constantValue,10))throw o.nonArithmeticRange()}function n(e,t){for(var n=!1,r=!1,i=0;i<e.length;i++){var o=e[i];(o.isList||o.isBroadcast)&&(r=!0);for(var s=o.getDependencies(),a=0;a<s.length;a++)if(t.indexOf(s[a])!==-1){if(o.isList||o.isBroadcast)return"list"}else n=!0}return r?n?"broadcast":"list":"none"}function r(e){var t,n=[],r=[],o=[];for(t=0;t<e.length;t++){var a,c=e[t];if(c.isList){for(var l=!1,u=0;u<o.length;u++)if(c===o[u]){l=!0,a=i.DummyIndex(r[u]),a.valueType=s.elementType(c.valueType),n.push(a);break}if(!l){var h=i.Base.prototype.tmpVar();r.push(h),o.push(c),a=i.DummyIndex(h),a.valueType=s.elementType(c.valueType),n.push(a)}}else c.isBroadcast?(Array.prototype.push.apply(r,c._replacedSymbols),Array.prototype.push.apply(o,c._lists),n.push(c._expression)):n.push(c)}return{replacedArgs:o,concreteArgs:n,replacedSymbols:r}}var i=e("parsenodes"),o=e("math/errormsg"),s=e("math/types"),a=e("graphing/label"),c=e("math/distance"),l=e("math/rational-arithmetic-sequence"),u=i.List,h=i.OrderedPair,d=i.ScalarExpression,p=i.Constant,f=i.Multiply,m=i.Identifier,g=i.DummyIndex,y=i.BuiltInFunction;i.Base.prototype.getConcreteTree=function(e,t){if(t)return this._getConcreteTree(e,t);if(this.isConcreteTreeCacheValid(e))return this.__cachedConcreteTree.value;for(var n=this._getConcreteTree(e,t),r={},i=this.getCacheKeys().slice();;){if(!i.length)break;var o=i.pop();if(!r.hasOwnProperty(o)){var s=e[o];r[o]=s,s&&Array.prototype.push.apply(i,s.getCacheKeys())}}return this.__cachedConcreteTree={keys:r,value:n},n},i.Base.prototype.getCacheKeys=function(){return this.getDependencies()},i.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},i.PercentOf.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):i.Divide([i.Multiply(this.args),i.Constant(100)]).getConcreteTree(e,t)},i.Assignment.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this._expression.getConcreteTree(e,t)},i.Identifier.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=e[this._symbol];if(n){if(n.isError)throw n;return n.isFunction?n.getConcreteInvocationTree(e,[],t):n.getConcreteTree(e,t)}if(y.hasOwnProperty(this._symbol))throw o.functionUnsupported(a.latexToIdentifier(this.getInputString()));return i.FreeVariable(this._symbol)},i.Ans.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(void 0===e[this._symbol])throw o.ansUndefined();return m.prototype._getConcreteTree.call(this,e,t)},i.Equation.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this.asComparator().getConcreteTree(e,t)},i.Constant.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this.constantValue)},i.Derivative.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n;if(e[this._symbol]){var r=Object.create(e);r[this._symbol]=i.FreeVariable(this._symbol);var a=e[this._symbol].getConcreteTree(e,t);if(a.valueType!==s.Number&&a.valueType!==s.ListOfNumber)throw o.derivativeVariableTypeError(this._symbol,[s.prettyPrint(a.valueType)]);var c={};return c[this._symbol]=a,n=this.args[0].getConcreteTree(r,t),this.typeCheck([n]),n.takeDerivative(this._symbol).substitute(c).getConcreteTree(e,t)}return n=this.args[0].getConcreteTree(e,t),this.typeCheck([n]),n.takeDerivative(this._symbol).getConcreteTree(e,t)},i.DoubleInequality.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor([i.Piecewise([this._indicator,this._expressions[0],p(NaN)]).getConcreteTree(e,t),this._operators[0],m(this._symbol),this._operators[1],i.Piecewise([this._indicator,this._expressions[1],p(NaN)]).getConcreteTree(e,t)])},i.Expression.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=[],r=0;r<this.args.length;r++)n.push(this.args[r].getConcreteTree(e,t));return this.typeCheck(n),this._constantCollapsedCopy(n)},i.Error.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},i.FreeVariable.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):this},i.FunctionCall.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=e[this._symbol];if(n&&n.isError)throw n;if(!n||!n.isFunction){if(y.hasOwnProperty(this._symbol))throw o.functionUnsupported(a.latexToIdentifier(this._identifier.getInputString()));if(1==this.args.length){var r=[m(this._symbol),this.args[0]];return f(r).getConcreteTree(e,t)}if(n)throw o.variableAsFunction(this._symbol);throw o.functionNotDefined(this._symbol)}for(var i=[],s=0;s<this.args.length;s++){var c=this.args[s].getConcreteTree(e,t);i.push(c)}return n.getConcreteInvocationTree(e,i,t)},i.FunctionExponent.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args[0]._symbol;return e[n]&&e[n].isFunction?i.Exponent([i.FunctionCall(n,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):f([this.args[0],i.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},i.FunctionDefinition.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=0;n<this._argSymbols.length;n++){if(e[this._argSymbols[n]])throw o.parameterAlreadyDefined(this._argSymbols[n]);if(this._argSymbols[n]===this._symbol)throw o.parameterAlreadyDefined(this._argSymbols[n])}return this._expression.getConcreteTree(e,t)},i.Image.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):i.Image({center:this.center.tryGetConcreteTree(e,t),radianAngle:this.radianAngle.tryGetConcreteTree(e,t),width:this.width.tryGetConcreteTree(e,t),height:this.height.tryGetConcreteTree(e,t)},this.moveStrategy)},i.Integral.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(e[this._differential._symbol])throw o.shadowedIntegrationVariable(this._differential._symbol);var n=this.args[0],r=this.args[1],i=this.args[2];if(r.dependsOn(n._symbol)||i.dependsOn(n._symbol))throw o.badIntegralBoundDependency(n._symbol);var s=Object.create(e);s[this._differential._symbol]=g(this._differential._symbol);var a=d.prototype._getConcreteTree.call(this,s,t);return a},i.ListAccess.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.index.getConcreteTree(e,t),r=this.list.getConcreteTree(e,t),i=[r,n];return this.typeCheck(i),this._constantCollapsedCopy(i)},i.List.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=[],r=0;r<this.args.length;r++){var i=this.args[r].getConcreteTree(e,t);n.push(i)}return this.typeCheck(n),new this.constructor(n)},i.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var o=[],s=0;s<this.args.length;s++)o.push(this.args[s].getConcreteTree(e,t));switch(n([o[1]],this.getDummyDependencies())){case"none":return this.typeCheck(o),this._constantCollapsedCopy(o);case"list":return i.List(i.List.mapArgs([o[1]],function(e){return e=[o[0]].concat(e),this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var a=r([o[1]]),c=[o[0]].concat(a.concreteArgs);return this.typeCheck(c),i.Broadcast(a.replacedSymbols,[this.copyWithArgs(c)].concat(a.replacedArgs))}},i.Prime.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args[0],r=n.args[0];if(!e[n._symbol])throw o.functionNotDefined(n._symbol);var i,s=this.tmpVar();if("logbase"===n._symbol){if(2!==n.args.length)throw o.primedFunctionArity();i=[m(s),n.args[1]]}else{if(1!==n.args.length)throw o.primedFunctionArity();i=[m(s)]}for(var a=n.copyWithArgs(i).getConcreteTree(e,t),c=0;c<this.order;c++)a=a.takeDerivative(s);var l={};return l[s]=r,a.substitute(l).getConcreteTree(e,t)},i.Range.prototype._getConcreteTree=function(e,n){if(n&&n[this.type])return n[this.type].call(this,e,n);var r=this.beginning.getConcreteTree(e,n),i=this.end.getConcreteTree(e,n);if(r.getDependencies().length)throw o.variableRange(r.getDependencies());if(i.getDependencies().length)throw o.variableRange(i.getDependencies());if(!r.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var s,a,c=r.elementAt(0).constantValue,h=i.elementAt(i.length-1).constantValue,d=h-c;if(1===r.length)s=d>=0?1:-1;else{var f=r.elementAt(1).constantValue;a=l(c,f),s=r.elementAt(1).constantValue-c}var m=Math.round(d/s)+1;if(!isFinite(m)||m<r.length||m<i.length)throw o.nonArithmeticRange();var g,y,v=[];if(a){var b=a.nstart;for(g=0;g<m;g++)y=b/a.lcm,t(r,i,g,m,y),v.push(p(y)),b+=a.nstep}else for(v.push(p(c)),g=1;g<m;g++)y=c+g*s,t(r,i,g,m,y),v.push(p(y));return u(v)},i.ReducerFunction.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(0===this.args.length)throw o.zeroArgReducer(this._symbol);for(var s=[],a=0;a<this.args.length;a++)s.push(this.args[a].getConcreteTree(e,t));if(1===this.args.length)return s=[i.List.wrap(s[0])],this.typeCheck(s),this._constantCollapsedCopy(s);switch(n(s,this.getDummyDependencies())){case"none":return s=[i.List(s)],this.typeCheck(s),this._constantCollapsedCopy(s);case"list":return i.List(i.List.mapArgs(s,function(e){return e=[i.List(e)],this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var c=r(s);return s=[i.List(c.concreteArgs)],this.typeCheck(s),i.Broadcast(c.replacedSymbols,[this.copyWithArgs(s)].concat(c.replacedArgs))}},i.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);if(e[this._index._symbol])throw o.shadowedIndex(this._index._symbol);var n=Object.create(e);n[this._index._symbol]=g(this._index._symbol);var r=d.prototype._getConcreteTree.call(this,n,t);return r},i.ScalarExpression.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var o=[],s=0;s<this.args.length;s++)o.push(this.args[s].getConcreteTree(e,t));switch(n(o,this.getDummyDependencies())){case"none":return this.typeCheck(o),this._constantCollapsedCopy(o);case"list":return i.List(i.List.mapArgs(o,function(e){return this.typeCheck(e),this._constantCollapsedCopy(e)}.bind(this)));case"broadcast":var a=r(o);return this.typeCheck(a.concreteArgs),i.Broadcast(a.replacedSymbols,[this.copyWithArgs(a.concreteArgs)].concat(a.replacedArgs))}},i.Regression.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._lhs,this._rhs)},i.Polygon.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);var n=this.args.map(function(t){return t.getConcreteTree(e)});return this.typeCheck(n),1===n.length&&n[0].valueType===s.ListOfPoint?new this.constructor(n):n.every(function(e){return e.valueType===s.Point})?new this.constructor([u(n)]):2===n.length?new this.constructor([h(this.args).getConcreteTree(e)]):o.parseError()},i.SolvedEquation.prototype._getConcreteTree=function(e,t){return t&&t[this.type]?t[this.type].call(this,e,t):new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},i.Table.prototype._getConcreteTree=function(e,t){if(t&&t[this.type])return t[this.type].call(this,e,t);for(var n=[],r=Object.create(e),i=0;i<this.columns.length;i++){var o=this.columns[i].getConcreteTree(r,e,t);o.isIndependent&&this.columns[i].exportToLocal(o,r),n.push(o)}return new this.constructor(n)},i.TableColumn.prototype._getConcreteTree=function(e,t){var n,r,i=this.header.getConcreteTree(e);if(i.isFreeVariable){n=[];for(var a=0;a<this.values.length;a++)if(this.values[a].tableError())n.push(o.invalidTableEntry(this.values[a].tableError()));else{var c=this.values[a].tryGetConcreteTree(e);c.isError?n.push(c):c.tableError()?n.push(o.invalidTableEntry(c.tableError())):c.valueType===s.Number?n.push(c):n.push(o.tableEntryTypeError([s.prettyPrint(c.valueType)]))}return r=new this.constructor(i,this.length,n),r.isIndependent=!0,r}if(i.isConstant){for(var l=[],u=0;u<this.length;u++)l.push(i);n=l}else n=i.isList?i.args:[];return i=this.header.getConcreteTree(t),i.isError||i.valueType===s.Number||i.valueType===s.ListOfNumber||(i=o.tableHeaderTypeError([s.prettyPrint(i.valueType)])),r=new this.constructor(i,this.length,n)}}),define("math/features/getValueType",["require","parsenodes","math/types"],function(e){function t(){return s.Number}function n(){return s.Bool}function r(){return s.Point}function i(){return s.Any}var o=e("parsenodes"),s=e("math/types"),a={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:n,Piecewise:function(e){return e[1].valueType},BaseComparator:n,RepeatedOperator:t,List:function(e){if(0===e.length)return s.ListOfAny;for(var t=e[0].valueType,n=1;n<e.length;n++)if(e[n].valueType!==t)return s.ListOfAny;return s.listType(t)},ListAccess:function(e){return s.elementType(e[0].valueType)},Broadcast:function(e){return s.listType(e[0].valueType)},OrderedPairAccess:t,OrderedPair:r,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,DummyIndex:t,FreeVariable:t,Constant:function(){switch(typeof this.constantValue){case"number":return s.Number;case"boolean":return s.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}},TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:i};for(var c in a)o[c].prototype._getValueType=a[c]}),define("math/features/typeCheck",["require","parsenodes","math/types","math/errormsg"],function(e){function t(e){for(var t=[],n=0;n<e.length;n++)t.push(i.prettyPrint(e[n].valueType));return t}function n(e,n){return function(r){for(var i=0;i<r.length;i++)if(r[i].valueType!==e[i])throw n(t(r))}}var r=e("parsenodes"),i=e("math/types"),o=e("math/errormsg"),s={Add:n([i.Number,i.Number],o.addTypeError),Multiply:n([i.Number,i.Number],o.multiplyTypeError),Divide:n([i.Number,i.Number],o.divideTypeError),Subtract:n([i.Number,i.Number],o.subtractTypeError),Exponent:n([i.Number,i.Number],o.exponentTypeError),Negative:n([i.Number],o.negativeTypeError),BaseComparator:n([i.Number,i.Number],o.comparatorTypeError),And:n([i.Bool,i.Bool],o.andTypeError),List:function(e){if(0!==e.length){var t=e[0].valueType;if(!i.hasListType(t))throw o.listTypeError([i.prettyPrint(t)]);for(var n=0;n<e.length;n++){var r=e[n].valueType;if(!i.hasListType(r))throw o.listTypeError([i.prettyPrint(r)]);if(r!==t)throw o.heterogeneousList()}}},Broadcast:function(e){},OrderedPair:n([i.Number,i.Number],o.pointTypeError),Piecewise:function(e){if(e[0].valueType!==i.Bool)throw o.piecewiseConditionTypeError(t(e));if(e[1].valueType!==i.Number)throw o.piecewiseBranchTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw o.piecewiseBranchTypeError([i.prettyPrint(e[2].valueType)])},ListAccess:function(e){if(!i.isList(e[0].valueType)||e[1].valueType!==i.Number)throw o.indexTypeError(t(e))},OrderedPairAccess:n([i.Point,i.Number],o.indexTypeError),Sum:function(e){if(e[1].valueType!==i.Number)throw o.sumLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw o.sumUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw o.sumArgumentTypeError([i.prettyPrint(e[3].valueType)])},Product:function(e){if(e[1].valueType!==i.Number)throw o.productLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw o.productUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw o.productArgumentTypeError([i.prettyPrint(e[3].valueType)])},Integral:function(e){if(e[1].valueType!==i.Number)throw o.integralLowerBoundTypeError([i.prettyPrint(e[1].valueType)]);if(e[2].valueType!==i.Number)throw o.integralUpperBoundTypeError([i.prettyPrint(e[2].valueType)]);if(e[3].valueType!==i.Number)throw o.integralArgumentTypeError([i.prettyPrint(e[3].valueType)])},NativeFunction:function(e){for(var n=0;n<e.length;n++)if(e[n].valueType!==i.Number)throw o.functionTypeError(this._symbol,t(e))},ReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw o.functionTypeError(this._symbol,t(e))},DoubleReducerFunction:function(e){if(!i.isList(e[0].valueType)||!i.isList(e[1].valueType))throw o.nonListDoubleReducer(this._symbol);if(e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.ListOfNumber)throw o.functionTypeError(this._symbol,t(e))},ParametrizedReducerFunction:function(e){if(e[0].valueType!==i.ListOfNumber)throw o.nonListParametrizedReducer(this._symbol);if(e[1].valueType!==i.Number)throw o.functionTypeError(this._symbol,t(e))},TypedFunction:function(e){for(var n=0;n<e.length;n++)if(e[n].valueType!==this._inputTypes[n])throw o.functionTypeError(this._symbol,t(e))},Derivative:function(e){if(e[0].valueType!==i.Number&&e[0].valueType!==i.ListOfNumber)throw o.derivativeTypeError(t(e))},Regression:function(e){if(e[0].valueType!==i.Number&&e[0].valueType!==i.ListOfNumber||e[1].valueType!==i.Number&&e[1].valueType!==i.ListOfNumber)throw o.regressionTypeError(t(e))},Polygon:function(e){if(1===e.length&&e[0].valueType!==i.ListOfPoint)throw o.polygonListTypeError(t(e));if(2===e.length&&e[0].valueType===i.Number&&e[1].valueType===i.Number)throw o.polygonTwoNumbersError();if(e.length>2&&!e.every(function(e){return e.valueType===i.Point}))throw o.polygonPointArgsError()}};for(var a in s)r[a].prototype.typeCheck=s[a]}),define("math/features/repr",["require","parsenodes"],function(e){var t=e("parsenodes"),n=function(e,t,n){n=n||0;var r=Array(n+1).join("  "),i=r+"  ";return"[\n"+i+e.map(function(e){return e.repr(t,n+1)}).join(",\n"+i)+"\n"+r+"]"},r=function(e,t){return t=t||"",""+t+e};t.Expression.prototype.repr=function(e,t){return r(this.type,e)+"("+n(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var n=Array(t+1).join("  "),i=n+"  ";return r(this.type,e)+"([\n"+i+this.args[0].repr(e,t+1)+",\n"+i+"'"+this.args[1]+"',\n"+i+this.args[2].repr(e,t+1)+",\n"+i+"'"+this.args[3]+"',\n"+i+this.args[4].repr(e,t+1)+"\n"+n+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return r(this.type,e)+"('"+this._symbol+"')"},t.Constant.prototype.repr=function(e){return r(this.type,e)+"("+this.constantValue+")"},t.FunctionCall.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._symbol+"', "+n(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,n){return r(this.type,e)+"("+t.Identifier(this._symbol).repr(e,n)+", "+this._expression.repr(e,n)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return r(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return r(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+n(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._msg+"')"},t.Derivative.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._symbol+"', "+n(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._symbol+"', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return r(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode})+")"},t.Table.prototype.repr=function(e,t){return r(this.type,e)+"("+n(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return r(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+n(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var n=Array(t+1).join("  "),i=n+"  ";return r(this.type,e)+"({\n"+i+"center: "+this.center.repr(e,t+1)+",\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\n"+i+"width: "+this.width.repr(e,t+1)+",\n"+i+"height: "+this.height.repr(e,t+1)+"},\n"+i+JSON.stringify(this.moveStrategy)+"\n"+n+")"},t.Broadcast.prototype.repr=function(e,t){return r(this.type,e)+"(['"+this._replacedSymbols.join("', ")+"'], "+n(this.args,e,t)+")"}}),define("math/features/scalarEvalExpression",["require","parsenodes","math/functions"],function(e){var t=e("parsenodes"),n=e("math/functions"),r={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var o in r){var s=t[o].prototype;s.scalarEvalExpression=r[o],s.evaluate=n.createEvaluateFunction(s.scalarEvalExpression,i[o])}}),define("math/features/okForImplicitFunction",["require","parsenodes"],function(e){function t(){for(var e=0;e<this.args.length;e++)if(!this.args[e].okForImplicitFunction())return!1;return!0}var n=e("parsenodes");n.Add.prototype.okForImplicitFunction=t,n.Subtract.prototype.okForImplicitFunction=t,n.Add.prototype.okForImplicitFunction=t,n.Multiply.prototype.okForImplicitFunction=t,n.Divide.prototype.okForImplicitFunction=t,n.Exponent.prototype.okForImplicitFunction=t,n.Piecewise.prototype.okForImplicitFunction=function(){return this.args[1].isConstant&&1===this.args[1].constantValue&&this.args[2].isConstant&&this.args[2].isNaN()}}),define("math/reconstitute-node",["require","parsenodes","math/types"],function(e){
function t(e,i){if(r.isList(e)){for(var o=[],s=0;s<i.length;s++)o.push(t(r.elementType(e),i[s]));var a=n.List(o);return a.valueType=e,a}switch(e){case r.Number:case r.Bool:return n.Constant(i);case r.Point:return n.OrderedPair([n.Constant(i[0]),n.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+r.prettyPrint(e)+".")}}var n=e("parsenodes"),r=e("math/types");return t}),define("math/features/constantcollapsedcopy",["require","parsenodes","math/builtin","math/distance","math/reconstitute-node"],function(e){var t=e("parsenodes"),n=t.Constant,r=t.Multiply,i=t.Subtract,o=t.RawExponent,s=t.BuiltInFunction,a=e("math/builtin"),c=e("math/distance"),l=e("math/reconstitute-node"),u={Expression:function(e){return this.copyWithArgs(e)},FreeVariable:function(e){return this},ScalarExpression:function(e){for(var t=[],r=0;r<e.length;r++){if(!e[r].isConstant)return this.copyWithArgs(e);t.push(e[r].constantValue)}return n(this.evaluate(t))},OrderedPair:function(e){return this.copyWithArgs(e)},Add:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?e[1]:0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Multiply:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[0].constantValue?e[1]:1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Subtract:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):0===e[0].constantValue?t.Negative([e[1]]):0===e[1].constantValue?e[0]:this.copyWithArgs(e)},Divide:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):1===e[1].constantValue?e[0]:this.copyWithArgs(e)},Exponent:function(e){if(e[0].isConstant&&e[1].isConstant)return n(this.evaluate([e[0].constantValue,e[1].constantValue]));if(e[0].isConstant){if(e[0].constantValue===Math.E)return s.exp([e[1]]);if(e[0].constantValue>0)return o(e)}if(e[1].isConstant){var t=e[1].constantValue;if(1===t)return e[0];if(t===Math.floor(t))return o(e);var i=a.toFraction(t,100);return c.approx(i.n/i.d,t,2)&&i.d%2===1?r([i.n%2===0?n(1):s.sign([e[0]]),o([s.abs([e[0]]),e[1]])]):o(e)}return this.copyWithArgs(e)},RawExponent:function(e){return e[0].isConstant&&e[1].isConstant?n(this.evaluate([e[0].constantValue,e[1].constantValue])):this.copyWithArgs(e)},Negative:function(e){return e[0].isConstant?n(-e[0].constantValue):e[0]instanceof t.Negative?e[0].args[0]:this.copyWithArgs(e)},And:function(e){return e[0].isConstant&&e[1].isConstant?n(e[0].constantValue&&e[1].constantValue):e[0].isConstant&&e[0]===!0?e[1]:e[0].isConstant&&e[0]===!1?n(!1):e[1].isConstant&&e[1]===!0?e[0]:e[1].isConstant&&e[1]===!1?n(!1):this.copyWithArgs(e)},Piecewise:function(e){return e[0].isConstant&&e[0].constantValue===!0?e[1]:e[0].isConstant&&e[0].constantValue===!1?e[2]:this.copyWithArgs(e)},Integral:function(e){var t=e[0],o=e[1],s=e[2],a=e[3],c=a.getDependencies();if(o.isConstant&&s.isConstant){var l=s.constantValue-o.constantValue;if(a.isConstant)return n(a.constantValue*l);if(!a.dependsOn(t._symbol))return r([a,n(l)]);if(1===c.length&&c[0]===t._symbol)return n(this.evaluate(o.constantValue,s.constantValue,a))}else if(!a.dependsOn(t._symbol))return r([a,i([s,o])]);return this.copyWithArgs(e)},ListAccess:function(e){return e[1].isConstant?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},OrderedPairAccess:function(e){return e[1].isConstant&&e[0]instanceof t.OrderedPair?e[0].elementAt(e[1].constantValue-1):this.copyWithArgs(e)},Broadcast:function(e){var t=e[0].getDependencies();for(n=0;n<t.length;n++)if(this._replacedSymbols.indexOf(t[n])===-1)return this.copyWithArgs(e);for(var n=1;n<e.length;n++)if(0!==e[n].getDependencies().length)return this.copyWithArgs(e);return l(this.valueType,this.evaluate(e.slice(1).map(function(e){return e.asValue()})))},ReducerFunction:function(e){return 0===e[0].getDependencies().length?l(this.valueType,this.evaluate([e[0].asValue()])):this.copyWithArgs(e)},DoubleReducerFunction:function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var t=Math.min(e[0].length,e[1].length);return l(this.valueType,this.evaluate([e[0].asValue().slice(0,t),e[1].asValue().slice(0,t)]))}return this.copyWithArgs(e)},ParametrizedReducerFunction:function(e){var t=e[0],n=e[1];return n.isConstant&&0===t.getDependencies().length?l(this.valueType,this.evaluate([t.asValue(),n.asValue()])):this.copyWithArgs(e)},RepeatedOperator:function(e){if(e[1].isConstant&&e[2].isConstant){var t=e[1].constantValue,r=e[2].constantValue,i=e[3];if(i.isConstant)return n(this.evaluateConstant([t,r,i.constantValue]));var o=i.getDependencies();if(0===o.length||1===o.length&&o[0]===e[0]._symbol)return n(this.evaluate(t,r,i))}return this.copyWithArgs(e)}};for(var h in u)t[h].prototype._constantCollapsedCopy=u[h];s.distance.prototype._constantCollapsedCopy=function(e){return 0===e[0].getDependencies().length&&0===e[1].getDependencies().length?n(this.evaluate([e[0].asArray(),e[1].asArray()])):this.copyWithArgs(e)},s.midpoint.prototype._constantCollapsedCopy=function(e){if(0===e[0].getDependencies().length&&0===e[1].getDependencies().length){var r=this.evaluate([e[0].asArray(),e[1].asArray()]);return t.OrderedPair([n(r[0]),n(r[1])])}return this.copyWithArgs(e)}}),define("math/features/polynomialorder",["require","parsenodes"],function(e){var t=e("parsenodes"),n={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"},r=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)};for(var i in n){var o=n[i];t[i].prototype.polynomialOrder=r(o)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),n=this.args[1].polynomialOrder(e);if(0===t&&0===n)return 0;var r=this.args[1];return r.isConstant&&r.constantValue===Math.round(r.constantValue)&&r.constantValue>0?t*r.constantValue:1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("math/features/polynomialcoefficients",["require","parsenodes"],function(e){var t=e("parsenodes"),n=t.Constant(0),r=t.Constant(1);t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[n,r]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=n.length-1,o=r.length-1,s=[],a=0;a<=Math.max(i,o);a++)i>=a&&o>=a?s.push(t.Add([n[a],r[a]])):s.push(i>o?n[a]:r[a]);return s},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=n.length-1,o=r.length-1,s=[],a=0;a<=Math.max(i,o);a++)i>=a&&o>=a?s.push(t.Subtract([n[a],r[a]])):s.push(i>o?n[a]:t.Negative([r[a]]));return s},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=[],i=0;i<n.length;i++)r.push(t.Negative([n[i]]));return r},t.Exponent.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),o=r.length-1,s=i.length-1;if(s>0)throw"can't solve for variable in exponent";if(0===o)return[t.Exponent([r[0],i[0]])];if(this.args[1].isConstant){var a=this.args[1].constantValue;switch(a){case 0:return[n];case 1:return r;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=n.length-1,o=r.length-1,s=[],a=0;a<=i;a++)for(var c=0;c<=o;c++){var l=t.Multiply([n[a],r[c]]),u=s[a+c];void 0===u?s[a+c]=l:s[a+c]=t.Add([u,l])}return s},t.Divide.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=r.length-1,o=[];if(i>0)throw"Can't solve for variable in denominator";for(var s=0;s<n.length;s++)o.push(t.Divide([n[s],r[0]]));return o},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){if(!this.dependsOn(e))return[this];var t=this.args[1].getPolynomialCoefficients(e);return t}}),define("math/features/extractconditions",["require","parsenodes"],function(e){var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){for(var n=0;n<this.args.length;n++){var r=this.args[n];t=r.extractConditions(e,t)}return t},t.Constant.prototype.extractConditions=function(e,t){return t},t.Piecewise.prototype.extractConditions=function(e,n){if(!this.dependsOn(e))return n;if(!this.args[0].dependsOn(e))return n=this.args[1].extractConditions(e,n),n=this.args[2].extractConditions(e,n);var r={};return r[e]=n,t.Piecewise([this.args[0].substitute(r),n,t.Constant(NaN)])}}),define("math/builtinconstants",["require","math/parsenode/constant"],function(e){var t=e("math/parsenode/constant");return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(1)}}),define("math/builtinframe",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,n=e("math/builtinconstants"),r=e("math/parsenode/builtinfunction"),i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);return i}),define("math/features/bounddomain",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),n=e("math/builtinframe"),r=e("math/domaintypes"),i=t.Constant(0);t.Base.prototype.boundDomain=function(e){return r.unknownDomain()},t.List.prototype.boundDomain=function(e){return r.unknownDomain()},t.Expression.prototype.boundDomain=function(e){for(var t=r.allReals(),n=0;n<this.args.length;n++)t=r.intersectDomains(t,this.args[n].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?r.emptyDomain():r.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].constantValue)?r.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):r.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return r.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if("="===this.operator)return r.unknownDomain();var t=this._difference,o=this._difference.boundDomain(e),s=t.polynomialOrder(e);if(s>1)return r.unknownDomain();var a=t.getPolynomialCoefficients(e),c=a[1]?a[1].getConcreteTree(n):i,l=a[0]?a[0].getConcreteTree(n):i;if(!c.isConstant||!l.isConstant)return r.unknownDomain();if(isNaN(c.constantValue)||isNaN(l.constantValue))return r.emptyDomain();if(0===c.constantValue)return l.constantValue>=0?o:r.emptyDomain();var u=-l.constantValue/c.constantValue,h=c.constantValue<0?[-(1/0),u]:[u,1/0];return r.intersectDomains(o,r.knownDomain(h))}}),define("math/features/derivative",["require","parsenodes","math/baseparser","math/builtinframe","math/parsenode/builtinfunction"],function(e){var t=e("parsenodes"),n=e("math/baseparser"),r=e("math/builtinframe"),i=e("math/parsenode/builtinfunction"),o=t.Constant(0),s=t.Constant(1),a=t.Constant(2),c={FreeVariable:function(e){return e===this._symbol?s:o},Constant:function(e){return isFinite(this.constantValue)?o:t.Constant(this.constantValue)},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([g(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([g(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],a])]))])},Exponent:function(e){return t.Add([g(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],s])])]),this.args[0].takeDerivative(e)])),g(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],o]),t.Piecewise([t.Comparator[">"]([this.args[1],o]),o,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(r)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var n=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([o,this.args[3]]),s,o])]),r=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([o,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([o,n]),r,t.Piecewise([t.Comparator["="]([s,n]),i,o])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var n=this.args[0],r=this.args[1],i=this.args[2],o=this.args[3],s={};s[n._symbol]=i;var a={};return a[n._symbol]=r,t.Add([g(e,o,this.copyWithArgs([n,r,i,o.takeDerivative(e)])),t.Subtract([g(e,i,t.Multiply([o.substitute(s),i.takeDerivative(e)])),g(e,r,t.Multiply([o.substitute(a),r.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){for(var n=this._replacedSymbols.slice(),r=this.args.slice(1),i=this._expression.takeDerivative(e),o=0;o<this._replacedSymbols.length;o++){var s=this._replacedSymbols[o],a=this.args[o+1];if(a.dependsOn(e)){var c=this.tmpVar(),l=t.DummyIndex(c);n.push(c),r.push(a.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(s),l])])}}return t.Broadcast(n,[i].concat(r))}},l={exp:"\\exp(x)*x_1",ln:"\\{x >= 0: x_1/x \\}",log:"\\{ x >= 0: x_1/(x*\\ln(10)) \\}",sqrt:"x_1/(2*\\sqrt{x})",rtxsqpone:"x*x_1/\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\rtxsqmone(x)",sin:"\\cos(x)*x_1",cos:"-\\sin(x)*x_1",tan:"\\sec(x)^2*x_1",arcsin:"x_1/\\sqrt{1 - x^2}",arccos:"-x_1/\\sqrt{1 - x^2}",sinh:"\\cosh(x)*x_1",cosh:"\\sinh(x)*x_1",tanh:"(\\sech(x))^2*x_1",arcsinh:"x_1/\\sqrt{x^2 + 1}",arccosh:"\\{ x > 0: x_1/\\rtxsqmone(x) \\}",arctanh:"\\{ \\abs(x) < 1: x_1/(1 - x^2) \\}",csc:"-\\cot(x)*\\csc(x)*x_1",sec:"\\tan(x)*\\sec(x)*x_1",cot:"-\\csc(x)^2*x_1",arccsc:"-x_1/(\\abs(x)*\\rtxsqmone(x))",arcsec:"x_1/(\\abs(x)*\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\coth(x)*\\csch(x)*x_1",sech:"-\\tanh(x)*\\sech(x)*x_1",coth:"-(\\csch(x))^2*x_1",arccsch:"-x_1/(\\abs(x)*\\rtxsqpone(x))",arcsech:"\\{ x >= 0: -x_1/(x*\\sqrt{1 - x^2}) \\}",arccoth:"\\{ \\abs(x) > 1 : x_1/(1 - x^2) \\}",factorial:"(x)!*\\polyGamma(0, x + 1)*x_1",floor:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",ceil:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",round:"\\{ \\abs(\\mod(x, 1) - 0.5) > 0: 0*x_1 \\}",abs:"\\{ \\abs(x) > 0: \\sign(x)*x_1 \\}",sign:"\\{ \\abs(x) > 0: 0*x_1 \\}",mean:"\\mean(x_1)",total:"\\total(x_1)",length:"0",var:"2*\\cov(x, x_1)",varp:"2*\\cov(x, x_1)*(\\length(x)-1)/\\length(x)",stdev:"\\cov(x, x_1)/\\stdev(x)",stdevp:"\\covp(x, x_1)/\\stdevp(x)",mad:"\\mean(\\sign(x-\\mean(x))*(x_1 - \\mean(x_1)))",min:"x_1[\\argmin(x)]",max:"x_1[\\argmax(x)]",median:"0.5*(x_1[\\lowerQuantileIndex(x, 0.5)] + x_1[\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\frac{2}{\\sqrt{\\pi }}e^{-x^2}",invNorm:"\\frac{1}{\\normalpdf(\\invNorm(x))}"},u={logbase:["\\{x > 0: \\frac{x_1}{x*\\ln(y)}\\}","\\frac{-\\log_{y}(x)*y_1}{y*\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\frac{x^{1/y}*\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\polyGamma(1 + x, y)*y_1"],mod:["\\{ \\abs(\\mod(x, y)) > 0: x_1 \\}","\\{ \\mod(x/y, 1) > 0: -\\floor(x/y)*y_1 \\}"],cov:["\\cov(x_1, y)","\\cov(x, y_1)"],covp:["\\covp(x_1, y)","\\covp(x, y_1)"],corr:["(\\cov(x_1, y) - (\\cov(x, y)*\\cov(x, x_1)/\\var(x)))/(\\stdevp(x)\\stdevp(y))","(\\cov(x, y_1) - (\\cov(x, y)*\\cov(y, y_1)/\\var(y)))/(\\stdevp(x)\\stdevp(y))"],quantile:["\\{ \\floor(y*(\\length(x)-1)) = y*(\\length(x)-1) :   x_1[\\upperQuantileIndex(x, y)],  (\\ceil(y*(\\length(x)-1)) - y*(\\length(x)-1))*x_1[\\lowerQuantileIndex(x, y)] +   (y*(\\length(x)-1) - \\floor(y*(\\length(x)-1)))*x_1[\\upperQuantileIndex(x, y)]\\}","\\{ \\floor(y*(\\length(x)-1)) < y*(\\length(x)-1) :   (x[\\upperQuantileIndex(x, y)] - x[\\lowerQuantileIndex(x, y)])*y_1\\}"],quartile:["0.5*(x_1[\\lowerQuartileIndex(x, y)] + x_1[\\upperQuartileIndex(x, y)])","0/0"],TScore:["\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}","-y_1*\\sqrt{\\length(x)}/\\stdev(x)"],TTest:["\\tpdf(\\TScore(x,y),\\length(x)-1)\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}","-y_1*\\tpdf(\\TScore(x,y),\\length(x)-1)*\\sqrt{\\length(x)}/\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\frac{e^{-y}(\\floor(x)-y)y^{(\\floor(x)-1)}}{\\floor(x)!}"],poissoncdf:["0/0","y_1\\sum _{n=0}^{\\floor(x)}\\frac{e^{-y}(n-y)y^{(n-1)}}{n!}"],tcdf:["x_1*\\tpdf(x,y)","0/0"],tpdf:["x_1*\\tpdf(x,y)*\\frac{-(y+1)*x}{y+x^2}","0/0"]},h={normalcdf:["x_1\\normalpdf(x,y,z)","-y_1\\normalpdf(x,y,z)","z_1*\\frac{y-x}{z}\\normalpdf(x,y,z)"],normalpdf:["-x_1*\\frac{x-y}{z^2} \\normalpdf(x,y,z)","y_1*\\frac{x-y}{z^2} \\normalpdf(x,y,z)","z_1*(\\frac{(x-y-z)*(x-y+z)}{z^3}) \\normalpdf(x,y,z)"],binompdf:["0/0","0/0","z_1*\\binompdf(x,y,z)*(\\frac{\\round(x)}{z}-\\frac{\\round(y)-\\round(x)}{1-z})"],binomcdf:["0/0","0/0","z_1*\\sum _{n=0}^{\\round(x)}\\binompdf(n,y,z)*(\\frac{n}{z}-\\frac{\\round(y)-n}{1-z})"]},d=function(e){return function(t){var n=this.args,i={x:n[0],x_1:n[0].takeDerivative(t)};return g(t,n[0],e.substitute(i)).getConcreteTree(r)}},p=function(e,n){return function(i){var o=this.args,s={x:o[0],x_1:o[0].takeDerivative(i),y:o[1],y_1:o[1].takeDerivative(i)};return t.Add([g(i,o[0],e.substitute(s)),g(i,o[1],n.substitute(s))]).getConcreteTree(r)}},f=function(e,n,i){return function(o){var s=this.args,a={x:s[0],x_1:s[0].takeDerivative(o),y:s[1],y_1:s[1].takeDerivative(o),z:s[2],z_1:s[2].takeDerivative(o)};return t.Add([t.Add([g(o,s[0],e.substitute(a)),g(o,s[1],n.substitute(a))]),g(o,s[2],i.substitute(a))]).getConcreteTree(r)}};for(var m in l)i[m].prototype.takeDerivative=d(n.parse(l[m]));for(m in u)i[m].prototype.takeDerivative=p(n.parse(u[m][0]),n.parse(u[m][1]));for(m in h)i[m].prototype.takeDerivative=f(n.parse(h[m][0]),n.parse(h[m][1]),n.parse(h[m][2]));i.distance.prototype.takeDerivative=function(e){var n=this.args[0],o=this.args[1],c=t.OrderedPairAccess([n,s]),l=t.OrderedPairAccess([n,a]),u=t.OrderedPairAccess([o,s]),h=t.OrderedPairAccess([o,a]),d=g(e,c,c.takeDerivative(e)),p=g(e,l,l.takeDerivative(e)),f=g(e,u,u.takeDerivative(e)),m=g(e,h,h.takeDerivative(e));return g(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([d,c]),t.Multiply([d,u])]),t.Subtract([t.Multiply([f,u]),t.Multiply([f,c])])]),t.Add([t.Subtract([t.Multiply([p,l]),t.Multiply([p,h])]),t.Subtract([t.Multiply([m,h]),t.Multiply([m,l])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(r)},i.midpoint.prototype.takeDerivative=function(e){var n=this.args[0],o=this.args[1],c=t.OrderedPairAccess([n,s]),l=t.OrderedPairAccess([n,a]),u=t.OrderedPairAccess([o,s]),h=t.OrderedPairAccess([o,a]),d=g(e,c,c.takeDerivative(e)),p=g(e,l,l.takeDerivative(e)),f=g(e,u,u.takeDerivative(e)),m=g(e,h,h.takeDerivative(e));return t.OrderedPair([i.mean([d,f]),i.mean([p,m])]).getConcreteTree(r)};var g=function(e,t,n){return t.dependsOn(e)?n:o};for(var y in c){var v=c[y];t[y].prototype.takeDerivative=v}}),define("math/features/substitute",["require","parsenodes"],function(e){var t=e("parsenodes"),n={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var r in n)t[r].prototype.substitute=n[r]}),define("math/features/solve",["require","math/baseparser","parsenodes","math/errormsg","math/builtinframe","worker/workerconfig"],function(e){function t(e){var t=Object.create(m);return t.a=e[2]?e[2].tryGetConcreteTree(m):y,t.b=e[1]?e[1].tryGetConcreteTree(m):y,t.c=e[0]?e[0].tryGetConcreteTree(m):y,t}function n(e){return 0===e.a.constantValue?0===e.b.constantValue?0:1:2}function r(e,r,i,o){for(var s,a,c=[],l=[],u=0;u<i.length;u++){var h=i[u],d=0;p.eachArgs([r],function(e){var t=e[0];d=Math.max(d,t.polynomialOrder(h))});var f=d>2,m=i.length>1&&!e.validSolvedVariable(h),g=o&&r.extractConditions(h,y)!==y;f||m||g?(l[u]={},c[u]=1/0):(l[u]=[],c[u]=0,p.eachArgs([r],function(e){var r=e[0];a=t(r.getPolynomialCoefficients(h)),l[u].push(a),c[u]=Math.max(c[u],n(a))}))}var v;if(1===i.length)a=l[0],s=i[0],v=c[0];else{var b;b=0===c[0]?1:0===c[1]?0:c[0]<c[1]?0:1,a=l[b],s=i[b],v=c[b]}return{localFrame:a,variableOfInterest:s,effectiveOrder:v}}function i(e,t){return t?I.inequality:I.generalEquation}function o(e){e.f=v.getConcreteTree(e),e.g=b.getConcreteTree(e),e.p=x.getConcreteTree(e),e.q=_.getConcreteTree(e),e.m=l(1e305)}var s=e("math/baseparser"),a=e("parsenodes"),c=a.Base,l=a.Constant,u=a.Equation,h=a.SolvedEquation,d=a.BaseComparator,p=a.List,f=e("math/errormsg"),m=e("math/builtinframe"),g=e("worker/workerconfig"),y=l(0),v=s.parse("b*b"),b=s.parse("4*a*c"),x=s.parse("(-b+\\sqrt{b*b-4*a*c})/(2*a)"),_=s.parse("(-b-\\sqrt{b*b-4*a*c})/(2*a)"),w=s.parse("[\\{\\abs(b)>0:-c/b\\}]"),E=s.parse("[\\{\\abs(a)>0:-b/(2*a)\\}]"),S=s.parse("[\\{a=0:\\{b<0:-c/b\\},q\\},\\{a=0:\\{b>0:-c/b\\},p\\}]"),M=s.parse("[\\{a=0:\\{b<0:-c/b\\},a>0:q\\},\\{a=0:\\{b=0:\\{c>0:-m\\}\\},a>0:\\{f<g:-m\\},p\\},\\{a=0:\\{b=0:\\{c>0:m\\}\\},a>0:\\{f<g:m\\},q\\},\\{a=0:\\{b>0:-c/b\\},a>0:p\\}]"),I={inequality:function(e){return o(e),M.getConcreteTree(e)},generalEquation:function(e){return o(e),e.a.isConstant&&0===e.a.constantValue?w.getConcreteTree(e):e.f.isConstant&&e.g.isConstant&&e.f.constantValue-e.g.constantValue===0?E.getConcreteTree(e):S.getConcreteTree(e)}};c.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof a.Error)return e;throw e}},u.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},d.prototype.solve=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return n;if(n.isConstant)return n;var o="="!==this.getOperator(),s=this._difference.tryGetConcreteTree(t);s.isBroadcast&&(s=p(s.mapElements(function(e){return e})));var a=s.getDependencies();if(0===a.length)return s.isList?p(s.args.map(function(e){return l(0===e.constantValue)})):l(0===s.constantValue);if(1===a.length&&s.isList&&!o)return s;if(1===a.length&&!o&&!g.plotSingleVariableImplicitEquations)return f.singleVariableImplicitEquationsDisabled();var c=p.wrap(s);if(a.length>2)return f.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(a);if(o&&!e.validInequalityVariables(a))return f.invalidInequalityVariables().setDependencies(a);var u=r(e,c,a,o),d=u.localFrame,m=u.effectiveOrder,y=u.variableOfInterest;if(e.complicatedPolarImplicit(y,m))return f.complicatedPolarImplicit().setDependencies(a);if(!e.validImplicitVariables(a))return f.invalidImplicitVariables();if(m>2)return s;for(var v=i(a,o),b=[],x=0;x<d.length;x++){var _=v(d[x]);if(_.isError)return _;if(_.isConstant)b.push(_);else for(var w=0;w<_.args.length;w++){var E=_.args[w],S=c.args[x].extractConditions(y,E).getConcreteTree(t);b.push(S)}}return h(y,p(b))}}),define("math/evaluationstate",["require","graphing/graphmode","parsenodes","graphing/label"],function(e){function t(e){return e.isError?e.getError():void 0===e.constantValue?"":+e.constantValue}function n(e,n,r){for(var i=[],o=0;o<n.columns.length;o++){var s=r.columns[o],a={dependent:!s.isIndependent,discrete:s.isIndependent};s.isError?(a.error=s.getError(),a.values=[]):a.values=s.values.map(t),i.push(a)}return{column_data:i}}function r(e,t,n){var r={variables:[],errorMap:{},dimensions:{}};if(n.center.isError&&(r.errorMap.center=!0),n.radianAngle.isError&&(r.errorMap.angle=!0),n.width.isError&&(r.errorMap.width=!0),n.height.isError&&(r.errorMap.height=!0),n.center.isError||n.radianAngle.isError||n.width.isError||n.height.isError)return r.variables=t.getSliderVariables(e,n),r;r.dimensions.x=[],r.dimensions.y=[],r.dimensions.radianAngle=[],r.dimensions.width=[],r.dimensions.height=[],o.List.eachArgs([n.center,n.radianAngle,n.width,n.height],function(e){r.dimensions.x.push(+e[0].args[0].constantValue),r.dimensions.y.push(+e[0].args[1].constantValue),r.dimensions.radianAngle.push(+e[1].constantValue),r.dimensions.width.push(+e[2].constantValue),r.dimensions.height.push(+e[3].constantValue)});var s=e.graphingEnabled()?t.getGraphMode(e,n):i.NONE;return s!==i.NONE&&(r.is_graphable=!0),n.moveStrategy&&(r.move_strategy=n.moveStrategy),r}var i=e("graphing/graphmode"),o=e("parsenodes"),s=e("graphing/label"),a=function(){return{operator:"=",variables:[]}},c=function(e,t,c){if(t.isTable)return n(e,t,c);if(t.isImage)return r(e,t,c);var l=a();if(c.isError&&(!(t instanceof o.FunctionDefinition)||c.blocksExport))return l.error=c.getError(),l.variables=t.getSliderVariables(e,c),l.is_single_identifier=t instanceof o.Identifier,l;c.moveStrategy&&(l.move_strategy=c.moveStrategy,l.default_drag_mode=c.defaultDragMode),t.isInequality()&&(l.is_inequality=!0),l.operator=t.getOperator(),c instanceof o.SolvedEquation?c._expression.constantValue!==!0&&c._expression.constantValue!==!1&&(l.assignment=c._symbol):t instanceof o.Assignment&&(l.assignment=t._symbol);var u=e.graphingEnabled()?t.getGraphMode(e,c):i.NONE;if(u!==i.NONE){l.is_graphable=!0,l.expression_type=t.getExpressionType(u,c.valueType),c.isShadeBetween()&&(l.is_shade_between=!0);var h=t.tableInfo(e,c);h&&(l.is_tableable=!0,l.table_info=h)}l.variables=l.is_graphable?[]:t.getSliderVariables(e,c),l.is_single_identifier=t instanceof o.Identifier;var d=t.getSliderInfo();d?(l.is_slidable=!0,l.is_animatable=!l.is_graphable,l.constant_value=d.value):c.isConstant&&(l.constant_value=c.constantValue);var p=c.getEvaluationInfo();if(!p||"="!==l.operator||t.isConstant||t.isFunction||l.is_slidable||(l.is_evaluable=!0,l.zero_values=p),c instanceof o.OptimizedRegression){var f={};for(var m in c.parameters)c.parameters.hasOwnProperty(m)&&(f[s.identifierToLatex(m)]=+c.parameters[m].constantValue);l.is_regression=!0,l.regression={parameters:f,residualVariable:s.identifierToLatex(c.residualVariable),residualSuggestionId:c.residualSuggestionId,shouldSuggestLogMode:c.shouldSuggestLogMode,statistics:c.statistics}}return l};return c.default=a,c}),define("math/statementanalysis",["require","math/evaluationstate","pjs","graphing/graphmode","worker/workerconfig"],function(e){var t=e("math/evaluationstate"),n=e("pjs"),r=e("graphing/graphmode"),i=e("worker/workerconfig");return n(function(e){e.init=function(e,n,r){this.policy=e,this.rawTree=n,this.concreteTree=r,this.evaluationState=t(e,n,r)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===r.X||e===r.Y}})}),define("math/features/analyze",["require","parsenodes","math/statementanalysis","math/builtinframe","math/parsenode/builtinfunction","math/errormsg","math/comparators","math/types","graphing/graphmode"],function(e){function t(e,t,n,r){var o=r.getDependencies();switch(r.valueType){case l.Point:case l.ListOfPoint:return o.length?e.validParametricVariables(o)?i(e,n,r):i(e,n,a.tooManyVariables(n.getSliderVariables(e,r)).setDependencies(o)):i(e,n,r);case l.Number:case l.ListOfNumber:switch(o.length){case 0:return i(e,n,r);case 1:return e.validExpressionVariable(o[0])?i(e,n,r):i(e,n,a.equationRequired(e.implicitDependency(o[0])).setDependencies(o));default:return e.validImplicitVariables(o)?i(e,n,a.equationRequired().setDependencies(o)):i(e,n,a.tooManyVariables(n.getSliderVariables(e,r)).setDependencies(o))}}}function n(e,t){return e.filter(function(e){return!t[e]})}var r=e("parsenodes"),i=e("math/statementanalysis"),o=e("math/builtinframe"),s=e("math/parsenode/builtinfunction"),a=e("math/errormsg"),c=e("math/comparators"),l=e("math/types"),u=e("graphing/graphmode");r.Base.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},r.Expression.prototype.analyze=function(e,n){var r=this.tryGetConcreteTree(n);return r.isError?i(e,this,r):t(e,n,this,r)},r.Identifier.prototype.analyze=function(e,t){return i(e,this,this.tryGetConcreteTree(t))},r.FunctionDefinition.prototype.analyze=function(e,t){var n=/^log_[\d|e]/;if(o[this._symbol]||n.test(this._symbol))return i(e,this,a.cannotRedefine(this._symbol));var r=this._symbol.split("_")[0];if(s[r])return i(e,this,a.cannotRedefine(this._symbol,r));var c=this.tryGetConcreteTree(t);if(c.isError)return i(e,this,c);var l=this._argSymbols,u=c.getDependencies();if(u.indexOf(this._symbol)!==-1)return i(e,this,a.selfReferentialFunction(this._symbol));var h=u.filter(function(e){return l.indexOf(e)===-1});return e.unplottablePolarFunction(this._symbol,u)?i(e,this,a.unplottablePolarFunction()):h.some(e.assignmentForbidden)?i(e,this,a.addArgumentsToDefinition(h,this._symbol,l).setDependencies(u)):h.length?i(e,this,a.tooManyVariables(this.getSliderVariables(e,c)).setDependencies(u)):i(e,this,c)},r.Assignment.prototype.analyze=function(e,t,n){var s=this._symbol;if(!e.validLHS(s))return i(e,this,a.invalidLHS(s));if(o[s])return i(e,this,a.cannotRedefine(s));var c=this.tryGetConcreteTree(t);if(c.isError)return i(e,this,c);var l=c.getDependencies();
if(this.isEquation(c)){var u=this.asEquation().analyze(e,t);return i(e,this,u.concreteTree)}if(l.length>1){var h=this.getSliderVariables(e,c);return h.length?i(e,this,a.tooManyVariables(h).allowExport().setDependencies(l)):i(e,this,c)}var d=this.getMoveStrategy(t,c,n);if(d){var p=this.getDefaultDragMode(d);return i(e,this,r.MovablePoint(c.args,d,p))}return i(e,this,c)},r.Regression.prototype.analyze=function(e,t,n,r,o){return i(e,this,this.tryOptimize(e,t,n,r,o))},r.Polygon.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(t),r=n.getDependencies();return r.length?i(e,this,a.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r)):i(e,this,this.tryGetConcreteTree(t))},r.Equation.prototype.analyze=r.BaseComparator.prototype.analyze=function(e,t){var n=this.trySolve(e,t);if(n.isError)return i(e,this,n);if(n instanceof r.SolvedEquation&&n.getDependencies().length){var o=n.getDependencies().concat(n._symbol);if(!e.validImplicitVariables(o))return i(e,this,a.invalidImplicitVariables().setDependencies(o))}return this.getGraphMode(e,n)!==u.IMPLICIT||e.validImplicitVariables(n.getDependencies())?i(e,this,n):i(e,this,a.invalidImplicitVariables().setDependencies(n.getDependencies()))},r.DoubleInequality.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return i(e,this,n);var r=n.getDependencies();return c.table[this._operators[0]].direction!==c.table[this._operators[1]].direction?i(e,this,a.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(n._symbol)&&e.validDoubleInequalityVariables(r)?r.length>2?i(e,this,a.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r)):n._expressions[0].getDependencies().indexOf(n._symbol)!==-1||n._expressions[1].getDependencies().indexOf(n._symbol)!==-1?i(e,this,a.complicatedDoubleInequality().setDependencies(r)):i(e,this,n):i(e,this,a.invalidDoubleInequalityVariables().setDependencies(r))},r.And.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return i(e,this,n);var r=n.getDependencies();return r.length?e.validDoubleInequalityVariables(r)?i(e,this,a.complicatedDoubleInequality().setDependencies(r)):i(e,this,a.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r)):i(e,this,n)},r.OrderedPair.prototype.analyze=function(e,n,o){var s=this.tryGetConcreteTree(n);if(s.isError)return i(e,this,s);var a=this.getMoveStrategy(n,s,o);if(a){var c=this.getDefaultDragMode(a);return i(e,this,r.MovablePoint(s.args,a,c))}return t(e,n,this,s)},r.Table.prototype.analyze=function(e,t){for(var o,s=Object.create(t),c=[],l=0;l<this.columns.length;l++){var u=this.columns[l].analyze(e,s,t);if(0===l&&(u.concreteTree.isIndependent?e.validFirstColumnVariable(u.concreteTree.header._symbol)?o=u.concreteTree.header._symbol:u=i(e,this.columns[l],a.invalidFirstTableColumn()):u=i(e,this.columns[l],a.invalidDependentFirstTableColumn())),u.concreteTree.isIndependent)u.rawTree.exportToLocal(u.concreteTree,s);else if(!u.concreteTree.isError){var h=u.concreteTree.header.getDependencies(),d=n(h,s);d.length&&(u=i(e,this.columns[l],a.tooManyVariables(d).setDependencies(d)))}c.push(u.concreteTree)}var p=r.Table(c),f=i(e,this,p);return f.evaluationState.is_graphable=!0,f},r.TableColumn.prototype.analyze=function(e,t,n){var r=this.header.tableError();if(r)return i(e,this,a.invalidTableHeader(r));var o=this.tryGetConcreteTree(t,n);if(o.isError)return i(e,this,o);if(o.header.isError)return i(e,this,o.header);if(o.values.isError)return i(e,this,o.values);for(var s=0;s<o.values.length;s++)if(!o.values[s].isError){var c=this.values[s]&&this.values[s].tableError();if(c)o.values[s]=a.invalidTableEntry(c);else{var l=o.values[s].getDependencies();l.length&&(o.values[s]=a.tooManyVariables(l).setDependencies(l))}}return i(e,this,o)},r.Image.prototype.analyze=function(e,t,n){var o=this.tryGetConcreteTree(t);if(o.radianAngle.isError||o.center.isError||o.width.isError||o.height.isError)return i(e,this,o);var s=o.center.getDependencies(),c=o.radianAngle.getDependencies(),l=o.width.getDependencies(),u=o.height.getDependencies();return"OrderedPair"!==this.center.type?i(e,this,r.Image({center:a.parseError(),radianAngle:o.radianAngle,width:o.width,height:o.height})):s.length||c.length||l.length||u.length?i(e,this,r.Image({center:s.length?a.tooManyVariables(c).setDependencies(s):o.center,radianAngle:c.length?a.tooManyVariables(c).setDependencies(c):o.radianAngle,width:l.length?a.tooManyVariables(l).setDependencies(l):o.width,height:u.length?a.tooManyVariables(u).setDependencies(u):o.height})):(o.moveStrategy=this.getMoveStrategy(t,o,n),i(e,this,o))}}),define("math/features/analyzeFourFunction",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return r(e,this,i.inequalitiesUnsupported())}var n=e("parsenodes"),r=e("math/statementanalysis"),i=e("math/errormsg"),o=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");n.Base.prototype.analyzeFourFunction=function(e,t){var n=this.tryGetConcreteTree(t);return n.isError?r(e,this,n):r(e,this,i.parseError())},n.Expression.prototype.analyzeFourFunction=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return r(e,this,n);var a=n.getDependencies();if(a.length>0){var c,l=a[0];return c=o.hasOwnProperty(l)?i.functionUnsupported(l):s.hasOwnProperty(l)?i.constantUnsupported(l):i.variablesUnsupported(l),r(e,this,c)}return r(e,this,n)},n.Assignment.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.equationsUnsupported())},n.And.prototype.analyzeFourFunction=t,n.DoubleInequality.prototype.analyzeFourFunction=t,n.BaseComparator.prototype.analyzeFourFunction=t,n.Regression.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.regressionsUnsupported())},n.OrderedPair.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.pointsUnsupported())}}),define("math/features/analyzeScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/builtinframe"],function(e){function t(e,t){return r(e,this,i.inequalitiesUnsupported())}var n=e("parsenodes"),r=e("math/statementanalysis"),i=e("math/errormsg"),o=e("math/builtinframe");n.Base.prototype.analyzeScientific=function(e,t){var n=this.tryGetConcreteTree(t);return n.isError?r(e,this,n):r(e,this,i.parseError())},n.Expression.prototype.analyzeScientific=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return r(e,this,n);var o=n.getDependencies();return o.length>0?r(e,this,i.tooManyVariables(o)):r(e,this,n)},n.Assignment.prototype.analyzeScientific=function(e,t){var n=this._symbol;if(o[n])return r(e,this,i.cannotRedefine(n));var s=this.tryGetConcreteTree(t);if(s.isError)return r(e,this,s);var a=s.getDependencies();return this.isEquation(s)?r(e,this,i.equationsUnsupported()):a.length>0?r(e,this,i.tooManyVariables(a)):r(e,this,s)},n.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(o[this._symbol])return r(e,this,i.cannotRedefine(this._symbol));var n=this.tryGetConcreteTree(t);if(n.isError)return r(e,this,n);var s=this._argSymbols,a=n.getDependencies();if(a.indexOf(this._symbol)!==-1)return r(e,this,i.selfReferentialFunction(this._symbol));var c=a.filter(function(e){return s.indexOf(e)===-1});return c.length?r(e,this,i.addArgumentsToDefinition(c,this._symbol,s)):r(e,this,n)},n.Equation.prototype.analyzeScientific=function(e,t){return r(e,this,i.equationsUnsupported())},n.And.prototype.analyzeScientific=t,n.DoubleInequality.prototype.analyzeScientific=t,n.BaseComparator.prototype.analyzeScientific=t,n.Regression.prototype.analyzeScientific=function(e,t){return r(e,this,i.regressionsUnsupported())},n.OrderedPair.prototype.analyzeScientific=function(e,t){return r(e,this,i.pointsUnsupported())}}),define("math/features/analyzeSingleExpressionScientific",["require","parsenodes","math/statementanalysis","math/errormsg","math/parsenode/builtinfunction","math/builtinconstants"],function(e){function t(e,t){return r(e,this,i.inequalitiesUnsupported())}var n=e("parsenodes"),r=e("math/statementanalysis"),i=e("math/errormsg"),o=e("math/parsenode/builtinfunction"),s=e("math/builtinconstants");n.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var n=this.tryGetConcreteTree(t);return n.isError?r(e,this,n):r(e,this,i.parseError())},n.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var n=this.tryGetConcreteTree(t);if(n.isError)return r(e,this,n);var a=n.getDependencies();if(a.length>0){var c,l=a[0];return c=o.hasOwnProperty(l)?i.functionUnsupported(l):s.hasOwnProperty(l)?i.constantUnsupported(l):i.variablesUnsupported(l),r(e,this,c)}return r(e,this,n)},n.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.equationsUnsupported())},n.And.prototype.analyzeSingleExpressionScientific=t,n.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,n.BaseComparator.prototype.analyzeSingleExpressionScientific=t,n.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.regressionsUnsupported())},n.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.pointsUnsupported())}}),define("graphing/dragmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NONE="NONE",t.X="X",t.Y="Y",t.XY="XY",t.AUTO="AUTO"}),define("graphing/reconcileDragMode",["require","exports","graphing/dragmode"],function(e,t,n){"use strict";function r(e){return e?"none"===e[0].type&&"none"===e[1].type?n.NONE:"none"===e[1].type?n.X:"none"===e[0].type?n.Y:n.XY:n.NONE}function i(e,t){var i=r(t);switch(e){case n.NONE:return n.NONE;case n.AUTO:return i;case n.XY:return i;case n.X:return i===n.X||i===n.XY?n.X:n.NONE;case n.Y:return i===n.Y||i===n.XY?n.Y:n.NONE;default:return n.NONE}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("math/features/getgraphmode",["require","parsenodes","graphing/graphmode","graphing/reconcileDragMode","graphing/dragmode","math/types"],function(e){function t(e,t){var n;return n=e&&e.hasOwnProperty("dragMode")?e.dragMode===a.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,s(n,t.moveStrategy)}function n(e,n){var r=n.getDependencies();switch(n.valueType){case c.Point:case c.ListOfPoint:return n.isMovablePoint&&t(this.userData,n)!==a.NONE?o.XYPOINT_MOVABLE:0===r.length?o.XYPOINT:e.validParametricVariables(r)?o.PARAMETRIC:o.NONE;case c.Number:case c.ListOfNumber:return 1===r.length?o.Y:o.NONE;default:return o.NONE}}function r(e,t){var n=t._expression.getDependencies();if(n.length>1)return o.NONE;if(t._expression.valueType!==c.Number&&t._expression.valueType!==c.ListOfNumber)return o.NONE;var r=t._symbol,i=n[0];return e.graphMode(r,i)}var i=e("parsenodes"),o=e("graphing/graphmode"),s=e("graphing/reconcileDragMode").default,a=e("graphing/dragmode"),c=e("math/types");i.Base.prototype.getGraphMode=function(e,t){return o.NONE},i.Identifier.prototype.getGraphMode=function(e,t){return e.graphableAsBareIdentifier(this._symbol)?o.Y:o.NONE},i.Expression.prototype.getGraphMode=n,i.Equation.prototype.getGraphMode=i.BaseComparator.prototype.getGraphMode=function(e,t){var n=t.getDependencies();return t.isConstant?o.NONE:t instanceof i.SolvedEquation?0===n.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):o.NONE:r(e,t):n.length<=2?o.IMPLICIT:o.NONE},i.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},i.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof i.SolvedEquation)return r(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var s=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(s.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):o.NONE;case 1:return t.valueType!==c.ListOfNumber||e.graphableListVariables(this._symbol,s[0])?e.graphMode(this._symbol,s[0]):o.NONE;default:return o.NONE}break;default:return n.call(this,e,t)}},i.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return o.NONE;var n=e.graphMode(this._symbol,this._argSymbols[0]),r=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(r.length){case 0:return n;case 1:return r[0]!==this._argSymbols[0]?o.NONE:n;default:return o.NONE}break;default:return o.NONE}},i.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?o.NONE:o.Y:o.NONE},i.Polygon.prototype.getGraphMode=function(e,t){return t.isError?o.NONE:o.POLYGONFILL},i.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError?o.NONE:o.XYPOINT:o.NONE}}),define("math/features/getgraphinfo",["require","parsenodes","math/builtinframe","math/domaintypes"],function(e){var t=e("parsenodes"),n=e("math/builtinframe"),r=e("math/domaintypes");t.Base.prototype.getGraphInfo=function(e,t){var n,i,o=t.getDependencies();switch(o.length){case 0:n=!0,i=t.boundDomain("x");break;case 1:i=t.boundDomain(o[0]),n="known"===i.type&&t.isLinear(o[0]);break;case 2:n=!1,i=r.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:n,linearCoefficients:n?t.getLinearCoefficients():void 0,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.constantValue,0];case 1:var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].getConcreteTree(n).constantValue:0,t[1]?+t[1].getConcreteTree(n).constantValue:0];default:return[NaN,NaN]}},t.OrderedPair.prototype.getLinearCoefficients=function(){return[this.args[0].getLinearCoefficients(),this.args[1].getLinearCoefficients()]}}),define("math/features/getMoveStrategy",["require","parsenodes","math/types"],function(e){function t(e){return{type:"none",inputString:e}}function n(e){return{type:"updateCoordinate",inputString:e}}function r(e,t,n){return{type:"updateSlider",inputString:e,id:t,coefficients:n}}function i(e,t){for(var n in t)if(t[n].evaluationState.assignment===e&&t[n].evaluationState.is_slidable)return n}function o(e,t,n,r){for(var o=e.getDependencies(),a=0;a<o.length;a++)if(r[o[a]])return!1;for(var l=o.length-1;l>=0;l--){var u=o[l],h=i(u,n);if(void 0!==h){var d=Object.create(t);d[u]=s.FreeVariable(u);var p=e.tryGetConcreteTree(d);if(!p.isError){var f=p.polynomialOrder(u);if(1===f){var m=p.getPolynomialCoefficients(u),g=m[1]?m[1].getConcreteTree(d):c,y=m[0]?m[0].getConcreteTree(d):c;if(y.isConstant&&g.isConstant&&isFinite(y.constantValue)&&isFinite(g.constantValue)&&0!==g.constantValue){var v=[-y.constantValue/g.constantValue,1/g.constantValue];return{symbol:u,id:h,coefficients:v}}}}}}return!1}var s=e("parsenodes"),a=e("math/types"),c=s.Constant(0);s.Base.prototype.getMoveStrategy=function(){},s.Assignment.prototype.getMoveStrategy=function(e,t,n){if(this._expression instanceof s.OrderedPair)return this._expression.getMoveStrategy(e,t,n)},s.OrderedPair.prototype.getMoveStrategy=function(e,i,s){if(i.valueType===a.Point&&0===i.getDependencies().length){for(var c=[],l={},u=0;u<2;u++){var h=this.args[u],d=h.getInputString();if(h.isConstant)c[u]=n(d);else{var p=o(h,e,s,l);p&&(c[u]=r(d,p.id,p.coefficients),l[p.symbol]=!0),c[u]||(c[u]=t(d))}}if("none"!==c[0].type||"none"!==c[1].type)return c}},s.Image.prototype.getMoveStrategy=function(e,i,s){if((!this.userData||this.userData.shouldGraph!==!1)&&"OrderedPair"===i.center.type&&i.center.args[0].isConstant&&i.center.args[1].isConstant&&i.width.isConstant&&i.height.isConstant&&i.radianAngle.isConstant){for(var a=[this.width,this.height,this.center.args[0],this.center.args[1]],c=[],l={},u=[2,3,0,1],h=0;h<u.length;h++){var d=u[h],p=a[d];if(p){var f=p.getInputString();if(p.isConstant)c[d]=n(f);else{var m=o(p,e,s,l);m&&(c[d]=r(f,m.id,m.coefficients),l[m.symbol]=!0),c[d]||(c[d]=t(f))}}else c[d]=t("")}if("none"!==c[0].type||"none"!==c[1].type||"none"!==c[2].type||"none"!==c[3].type)return c}}}),define("math/features/getDefaultDragMode",["require","parsenodes","graphing/dragmode"],function(e){var t=e("parsenodes"),n=e("graphing/dragmode");t.Base.prototype.getMoveStrategy=function(){return n.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?n.XY:"none"!==e[0].type?n.X:"none"!==e[1].type?n.Y:n.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?n.XY:"updateSlider"===e[0].type?n.X:"updateSlider"===e[1].type?n.Y:n.NONE}}),define("math/features/tableinfo",["require","parsenodes","math/types","graphing/label"],function(e){var t=e("parsenodes"),n=t.List,r=e("math/types"),i=e("graphing/label");t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.graphableAsBareIdentifier(this._symbol)&&(!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this._inputString,by_reference:!1})},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();switch(t.valueType){case r.Point:case r.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;var o=n.wrap(t).mapElements(function(e){return e.asArray()});return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:o};case r.Number:if(1!==i.length)return!1;var s=i[0];return!!e.validFirstColumnVariable(s)&&{independent_variable:s,dependent_column:this._inputString,by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,n){if(n instanceof t.SolvedEquation)return!1;if(!this._inputString.length)return!1;var r=n.getDependencies();if(r.length>1)return!1;var o;if(0===r.length){if(!e.tableableAsConstant(this._symbol))return!1;o=e.implicitIndependent(this._symbol)}else o=r[0];if(!e.validFirstColumnVariable(o))return!1;var s=e.assignmentForbidden(this._symbol)?i.trimLatex(this._inputString.replace(/[^=]*=/,"")):i.trimLatex(this._inputString.split("=")[0]);return{independent_variable:o,dependent_column:s,by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this._inputString.length)return!1;var n=t.getDependencies();if(n.length>1)return!1;var r=this._argSymbols[0];if(!e.validFirstColumnVariable(r))return!1;var o=e.assignmentForbidden(this._symbol),s=o?i.trimLatex(this._inputString.replace(/[^=]*=/,"")):i.trimLatex(this._inputString.split("=")[0]);return{independent_variable:r,dependent_column:s,by_reference:!o}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("math/features/tableerror",["require","parsenodes","lib/worker-i18n"],function(e){var t=e("parsenodes"),n=e("lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?n.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&n.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return n.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return n.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return n.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return n.t("Regressions are not allowed.")}}),define("math/features/islinear",["require","parsenodes"],function(e){var t=e("parsenodes");t.Base.prototype.isLinear=function(e){return!1},t.Expression.prototype.isLinear=function(e){return this.polynomialOrder(e)<=1},t.SolvedEquation.prototype.isLinear=function(e){return this._expression.isLinear(e)},t.OptimizedRegression.prototype.isLinear=function(e){return this.model.isLinear(e)},t.OrderedPair.prototype.isLinear=function(e){return this.args[0].isLinear(e)&&this.args[1].isLinear(e)},t.List.prototype.isLinear=function(e){return this.args.every(function(t){return t.isLinear(e)})},t.Broadcast.prototype.isLinear=function(e){for(var n=this._replacedSymbols,r=this._expression,i=this._lists,o={},s=0;s<i.length;s++)if(i[s].dependsOn(e)){if(!i[s].isLinear(e))return!1;o[n[s]]=t.FreeVariable(e)}return r.substitute(o).isLinear(e)}}),define("math/expression-types",["require","exports"],function(e,t){"use strict";function n(e,n){switch(e){case t.X_OR_Y:case t.SINGLE_POINT:case t.POINT_LIST:case t.PARAMETRIC:case t.POLAR:case t.IMPLICIT:case t.POLYGON:var r=t.EXPRESSION_PROP_DEFAULTS[e];return{points:void 0===n.points?r.points:n.points,lines:void 0===n.lines?r.lines:n.lines,fill:void 0===n.fill?r.fill:n.fill};default:var i=e;return i}}Object.defineProperty(t,"__esModule",{value:!0}),t.X_OR_Y="X_OR_Y",t.SINGLE_POINT="SINGLE_POINT",t.POINT_LIST="POINT_LIST",t.PARAMETRIC="PARAMETRIC",t.POLAR="POLAR",t.IMPLICIT="IMPLICIT",t.POLYGON="POLYGON",t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0}},t.getReconciledExpressionProps=n}),define("math/features/graph",["require","underscore","parsenodes","math/plotter","graphing/graphmode","math/comparators","graphing/dragmode","math/expression-types"],function(e){function t(e){for(var t=[],n=[],r=e.length,i=0;i<r;i++)t.push(e[i][0]),n.push(e[i][1]);return{defined:{x:t,y:n}}}function n(e){return Array.prototype.concat.apply([],e)}function r(e,t,n){return!!e&&(0===t&&0===n?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==n?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==n&&"none"!==e[1].type)}var i=e("underscore"),o=e("parsenodes"),s=e("math/plotter").default,a=e("graphing/graphmode"),c=e("math/comparators"),l=e("graphing/dragmode"),u=e("math/expression-types"),h=o.List;o.Base.prototype._graph=function(e,r,c,l){if(r instanceof o.SolvedEquation)return this._graph(e,r._expression,c,l);var d,p,f,m,g,y=this,v=r.getExpressionType(l.graphMode,r.valueType),b=u.getReconciledExpressionProps(v,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(l.graphMode){case a.XYPOINT_MOVABLE:return d=[r.asArray()],f=this.userData.shouldGraph&&b.points,g=this.userData.showLabel&&!f,f?[{segments:[d],graphMode:l.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labels:this.computedLabels||[],poi:t(d)}]:g?[{segments:[d],graphMode:a.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labels:this.computedLabels||[],poi:t(d)}]:[];case a.XYPOINT:return p=[],d=h.wrap(r).mapElements(function(e){return e.asArray()}),f=this.userData.shouldGraph&&b.points,m=this.userData.shouldGraph&&b.lines,g=this.userData.showLabel&&!f&&!m,(this.userData.showLabel||f)&&p.push({segments:[d],graphMode:l.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:f,labelSize:this.userData.labelSize,nakedLabel:g,labels:this.computedLabels||[],poi:t(d)}),m&&p.push({segments:[d].map(n),graphMode:a.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,poi:[]}),p;case a.PARAMETRIC:var x=this.userData,_=[];if(p=h.wrap(r).mapElements(function(n){var r=n.getDependencies();if(0===r.length)return d=[n.asArray()],{segments:[d],graphMode:a.XYPOINT,color:x.color,style:x.lineStyle,poi:t(d)};var i=n.getCompiledFunction().fn,o=y.getGraphInfo(e,n);return o.graphMode=l.graphMode,o.domain=y.userData.domain,o.style=y.userData.lineStyle,s.computeGraphData(c,o,i)}),b.fill){if(p.forEach(function(e){_.push({segments:e.segments,color:x.color,fillOpacity:x.fillOpacity,graphMode:a.POLYGONFILL,poi:[]})}),!b.lines)return _;p=p.concat(_)}return p;case a.X:case a.Y:case a.IMPLICIT:case a.POLAR:return p=[],h.wrap(r).eachElement(function(t){var n,r=l.graphMode===a.IMPLICIT?t.getCompiledFunction(["x","y"]):t.getCompiledFunction();try{n=t.getCompiledDerivative()}catch(e){}var o=y.getGraphInfo(e,t);o.graphMode=l.graphMode,o.style=y.userData.lineStyle;var u=n?s.computeGraphData(c,o,r.fn,n.fn):s.computeGraphData(c,o,r.fn);u.compiled=r,u.fillSegments?p.push(i.omit(u,"fillSegments")):p.push(u),o.graphMode===a.IMPLICIT&&"="!==o.operator&&p.push({graphMode:a.POLYGONFILL,segments:u.fillSegments,poi:{}})}),p;default:return!1}},o.Base.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);return this._graph(e,t,n,r)},o.BaseComparator.prototype.graph=function(e,t,n){var r=this,i=this.getGraphInfo(e,t),l=i.graphMode;if(l===a.IMPLICIT)return this._graph(e,t,n,i);if(l===a.NONE)return!1;if(!(t instanceof o.SolvedEquation))return!1;var u=this.getOperator(),h=[],d=[],p=!0;t._expression.eachElement(function(e){h.push(e.getCompiledFunction());try{d.push(e.getCompiledDerivative())}catch(e){p=!1}}),p||(d=void 0);var f,m,g=[],y=[-1,0,0,1],v=h.length;for(m=0;m<v;m++){var b=this.getGraphInfo(e,t._expression.args[m]);b.graphMode=l,b.style=r.userData.lineStyle,f=d?s.computeGraphData(n,b,h[m].fn,d[m].fn):s.computeGraphData(n,b,h[m].fn),f.compiled=h[m],f.operator=c.get(c.table[u].inclusive,y[m%4]),g.push(f)}for(m=0;m<v;m+=4){var x=s.polygonsFromSegments(g[m+1].segments,g[m+2].segments,l);g.push({graphMode:a.POLYGONFILL,segments:x,poi:{}})}return g},o.DoubleInequality.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);if(r.graphMode===a.NONE)return!1;var i=[],o=c.get(c.table[this._operators[0]].inclusive,0),l=c.get(c.table[this._operators[1]].inclusive,0),u=this.userData,d=this;return h.eachArgs(t._expressions,function(t){var c,h;t[0].userData=t[1].userData=u,c=d._graph(e,t[0],n,r)[0],c.operator=o,i.push(c),h=d._graph(e,t[1],n,r)[0],h.operator=l,i.push(h);var p=s.polygonsFromSegments(c.segments,h.segments,c.graphMode);i.push({graphMode:a.POLYGONFILL,segments:p,poi:{}})}),i},o.Regression.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);return this._graph(e,t.model,n,r)},o.Polygon.prototype.graph=function(e,t,r){for(var i=this.getGraphInfo(e,t),o=t.args[0].asValue(),s=[],c=void 0===this.userData.lines||this.userData.lines,l=void 0===this.userData.fill||this.userData.fill,u=[],h=[],d=0;d<o.length;d++){var p=o[d][0],f=o[d][1];isFinite(p)&&isFinite(f)?(c||l)&&h.push([p,f]):(c||l)&&(h.length>1&&u.push(h),h=[])}if(u.length||h.length){h.push([o[0][0],o[0][1]]),u.push(h);var m=u.map(n);l&&s.push({segments:m,graphMode:a.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.userData.fillOpacity,style:i.style}),c&&s.push({segments:m,graphMode:a.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle})}return s},o.Table.prototype.isValueDraggable=function(e,t,n){if(!e.columns[t].isIndependent)return!1;var r=this.columns[t],i=r.values,o=i&&i[n];return!(!o||!isFinite(o.constantValue)||0!==o._dependencies.length)},o.Table.prototype.graph=function(e,r,i){var o=[];if(r.columns[0].isError)return o;for(var s=r.columns[0],c=s.values,u=1;u<this.columns.length;u++){var h=r.columns[u];if(!h.isError){var d=this.columns[u].header.userData;if(!d.hidden){for(var p=d.dragMode,f=p===l.X||p===l.XY,m=p===l.Y||p===l.XY,g=!!d.points,y=!!d.lines,v=h.isDiscrete(s),b=y&&v,x=y&&!v,_=[],w=[],E=[],S=[],M=[],I=[],k=0;k<c.length;k++){var T=c[k],C=h.values[k];if(T&&C&&isFinite(T.constantValue)&&isFinite(C.constantValue)){if(g){var A=f&&this.isValueDraggable(r,0,k),P=m&&this.isValueDraggable(r,u,k);A||P?(E.push([T.constantValue,C.constantValue]),S.push({index:k,dragX:A,dragY:P})):w.push([T.constantValue,C.constantValue])}b&&I.push([T.constantValue,C.constantValue])}else b&&(I.length>1&&M.push(I),I=[])}if(E.length&&_.push({graphMode:a.XYPOINT_MOVABLE,segments:[E],color:d.color,tableId:d.tableId,poi:t(E),movablePointInfo:S}),w.length&&_.push({segments:[w],graphMode:a.XYPOINT,showPoint:!0,poi:t(w),color:d.color,style:d.pointStyle}),(M.length||I.length)&&(M.push(I),_.push({segments:M.map(n),graphMode:a.PARAMETRIC,poi:[],color:d.color,style:d.lineStyle})),x){var O=this.columns[u].header.graph(e,r.columns[u].header,i);O.length&&Array.prototype.push.apply(_,O)}_.length&&(o[d.id]=_)}}}return o},o.Image.prototype.graph=function(e,n,i){var o=[];if(!("OrderedPair"===n.center.type&&n.center.args[0].isConstant&&n.center.args[1].isConstant&&n.radianAngle.isConstant&&n.width.isConstant&&n.height.isConstant))return o;for(var s=[],c=[],l=n.width.constantValue/2,u=n.height.constantValue/2,h=n.radianAngle.constantValue,d=-1;d<=1;d++)for(var p=-1;p<=1;p++){var f=[n.center.args[0].constantValue+d*l*Math.cos(h)+p*u*Math.sin(h),n.center.args[1].constantValue-d*l*Math.sin(h)+p*u*Math.cos(h)],m=r(n.moveStrategy,d,p);m&&(s.push(f),c.push([d,p]))}return o.push({segments:[s],scaleFactors:[c],graphMode:a.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:t(s)}),o}}),define("math/features/elementAt",["require","parsenodes","math/builtinframe"],function(e){function t(e){for(var t=0;t<this.length;t++)e(this.elementAt(t))}function n(e){for(var t=[],n=0;n<this.length;n++)t.push(e(this.elementAt(n)));return t}var r=e("parsenodes"),i=e("math/builtinframe");r.List.prototype.elementAt=function(e){return e=Math.floor(e),e>=0&&e<this.args.length?this.args[e]:r.Constant(NaN)},r.Broadcast.prototype.elementAt=function(e){if(e=Math.floor(e),e<0||e>=this.length)return r.Constant(NaN);for(var t={},n=0;n<this._replacedSymbols.length;n++)t[this._replacedSymbols[n]]=this._lists[n].elementAt(e);return this._expression.substitute(t).getConcreteTree(i)},r.List.prototype.eachElement=t,r.Broadcast.prototype.eachElement=t,r.List.prototype.mapElements=n,r.Broadcast.prototype.mapElements=n,r.OrderedPair.prototype.elementAt=function(e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return r.Constant(NaN)}}}),define("lib/number-to-latex",["require","exports"],function(e,t){"use strict";function n(e){if("string"==typeof e)return e;var t=e+"";return t=t.replace(/1e\+?([-\d]+)/,"10^{$1}"),t=t.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("math/features/printLatex",["require","parsenodes","graphing/label","lib/number-to-latex"],function(e){function t(){return c.identifierToLatex(this._symbol)}function n(e){switch(e){case">":return"\\gt";case"<":return"\\lt";case">=":return"\\ge";case"<=":return"\\le";case"=":return"="}}function r(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\log_{"+this.args[1].printLatex()+"}\\left("+this.args[0].printLatex()+"\\right)";default:return c.identifierToLatex(this._symbol)+"\\left("+this.args.map(r).join(", ")+"\\right)"}}function o(e){return e.isConstant&&e.constantValue===!0}function s(e){return e.isConstant&&e.isNaN()}var a=e("parsenodes"),c=e("graphing/label"),l=e("lib/number-to-latex").default;a.Identifier.prototype.printLatex=t,a.FreeVariable.prototype.printLatex=t,a.Constant.prototype.printLatex=function(){return l(this.constantValue)},a.Negative.prototype.printLatex=function(){return"-\\left("+this.args[0].printLatex()+"\\right)"},
a.Add.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)+\\left("+this.args[1].printLatex()+"\\right)"},a.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\% \\operatorname{of} "+this.args[1].printLatex()},a.Subtract.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)-\\left("+this.args[1].printLatex()+"\\right)"},a.Multiply.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)*\\left("+this.args[1].printLatex()+"\\right)"},a.Divide.prototype.printLatex=function(){return"\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},a.Exponent.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)^{"+this.args[1].printLatex()+"}"},a.Assignment.prototype.printLatex=function(){return c.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},a.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},a.BaseComparator.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+n(this.operator)+"\\left("+this.args[1].printLatex()+"\\right)"},a.DoubleInequality.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+n(this.args[1])+this.args[2].printLatex()+n(this.args[3])+"\\left("+this.args[4].printLatex()+"\\right)"},a.And.prototype.printLatex=function(){if(!(this.args[0]instanceof a.BaseComparator&&this.args[1]instanceof a.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\left("+this.args[0].args[0].printLatex()+"\\right)"+n(this.args[0].operator)+"\\left("+this.args[0].args[1].printLatex()+"\\right)"+n(this.args[1].operator)+"\\left("+this.args[1].args[1].printLatex()+"\\right)"},a.NativeFunction.prototype.printLatex=i,a.TypedFunction.prototype.printLatex=i,a.ReducerFunction.prototype.printLatex=i,a.ParametrizedReducerFunction.prototype.printLatex=i,a.DoubleReducerFunction.prototype.printLatex=i,a.FunctionCall.prototype.printLatex=i,a.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("'")+"\\left("+this.args[0].args[0].printLatex()+"\\right)";default:return c.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("'")+"\\left("+this.args[0].args.map(r).join(", ")+"\\right)"}},a.List.prototype.printLatex=function(){return"\\left["+this.args.map(r).join(", ")+"\\right]"},a.Range.prototype.printLatex=function(){return"\\left["+this.args[0].args.map(r).join(", ")+" ... "+this.args[1].args.map(r).join(", ")+"\\right]"},a.ListAccess.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)\\left["+this.args[1].printLatex()+"\\right]"},a.OrderedPair.prototype.printLatex=function(){return"\\left("+this.args.map(r).join(", ")+"\\right)"},a.Sum.prototype.printLatex=function(){return"\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},a.Product.prototype.printLatex=function(){return"\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},a.Integral.prototype.printLatex=function(){return"\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)d"+this.args[0].printLatex()},a.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\left("+this.args[1].printLatex()+"\\right)^{"+this.args[2].printLatex()+"}"},a.Piecewise.prototype.printLatex=function(){var e=this;if(o(e.args[0]))return e.args[1].printLatex();for(var t=["\\left\\{"];;){if(o(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),s(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof a.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\right\\}"),t.join("")},a.FunctionDefinition.prototype.printLatex=function(){return c.identifierToLatex(this._symbol)+"\\left("+this._argSymbols.map(c.identifierToLatex).join(", ")+"\\right) = "+this._expression.printLatex()},a.Derivative.prototype.printLatex=function(){return"\\frac{d}{d"+c.identifierToLatex(this._symbol)+"}\\left("+this.args[0].printLatex()+"\\right)"},a.Regression.prototype.printLatex=function(){return"\\left("+this._lhs.printLatex()+"\\right)\\sim\\left("+this._rhs.printLatex()+"\\right)"},a.Polygon.prototype.printLatex=function(){return"\\polygon\\left("+this.args.map(r).join(", ")+"\\right)"}}),define("math/features/getExpressionType",["require","parsenodes","graphing/graphmode","math/expression-types","math/types"],function(e){var t=e("parsenodes"),n=e("graphing/graphmode"),r=e("math/expression-types"),i=e("math/types");t.Base.prototype.getExpressionType=function(e,t){return e===n.X||e===n.Y?r.X_OR_Y:e===n.XYPOINT||e===n.XYPOINT_MOVABLE?t===i.Point?r.SINGLE_POINT:r.POINT_LIST:e===n.PARAMETRIC?r.PARAMETRIC:e===n.POLAR?r.POLAR:e===n.IMPLICIT?r.IMPLICIT:r.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return r.POLYGON}}),define("parser",["require","math/baseparser","math/features/getConcreteTree","math/features/getValueType","math/features/typeCheck","math/features/repr","math/features/scalarEvalExpression","math/features/okForImplicitFunction","math/features/constantcollapsedcopy","math/features/polynomialorder","math/features/polynomialcoefficients","math/features/extractconditions","math/features/bounddomain","math/features/derivative","math/features/substitute","math/features/solve","math/features/analyze","math/features/analyzeFourFunction","math/features/analyzeScientific","math/features/analyzeSingleExpressionScientific","math/features/getgraphmode","math/features/getgraphinfo","math/features/getMoveStrategy","math/features/getDefaultDragMode","math/features/tableinfo","math/features/tableerror","math/features/islinear","math/features/graph","math/features/elementAt","math/features/printLatex","math/features/getExpressionType"],function(e){var t=e("math/baseparser");return e("math/features/getConcreteTree"),e("math/features/getValueType"),e("math/features/typeCheck"),e("math/features/repr"),e("math/features/scalarEvalExpression"),e("math/features/okForImplicitFunction"),e("math/features/constantcollapsedcopy"),e("math/features/polynomialorder"),e("math/features/polynomialcoefficients"),e("math/features/extractconditions"),e("math/features/bounddomain"),e("math/features/derivative"),e("math/features/substitute"),e("math/features/solve"),e("math/features/analyze"),e("math/features/analyzeFourFunction"),e("math/features/analyzeScientific"),e("math/features/analyzeSingleExpressionScientific"),e("math/features/getgraphmode"),e("math/features/getgraphinfo"),e("math/features/getMoveStrategy"),e("math/features/getDefaultDragMode"),e("math/features/tableinfo"),e("math/features/tableerror"),e("math/features/islinear"),e("math/features/graph"),e("math/features/elementAt"),e("math/features/printLatex"),e("math/features/getExpressionType"),t}),define("math/finddependencyorder",["require","math/builtinframe","underscore"],function(e){function t(e,t,i){function o(e){y[e]=y[e]||{};var n,r=y[e];r.id=e,r.index=v,r.lowlink=v,b.push(r),r.instack=!0,v++;for(var i=t[e].getDependencies(),c=0;c<i.length;c++){var l=i[c];if(f.hasOwnProperty(l))for(var u=f[l],h=0;h<u.length;h++){var d=u[h];y.hasOwnProperty(d)?(n=y[d],n.instack&&(r.lowlink=Math.min(r.lowlink,n.index))):(o(d),n=y[d],r.lowlink=Math.min(r.lowlink,n.lowlink))}}if(r.lowlink===r.index)if(n=b.pop(),n.instack=!1,n===r)s(r);else{for(var p=[n];;)if(n=b.pop(),n.instack=!1,p.push(n),n===r)break;a(p)}}function s(e){x.push(e.id)}function a(n){var i,o,s=[];for(o=n.length-1;o>=0;o--){i=n[o];var a=t[i.id].getLegalExports(e);Array.prototype.push.apply(s,a),s.push(a[0]),x.push(i.id)}for(s=r.unique(s),s.sort(),o=0;o<s.length;o++)g[s[o]]=s}var c,l,u,h,d,p=[],f={},m={},g={},y={},v=0,b=[],x=[];if(!i){i=[];for(c in t)t.hasOwnProperty(c)&&i.push(c)}for(c in t)if(t.hasOwnProperty(c)){for(d=t[c].exportPenalty||0;p.length<d+1;)p.push([]);p[d].push(c)}for(d=0;d<p.length;d++){var _={};for(l=0;l<p[d].length;l++){c=p[d][l];var w=t[c].getLegalExports(e);for(u=0;u<w.length;u++)h=w[u],n[h]||f[h]||(_[h]=_[h]||[],_[h].push(c),_[h].length>1&&(m[h]=!0))}for(h in _)f[h]=_[h]}for(l=0;l<i.length;l++)y.hasOwnProperty(i[l])||o(i[l]);return{resolved:x,multiplyDefined:m,cyclicallyDefined:g}}var n=e("math/builtinframe"),r=e("underscore");return t}),define("math/findIntersections",["require","graphing/graphmode","./plotter","parsenodes","./distance"],function(e){function t(e){for(var t=[],n=0;n<e;n++)t[n]={x:[],y:[],intersects:[]};return t}function n(e,t,n,r){return n===u.X&&r===u.X||n===u.Y&&r===u.Y?function(n){return t(n)-e(n)}:(n===u.X&&r===u.Y||n===u.Y&&r===u.X)&&function(n){return n-t(e(n))}}function r(e){e instanceof d.SolvedEquation?e=e._expression:e instanceof d.OptimizedRegression&&(e=e.model);var t=[],n=[];return e instanceof d.DoubleInequality?d.List.eachArgs(e._expressions,function(e){t.push(e[0].getCompiledFunction()),n.push(e[0].isConstant&&e[1].isNaN()),t.push(e[1].getCompiledFunction()),n.push(e[1].isConstant&&e[1].isNaN())}):d.List.wrap(e).eachElement(function(e){t.push(e.getCompiledFunction()),n.push(e.isConstant&&e.isNaN())}),{functions:t,skipIntersecting:n}}function i(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var o=e[i],s=r(o.concreteTree);n.push({id:i,graphMode:o.getGraphMode(),functions:s.functions,skipIntersecting:s.skipIntersecting})}return n}function o(e,t){e.intersects=Array(e.x.length);for(var n=0;n<e.x.length;n++)e.intersects[n]=t}function s(e,t){if(t===u.X){var n=e.y;e.y=e.x,e.x=n}}function a(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function c(e,t,n){var r=h.sampleXY(e,t),i=r.poi.zeros,o=r.poi.extrema,s=[],a=0,c=0;for(a=0;a<i.x.length;a++){for(;c<o.x.length&&o.x[c]<i.x[a];c++)p.approx(o.y[c],0)&&s.push(o.x[c]);s.push(i.x[a])}for(;c<o.x.length;c++)p.approx(o.y[c],0)&&s.push(o.x[c]);return{x:s,y:s.map(n)}}function l(e,l,u){var d=e[u],p=d.getGraphInfo(),m=d.getGraphMode(),g=r(d.concreteTree),y=t(g.functions.length),v=i(e,u);if(!v)return y;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],w=0;w<g.functions.length;w++)if(!g.skipIntersecting[w])for(var E=g.functions[w].fn,S=h.computeDomain(l,p,E),M=0;M<_.functions.length;M++)if(!v[x].skipIntersecting[M]){var I=_.functions[M].fn,k=n(E,I,m,_.graphMode);if(k){var T=c(k,S,E);if(b+=T.x.length,b>f)return t(g.functions.length);o(T,_.id),s(T,m),a(y[w],T)}}return y}var u=e("graphing/graphmode"),h=e("./plotter").default,d=e("parsenodes"),p=e("./distance"),f=100;return{findIntersections:l,findIndicatorZeros:c}}),define("math/interpolatedlabel",["require","exports","parsenodes","math/types","graphing/label"],function(e,t,n,r,i){"use strict";function o(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function s(e){for(var t,n=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],r="\\$({"+n.join("})|\\$({")+"})",i=new RegExp(r,"g"),o=[],s=0,a=0;t=i.exec(e);){a=t.index,a>s&&o.push(e.substr(s,a-s));var c=t[0],l=c.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");o.push({symbol:l,str:c}),s=t.index+c.length}return s<e.length&&o.push(e.substr(s)),{raw:e,parts:o}}function a(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function c(e,t,i){for(var s=[],c=o(e.raw),l=0,u=e.parts;l<u.length;l++){var h=u[l];if("string"==typeof h)s.push(h);else{var d=n.Identifier(h.symbol).tryGetConcreteTree(t);if(d.valueType===r.Number){var p=d.constantValue;if("number"==typeof p){s.push(a(p,c));continue}}else if(d.valueType===r.ListOfNumber&&d.args[i]){var p=d.args[i].constantValue;if("number"==typeof p){s.push(a(p,c));continue}}c?s.push("{?}"):s.push("?")}}return s.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMathLabel=o,t.parse=s,t.interpolate=c}),define("math/policyFourFunction",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]}};return t}),define("math/policyScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"tmp"===e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!0},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise"]}};return t}),define("math/policySingleExpressionScientific",["require"],function(e){var t={assignmentForbidden:function(e){return"ans"!==e.slice(0,3)},sliderForbidden:function(e){return!0},sliderVariables:function(){return[]},graphingEnabled:function(){return!1},ansEnabled:function(){return!1},disabledFeatures:function(){return["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]}};return t}),define("math/policyGraphing",["require","graphing/graphmode","math/parsenode/builtinfunction"],function(e){var t=e("graphing/graphmode"),n=e("math/parsenode/builtinfunction"),r={assignmentForbidden:function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||n.hasOwnProperty(e)},sliderForbidden:function(e){return r.assignmentForbidden(e)||"ans"===e.slice(0,3)},sliderVariables:function(e){return e.indexOf("theta")!==-1&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!r.sliderForbidden(e)})},graphingEnabled:function(){return!0},ansEnabled:function(){return!1},validRegressionParameter:function(e){return"x"!==e&&"y"!==e},validLHS:function(e){return"theta"!==e},unplottablePolarFunction:function(e,t){return"theta"===e&&t.indexOf("r")!==-1},validDoubleInequalitySymbol:function(e){return"x"===e||"y"===e},validDoubleInequalityVariables:function(e){return!(e.length>2)&&e.every(r.validDoubleInequalitySymbol)},validExpressionVariable:function(e){return"x"===e},validSolvedVariable:function(e){return"x"===e||"y"===e||"r"===e},validImplicitVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},graphableListVariables:function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},validParametricVariable:function(e){return"t"===e},validParametricVariables:function(e){return 1===e.length&&r.validParametricVariable(e[0])},validInequalityVariables:function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return r.validImplicitVariables(e);default:return!1}},validFirstColumnVariable:function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\d+)/)},complicatedPolarImplicit:function(e,t){return"theta"===e||"r"===e&&1!==t},constantGraphMode:function(e){return"x"===e?t.X:"r"===e?t.POLAR:t.Y},graphMode:function(e,n){return"y"===n?t.X:"x"===e?t.X:"r"===e&&"theta"===n?t.POLAR:t.Y},tableableAsConstant:function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},implicitIndependent:function(e){return"x"},implicitDependency:function(e){return"y"===e?"x":"theta"===e?"r":"y"},graphableAsConstant:function(e){return"y"===e||"x"===e||"r"===e},graphableAsBareIdentifier:function(e){return"x"===e},disabledFeatures:function(){return[]}};return r}),define("math/frameFourFunction",["require"],function(e){return{frame:{},restrictedFunctionsFrame:{}}}),define("math/frameScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r))throw new Error("Programming Error: key '"+r+"' does not exist in table. Must be one of:\n"+Object.keys(t).join("\n"))}}function n(e,n,r,i){t(n,i),t(r,i);for(var o=0;o<n.length;o++){var s=n[o];r.indexOf(s)===-1&&(e[s]=i[s])}}var r=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),o={},s=["pi","e","trigAngleMultiplier"],a=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return n(o,s,[],r),n(o,a,[],i),{frame:o,restrictedFunctionsFrame:o}}),define("math/frameSingleExpressionScientific",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){function t(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r))throw new Error("Programming Error: key '"+r+"' does not exist in table. Must be one of:\n"+Object.keys(t).join("\n"))}}function n(e,n,r,i){t(n,i),t(r,i);for(var o=0;o<n.length;o++){var s=n[o];r.indexOf(s)===-1&&(e[s]=i[s])}}var r=e("math/builtinconstants"),i=e("math/parsenode/builtinfunction"),o={},s=["pi","e","trigAngleMultiplier"],a=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return n(o,s,[],r),n(o,a,[],i),{frame:o,restrictedFunctionsFrame:o}}),define("math/frameGraphing",["require","math/builtinconstants","math/parsenode/builtinfunction"],function(e){var t,n=e("math/builtinconstants"),r=e("math/parsenode/builtinfunction"),i=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"],o={},s={};for(t in n)n.hasOwnProperty(t)&&(o[t]=n[t],s[t]=n[t]);for(t in r)r.hasOwnProperty(t)&&(o[t]=r[t],i.indexOf(t)===-1&&(s[t]=r[t]));return{frame:o,restrictedFunctionsFrame:s}}),define("math/context",["require","console","pjs","underscore","./plotter","parser","math/parsenode/constant","math/parsenode/image","math/parsenode/table","math/parsenode/tablecolumn","math/parsenode/freevariable","math/parsenode/builtinfunction","math/finddependencyorder","math/errormsg","graphing/graphmode","worker/workerconfig","./findIntersections","./interpolatedlabel","math/types","math/policyFourFunction","math/policyScientific","math/policySingleExpressionScientific","math/policyGraphing","math/frameFourFunction","math/frameScientific","math/frameSingleExpressionScientific","math/frameGraphing"],function(e){function t(e,t,n){n||(n=[]);var r;return r=t?_[e].restrictedFunctionsFrame:_[e].frame,n.indexOf("sqrt")!==-1&&(r=Object.create(r),r.sqrt=d.sqrt),r}var n=e("console"),r=e("pjs"),i=e("underscore"),o=e("./plotter").default,s=e("parser"),a=e("math/parsenode/constant"),c=e("math/parsenode/image"),l=e("math/parsenode/table"),u=e("math/parsenode/tablecolumn"),h=e("math/parsenode/freevariable"),d=e("math/parsenode/builtinfunction"),p=e("math/finddependencyorder"),f=e("math/errormsg"),m=e("graphing/graphmode"),g=e("worker/workerconfig"),y=e("./findIntersections").findIntersections,v=e("./interpolatedlabel"),b=e("math/types"),x={fourFunction:e("math/policyFourFunction"),scientific:e("math/policyScientific"),singleExpressionScientific:e("math/policySingleExpressionScientific"),graphing:e("math/policyGraphing")},_={fourFunction:e("math/frameFourFunction"),scientific:e("math/frameScientific"),singleExpressionScientific:e("math/frameSingleExpressionScientific"),graphing:e("math/frameGraphing")};return r(function(e){function r(e){return"ans"!==e.slice(0,3)}function d(e,t){var n,i=e.multiplyDefined,o=e.cyclicallyDefined;for(n in i)i.hasOwnProperty(n)&&(t[n]=f.multiplyDefined(n));for(n in o)o.hasOwnProperty(n)&&(t[n]=f.cycle(o[n].filter(r)))}e.triggerGraphComputed=function(){},e.triggerStatusChange=function(){},e.triggerRemoveGraph=function(){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.triggerDidAddStatement=function(){},e.triggerDidRemoveStatement=function(){},e.triggerDidUpdateIntersections=function(){},e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unanalyzedIds={},this.unpublishedIds={},this.intersectIds={},this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.invalidate()},e.processChangeSet=function(e){e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={}),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("pointsOfInterest")&&this.setPointsOfInterest(e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setPlotSingleVariableImplicitEquations(e.plotSingleVariableImplicitEquations),e.hasOwnProperty("intersectIds")&&(this.intersectIds=e.intersectIds),this.processStatements(e),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId),this._publishAllStatuses(),this._computeAllLabels(),this._graphAllChanged(),this.unpublishedIds={},e.isCompleteState?this.triggerRenderSlowly():this.triggerRender()},e.processStatements=function(e){var t;if(e.statements)for(var n in e.statements){var r=e.statements[n];if(null===r){if(!e.isCompleteState&&this.statements.hasOwnProperty(n)&&(t=this.statements[n].getAllIds()),this.removeStatement(n),!e.isCompleteState&&t){for(var i=0;i<t.length;i++)this.triggerRemoveGraph(t[i]);this.triggerDidRemoveStatement(n)}}else this.addStatement(r),e.isCompleteState||this.triggerDidAddStatement(r)}},e.setViewState=function(e){if(!i.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.constantValue:e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=x[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setPointsOfInterest=function(e){e!==g.pointsOfInterest&&(g.pointsOfInterest=e,this.invalidate())},e.setPlotSingleVariableImplicitEquations=function(e){e!==g.plotSingleVariableImplicitEquations&&(g.plotSingleVariableImplicitEquations=e,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var n in this.unpublishedIds)if(this.analysis.hasOwnProperty(n)){var r=this.analysis[n].evaluationState;JSON.stringify(r)!==JSON.stringify(t[n])&&(e[n]=r),this.currentStatus[n]=r}this.triggerStatusChange(e)},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var n=t.tryGetConcreteTree(this.frame),r=1;n.valueType===b.ListOfPoint&&(r=n.args.length);for(var o=[],s=0;s<r;s++)o.push(v.interpolate(this.currentLabel[e],this.frame,s));i.isEqual(o,t.computedLabels)||(t.computedLabels=o,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(){var e=this.getViewState();if(o.validateViewState(e)){for(var t in this.unpublishedIds)if(this.analysis.hasOwnProperty(t)){var n=this.analysis[t];if(n.rawTree.isTable)for(var r=n.graph(e),s=n.rawTree.getAllIds(),a=0;a<s.length;a++)r[s[a]]?this.triggerGraphComputed(s[a],r[s[a]]):this.triggerRemoveGraph(s[a]);else n.evaluationState.is_graphable&&(n.rawTree.userData.shouldGraph||n.rawTree.userData.showLabel)?(this.triggerGraphComputed(t,n.graph(e)),this.intersectIds.hasOwnProperty(t)&&this._updateIntersections(t)):this.triggerRemoveGraph(t)}if(i.keys(this.unpublishedIds).length)for(var c in this.intersectIds)this.unpublishedIds.hasOwnProperty(c)||this.intersectIds.hasOwnProperty(c)&&this._updateIntersections(c)}},e._updateIntersections=function(e){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void this.triggerDidUpdateIntersections(e,[]);var t=y(this.analysis,this.viewState,e);this.triggerDidUpdateIntersections(e,t)}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=this.functionDefinition===!1?t.concat("FunctionDefinition"):t;var n=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||n.indexOf("exponent")===-1)&&("PercentOf"!==e||n.indexOf("percent")===-1)}.bind(this))},e.addStatement=function(e){if(e){var t=e.id;this.markDirty(t);var n={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures()};switch(e.type){case"table":var r=[];this.statements.hasOwnProperty(t)&&(r=this.statements[t].getAllIds()),e.shouldGraph=!0;for(var i,o,h,d=e.columns,p=[],f=0,m=0;m<d.length;m++)f=Math.max(d[m].values.length,f);for(var g=0;g<d.length;g++){i=s.parse(d[g].latex,n),o=[];for(var y=-1,b=0;b<d[g].values.length;b++)d[g].values[b].replace(/\\space/g,"").match(/\S/)?(o.push(s.parse(d[g].values[b],n)),y=b):o.push(a(NaN));o=o.slice(0,y+1),h=u(i,f,o),h.id=d[g].id,h.header&&(h.header.userData=d[g]),p.push(h)}this.statements[t]=l(p);var x=this,_=this.statements[t].getAllIds();r.forEach(function(e){_.indexOf(e)===-1&&x.triggerRemoveGraph(e)});break;case"image":var w="-\\trigAngleMultiplier*\\arctan(\\sin("+e.angle+"),\\cos("+e.angle+"))";this.statements[t]=c({center:s.parse(e.center,n),radianAngle:s.parse(w,n),width:s.parse(e.width,n),height:s.parse(e.height,n)});break;default:this.statements[t]=s.parse(e.latex,n)}if(this.statements[t].userData=e,e.label){var E=this.currentLabel[t];E&&E.raw===e.label||(this.currentLabel[t]=v.parse(e.label))}else delete this.currentLabel[t];this.markClean(e.id),this.markDirty(e.id)}},e.removeStatement=function(e){if(this.statements.hasOwnProperty(e)){var t=this.statements[e];if(this.markDirty(e),t.isTable){var n=this;t.getAllIds().forEach(function(e){n.triggerRemoveGraph(e)})}else this.triggerRemoveGraph(e);delete this.currentLabel[e],delete this.statements[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markDirty(e,{});this.currentStatus={},this.parent_frame=Object.create(t(this.evaluationMode,this.restrictedFunctions,this.additionalFunctions)),this.parent_frame.trigAngleMultiplier=a(this.use_degrees?Math.PI/180:1),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.buildSymbolToExpressionDirtyMap=function(){var e,t,n={};for(var r in this.statements)if(this.statements.hasOwnProperty(r)){var i=this.statements[r].getDependencies();for(e=0;e<i.length;e++)t=i[e],n[t]||(n[t]=[]),n[t].push(r);var o=this.statements[r].getExports();for(e=0;e<o.length;e++)t=o[e],n[t]||(n[t]=[]),n[t].push(r)}return n},e.markDirty=function(e,t){if(this.statements[e]&&!this.unanalyzedIds[e]){t||(t=this.buildSymbolToExpressionDirtyMap()),this.unanalyzedIds[e]=!0,this.unpublishedIds[e]=!0,delete this.analysis[e];for(var n=this.statements[e],r=n.getLegalExports(this.policy),i=0;i<r.length;i++)this.markSymbolDirty(r[i],t);if(n.isRegression){var o=this.lastFrame;this.invalidate(),this.lastFrame=o}}},e.markSymbolDirty=function(e,t){delete this.frame[e],delete this.regressionFrame[e];var n=t[e];if(n)for(var r=0;r<n.length;r++)this.markDirty(n[r],t)},e.markClean=function(e){delete this.unanalyzedIds[e]},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,n=this.frame,r=this.lastFrame,i=this.regressionFrame,o=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&o.push(t);var s=this;o.sort(function(e,t){var n=s.statements[e].userData&&s.statements[e].userData.residualVariable,r=s.statements[t].userData&&s.statements[t].userData.residualVariable;return n&&!r?-1:r&&!n?1:0});var a=p(this.policy,e,o);d(a,i);for(var c=a.resolved,l={},u=0;u<c.length;u++)if(t=c[u],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,n,r,l),this.analysis[t].exportTo(this.policy,n),delete e[t];else{var h=e[t].tryGetConcreteTree(i);e[t].exportTo(this.policy,h,i),l[t]={rawTree:e[t],concreteTree:h}}},e.updateAnalysis=function(){var e,t={};for(e in this.unanalyzedIds)this.unanalyzedIds.hasOwnProperty(e)&&this.statements[e]&&(t[e]=this.statements[e]);"graphing"===this.evaluationMode&&this._updateRegressions(t);var n=this.analysis,r=this.frame,i=p(this.policy,t);d(i,r);for(var o=i.resolved,s=0;s<o.length;s++)switch(e=o[s],this.evaluationMode){case"fourFunction":n[e]=this.statements[e].analyzeFourFunction(this.policy,r,n),n[e].exportTo(this.policy,r);break;case"scientific":n[e]=this.statements[e].analyzeScientific(this.policy,r,n),n[e].exportTo(this.policy,r);break;case"singleExpressionScientific":n[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,r,n),n[e].exportTo(this.policy,r);break;case"graphing":if(r.r){var a=Object.create(r);if(a.r=h("r"),n[e]=this.statements[e].analyze(this.policy,a,n),n[e].getGraphMode()===m.POLAR){n[e].exportTo(this.policy,r);continue}}n[e]=this.statements[e].analyze(this.policy,r,n),n[e].exportTo(this.policy,r)}this.unanalyzedIds={},this.lastFrame=Object.create(this.parent_frame);for(var c in r)r.hasOwnProperty(c)&&(this.lastFrame[c]=r[c])},e.evaluateOnce=function(e){return n.log("Deprecated console.evaluateOnce - this should not run in production code"),this.analysis[e].concreteTree.constantValue},e.compile=function(e){return n.log("Deprecated console.compile - this should not run in production code"),this.analysis[e].concreteTree.getCompiledFunction()},e.evalStrings=function(e){return n.log("Deprecated console.evalStrings - this should not run in production code"),this.analysis[e].concreteTree.getEvalStrings()}})}),define("worker/workercore",["require","math/context","math/functions"],function(e){var t=e("math/context"),n=e("math/functions");return function(e){var r=t();return r.triggerGraphComputed=function(t,r){n.dehydrateGraphData(r),e("graphComputed",{id:t,graphData:r})},r.triggerDidUpdateIntersections=function(t,n){e("updateIntersections",{id:t,intersections:n})},r.triggerRender=function(){e("render")},r.triggerRenderSlowly=function(){e("renderSlowly")},r.triggerRemoveGraph=function(t){e("removeGraph",t)},r.triggerStatusChange=function(t){e("statusChange",t)},{processChangeSet:function(t){r.processChangeSet(t),e("processChangeSet",t)}}}}),define("worker/fakeworker",["require","worker/workercore"],function(e){var t=e("worker/workercore");return function(e){function n(t,n){e({type:t,payload:n})}var r={},i=t(n);return r.postMessage=function(e){setTimeout(function(){i.processChangeSet(e)},0)},r}}),define("lib/urlparser",["require"],function(e){var t={getParameter:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[void 0,""])[1].replace(/\+/g,"%20"))||null}};return t}),define("worker/workerpool",["require","console","./create_worker_url","pjs","underscore_model","./fakeworker","underscore","lib/urlparser"],function(e){function t(e){return u?function(t){h=Math.max(Date.now(),h)+u,setTimeout(e,h-Date.now(),t)}:e}var n=e("console"),r=e("./create_worker_url"),i=e("pjs"),o=e("underscore_model"),s=e("./fakeworker"),a=e("underscore"),c=e("lib/urlparser"),l=c.getParameter("workerThrottle"),u=parseInt(l,10),h=0,d=i(o,function(e,i){
e.init=function(e){i.init.call(this),this.workers=[],this.maxWorkers=e,this.workerURL=r()},e.allowedToSpawnWorker=function(){return this.workerURL&&this.workers.length<this.maxWorkers},e.killWorker=function(e){var t=a.indexOf(this.workers,e);t!==-1&&(e.terminate(),this.workers=a.without(this.workers,e),a.shuffle(a.values(e.__connections)).forEach(function(e){e&&e.onWorkerKilled&&e.onWorkerKilled()}))},e.spawnWorker=function(){try{var e=new Worker(this.workerURL);return e.__connections={},e.__isFake=!1,e.onerror=function(e){n.log(e)},e.addEventListener("message",t(function(t){var n=t.data;if((!n||!n.log)&&n&&n.connectionId){var r=e.__connections[n.connectionId];r&&r.onResponse(n.originalMessage)}})),this.workers.push(e),e}catch(e){return null}},e.spawnFakeWorker=function(){var e=s(t(function(t){a.values(e.__connections)[0].onResponse(t)}));return e.__isFake=!0,e.__connections={},e},e.findLeastUsedWorker=function(){var e=function(e){return a.size(e.__connections)},t=a.sortBy(this.workers,e)[0];return t},e.allocateWorker=function(){var e=null;return this.allowedToSpawnWorker()&&(e=this.spawnWorker()),e||(e=this.findLeastUsedWorker()),e||(e=this.spawnFakeWorker()),e}});return d}),define("worker/workerpoolconnection",["require","pjs","underscore_model"],function(e){var t=e("pjs"),n=e("underscore_model"),r=t(n,function(e,t){e.init=function(e){t.init.call(this),this.workerPool=e,this.worker=e.allocateWorker(),this.worker.__connections[this.guid]=this},e.destroy=function(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]},e.killWorker=function(){this.worker.__isFake||this.workerPool.killWorker(this.worker)},e.onWorkerKilled=function(){},e.onResponse=function(e){},e.sendMessage=function(e){this.worker.__isFake?this.worker.postMessage(e):this.worker.postMessage({connectionId:this.guid,originalMessage:e})}});return r}),define("main/evaluator",["require","math/functions","worker/workerpool","worker/workerpoolconnection","pjs","underscore_model","lib/deepCopy"],function(e){var t=e("math/functions"),n=e("worker/workerpool"),r=e("worker/workerpoolconnection"),i=e("pjs"),o=e("underscore_model"),s=e("lib/deepCopy").default,a=4e3,c=i(o,function(e,i){e.triggerStatusChange=function(e){},e.triggerGraphData=function(e){},e.triggerRender=function(){},e.triggerRenderSlowly=function(){},e.init=function(e){i.init.call(this),this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.clearJobTimer(),this.syncId=1,this.__addedGraphsBuffer={},this.__removedGraphsBuffer={},this.__intersectionsBuffer={},e||(e=n()),this.workerPool=e,this.createWorkerPoolConnection(),this.syncRequests=[]},e.clearBuffers=function(){this.__addedGraphsBuffer={},this.__removedGraphsBuffer={},this.__intersectionsBuffer={}},e.getGraphDataFromBuffer=function(){return{addedGraphs:this.__addedGraphsBuffer,removedGraphs:this.__removedGraphsBuffer,intersections:this.__intersectionsBuffer}},e.destroy=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())},e.createWorkerPoolConnection=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=r(this.workerPool);var e=this;this.workerPoolConnection.onResponse=function(t){e.isSuspended()&&"processChangeSet"!==t.type||e.listeners[t.type].call(e,t.payload)},this.workerPoolConnection.onWorkerKilled=function(){e.createWorkerPoolConnection(),e.resume(),e.hasJobInWorker()?(e.changeSet=s(e.cumulativeChangeSet),e.__state.changed=!0,e.__state.droppedMessage=!0,e.clearJobTimer()):(e.changeSet=s(e.cumulativeChangeSet),e.__state.changed=!1),e.processChangeSet()}},e.listeners={},e.listeners.processChangeSet=function(e){for(var t=e.syncId;this.syncRequests.length&&this.syncRequests[0].id<=t;){var n=this.syncRequests.shift();n.callback()}this.resume(),this.__state.droppedMessage=!1,this.clearJobTimer(),this._processChangeSet()},e.listeners.removeGraph=function(e){delete this.__addedGraphsBuffer[e],delete this.__intersectionsBuffer[e],this.__removedGraphsBuffer[e]=!0},e.listeners.graphComputed=function(e){t.rehydrateGraphData(e.graphData),delete this.__removedGraphsBuffer[e.id],this.__addedGraphsBuffer[e.id]=e.graphData},e.listeners.updateIntersections=function(e){this.__intersectionsBuffer[e.id]=e.intersections},e.listeners.statusChange=function(e){this.triggerStatusChange(e)},e.listeners.render=function(){this.triggerGraphData(this.getGraphDataFromBuffer()),this.clearBuffers(),this.triggerRender()},e.listeners.renderSlowly=function(){this.triggerGraphData(this.getGraphDataFromBuffer()),this.clearBuffers(),this.triggerRenderSlowly()},e.isSuspended=function(){return this.__isSuspended},e.suspend=function(){this.__isSuspended=!0},e.resume=function(){this.__isSuspended=!1},e.clearJobTimer=function(){this.__jobStartTime=-1},e.startJobTimer=function(){this.__jobStartTime=(new Date).getTime()},e.hasJobInWorker=function(){return this.__jobStartTime!==-1},e.getJobElapsedTime=function(){return this.hasJobInWorker()?(new Date).getTime()-this.__jobStartTime:NaN},e.processChangeSet=function(){this.__processChangeSetRequested=!0},e.tick=function(){this._processChangeSet()},e._processChangeSet=function(){if(this.__processChangeSetRequested){var e=this.getJobElapsedTime()>=a;if(this.__state.droppedMessage&&e)return void this.workerPoolConnection.killWorker();if(this.__state.changed&&this.changeSet)if(this.hasJobInWorker())this.changeSet.isCompleteState&&e&&this.workerPoolConnection.killWorker();else{var t=this.changeSet;this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(t),this.__processChangeSetRequested=!1}}},e.applyToChangeSets=function(e){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),e(this.changeSet),e(this.cumulativeChangeSet),this.processChangeSet()},e.setViewState=function(e){this.applyToChangeSets(function(t){t.viewState=s(e)})},e.clearStatementsAndStartCompleteState=function(){this.clearBuffers(),this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets(function(e){e.isCompleteState=!0,delete e.statements}),this.cumulativeChangeSet=s(this.changeSet)},e.addStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e.id]=s(e)})},e.addStatements=function(e){for(var t=0;t<e.length;t++)this.addStatement(e[t])},e.removeStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e]=null})},e.removeStatements=function(e){for(var t=0;t<e.length;t++)this.removeStatement(e[t])},e.setIntersectIds=function(e){this.applyToChangeSets(function(t){t.intersectIds=s(e)})},e.updateIntersections=function(e){this.applyToChangeSets(function(t){t.intersectId=e})},e.setDegreeMode=function(e){this.applyToChangeSets(function(t){t.degreeMode=e})},e.setEvaluationMode=function(e){this.applyToChangeSets(function(t){t.evaluationMode=e})},e.setAdditionalFunctions=function(e){this.applyToChangeSets(function(t){t.additionalFunctions=e})},e.setRestrictedFunctions=function(e){this.applyToChangeSets(function(t){t.restrictedFunctions=e})},e.setFunctionDefinition=function(e){this.applyToChangeSets(function(t){t.functionDefinition=e})},e.setPointsOfInterest=function(e){this.applyToChangeSets(function(t){t.pointsOfInterest=e})},e.setPlotSingleVariableImplicitEquations=function(e){this.applyToChangeSets(function(t){t.plotSingleVariableImplicitEquations=e})},e.notifyWhenSynced=function(e){if(!this.hasJobInWorker()&&!this.__processChangeSetRequested)return void setTimeout(e,0);this.syncId++,this.syncRequests.push({id:this.syncId,callback:e});var t=this;this.applyToChangeSets(function(e){e.syncId=t.syncId})}});return c}),define("graphing/viewport",["require"],function(e){function t(e,t,n,r){this.xmin=void 0!==e?e:-10,this.xmax=void 0!==t?t:10,this.ymin=void 0!==n?n:-10,this.ymax=void 0!==r?r:10}return t.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},t.fromObject=function(e){return new t(e.xmin,e.xmax,e.ymin,e.ymax)},t.prototype.equals=function(e){return this.xmin===e.xmin&&(this.ymin===e.ymin&&(this.xmax===e.xmax&&this.ymax===e.ymax))},t.prototype.isXValid=function(){return this.xmin*(1-1e-8)+1e-8*this.xmax>this.xmin},t.prototype.isYValid=function(){return this.ymin*(1-1e-8)+1e-8*this.ymax>this.ymin},t.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},t.prototype.isSquare=function(e){return Math.abs(e.height-e.width*this.aspectRatio())<1},t.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},t.prototype.squareXAxis=function(e){var n=this.xmax-this.xmin,r=this.ymax-this.ymin,i=this.xmin+n/2,o=r/e.height*e.width;return new t(i-o/2,i+o/2,this.ymin,this.ymax)},t.prototype.squareYAxis=function(e){var n=this.xmax-this.xmin,r=this.ymax-this.ymin,i=this.ymin+r/2,o=n/e.width*e.height;return new t(this.xmin,this.xmax,i-o/2,i+o/2)},t.prototype.squareCrop=function(e){var t=this.aspectRatio()>e.height/e.width;return t?this.squareYAxis(e):this.squareXAxis(e)},t.prototype.polarDiameter=function(){var e=Math.abs(this.xmax),t=Math.abs(this.xmin),n=Math.abs(this.ymax),r=Math.abs(this.ymin);return 1.5*Math.max(e,t,n,r)},t.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},t.prototype.smallestR=function(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},t}),define("graphing/screen",["require"],function(e){function t(e,t){return this.width=e,this.height=t,this}return t}),define("graphing/axisarrowmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NONE="NONE",t.POSITIVE="POSITIVE",t.BOTH="BOTH"}),define("main/font_sizes",{VERY_SMALL:9,SMALL:12,MEDIUM:16,LARGE:20,VERY_LARGE:24}),define("graphing/graph-defaults",["require","./axisarrowmode"],function(e){var t=e("./axisarrowmode"),n={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:t.NONE,yAxisArrowMode:t.NONE,xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,squareAxes:!0};return n}),define("main/graph_settings",["require","pjs","underscore","underscore_model","graphing/axisarrowmode","main/font_sizes","console","graphing/graph-defaults"],function(e){var t=e("pjs"),n=e("underscore"),r=e("underscore_model"),i=e("graphing/axisarrowmode"),o=e("main/font_sizes"),s=e("console"),a=e("graphing/graph-defaults"),c=t(r,function(e,t,l){e.init=function(){function e(e,t,n){function r(){s.setProperty(e,s.projectorMode?n:t)}s.cloneProperties.push(e),s.observe("projectorMode",r),r()}function n(e,t,n,r,i){function o(){var o;o=s.projectorMode?s.highlight?i:r:s.highlight?n:t,s.setProperty(e,o)}s.cloneProperties.push(e),s.observe("projectorMode highlight",o),o()}t.init.call(this),this.stateProperties=[],this.cloneProperties=[],this.config=new r;for(var i in a)a.hasOwnProperty(i)&&this.addStateProperty(i,a[i]);this.instanceProperties=[],this.addInstanceProperty("fontSize",o.MEDIUM),this.addInstanceProperty("language","en"),this.addInstanceProperty("projectorMode",!1),this.addInstanceProperty("invertedColors",!1),this.addInstanceProperty("enableTabindex",!0),this.labelHangingColor="rgba(150,150,150,1)",this.labelNormalColor="rgba(0,0,0,1)",this.lastChangedAxis="x";var s=this;e("labelSize",14,19),e("majorAxisOpacity",.4,1),e("minorAxisOpacity",.12,.25),e("axisOpacity",1,1),e("axisLineWidth",1.5,2),e("axisLineOffset",.25,0),e("pixelsPerLabel",80,120),n("graphLineWidth",2.5,3,5,6),n("pointLineWidth",9,11,15,17)},e.addStateProperty=function(e,t){this[e]=t,this.stateProperties.push(e),this.cloneProperties.push(e)},e.addInstanceProperty=function(e,t){this[e]=t,this.instanceProperties.push(e)},l.fromObject=function(e){var t=c();return t.cloneProperties.forEach(function(n){e.hasOwnProperty(n)&&t.setProperty(n,e[n])}),t},e.registerCallbacks=function(e,t,n){var r=this;this.stateProperties.forEach(function(t){r.observe(t,function(){e.redrawAllLayers()})}),this.observe("squareAxes",function(){e.viewportController.enforceSquareAxes()}),this.observe("projectorMode",function(){t.toggleClass("dcg-PROJECTOR-MODE",!!r.projectorMode),e.redrawAllLayers()}),this.observe("degreeMode",function(){n.setDegreeMode(r.degreeMode)}),this.observe("fontSize",function(){t.css("fontSize",r.fontSize+"px")}),this.observe("invertedColors",function(){t.toggleClass("dcg-inverted-colors",!!r.invertedColors)}),this.observe("enableTabindex",function(){e.redrawAllLayers()}),this.config.observeAndSync("restrictedFunctions",function(){n.setRestrictedFunctions(r.config.restrictedFunctions)}),this.config.observeAndSync("pointsOfInterest",function(){n.setPointsOfInterest(r.config.pointsOfInterest)}),this.config.observeAndSync("plotSingleVariableImplicitEquations",function(){n.setPlotSingleVariableImplicitEquations(r.config.plotSingleVariableImplicitEquations)})};var u=function(e,t){var r;switch(e){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":r=Math.round(Math.min(Math.max(0,t),5)),t!==r&&s.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+r+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":r="false"!==t&&!!t,t!==r&&s.warn(e+" must be a Boolean. You provided "+t+" ("+typeof t+"), which we changed to "+r+" ("+typeof r+").");break;case"xAxisStep":case"yAxisStep":r=parseFloat(t),isFinite(t)||(r=0,s.warn(e+" must be a number. You provided "+t+", which we changed to "+r+"."));break;case"yAxisMinorSubdivisions":r=Math.round(Math.min(Math.max(0,t),5)),t!==r&&s.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+r+".");break;case"xAxisArrowMode":case"yAxisArrowMode":r=i[t],r!==t&&(r=i.NONE,s.warn("unknown AxisArrowMode. Allowed values are: \n"+n.keys(i).join("\n")));break;case"xAxisLabel":case"yAxisLabel":r=t,"string"!=typeof t&&(r="",s.warn(e+" must be a string. you provided a "+typeof t+"."));break;case"fontSize":r=t,"number"!=typeof t&&(r=parseInt(r,10),s.warn("fontSize must be a number. Attempted to convert "+t+" to "+r+"."));break;case"language":r=t,"string"!=typeof t&&(r="",s.warn(e+" must be a string. you provided a "+typeof t+".")),window.Desmos.supportedLanguages.indexOf(t)<0&&"en"!==t&&(r="en",s.warn(t+" is not currently an available language."));break;default:r=t}return r};e._validateSettings=function(e){var t={},n=!1;for(var r in e)this.stateProperties.indexOf(r)>=0||this.instanceProperties.indexOf(r)>=0?t[r]=u(r,e[r]):(s.warn('Invalid graph setting "'+r+'".'),n=!0);return n&&s.warn("Available graph settings are: \n"+this.stateProperties.join("\n")),t},e.setGraphSettings=function(e){var t=this._validateSettings(e);for(var n in t)t.hasOwnProperty(n)&&this.setProperty(n,t[n])}});return c}),define("browser",["require","jquery"],function(e){var t=e("jquery"),n={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i),IS_EDGE:null!==navigator.userAgent.match(/Edge/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_IOS:null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i),IS_CHROME:null!==navigator.userAgent.match(/Chrome/i),IS_FIREFOX:null!==navigator.userAgent.match(/Firefox/i),IS_SAFARI:null!==navigator.userAgent.match(/^((?!chrome|android).)*safari/i),IS_APPLE:null!==navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),IS_WINDOWS:null!==navigator.platform.match(/(Win32)/i),IS_TOUCH:null!==navigator.userAgent.match(/Touch/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_BRAILLENOTE:null!==navigator.userAgent.match(/KeyWeb/i),IS_IN_IFRAME:window.parent!==window};return n.IS_TABLET=n.IS_IPAD||n.IS_ANDROID||n.IS_KINDLE,n.IS_TOUCH_DEVICE=n.SHOULD_NOT_AUTOFOCUS=n.IS_IOS||n.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),n.IOS_VERSION=function(){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),n.SUPPORTS_TRANSLATE3D=!1,t(document).ready(function(){var e,t,r=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(r,null);for(var o in i)if(void 0!==r.style[o]){if(r.style[o]="translate3d(1px,1px,1px)",t=window.getComputedStyle(r),!t)return;e=t.getPropertyValue(i[o])}document.body.removeChild(r),n.SUPPORTS_TRANSLATE3D=void 0!==e&&e.length>0&&"none"!==e}),n.translateRule=function(e,t){return n.SUPPORTS_TRANSLATE3D?"translate3d("+e+(e?"px":"")+","+t+(t?"px":"")+",0)":"translate("+e+(e?"px":"")+","+t+(t?"px":"")+")"},n.SUPPORTS_CANVAS=function(){var e=document.createElement("canvas"),t=!(!e.getContext||!e.getContext("2d"));return t}(),n}),define("jquery.disabletextselection",["require","jquery"],function(e){var t=e("jquery");t.fn.disableTextSelection=function(e){return e&&this.each(function(){t(this).bind("mousedown touchstart",function(){t(document.activeElement).focusout()})}),this.each(function(){t(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}}),define("graphing/canvaslayer",["require","jquery","pjs","browser","i18n","jquery.disabletextselection"],function(e){var t=e("jquery"),n=e("pjs"),r=e("browser"),i=e("i18n");e("jquery.disabletextselection");var o=n(function(e){e.init=function(e){this.grapher=e,this.$=t("<div class='dcg-graph-outer' role='img'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(r.IS_IE),this.canvas_node=t("<canvas class='dcg-graph-inner'></canvas>").css("position","relative").css("display","block").disableTextSelection(r.IS_IE),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(0,0),this.$.append(this.canvas_node)},e.resize=function(e,t,n){n=n||this.devicePixelRatio,e===this.width&&t===this.height||(this.width=e,this.height=t,this.$.css("width",e+"px").css("height",t+"px"),this.canvas_node.css("width",e+"px").css("height",t+"px").attr("width",e*n).attr("height",t*n),this.ctx=this.canvas_node[0].getContext("2d"),this.ctx.scale(n,n))},e.t=function(e,t){return i.t(e,t,this.grapher.settings.language)},e.getAriaLabel=function(e){var t="";if(0===e)return this.t("Empty graph paper.");t=1===e?this.t("Graph paper showing 1 graph."):this.t("Graph paper showing __count__ graphs.",{count:e});var n=this.grapher.getAudioTrace();if(n){var i=n.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1});null!==i&&(t+=r.IS_APPLE?this.t(" Press OPTION+T for audio trace."):this.t(" Press ALT+T for audio trace."))}return t},e.updateAria=function(e,t){this.$.attr("aria-hidden",!e||!this.grapher.settings.config.graphpaper).attr("tabindex",e&&this.grapher.settings.config.graphpaper&&this.grapher.settings.enableTabindex&&t>0?0:-1).attr("aria-label",this.getAriaLabel(t))},e.redraw=function(){}});return o}),define("lib/inject-css",["require","underscore"],function(e){function t(e,t){var o=r[e];if(!o){o=document.createElement("style"),r[e]=o;var s=n.sortedIndex(i,e),a=r[i[s]];a?document.head.insertBefore(o,a):document.head.appendChild(o),i.splice(s,0,e)}o.textContent=t}var n=e("underscore"),r={},i=[];return t}),define("underscore-plugins",{}),define("loadcss",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("loadcss!poi",function(){}),define("graphing/clipping",[],function(){function e(e){return Math.max(-1e40,Math.min(1e40,e))}var t={TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15,X:12,Y:3,POLAR_RADIAN_EQUALITY:1,POLAR_RADIAN_INEQUALITY:2,POLAR_DEGREE_EQUALITY:3,POLAR_DEGREE_INEQUALITY:4,Y_EQUALS:5,X_EQUALS:6,mapSegmentToCanvas:function(e,n,r,i){var o,s,a,c,l,u=[],h=n.xmin,d=n.ymin,p=n.xmax-n.xmin,f=n.ymax-n.ymin,m=r.width,g=r.height,y=m/p,v=-g/f,b=e.length;if(i===t.Y_EQUALS)for(o=0;o<b;o+=2)s=(e[o]-h)*y-.5,a=(e[o+1]-d)*v+g-.5,u.push(s,a);else if(i===t.X_EQUALS)for(o=0;o<b;o+=2)s=(e[o+1]-h)*y-.5,a=(e[o]-d)*v+g-.5,u.push(s,a);else if(i===t.POLAR_RADIAN_EQUALITY)for(o=0;o<e.length;o+=2)c=e[o],l=e[o+1],s=(l*Math.cos(c)-h)*y-.5,a=(l*Math.sin(c)-d)*v+g-.5,u.push(s,a);else if(i===t.POLAR_RADIAN_INEQUALITY)for(o=0;o<e.length;o+=2)c=e[o],l=e[o+1],l<0&&(l=0),s=(l*Math.cos(c)-h)*y-.5,a=(l*Math.sin(c)-d)*v+g-.5,u.push(s,a);else if(i===t.POLAR_DEGREE_EQUALITY)for(o=0;o<e.length;o+=2)c=e[o]*Math.PI/180,l=e[o+1],s=(l*Math.cos(c)-h)*y-.5,a=(l*Math.sin(c)-d)*v+g-.5,u.push(s,a);else if(i===t.POLAR_DEGREE_INEQUALITY)for(o=0;o<e.length;o+=2)c=e[o]*Math.PI/180,l=e[o+1],l<0&&(l=0),s=(l*Math.cos(c)-h)*y-.5,a=(l*Math.sin(c)-d)*v+g-.5,u.push(s,a);return u},clipStrokeEdges:function(e,n){return t.clipFillEdges(e,n,t.ALL,!0)},clipFillEdge:function(e,t,n,r){var i,o,s,a,c=[],l=[].push;r?(o=e[0],s=e[1],i=2,a=t(o,s),a&&c.push(o,s)):(o=e[e.length-2],s=e[e.length-1],i=0,a=t(o,s));for(var u=i;u<e.length;u+=2){var h=o,d=s,p=a;o=e[u],s=e[u+1],a=t(o,s),(a||p)&&(a&&p&&c.push(o,s),a&&!p&&(l.apply(c,n(o,s,h,d)),c.push(o,s)),!a&&p&&l.apply(c,n(h,d,o,s)))}return c},clipFillEdges:function(n,r,i,o){var s=r.xmin,a=r.xmax,c=r.ymin,l=r.ymax,u=function(e,t){return e>=s},h=function(e,t){return e<=a},d=function(e,t){return t>=c},p=function(e,t){return t<=l},f=function(t,n,r,i){t=e(t),n=e(n),r=e(r),i=e(i);var o=i-n;return[s,n+o*(s-t)/(r-t)]},m=function(t,n,r,i){t=e(t),n=e(n),r=e(r),i=e(i);var o=i-n;return[a,n+o*(a-t)/(r-t)]},g=function(t,n,r,i){t=e(t),n=e(n),r=e(r),i=e(i);var o=r-t;return[t+o*(c-n)/(i-n),c]},y=function(t,n,r,i){t=e(t),n=e(n),r=e(r),i=e(i);var o=r-t;return[t+o*(l-n)/(i-n),l]},v=n;return i&t.LEFT&&(v=t.clipFillEdge(n,u,f,o)),i&t.BOTTOM&&(v=t.clipFillEdge(v,d,g,o)),i&t.RIGHT&&(v=t.clipFillEdge(v,h,m,o)),i&t.TOP&&(v=t.clipFillEdge(v,p,y,o)),v},clipAllFillEdges:function(e,n){return t.clipFillEdges(e,n,t.ALL,!1)},computePolarFill:function(e,t,n){var r,i=[],o=e[0],s=o+n,a=[];i.push(a);for(var c=0;c<e.length;c+=2){r=e[c];var l=e[c+1];if(l<0&&(l=0),r>=s){for(a=[],i.push(a),o=e[c-2],s=o;r>=s;)s+=n;c-=4}else a.push(r,l)}if(0===t)for(c=0;c<i.length;c++)i[c].push(0,0);else{var u=n/16,h=t;for(c=0;c<i.length;c++){var d=i[c];for(o=d[0],s=d[d.length-2],r=s;r>o;r-=u)d.push(r,h);d.push(o,h)}}return i},computeCartesianFill:function(e,t){return e=e.slice(),e.push(e[e.length-2],t),e.push(e[0],t),[e]}};return t}),define("graphing/constants",[],function(){return{ANIMATE_ZOOM_DURATION:500,DOUBLETAP_ZOOM:2,ZOOM_FACTOR:1.0625,MAX_DOTTED_SEGMENTS:1e3,STROKE_ALPHA:.7,HIGHLIGHTED_STROKE_ALPHA:1,FILL_ALPHA:.4,POINT_ALPHA:.9,HIGHLIGHTED_POINT_ALPHA:.6,POLAR_ALPHA:.2,POI_ALPHA:.01,OFFSCREEN_RENDER_MARGIN:20}}),define("graphing/dasheddrawer",["require","./constants","math/distance"],function(e){function t(e,t,r){return this.pattern=r,this.replen=this.pattern[0]+this.pattern[1],null!==t&&t/this.replen>n.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=t*this.pattern[0]/this.replen/n.MAX_DOTTED_SEGMENTS,this.pattern[1]=t*this.pattern[1]/this.replen/n.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e,this}var n=e("./constants"),r=e("math/distance");return t.getTotalSegmentLength=function(e){if(e.length<4)return 0;for(var t=0,n=e[0],i=e[1],o=2;o<e.length;o+=2){var s=e[o],a=e[o+1];t+=r.hypot(s-n,a-i),n=s,i=a}return t},t.prototype.start=function(e,t){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=e,this.py=t},t.prototype.next=function(e,t){var n=this.pattern[this.pstate],r=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(t-this.py,2));if(r>1e-5){for(;r+this.dstaccum>=n;){var i=e-this.px,o=t-this.py,s=n-this.dstaccum;i*=s/r,o*=s/r,0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+i,this.py+o)),this.dstaccum=0,this.px+=i,this.py+=o,this.pstate=1-this.pstate,n=this.pattern[this.pstate],r-=s}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,t))}this.px=e,this.py=t,this.dstaccum+=r},t.prototype.skip=function(e,t){this.px=e,this.py=t},t.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},t}),define("lib/color-helpers",["require","exports"],function(e,t){"use strict";function n(e,t){if(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!e.match(/^#([A-Fa-f0-9]{6})$/g))return e;t>1&&(t=1),t<-1&&(t=-1);var n=parseInt(e.slice(1),16),r=t<0?0:255,i=t<0?t*-1:t,o=n>>16,s=n>>8&255,a=255&n;return"#"+(16777216+65536*(Math.round((r-o)*i)+o)+256*(Math.round((r-s)*i)+s)+(Math.round((r-a)*i)+a)).toString(16).slice(1)}function r(e,t){var n=/(rgba\([\d]+\,\ ?[\d]+\,\ ?[\d]+\,\ ?)[\d.]+(\))/;return e.match(n)?e.replace(n,"$1"+t+"$2"):e}Object.defineProperty(t,"__esModule",{value:!0}),t.shadeColor=n,t.mutateOpacity=r,t.colors={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa"}}),define("expressions/colors",["require","lib/color-helpers"],function(e){var t=e("lib/color-helpers").colors,n=[t.RED,t.BLUE,t.GREEN,t.PURPLE,t.ORANGE,t.BLACK];return{all:n,RED:t.RED,BLUE:t.BLUE,GREEN:t.GREEN,PURPLE:t.PURPLE,ORANGE:t.ORANGE,BLACK:t.BLACK}}),define("expressions/styles",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POINT="POINT",t.OPEN="OPEN",t.CROSS="CROSS",t.SOLID="SOLID",t.DASHED="DASHED",t.DOTTED="DOTTED"}),define("graphing/graphslayer",["require","pjs","./clipping","./dasheddrawer","./constants","./viewport","graphing/graphmode","expressions/colors","expressions/styles"],function(e){var t=e("pjs"),n=e("./clipping"),r=e("./dasheddrawer"),i=e("./constants"),o=e("./viewport"),s=e("graphing/graphmode"),a=e("expressions/colors"),c=e("expressions/styles"),l={},u=function(e){return new o(-3,e.width+3,-3,e.height+3)},h=t(function(e){e.init=function(e){if(e.config.plaidMode)for(var t in a)a.hasOwnProperty(t)&&"string"==typeof a[t]&&(l[a[t]]=document.createElement("img"),l[a[t]].setAttribute("src","/assets/img/april-fools/"+t.toLowerCase()+".png"))},e.redrawToCtx=function(e,t,n,r){if(void 0===r)throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");r.forEach(function(r){var i=n[r];void 0!==i&&i.visible&&h.drawSketchToCtx(n[r],e,t)})}});return h.eachSegment=function(e,t){for(var n=0;n<e.branches.length;n++)for(var r=e.branches[n],i=0;i<r.segments.length;i++){var o=r.segments[i];t(r,o)}},h.drawSketchToCtx=function(e,t,n){if(e.branches&&e.branches.length){var r=t.lineWidth,o=l[e.color];if(o&&o.complete&&o.naturalWidth>0){var a=t.createPattern(o,"repeat");t.fillStyle=a}else t.fillStyle=e.color;t.strokeStyle=e.color,t.lineJoin="round",t.lineCap="round";for(var u=!!n.settings.takingScreenshot,d=0;d<e.branches.length;d++){var p=e.branches[d];if(p.graphMode!==s.XYPOINT&&p.graphMode!==s.XYPOINT_MOVABLE){t.desmos_batching=!0,t.beginPath();for(var f=0;f<p.segments.length;f++){var m=p.segments[f],g=s.Y;if(p.flip&&(g=s.X),p.graphMode&&(g=p.graphMode),g===s.POLYGONFILL)h.fillPolygonToCtx(t,n,m,p.fillOpacity);else if(g!==s.IMPLICIT){var y=p.operator,v="<"==y||">"==y||"<="==y||">="==y||"\\leq"==y||"\\le"==y||"\\geq"==y||"\\ge"==y,b="<="==y||"<"==y||"\\leq"==y||"\\le"==y;v&&h.fillGraphStrokeToCtx(t,n,m,b,g)}}t.globalAlpha=p.fillOpacity||i.FILL_ALPHA,t.fill(),t.globalAlpha=1,t.desmos_batching=!1}}t.lineWidth=n.settings.graphLineWidth,e.style===c.DOTTED&&(t.lineWidth=2*n.settings.graphLineWidth),h.eachSegment(e,function(r,i){if(r.graphMode!==s.XYPOINT&&r.graphMode!==s.XYPOINT_MOVABLE){var o=s.Y;r.flip&&(o=s.X),r.graphMode&&(o=r.graphMode);var a=r.operator,l="default";"<"==a||">"==a||"!="==a||e.style===c.DASHED||r.style===c.DASHED?l=c.DASHED:e.style!==c.DOTTED&&r.style!==c.DOTTED||(l=c.DOTTED,t.lineWidth=2*n.settings.graphLineWidth),h.drawGraphStrokeToCtx(t,n,i,l,o,a)}}),t.lineWidth=r,h.eachSegment(e,function(e,r){(e.graphMode===s.XYPOINT&&e.showPoint||e.graphMode===s.XYPOINT_MOVABLE&&u)&&h.drawPointsToCtx(t,n,r,e.style)})}},h.drawGraphStrokeToCtx=function(e,t,o,s,a,l){e.globalAlpha=t.settings.highlight?i.HIGHLIGHTED_STROKE_ALPHA:i.STROKE_ALPHA;var d,p,f=h.getClippingGraphType(a,"="!==l,t.settings),m=n.mapSegmentToCanvas(o,t.viewport,t.screen,f),g=n.clipStrokeEdges(m,u(t.screen));if(s==c.DASHED){for(p=new r(e,r.getTotalSegmentLength(g),[11,7]),p.start(g[0],g[1]),d=2;d<g.length;d+=2)p.next(g[d],g[d+1]);p.close()}else if(s==c.DOTTED){for(p=t.settings.projectorMode?new r(e,r.getTotalSegmentLength(g),[.1,16]):new r(e,r.getTotalSegmentLength(g),[.1,8]),p.start(g[0],g[1]),d=2;d<g.length;d+=2)p.next(g[d],g[d+1]);p.close()}else{for(e.desmos_batching||e.beginPath(),e.moveTo(g[0],g[1]),d=0;d<g.length;d+=2)e.lineTo(g[d],g[d+1]);e.desmos_batching||e.stroke()}e.globalAlpha=1},h.mapPointToScreen=function(e,t,n){var r=20,i=e.mapx(t)-.5;if(i<-r||i>e.screen.width+r)return null;var o=e.mapy(n)-.5;return o<-r||o>e.screen.height+r?null:{x:i,y:o}},h.drawPointToCtx=function(e,t,n,r,o,s){var a,l=e.lineWidth,u=e.fillStyle,d=h.mapPointToScreen(t,n,r);return!!d&&(e.globalAlpha=t.settings.highlight?i.HIGHLIGHTED_POINT_ALPHA:i.POINT_ALPHA,o&&(e.globalAlpha=o),e.globalAlpha=i.POINT_ALPHA,e.desmos_batching||e.beginPath(),s===c.CROSS?(a=.4*t.settings.pointLineWidth,e.moveTo(d.x-a,d.y-a),e.lineTo(d.x+a,d.y+a),e.moveTo(d.x+a,d.y-a),e.lineTo(d.x-a,d.y+a),e.lineWidth=.3*t.settings.pointLineWidth):s===c.OPEN?(a=.42*t.settings.pointLineWidth,e.moveTo(d.x+a,d.y),e.arc(d.x,d.y,a,0,2*Math.PI,!0),e.closePath(),e.fillStyle="white",e.lineWidth=.25*t.settings.pointLineWidth,e.fill()):(e.moveTo(d.x-.1,d.y-.1),e.lineTo(d.x-.1,d.y+.1),e.lineTo(d.x+.1,d.y+.1),e.lineTo(d.x+.1,d.y-.1)),e.desmos_batching||e.stroke(),e.globalAlpha=1,e.lineWidth=l,e.fillStyle=u,!0)},h.drawPointsToCtx=function(e,t,n,r){var i=e.lineWidth;e.lineWidth=t.settings.pointLineWidth;for(var o=0;o<n.length;o++)h.drawPointToCtx(e,t,n[o][0],n[o][1],!1,r);e.lineWidth=i},h.fillGraphStrokeToCtx=function(e,t,r,o,a){e.globalAlpha=a===s.POLAR?i.POLAR_ALPHA:i.FILL_ALPHA;var c,l=null,d=null;if(a===s.POLAR){d=n.ALL;var p=o?0:t.viewport.polarDiameter(),f=t.settings.degreeMode?180:2*Math.PI;l=n.computePolarFill(r,p,f)}else a===s.Y?(d=n.Y,c=o?t.viewport.ymin:t.viewport.ymax,l=n.computeCartesianFill(r,c)):a===s.X&&(d=n.X,c=o?t.viewport.xmin:t.viewport.xmax,l=n.computeCartesianFill(r,c));for(var m=u(t.screen),g=0;g<l.length;g++){var y=h.getClippingGraphType(a,!0,t.settings),v=n.mapSegmentToCanvas(l[g],t.viewport,t.screen,y),b=n.clipFillEdges(v,m,d);if(b.length>=6){e.desmos_batching||e.beginPath(),e.moveTo(b[0],b[1]);for(var x=2;x<b.length;x+=2)e.lineTo(b[x],b[x+1]);e.lineTo(b[0],b[1]),e.desmos_batching||e.fill()}}e.globalAlpha=1},h.fillPolygonToCtx=function(e,t,r,o){e.globalAlpha=o||i.FILL_ALPHA;var s=u(t.screen),a=n.mapSegmentToCanvas(r,t.viewport,t.screen,n.Y_EQUALS),c=n.clipFillEdges(a,s,n.ALL);if(c.length>=6){e.desmos_batching||e.beginPath(),e.moveTo(c[0],c[1]);for(var l=2;l<c.length;l+=2)e.lineTo(c[l],c[l+1]);e.desmos_batching||e.fill()}e.globalAlpha=1},h.getClippingGraphType=function(e,t,r){switch(e){case s.X:return n.X_EQUALS;case s.IMPLICIT:case s.PARAMETRIC:case s.Y:return n.Y_EQUALS;case s.POLAR:return r.degreeMode?t?n.POLAR_DEGREE_INEQUALITY:n.POLAR_DEGREE_EQUALITY:t?n.POLAR_RADIAN_INEQUALITY:n.POLAR_RADIAN_EQUALITY;
}},h}),define("graphing/poidotslayer",["require","loadcss!poi","pjs","./graphslayer","./constants"],function(e){e("loadcss!poi");var t=e("pjs"),n=e("./graphslayer"),r=e("./constants"),i=t(function(e){e.init=function(){this.savedPOI=[]},e.redrawToCtx=function(e,t,n){var r=[];for(var o in n){var s=n[o];if(s.visible){s.showHighlight&&i.drawSketchHighlight(s,e,t);var a=s.getPOI();(s.showPOI||a.length&&a[0].isAttachedToPlottedPoint())&&r.push.apply(r,i.drawPOIs(a,e,"#AAAAAA",t))}}this.savedPOI=r},e.getDrawnPOI=function(){return this.savedPOI}});return i.drawSketchHighlight=function(e,t,r){r.settings.setProperty("highlight",!0),n.drawSketchToCtx(e,t,r),r.settings.setProperty("highlight",!1)},i.drawPOIs=function(e,t,i,o){t.lineWidth=o.settings.pointLineWidth,t.strokeStyle=i||"#AAAAAA",t.fillStyle=i||"#AAAAAA",t.lineJoin="round",t.lineCap="round";var s=t.globalAlpha;t.globalAlpha=r.POI_ALPHA;var a,c,l=[],u=e.length;if(u&&e[0].isAttachedToPlottedPoint())for(a=0;a<u;a++)c=e[a],n.mapPointToScreen(o,c.x,c.y)&&l.push(c);else for(a=0;a<u;a++)c=e[a],n.drawPointToCtx(t,o,c.x,c.y,r.POI_ALPHA)&&l.push(c);return t.globalAlpha=s,l},i}),define("graphing/domlayer",["require","pjs","jquery","browser","jquery.disabletextselection"],function(e){var t=e("pjs"),n=e("jquery"),r=e("browser");e("jquery.disabletextselection");var i=t(function(e){e.init=function(e){this.$=n("<div class='dcg-graph-outer'></div>").css("position","absolute").css("overflow","hidden").disableTextSelection(r.IS_IE),this.dom_node=n("<div></div>").css("position","relative").css("display","block").disableTextSelection(r.IS_IE),this.$root=e,this.$.append(this.dom_node)},e.addGlobalClass=function(e){this.$root.hasClass(e)||this.$root.addClass(e)},e.removeGlobalClass=function(e){this.$root.hasClass(e)&&this.$root.removeClass(e)},e.resize=function(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.$.css("width",e+"px").css("height",t+"px"),this.dom_node.css("width",e+"px").css("height",t+"px"))},e.redraw=function(){}});return i}),define("graphing/poi",["require","math/poi","./graphmode"],function(e){function t(e,t,n,r,o,s,a){this.x=e,this.y=t,this.type=n,this.sketch=r,this.branch=o,this.pointIdxOnBranch=s,this.bareLabel=void 0!==a&&a,this.id=i++}var n=e("math/poi").default,r=e("./graphmode"),i=1;return t.prototype.getLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return this.type===n.LABEL&&e?e.labels[this.pointIdxOnBranch]||"":""},t.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},t.prototype.getCompiledFunction=function(){return this.sketch.branches[this.branch].compiled.fn},t.prototype.isAttachedToPlottedPoint=function(){return this.type===n.DEFINITION||this.type===n.LABEL},t.prototype.isMovable=function(){return this.getGraphMode()===r.XYPOINT_MOVABLE},t.prototype.isPersistent=function(){return this.type===n.LABEL},t.prototype.getLabelSize=function(){var e=this.sketch&&this.sketch.branches[this.branch];if(this.type===n.LABEL&&e)return e.labelSize},t.prototype.isBareLabel=function(){return this.bareLabel},t.prototype.getMovablePoint=function(){return this.sketch.getMovablePoints()[this.pointIdxOnBranch]},t}),define("graphing/integral-image",["require","exports"],function(e,t){"use strict";function n(e,t,n){return Math.max(t,Math.min(n,e))}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=e.data,n=e.width,r=e.height;this.imageData=e;for(var i=1;i<n;i++)t[i]+=t[i-1];for(var o=1;o<r;o++)t[o*n]+=t[o*n-n];for(var s=n*r-n-r+1,a=n-1,c=0;c<s;c++){var i=1+c%a,o=1+Math.floor(c/a),l=o*n,u=i-1+l,h=i+l-n,d=i-1+l-n;t[l+i]+=t[u]+t[h]-t[d]}}return e.prototype.getSumForValidRect=function(e){var t=e.left-1,n=e.right-1,r=e.top-1,i=e.bottom-1,o=this.imageData.width,s=this.imageData.data,a=s[t+r*o],c=s[n+r*o],l=s[t+i*o],u=s[n+i*o];return t>=0&&r>=0?u-c-l+a:t>=0?u-l:r>=0?u-c:u},e.prototype.getSum=function(e){var t={left:n(Math.floor(e.left),0,this.imageData.width),right:n(Math.ceil(e.right),0,this.imageData.width),top:n(Math.floor(e.top),0,this.imageData.height),bottom:n(Math.ceil(e.bottom),0,this.imageData.height)};return t.left>=t.right||t.top>=t.bottom?0:this.getSumForValidRect(t)},e}();t.default=r}),define("graphing/automatic-label-placer",["require","exports","graphing/integral-image","underscore"],function(e,t,n,r){"use strict";function i(e,t){var r=t.width*t.height>0;if(!r)return new n.default({width:0,height:0,data:[]});b.width=0,b.width=Math.round(t.width*v),b.height=Math.round(t.height*v);var i=b.getContext("2d");i.save(),i.scale(b.width/e.canvas.width,b.height/e.canvas.height),i.drawImage(e.canvas,0,0),i.restore();var o=i.getImageData(0,0,b.width,b.height),s=o.data;s.length/4!==x.length,x=new Array(s.length/4);for(var a=x,c=0;c<a.length;c++)a[c]=s[4*c+3];var l=new n.default({width:o.width,height:o.height,data:a});return l}function o(e){for(var t=0;t<e.length;t++){var n=s(t,e);e[t]=[n]}return e.map(function(e){return e[0]})}function s(e,t){var n=1/0,r=-1,i=t[e];if(1===i.length)return i[0];for(var o=0;o<i.length;o++){var s=t[e][o].staticScore,c=a(e,o,t),l=s+c;(r===-1||l<n)&&(n=l,r=o)}return i[r]}function a(e,t,n){for(var r=0,i=n[e][t],o=0;o<n.length;o++)if(o!==e){for(var s=0,a=n[o],c=a.length-1;c>=0;c--){var l=a[c],u=Math.max(0,Math.min(i.right,l.right)-Math.max(i.left,l.left)),h=Math.max(0,Math.min(i.bottom,l.bottom)-Math.max(i.top,l.top));s+=u*h}r+=s/a.length}return r}function c(e,t){var n=t.getSum({left:e.left*v,right:e.right*v,top:e.top*v,bottom:e.bottom*v});return n/=200,n/=v*v}function l(e,t){var n=0;return t.forEach(function(t){n+=h(e,t)}),n}function u(e,t){var n=h(e,t);return 10*(e.width*e.height-n)}function h(e,t){var n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),r=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n*r}function d(e,t,n){var r;return function(){return r||(r={domObstructions:n,viewport:{left:0,right:t.width,top:0,bottom:t.height},integralImage:i(e,t)}),r}}function p(e,t){if(!(t.length<=1))for(var n=e(),r=0,i=t;r<i.length;r++){var o=i[r];o.staticScore+=u(o,n.viewport),o.staticScore+=l(o,n.domObstructions),o.staticScore+=c(o,n.integralImage)}}function f(e,t){var n=t.pt_radius,i=Math.round(n/Math.sqrt(2)),o=[],s=t.pt_x,a=t.pt_y,c=t.width,l=t.height,u=-(1/0),h=400,d=1/0;o.push({left:s-c/2,top:a-l/2,staticScore:t.nakedLabel?u:d,orientation:"center"}),o.push({left:s+n+3,top:a-l/2,staticScore:h,orientation:"right"}),o.push({left:s-(n+c)-3,top:a-l/2,staticScore:h,orientation:"left"}),o.push({left:s-c/2,top:a-(l+n),staticScore:h,orientation:"top"}),o.push({left:s-(c+i),top:a-(l+i),staticScore:h,orientation:"tl"}),o.push({left:s+i,top:a-(l+i),staticScore:h,orientation:"tr"}),o.push({left:s-c/2,top:a+n,staticScore:h,orientation:"bottom"}),o.push({left:s-(c+i),top:a+i,staticScore:h,orientation:"bl"}),o.push({left:s+i,top:a+i,staticScore:h,orientation:"br"});var f=o.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+c),i=Math.round(e.top),o=Math.round(e.top+l);return{pt_x:Math.round(s),pt_y:Math.round(a),left:n,right:r,top:i,bottom:o,width:r-n,height:o-i,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(f=r.filter(f,function(e){return e.orientation===t.priorOrientation})),p(e,f),f}function m(e,t){for(var n=[],i=t.width,o=t.height,s=i/2,a=o/2,c=t.pt_x1,l=t.pt_y1,u=t.pt_x2,h=t.pt_y2,d=5,f=(h-l)/(u-c),m=Math.atan2(h-l,u-c)+Math.PI/2,g=d*Math.cos(m),y=d*Math.sin(m),v=Math.min(l,h)-Math.abs(y)-o,b=Math.max(l,h)+Math.abs(y),x=[.5,.33,.66,0,1],_=[],w=0,E=x;w<E.length;w++){var S=E[w];_.push({x:c*(1-S)+u*S,y:l*(1-S)+h*S})}for(var M=0;M<_.length;M++){var I,k,T,C,A=_[M];if(f>=2||f<=-2){T=C=A.y-a;var P=Math.abs((u-c)/(h-l)*a)+Math.abs(g);I=A.x+P,k=A.x-P-i}else if(f<=.05&&f>=-.05){I=k=A.x-s;var O=Math.abs(f*s)+Math.abs(y);T=A.y-O-o,C=A.y+O}else g>0?(I=A.x+g,k=A.x-g-i):(I=A.x+g-i,k=A.x-g),y>0?(T=A.y+y,C=A.y-y-o):(T=A.y+y-o,C=A.y-y);T<v?T=v:T>b&&(T=b),C<v?C=v:C>b&&(C=b);var L=(u-c)*(T-l)-(h-l)*(I-c)>0;n.push({pt_x:A.x,pt_y:A.y,left:I,top:T,staticScore:0,orientation:M.toString()+(L?"-a":"-b")}),n.push({pt_x:A.x,pt_y:A.y,left:k,top:C,staticScore:0,orientation:M.toString()+(L?"-b":"-a")})}var D=n.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+i),s=Math.round(e.top),a=Math.round(e.top+o);return{pt_x:Math.round(e.pt_x),pt_y:Math.round(e.pt_y),left:n,right:r,top:s,bottom:a,width:r-n,height:a-s,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(D=r.filter(D,function(e){return e.orientation===t.priorOrientation})),p(e,D),D}function g(e,t){var n=[],i=t.pt_x,o=t.pt_y,s=t.width,a=t.height,c=t.startAngle,l=t.endAngle;l<c&&(l+=2*Math.PI);var u=(c+l)/2,h=t.isRightAngle?t.radius*Math.sqrt(2):t.radius+4,d=h+Math.sqrt(t.width*t.width/4+t.height*t.height/4),f=[],m=d*Math.sin(u);m>h+.5*a&&(m=h+.5*a),m<-h-.5*a&&(m=-h-.5*a),f.push({x:i+d*Math.cos(u)-s/2,y:o+m-a/2});for(var g=0;g<f.length;g++){var y=f[g];n.push({pt_x:y.x,pt_y:y.y,left:y.x,top:y.y,staticScore:0,orientation:g.toString()+"-a"})}var v=n.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+s),i=Math.round(e.top),o=Math.round(e.top+a);return{pt_x:Math.round(e.pt_x),pt_y:Math.round(e.pt_y),left:n,right:r,top:i,bottom:o,width:r-n,height:o-i,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(v=r.filter(v,function(e){return e.orientation===t.priorOrientation})),p(e,v),v}function y(e,t){for(var n=[],i=t.width,o=t.height,s=10,a=Math.round(s/Math.sqrt(2)),c=0,l=50,u=0,h=0,d=0,f=0;f<t.path.length-2;f+=2)d+=1,u+=t.path[f],h+=t.path[f+1];var m=u/d,g=h/d;n.push({left:m-i/2,top:g-o/2,staticScore:c,orientation:"center"}),n.push({left:m+s+3,top:g-o/2,staticScore:l,orientation:"right"}),n.push({left:m-(s+i)-3,top:g-o/2,staticScore:l,orientation:"left"}),n.push({left:m-i/2,top:g-(o+s),staticScore:l,orientation:"top"}),n.push({left:m-(i+a),top:g-(o+a),staticScore:l,orientation:"tl"}),n.push({left:m+a,top:g-(o+a),staticScore:l,orientation:"tr"}),n.push({left:m-i/2,top:g+s,staticScore:l,orientation:"bottom"}),n.push({left:m-(i+a),top:g+a,staticScore:l,orientation:"bl"}),n.push({left:m+a,top:g+a,staticScore:l,orientation:"br"});var y=n.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+i),s=Math.round(e.top),a=Math.round(e.top+o);return{pt_x:Math.round(m),pt_y:Math.round(g),left:n,right:r,top:s,bottom:a,width:r-n,height:a-s,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(y=r.filter(y,function(e){return e.orientation===t.priorOrientation})),p(e,y),y}Object.defineProperty(t,"__esModule",{value:!0});var v=.5,b=document.createElement("canvas"),x=[];t.getIntegralImage=i,t.computePositions=o,t.buildStaticEnvGetter=d,t.generateCandidatesForPoint=f,t.generateCandidatesForSegment=m,t.generateCandidatesForAngle=g,t.generateCandidatesForPolygon=y}),function(){function e(){}function t(e){var t=x.call(arguments,1);return function(){return e.apply(this,t)}}function n(e,t){if(!t)throw new Error("prayer failed: "+e)}function r(e){n("a direction was passed",e===w||e===E)}function i(){k||(k=!0,setTimeout(o))}function o(){k=!1,I={}}function s(e,t){var n=e[w];if(n)for(;n!==e[E][E];n=n[E]){var r=t(n);if(r===!1)break}}function a(e,t,n){var r=e[w];if(!r)return t;for(;r!==e[E][E];r=r[E])t=n(t,r);return t}function c(e,t,r){n("a parent is always present",e),n("leftward is properly set up",function(){return t?t[E]===r&&t.parent===e:e.ends[w]===r}()),n("rightward is properly set up",function(){return r?r[w]===t&&r.parent===e:e.ends[E]===t}())}function l(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function u(e){return l(),Fe(e)}function h(t){function n(e){if(!e||!e.nodeType)return null;var t=T.getNodeOfElement(S(e).children(".dcg-mq-root-block")[0]),n=t&&t.controller;return n?i[n.KIND_OF_MQ](n):null}function r(e,t){t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:i});for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o=q[n];e[n]=o?o(r):r}}if(!(V<=t&&t<=B))throw"Only interface versions between "+V+" and "+B+" supported. You specified: "+t;var i={};n.L=w,n.R=E,n.saneKeyboardEvents=z,n.config=function(e){return r(F.p,e),this},n.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";j[e]=t};var o=i.AbstractMathQuill=_(R,function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t=this.__controller,n=t.root,r=t.container;t.createTextarea();var i=r.addClass(e).contents().detach();n.jQ=S('<span class="dcg-mq-root-block"/>').appendTo(r),T.linkElementByBlockId(n.jQ[0],n.id),this.latex(i.text()),this.revert=function(){return r.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(i)}},e.config=function(e){return r(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.mathspeak=function(){return this.__controller.exportMathSpeak()},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder(function(e){e.reflow()}),this}});n.prototype=o.prototype,i.EditableField=_(o,function(t,n){t.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},t.focus=function(){return this.__controller.textarea.focus(),this.__controller.scrollHoriz(),this},t.blur=function(){return this.__controller.textarea.blur(),this},t.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},t.cmd=function(e){var t=this.__controller.notify(),n=t.cursor;if(/^\\[a-z]+$/i.test(e)){e=e.slice(1);var r=A[e];r&&(e=r(e),n.selection&&e.replaces(n.replaceSelection()),e.createLeftOf(n.show()))}else n.parent.write(n,e);return t.blurred&&n.hide().parent.blur(),t.scrollHoriz(),this},t.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[w];)e.selectLeft();return this},t.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},t.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},t.moveToLeftEnd=function(){return this.moveToDirEnd(w)},t.moveToRightEnd=function(){return this.moveToDirEnd(E)},t.keystroke=function(t,n){for(var t=t.replace(/^\s+|\s+$/g,"").split(/\s+/),r=0;r<t.length;r+=1)this.__controller.keystroke(t[r],n||{preventDefault:e});return this},t.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},t.dropEmbedded=function(e,t,n){var r=e-S(window).scrollLeft(),i=t-S(window).scrollTop(),o=document.elementFromPoint(r,i);this.__controller.seek(S(o),e,t);var s=Ne().setOptions(n);s.createLeftOf(this.__controller.cursor)},t.setAriaLabel=function(e){return e&&"string"==typeof e&&""!=e?this.__controller.ariaLabel=e:this.__controller.ariaLabel="MathQuill Input",this},t.getAriaLabel=function(){return this.__controller.ariaLabel||"MathQuill Input"},t.setAriaPostLabel=function(e){return e&&"string"==typeof e&&""!=e?this.__controller.ariaPostLabel=e:this.__controller.ariaPostLabel="",this},t.getAriaPostLabel=function(){return this.__controller.ariaPostLabel||""},t.clickAt=function(e,t,n){n=n||document.elementFromPoint(e,t);var r=this.__controller,i=r.root;return y.contains(i.jQ[0],n)||(n=i.jQ[0]),r.seek(S(n),e+pageXOffset,t+pageYOffset),r.blurred&&this.focus(),this},t.ignoreNextMousedown=function(e){return this.__controller.cursor.options.ignoreNextMousedown=e,this}}),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=i.EditableField.prototype;for(var s in N)(function(e,r){var o=i[e]=r(i);n[e]=function(r,i){var s=n(r);if(s instanceof o||!r||!r.nodeType)return s;var a=D(o.RootBlock(),S(r),F());return a.KIND_OF_MQ=e,o(a).__mathquillify(i,t)},n[e].prototype=o.prototype})(s,N[s]);return n}function d(e){for(var t="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<t.length;n+=1)(function(t){e[t]=function(e){this.controller.handle(t,e)}})(t[n]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function p(e){var t=this.parent,n=e;do{if(n[E])return e.insLeftOf(t);n=n.parent.parent}while(n!==t);e.insRightOf(t)}function f(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},e.reflow=function(){var e=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));ge(this.delimjQs,v(1+.2*(e-1),1.2),1.2*e)}}function m(e,n,r){var n=n||e,i=Oe[e],o=Oe[n];P[e]=t(Pe,w,e,i,n,o),P[i]=t(Pe,E,e,i,n,o),Le[e]=Le[i]=r}var g,y=window.jQuery,v=Math.min,b=Math.max;if(!y)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";var x=[].slice,_=function(e,t,n){function r(e){return"object"==typeof e}function i(e){return"function"==typeof e}function o(){}return function s(a,c){function l(){var e=new u;return i(e.init)&&e.init.apply(e,arguments),e}function u(){}c===n&&(c=a,a=Object),l.Bare=u;var h,d=o[e]=a[e],p=u[e]=l[e]=l.p=new o;return p.constructor=l,l.extend=function(e){return s(l,e)},(l.open=function(e){if(h={},i(e)?h=e.call(l,p,d,l,a):r(e)&&(h=e),r(h))for(var n in h)t.call(h,n)&&(p[n]=h[n]);return i(p.init)||(p.init=a),l})(c)}}("prototype",{}.hasOwnProperty),w=-1,E=1,S=_(y,function(e){e.insDirOf=function(e,t){return e===w?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===w?this.prependTo(t):this.appendTo(t)}}),M=_(function(e){e.parent=0,e[w]=0,e[E]=0,e.init=function(e,t,n){this.parent=e,this[w]=t,this[E]=n},this.copy=function(e){return M(e.parent,e[w],e[E])}}),I={},k=!1,T=_(function(e){function t(){return n+=1}e[w]=0,e[E]=0,e.parent=0;var n=0;this.getNodeOfElement=function(e){if(e){if(!e.nodeType)throw new Error("must pass an HTMLElement to Node.getNodeOfElement");return e.mqBlockNode||e.mqCmdNode}},this.linkElementByBlockId=function(e,t){T.linkElementByBlockNode(e,I[t])},this.linkElementByBlockNode=function(e,t){e.mqBlockNode=t},this.linkElementByCmdNode=function(e,t){e.mqCmdNode=t},e.init=function(){this.id=t(),I[n]=this,i(n,this),this.ends={},this.ends[w]=0,this.ends[E]=0},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=S(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){function t(e){if(e.getAttribute){var n=e.getAttribute("mathquill-command-id");if(n){e.removeAttribute("mathquill-command-id");var r=I[n];r.jQadd(e),T.linkElementByCmdNode(e,r)}var i=e.getAttribute("mathquill-block-id");if(i){e.removeAttribute("mathquill-block-id");var o=I[i];o.jQadd(e),T.linkElementByBlockNode(e,o)}}for(e=e.firstChild;e;e=e.nextSibling)t(e)}for(var e=S(e||this.html()),n=0;n<e.length;n+=1)t(e[n]);return e},e.createDir=function(e,t){r(e);var n=this;return n.jQize(),n.jQ.insDirOf(e,t.jQ),t[e]=n.adopt(t.parent,t[w],t[E]),n},e.createLeftOf=function(e){return this.createDir(w,e)},e.selectChildren=function(e,t){return L(e,t)},e.bubble=function(e){for(var t=this;t;t=t.parent){var n=e(t);if(n===!1)break}return this},e.postOrder=function(e){return function t(n){n.eachChild(t),e(n)}(this),this},e.isEmpty=function(){return 0===this.ends[w]&&0===this.ends[E]},e.isStyleBlock=function(){return!1},e.children=function(){return C(this.ends[w],this.ends[E])},e.eachChild=function(e){return s(this.ends,e),this},e.foldChildren=function(e,t){return a(this.ends,e,t)},e.withDirAdopt=function(e,t,n,r){return C(this,this).withDirAdopt(e,t,n,r),this},e.adopt=function(e,t,n){return C(this,this).adopt(e,t,n),this},e.disown=function(){return C(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.disown()},e.finalizeTree=function(){},e.contactWeld=function(){},e.blur=function(){},e.intentionalBlur=function(){},e.reflow=function(){},e.registerInnerField=function(){}}),C=_(function(e){e.init=function(e,t,i){if(i===g&&(i=w),r(i),n("no half-empty fragments",!e==!t),this.ends={},e){n("withDir is passed to Fragment",e instanceof T),n("oppDir is passed to Fragment",t instanceof T),n("withDir and oppDir have the same parent",e.parent===t.parent),this.ends[i]=e,this.ends[-i]=t;var o=this.fold([],function(e,t){return e.push.apply(e,t.jQ.get()),e});this.jQ=this.jQ.add(o)}},e.jQ=S(),e.withDirAdopt=function(e,t,n,r){return e===w?this.adopt(t,n,r):this.adopt(t,r,n)},e.adopt=function(e,t,n){c(e,t,n);var r=this;r.disowned=!1;var i=r.ends[w];if(!i)return this;var o=r.ends[E];return t||(e.ends[w]=i),n?n[w]=o:e.ends[E]=o,r.ends[E][E]=n,r.each(function(n){n[w]=t,n.parent=e,t&&(t[E]=n),t=n}),r},e.disown=function(){var e=this,t=e.ends[w];if(!t||e.disowned)return e;e.disowned=!0;var n=e.ends[E],r=t.parent;return c(r,t[w],t),c(r,n,n[E]),t[w]?t[w][E]=n[E]:r.ends[w]=n[E],n[E]?n[E][w]=t[w]:r.ends[E]=t[w],e},e.remove=function(){return this.jQ.remove(),this.disown()},e.each=function(e){return s(this.ends,e),this},e.fold=function(e,t){return a(this.ends,e,t)}}),A={},P={},O=_(M,function(e){e.init=function(e,t){this.parent=e,this.options=t;var n=this.jQ=this._jQ=S('<span class="dcg-mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("dcg-mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("dcg-mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[E]?this.selection&&this.selection.ends[w][w]===this[w]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[E].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=S(),this},e.withDirInsertAt=function(e,t,n,r){var i=this.parent;this.parent=t,this[e]=n,this[-e]=r,i!==t&&i.blur&&i.blur(this)},e.insDirOf=function(e,t){return r(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("dcg-mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(w,e)},e.insRightOf=function(e){return this.insDirOf(E,e)},e.insAtDirEnd=function(e,t){return r(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(w,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(E,e)},e.jumpUpDown=function(e,t){var n=this;n.upDownCache[e.id]=M.copy(n);var r=n.upDownCache[t.id];if(r)r[E]?n.insLeftOf(r[E]):n.insAtRightEnd(r.parent);else{var i=n.offset().left;t.seek(i,n)}Y.queue(t,!0)},e.offset=function(){var e=this,t=e.jQ.removeClass("dcg-mq-cursor").offset();return e.jQ.addClass("dcg-mq-cursor"),t},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,n=e[E],r=this,i=e[w];if(e.disown().eachChild(function(r){r.isEmpty()||(r.children().adopt(t,i,n).each(function(t){t.jQ.insertBefore(e.jQ.first())}),i=r.ends[E])}),!this[E])if(this[w])this[E]=this[w][E];else for(;!this[E];){if(this.parent=this.parent[E],!this.parent){this[E]=e[E],this.parent=t;break}this[E]=this.parent.ends[w]}this[E]?this.insLeftOf(this[E]):this.insAtRightEnd(t),e.jQ.remove(),e[w].siblingDeleted&&e[w].siblingDeleted(r.options,E),e[E].siblingDeleted&&e[E].siblingDeleted(r.options,w)},e.startSelection=function(){for(var e=this.anticursor=M.copy(this),t=e.ancestors={},n=e;n.parent;n=n.parent)t[n.parent.id]=n},e.endSelection=function(){delete this.anticursor},e.select=function(){var e=this.anticursor;if(this[w]===e[w]&&this.parent===e.parent)return!1;for(var t=this;t.parent;t=t.parent)if(t.parent.id in e.ancestors){var r=t.parent;break}n("cursor and anticursor in the same tree",r);var i,o,s=e.ancestors[r.id],a=E;if(t[w]!==s)for(var c=t;c;c=c[E])if(c[E]===s[E]){a=w,i=t,o=s;break}return a===E&&(i=s,o=t),i instanceof M&&(i=i[E]),o instanceof M&&(o=o[w]),this.hide().selection=r.selectChildren(i,o),this.insDirOf(a,this.selection.ends[a]),this.selectionChanged(),!0},e.resetToEnd=function(e){this.clearSelection();var t=e.root;this[E]=0,this[w]=t.ends[E],this.parent=t},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[w]=this.selection.ends[w][w],this[E]=this.selection.ends[E][E],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[w]=e.ends[w][w],this[E]=e.ends[E][E],delete this.selection),e}}),L=_(C,function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e,t){var n=t||"";return this.fold("",function(t,r){return t+n+r[e]()})}}),D=_(function(e){e.init=function(e,t,n){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=n,this.ariaLabel="MathQuill Input",this.ariaPostLabel="",e.controller=this,this.cursor=e.cursor=O(e,n)},e.handle=function(e,t){var n=this.options.handlers;if(n&&n.fns[e]){var r=n.APIClasses[this.KIND_OF_MQ](this);t===w||t===E?n.fns[e](t,r):n.fns[e](r)}};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}}),N={},F=_(),q={},R=_(),j={};u.prototype=R.p,u.VERSION="v0.10.1",u.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return l=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')},l(),u},u.getInterface=h;var V=h.MIN=1,B=h.MAX=2;u.noConflict=function(){return window.MathQuill=U,u};var U=window.MathQuill;window.MathQuill=u;var z=function(){function t(e){var t,r=e.which||e.keyCode,i=n[r],o=[];return e.ctrlKey&&o.push("Ctrl"),e.originalEvent&&e.originalEvent.metaKey&&o.push("Meta"),e.altKey&&o.push("Alt"),e.shiftKey&&o.push("Shift"),t=i||String.fromCharCode(r),o.length||i?(o.push(t),o.join("-")):t}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,r){function i(e){E=e,clearTimeout(v),v=setTimeout(e)}function o(t){i(function(n){E=e,clearTimeout(v),t(n)})}function s(t){E(),E=e,clearTimeout(v),_.val(t),t&&_[0].select&&_[0].select(),S=!!t}function a(){var e=_[0];return"selectionStart"in e&&e.selectionStart!==e.selectionEnd}function c(){r.options&&r.options.overrideKeystroke?r.options.overrideKeystroke(t(b),b):r.keystroke(t(b),b)}function l(e){b=e,x=null,S&&o(function(e){e&&"focusout"===e.type||!_[0].select||_[0].select()}),c()}function u(e){if(!e||!e.originalEvent)return!1;switch(e.originalEvent.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"ArrowUp":return!0}return!1}function h(e){b&&x&&c(),x=e,u(e)||i(p)}function d(e){b&&!x&&(u(e)||i(p))}function p(){if(!a()){var e=_.val();1===e.length?(_.val(""),r.options&&r.options.overrideTypedText?r.options.overrideTypedText(e):r.typedText(e)):e&&_[0].select&&_[0].select()}}function f(){b=x=null}function m(e){_.focus(),i(g)}function g(){var e=_.val();_.val(""),e&&r.paste(e)}var v,b=null,x=null,_=y(n),w=y(r.container||_),E=e;w.bind("keydown keypress input keyup focusout paste",function(e){E(e)});var S=!1;return r.options&&r.options.disableCopyPaste?w.bind({keydown:l,keypress:h,keyup:d,focusout:f,copy:function(e){e.preventDefault()},cut:function(e){e.preventDefault()},paste:function(e){e.preventDefault()}}):w.bind({keydown:l,keypress:h,keyup:d,focusout:f,cut:function(){o(function(){r.cut()})},copy:function(){o(function(){r.copy()})},paste:m}),{select:s}}}(),G=_(function(e,t,r){function i(e,t){throw e=e?"'"+e+"'":"EOF","Parse Error: "+t+" at "+e}e.init=function(e){this._=e},e.parse=function(e){function t(e,t){return t}return this.skip(a)._(""+e,t,i)},e.or=function(e){n("or is passed a parser",e instanceof r);var t=this;return r(function(n,r,i){function o(t){return e._(n,r,i)}return t._(n,r,o)})},e.then=function(e){var t=this;return r(function(i,o,s){function a(t,i){var a=e instanceof r?e:e(i);return n("a parser is returned",a instanceof r),a._(t,o,s)}return t._(i,a,s)})},e.many=function(){var e=this;return r(function(t,n,r){function i(e,n){return t=e,s.push(n),!0}function o(){return!1}for(var s=[];e._(t,i,o););return n(t,s)})},e.times=function(e,t){arguments.length<2&&(t=e);var n=this;return r(function(r,i,o){function s(e,t){return u.push(t),r=e,!0}function a(e,t){return l=t,r=e,!1}function c(e,t){return!1}for(var l,u=[],h=!0,d=0;d<e;d+=1)if(h=n._(r,s,a),!h)return o(r,l);for(;d<t&&h;d+=1)h=n._(r,s,c);return i(r,u)})},e.result=function(e){return this.then(s(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then(function(e){return t.many().map(function(t){return e.concat(t)})})},e.map=function(e){return this.then(function(t){return s(e(t))})},e.skip=function(e){return this.then(function(t){return e.result(t)})};var o=(this.string=function(e){var t=e.length,n="expected '"+e+"'";return r(function(r,i,o){var s=r.slice(0,t);return s===e?i(r.slice(t),s):o(r,n)})},this.regex=function(e){n("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return r(function(n,r,i){var o=e.exec(n);if(o){var s=o[0];return r(n.slice(s.length),s)}return i(n,t)})}),s=r.succeed=function(e){return r(function(t,n){return n(t,e)})},a=(r.fail=function(e){return r(function(t,n,r){return r(t,e)})},r.letter=o(/^[a-z]/i),r.letters=o(/^[a-z]*/i),r.digit=o(/^[0-9]/),r.digits=o(/^[0-9]*/),r.whitespace=o(/^\s+/),r.optWhitespace=o(/^\s*/),r.any=r(function(e,t,n){return e?t(e.slice(1),e.charAt(0)):n(e,"expected any character")}),r.all=r(function(e,t,n){return t("",e)}),r.eof=r(function(e,t,n){return e?n(e,"expected EOF"):t(e,e)}))});D.open(function(e){e.focusBlurEvents=function(){function e(){clearTimeout(r),s.selection&&s.selection.jQ.addClass("dcg-mq-blur"),t()}function t(){s.hide().parent.blur(),i.container.removeClass("dcg-mq-focused"),S(window).unbind("blur",e),i.options&&i.options.resetCursorOnBlur&&s.resetToEnd(i)}function n(){var e=(i.ariaLabel+": "+o.mathspeak()+" "+i.ariaPostLabel).trim();
Y.jQ.empty(),i.textarea.attr("aria-label",e),i.container.attr("aria-label",e)}var r,i=this,o=i.root,s=i.cursor;i.textarea.focus(function(){n(),i.blurred=!1,clearTimeout(r),i.container.addClass("dcg-mq-focused"),s.parent||s.insAtRightEnd(o),s.selection?(s.selection.jQ.removeClass("dcg-mq-blur"),i.selectionChanged()):s.show(),i.setOverflowClasses()}).blur(function(){i.textareaSelectionTimeout&&(clearTimeout(i.textareaSelectionTimeout),i.textareaSelectionTimeout=g),i.blurred=!0,r=setTimeout(function(){o.postOrder(function(e){e.intentionalBlur()}),s.clearSelection().endSelection(),t(),n(),i.scrollHoriz()}),S(window).bind("blur",e)}),i.blurred=!0,s.hide().parent.blur()}}),D.open(function(e,t){e.exportText=function(){return this.root.foldChildren("",function(e,t){return e+t.text()})}}),D.open(function(t){F.p.ignoreNextMousedown=e;var n;this.onNotify(function(e){"edit"!==e&&"replace"!==e||n&&n.cursor===this&&n.cb()}),t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",function(r){function i(e){y=S(e.target)}function o(e){d.anticursor||d.startSelection(),h.seek(y,e.pageX,e.pageY).cursor.select(),d.selection&&Y.clear().queue(d.selection.join("mathspeak")+" selected").alert(),y=g}function s(e){l.unbind("mousemove",i),S(e.target.ownerDocument).unbind("mousemove",o).unbind("mouseup",c),n=g}function a(){h.editable?(d.show(),Y.queue(d.parent).alert()):f.detach()}function c(e){d.blink=p,d.selection||a(),s(e)}var l=S(r.target).closest(".dcg-mq-root-block"),u=T.getNodeOfElement(l[0])||T.getNodeOfElement(t[0]),h=u.controller,d=h.cursor,p=d.blink,f=h.textareaSpan,m=h.textarea;if(r.preventDefault(),r.target.unselectable=!0,!d.options.ignoreNextMousedown(r)){d.options.ignoreNextMousedown=e;var y,v;n={cursor:d,cb:function(){v=!0,d.blink=p,d.clearSelection(),a(),s(r)}},h.blurred&&(h.editable||l.prepend(f),m.focus(),v)||(d.blink=e,h.seek(S(r.target),r.pageX,r.pageY).cursor.startSelection(),l.mousemove(i),S(r.target.ownerDocument).mousemove(o).mouseup(c))}})}}),D.open(function(e){e.seek=function(e,t,r){var i,o=this.notify("select").cursor,s=e&&e[0];return s&&(i=T.getNodeOfElement(s),i||(i=T.getNodeOfElement(e.parentElement))),i||(i=this.root),n("nodeId is the id of some Node that exists",i),o.clearSelection().show(),i.seek(t,o),this.scrollHoriz(),this}}),D.open(function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}}),T.open(function(e){e.keystroke=function(e,t,n){var r=n.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(w);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(E,e,t);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(w,e,t);case"End":n.notify("move").cursor.insAtRightEnd(r.parent),Y.queue("end of").queue(r.parent,!0);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root),Y.queue("end of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-End":for(;r[E];)n.selectRight();break;case"Ctrl-Shift-End":for(;r[E]||r.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(r.parent),Y.queue("beginning of").queue(r.parent,!0);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root),Y.queue("beginning of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-Home":for(;r[w];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;r[w]||r.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(r[w])for(;r[w];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(r[E])for(;r[E];)n.selectRight();else n.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(E);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);r[w];)n.selectLeft();break;case"Ctrl-Alt-Up":r.parent.parent&&r.parent.parent instanceof T?Y.queue(r.parent.parent):Y.queue("nothing above");break;case"Ctrl-Alt-Down":r.parent&&r.parent instanceof T?Y.queue(r.parent):Y.queue("block is empty");break;case"Ctrl-Alt-Left":r.parent.parent&&r.parent.parent.ends&&r.parent.parent.ends[w]&&r.parent.parent.ends[w]instanceof T?Y.queue(r.parent.parent.ends[w]):Y.queue("nothing to the left");break;case"Ctrl-Alt-Right":r.parent.parent&&r.parent.parent.ends&&r.parent.parent.ends[E]&&r.parent.parent.ends[E]instanceof T?Y.queue(r.parent.parent.ends[E]):Y.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":r.selection?Y.queue(r.selection.join("mathspeak"," ").trim()+" selected"):Y.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":n.ariaPostLabel.length?Y.queue(n.ariaPostLabel):Y.queue("no answer");break;default:return}Y.alert(),t.preventDefault(),n.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){n("overridden or never called on this node")}}),D.open(function(e){function t(e,t){var n=e.notify("upDown").cursor,r=t+"Into",i=t+"OutOf";return n[E][r]?n.insAtLeftEnd(n[E][r]):n[w][r]?n.insAtRightEnd(n[w][r]):n.parent.bubble(function(e){var t=e[i];if(t&&("function"==typeof t&&(t=e[i](n)),t instanceof T&&n.jumpUpDown(e,t),t!==!0))return!1}),e}this.onNotify(function(e){"move"!==e&&"upDown"!==e||this.show().clearSelection()}),e.escapeDir=function(e,t,n){r(e);var i=this.cursor;if(i.parent!==this.root&&n.preventDefault(),i.parent!==this.root)return i.parent.moveOutOf(e,i),Y.alert(),this.notify("move")},q.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){r(e);var t=this.cursor,n=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,n):t.parent.moveOutOf(e,t,n),this.notify("move")},e.moveLeft=function(){return this.moveDir(w)},e.moveRight=function(){return this.moveDir(E)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify(function(e){"upDown"!==e&&(this.upDownCache={})}),this.onNotify(function(e){"edit"===e&&this.show().deleteSelection()}),e.deleteDir=function(e){r(e);var t=this.cursor,n=t[e],i=t.parent.parent;if(n&&n instanceof T)n.sides?Y.queue(n.parent.chToCmd(n.sides[-e].ch).mathspeak({createdLeftOf:t})):n.blocks||"\\text"===n.parent.ctrlSeq||Y.queue(n);else if(i&&i instanceof T)if(i.sides)Y.queue(i.parent.chToCmd(i.sides[e].ch).mathspeak({createdLeftOf:t}));else if(i.blocks&&i.mathspeakTemplate)if(i.upInto&&i.downInto)Y.queue(i.mathspeakTemplate[1]);else{var o=i.mathspeakTemplate,s=e===w?o[0]:o[o.length-1];Y.queue(s)}else Y.queue(i);var a=t.selection;return this.notify("edit"),a||(t[e]?t[e].deleteTowards(e,t):t.parent.deleteOutOf(e,t)),t[w].siblingDeleted&&t[w].siblingDeleted(t.options,E),t[E].siblingDeleted&&t[E].siblingDeleted(t.options,w),t.parent.bubble(function(e){e.reflow()}),this},e.ctrlDeleteDir=function(e){r(e);var t=this.cursor;if(!t[e]||t.selection)return this.deleteDir(e);this.notify("edit");var n;return n=e===w?C(t.parent.ends[w],t[w]):C(t[E],t.parent.ends[E]),Y.queue(n),n.remove(),t.insAtDirEnd(e,t.parent),t[w].siblingDeleted&&t[w].siblingDeleted(t.options,E),t[E].siblingDeleted&&t[E].siblingDeleted(t.options,w),t.parent.bubble(function(e){e.reflow()}),this},e.backspace=function(){return this.deleteDir(w)},e.deleteForward=function(){return this.deleteDir(E)},this.onNotify(function(e){"select"!==e&&this.endSelection()}),e.selectDir=function(e){var t=this.notify("select").cursor,n=t.selection;r(e),t.anticursor||t.startSelection();var i=t[e];i?n&&n.ends[e]===i&&t.anticursor[-e]!==i?i.unselectInto(e,t):i.selectTowards(e,t):t.parent.selectOutOf(e,t),t.clearSelection(),t.select()||t.show(),t.selection&&Y.clear().queue(t.selection.join("mathspeak"," ").trim()+" selected")},e.selectLeft=function(){return this.selectDir(w)},e.selectRight=function(){return this.selectDir(E)}}),D.open(function(e){F.p.substituteTextarea=function(){return S("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]},e.createTextarea=function(){var e=this.textareaSpan=S('<span class="dcg-mq-textarea"></span>'),t=this.options.substituteTextarea();if(!t.nodeType)throw"substituteTextarea() must return a DOM element, got "+t;t=this.textarea=S(t).appendTo(e);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()}},e.selectionChanged=function(){var e=this;ve(e.container[0]),e.textareaSelectionTimeout===g&&(e.textareaSelectionTimeout=setTimeout(function(){e.setTextareaSelection()}))},e.setTextareaSelection=function(){this.textareaSelectionTimeout=g;var e="";this.cursor.selection&&(e=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},e.staticMathTextareaEvents=function(){function e(){o.detach(),t.blurred=!0}var t=this,n=t.root,r=t.cursor,i=t.textarea,o=t.textareaSpan;this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$'+t.exportLatex()+"$</span>"),t.blurred=!0,i.bind("cut paste",!1),t.options.disableCopyPaste?i.bind("copy",!1):i.bind("copy",function(){t.setTextareaSelection()}),i.focus(function(){t.blurred=!1}).blur(function(){r.selection&&r.selection.clear(),setTimeout(e)}),t.selectFn=function(e){i.val(e),e&&i.select()};var s=t&&"MathQuill Input"!==t.ariaLabel?t.ariaLabel+": ":"";t.container.attr("aria-label",s+n.mathspeak().trim())},e.editablesTextareaEvents=function(){var e=this,t=e.textarea,n=e.textareaSpan,r=z(t,this);this.selectFn=function(e){r.select(e)},this.container.prepend(n),this.focusBlurEvents()},e.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.write(t,e),this.scrollHoriz()},e.cut=function(){var e=this,t=e.cursor;t.selection&&setTimeout(function(){e.notify("edit"),t.parent.bubble(function(e){e.reflow()}),e.options&&e.options.onCut&&e.options.onCut()})},e.copy=function(){this.setTextareaSelection()},e.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()}});var $=function(){function e(e){var t=J();return e.adopt(t,0,0),t}function t(e){for(var t=e[0]||J(),n=1;n<e.length;n+=1)e[n].children().adopt(t,t.ends[E],0);return t}var n=G.string,r=G.regex,i=G.letter,o=G.any,s=G.optWhitespace,a=G.succeed,c=G.fail,l=i.map(function(e){return re(e)}),u=r(/^[^${}\\_^]/).map(function(e){return Q(e)}),h=r(/^[^\\a-eg-zA-Z]/).or(n("\\").then(r(/^[a-z]+/i).or(r(/^\s+/).result(" ")).or(o))).then(function(e){var t=A[e];return t?t(e).parser():c("unknown command: \\"+e)}),d=h.or(l).or(u),p=n("{").then(function(){return m}).skip(n("}")),f=s.then(p.or(d.map(e))),m=f.many().map(t).skip(s),g=n("[").then(f.then(function(e){return"]"!==e.join("latex")?a(e):c()}).many().map(t).skip(s)).skip(n("]")),y=m;return y.block=f,y.optBlock=g,y}();D.open(function(e,t){e.cleanLatex=function(e){return e.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.exportLatex=function(){return this.cleanLatex(this.root.latex())},e.writeLatex=function(e){var t=this.notify("edit").cursor,n=G.all,r=G.eof,i=$.skip(r).or(n.result(!1)).parse(e);if(i&&!i.isEmpty()){i.children().adopt(t.parent,t[w],t[E]);var o=i.jQize();o.insertBefore(t.jQ),t[w]=i.ends[E],i.finalizeInsert(t.options,t),i.ends[E][E].siblingCreated&&i.ends[E][E].siblingCreated(t.options,w),i.ends[w][w].siblingCreated&&i.ends[w][w].siblingCreated(t.options,E),t.parent.bubble(function(e){e.reflow()})}return this},e.classifyLatexForEfficientUpdate=function(e){if("string"==typeof e){var t=e.match(/-?[0-9.]+$/g);return t&&1===t.length?{latex:e,prefix:e.substr(0,e.length-t[0].length),digits:t[0]}:void 0}},e.renderLatexMathEfficiently=function(e){var t,n,r=this.classifyLatexForEfficientUpdate(e);if(!r)return!1;if(t=this.exportLatex(),n=this.classifyLatexForEfficientUpdate(t),!n||n.prefix!==r.prefix)return!1;var i=this.root,o=n.digits,s=r.digits,a=!1,c=!1;"-"===o[0]&&(a=!0,o=o.substr(1)),"-"===s[0]&&(c=!0,s=s.substr(1));for(var l=this.root.ends[E],u=[],h=o.length-1;h>=0;h--){if(l.ctrlSeq!==o[h])return!1;if(l.parent!==i)return!1;u.unshift(l),l=l[w]}if(a&&!c){var d=l;if("-"!==d.ctrlSeq)return!1;if(d[E]!==u[0])return!1;if(d.parent!==i)return!1;if(d[w]&&d[w].parent!==i)return!1;u[0][w]=d[w],i.ends[w]===d&&(i.ends[w]=u[0]),d[w]&&(d[w][E]=u[0]),d.jQ.remove()}if(!a&&c){var p=he("-"),f=document.createElement("span");f.textContent="-",p.jQ=S(f),u[0][w]&&(u[0][w][E]=p),i.ends[w]===u[0]&&(i.ends[w]=p),p.parent=i,p[w]=u[0][w],p[E]=u[0],u[0][w]=p,p.contactWeld(),p.jQ.insertBefore(u[0].jQ)}var m=Math.min(o.length,s.length);for(h=0;h<m;h++){var g=s[h];l=u[h],l.ctrlSeq!==g&&(l.ctrlSeq=g,l.jQ[0].textContent=g,l.mathspeakName=g)}if(o.length>s.length)for(l=u[s.length-1],i.ends[E]=l,l[E]=0,h=o.length-1;h>=m;h--)u[h].jQ.remove();if(s.length>o.length){var y=document.createDocumentFragment();for(h=m;h<s.length;h++){var v=document.createElement("span");v.textContent=s[h];var b=te(s[h]);b.parent=i,b.jQ=S(v),y.appendChild(v),b[w]=i.ends[E],b[E]=0,b[w][E]=b,i.ends[E]=b}i.jQ[0].appendChild(y)}var x=this.exportLatex();return x!==e?(console.warn("tried updating latex efficiently but did not work. Attempted: "+e+" but wrote: "+x),!1):(this.cursor.resetToEnd(this),!0)},e.renderLatexMathFromScratch=function(e){var t=this.root,n=this.cursor,r=G.all,i=G.eof,o=$.skip(i).or(r.result(!1)).parse(e);t.ends[w]=t.ends[E]=0,o&&o.children().adopt(t,0,0);var s=t.jQ;if(o){var a=o.join("html");s.html(a),t.jQize(s.children()),t.finalizeInsert(n.options)}else s.empty();var c=this.ariaLabel&&"MathQuill Input"!==this.ariaLabel?this.ariaLabel+": ":"";this.container.attr("aria-label",c+t.mathspeak().trim()),delete n.selection,n.insAtRightEnd(t)},e.renderLatexMath=function(e){this.notify("replace"),this.renderLatexMathEfficiently(e)||this.renderLatexMathFromScratch(e)},e.renderLatexText=function(e){var t=this.root,n=this.cursor;t.jQ.children().slice(1).remove(),t.ends[w]=t.ends[E]=0,delete n.selection,n.show().insAtRightEnd(t);var r=G.regex,i=G.string,o=G.eof,s=G.all,a=i("$").then($).skip(i("$").or(o)).map(function(e){var t=RootMathCommand(n);t.createBlocks();var r=t.ends[w];return e.children().adopt(r,0,0),t}),c=i("\\$").result("$"),l=c.or(r(/^[^$]/)).map(Q),u=a.or(l).many(),h=u.skip(o).or(s.result(!1)).parse(e);if(h){for(var d=0;d<h.length;d+=1)h[d].adopt(t,t.ends[E],0);t.jQize().appendTo(t.jQ),t.finalizeInsert(n.options)}}}),D.open(function(e){e.setOverflowClasses=function(){var e=this.root.jQ[0],t=!1,n=!1;if(!this.blurred){var r=e.getBoundingClientRect().width,i=e.scrollWidth,o=e.scrollLeft;t=i>r+o,n=o>0}e.classList.contains("dcg-mq-editing-overflow-right")!==t&&e.classList.toggle("dcg-mq-editing-overflow-right"),e.classList.contains("dcg-mq-editing-overflow-left")!==n&&e.classList.toggle("dcg-mq-editing-overflow-left")},e.scrollHoriz=function(){var e=this.cursor,t=e.selection,n=this.root.jQ[0].getBoundingClientRect();if(!e.jQ[0]&&!t)return void this.root.jQ.stop().animate({scrollLeft:0},100,function(){this.setOverflowClasses()}.bind(this));if(t){var r=t.jQ[0].getBoundingClientRect(),i=r.left-(n.left+20),o=r.right-(n.right-20);if(t.ends[w]===e[E])if(i<0)var s=i;else{if(!(o>0))return;if(r.left-o<n.left+20)var s=i;else var s=o}else if(o>0)var s=o;else{if(!(i<0))return;if(r.right-i>n.right-20)var s=o;else var s=i}}else{var a=e.jQ[0].getBoundingClientRect().left;if(a>n.right-20)var s=a-(n.right-20);else{if(!(a<n.left+20))return;var s=a-(n.left+20)}}var c=this.root.jQ[0];s<0&&0===c.scrollLeft||s>0&&c.scrollWidth<=c.scrollLeft+n.width||this.root.jQ.stop().animate({scrollLeft:"+="+s},100,function(){this.setOverflowClasses()}.bind(this))}});var H=_(function(e){e.init=function(){this.jQ=y([]),y(document).ready(function(){var e=".dcg-mq-aria-alert";y(e).length||y("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"),this.jQ=y(e)}.bind(this)),this.items=[],this.msg=""},e.queue=function(e,t){return e instanceof T&&(e=t?e.parent&&e.parent.ariaLabel&&"block"===e.ariaLabel?e.parent.ariaLabel+" "+e.mathspeak():e.ariaLabel?e.ariaLabel+" "+e.mathspeak():e.mathspeak():e.mathspeak()),this.items.push(e),this},e.queueDirOf=function(e){return r(e),this.queue(e===w?"before":"after")},e.queueDirEndOf=function(e){return r(e),this.queue(e===w?"beginning of":"end of")},e.alert=function(e){return e&&this.queue(e),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.jQ.empty().text(this.msg)),this.clear()},e.clear=function(){return this.items.length=0,this}}),Y=H();D.open(function(e){e.aria=Y,e.exportMathSpeak=function(){return this.root.mathspeak()}});var X=_(T,function(e,t){e.finalizeInsert=function(e,t){var n=this;n.postOrder(function(t){t.finalizeTree(e)}),n.postOrder(function(e){e.contactWeld(t)}),n.postOrder(function(e){e.blur()}),n.postOrder(function(e){e.reflow()}),n[E].siblingCreated&&n[E].siblingCreated(e,w),n[w].siblingCreated&&n[w].siblingCreated(e,E),n.bubble(function(e){e.reflow()})}}),W=_(X,function(e,t){e.init=function(e,n,r){var i=this;t.init.call(i),i.ctrlSeq||(i.ctrlSeq=e),n&&(i.htmlTemplate=n),r&&(i.textTemplate=r)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,function(e,t){return e&&t.isEmpty()})},e.parser=function(){var e=$.block,t=this;return e.times(t.numBlocks()).map(function(e){t.blocks=e;for(var n=0;n<e.length;n+=1)e[n].adopt(t,t.ends[E],0);return t})},e.createLeftOf=function(e){var n=this,r=n.replacedFragment;n.createBlocks(),t.createLeftOf.call(n,e),r&&(r.adopt(n.ends[w],0,0),r.jQ.appendTo(n.ends[w].jQ)),n.finalizeInsert(e.options),n.placeCursor(e)},e.createBlocks=function(){for(var e=this,t=e.numBlocks(),n=e.blocks=Array(t),r=0;r<t;r+=1){var i=n[r]=J();i.adopt(e,e.ends[E],0)}},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[w],function(e,t){return e.isEmpty()?e:t}))},e.moveTowards=function(e,t,n){var r=n&&this[n+"Into"];t.insAtDirEnd(-e,r||this.ends[-e]),Y.queueDirEndOf(-e).queue(t.parent,!0)},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return L(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function n(e){var t={};return t[w]=e.jQ.offset().left,t[E]=t[w]+e.jQ.outerWidth(),t}var r=this,i=n(r);if(e<i[w])return t.insLeftOf(r);if(e>i[E])return t.insRightOf(r);var o=i[w];r.eachChild(function(s){var a=n(s);return e<a[w]?(e-o<a[w]-e?s[w]?t.insAtRightEnd(s[w]):t.insLeftOf(r):t.insAtLeftEnd(s),!1):e>a[E]?void(s[E]?o=a[E]:i[E]-e<e-a[E]?t.insRightOf(r):t.insAtRightEnd(s)):(s.seek(e,t),!1)})},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e=this,t=e.blocks,r=" mathquill-command-id="+e.id,i=e.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);n("no unmatched angle brackets",i.join("")===this.htmlTemplate);for(var o=0,s=i[0];s;o+=1,s=i[o])if("/>"===s.slice(-2))i[o]=s.slice(0,-2)+r+' aria-hidden="true"/>';else if("<"===s.charAt(0)){n("not an unmatched top-level close tag","/"!==s.charAt(1)),i[o]=s.slice(0,-1)+r+' aria-hidden="true">';var a=1;do o+=1,s=i[o],n("no missing close tags",s),"</"===s.slice(0,2)?a-=1:"<"===s.charAt(0)&&"/>"!==s.slice(-2)&&(a+=1);while(a>0)}return i.join("").replace(/>&(\d+)/g,function(e,n){return" mathquill-block-id="+t[n].id+' aria-hidden="true">'+t[n].join("html")})},e.latex=function(){return this.foldChildren(this.ctrlSeq,function(e,t){return e+"{"+(t.latex()||" ")+"}"})},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],function(n,r){t+=1;var i=r.text();return n&&"("===e.textTemplate[t]&&"("===i[0]&&")"===i.slice(-1)?n+i.slice(1,-1)+e.textTemplate[t]:n+i+(e.textTemplate[t]||"")})},e.mathspeakTemplate=[],e.mathspeak=function(){var e=this,t=0;return e.foldChildren(e.mathspeakTemplate[t]||"Start"+e.ctrlSeq+" ",function(n,r){return t+=1,n+" "+r.mathspeak()+" "+(e.mathspeakTemplate[t]+" "||"End"+e.ctrlSeq+" ")})}}),K=_(W,function(t,n){t.init=function(e,t,r,i){r||(r=e&&e.length>1?e.slice(1):e),this.mathspeakName=i||r,n.init.call(this,e,t,[r])},t.parser=function(){return G.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(e){e.remove()},t.createBlocks=e,t.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e],Y.queue(this)},t.deleteTowards=function(e,t){t[e]=this.remove()[e]},t.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate.join("")},t.mathspeak=function(){return this.mathspeakName},t.placeCursor=e,t.isEmpty=function(){return!0}}),Q=_(K,function(e,t){e.init=function(e,n,r){t.init.call(this,e,"<span>"+(n||e)+"</span>",g,r)}}),Z=_(K,function(e,t){e.init=function(e,n,r,i){t.init.call(this,e,'<span class="dcg-mq-binary-operator">'+n+"</span>",r,i)}}),J=_(X,function(e,t){e.join=function(e){return this.foldChildren("",function(t,n){return t+n[e]()})},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[w]===this.ends[E]&&0!==this.ends[w]?this.ends[w].text():this.join("text")},e.mathspeak=function(){var e="",t={};return this.controller&&(t=this.controller.options.autoOperatorNames),this.foldChildren([],function(n,r){if(r.isPartOfOperator)e+=r.mathspeak();else{if(""!==e){if(t!=={}&&t._maxLength>0){var i=t[e.toLowerCase()];"string"==typeof i&&(e=i)}n.push(e+" "),e=""}var o=r.mathspeak(),s=r.ctrlSeq;isNaN(s)&&(o=" "+o,"."!==s&&(o+=" ")),n.push(o)}return n}).join("").replace(/ +(?= )/g,"")},e.ariaLabel="block",e.keystroke=function(e,n,r){return!r.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(n.preventDefault(),void r.escapeDir("Shift-Spacebar"===e?w:E,e,n))},e.moveOutOf=function(e,t,n){var r=n&&this.parent[n+"Into"];!r&&this[e]?(t.insAtDirEnd(-e,this[e]),Y.queueDirEndOf(-e).queue(t.parent,!0)):(t.insDirOf(e,this.parent),Y.queueDirOf(e).queue(this.parent))},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var n=this.ends[E];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[w].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<n.jQ.offset().left;)n=n[w];return n.seek(e,t)},e.chToCmd=function(e,t){var n;return e.match(/^[a-eg-zA-Z]$/)?re(e):/^\d$/.test(e)?te(e):t&&t.typingSlashWritesDivisionSymbol&&"/"===e?A["÷"](e):t&&t.typingAsteriskWritesTimesSymbol&&"*"===e?A["×"](e):t&&t.typingPercentWritesPercentOf&&"%"===e?A.percentof(e):(n=P[e]||A[e])?n(e):Q(e)},e.write=function(e,t){var n=this.chToCmd(t,e.options);e.selection&&n.replaces(e.replaceSelection()),n.createLeftOf(e.show()),"/"===t?Y.alert("over"):Y.alert(n.mathspeak({createdLeftOf:e}))},e.focus=function(){return this.jQ.addClass("dcg-mq-hasCursor"),this.jQ.removeClass("dcg-mq-empty"),this},e.blur=function(){return this.jQ.removeClass("dcg-mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("dcg-mq-empty"),this}});N.StaticMath=function(e){return _(e.AbstractMathQuill,function(t,n){this.RootBlock=J,t.__mathquillify=function(e,t){return this.config(e),n.__mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){n.init.apply(this,arguments);var t=this.innerFields=[];this.__controller.root.postOrder(function(n){n.registerInnerField(t,e.MathField)})},t.latex=function(){var t=n.latex.apply(this,arguments);if(arguments.length>0){var r=this.innerFields=[];this.__controller.root.postOrder(function(t){t.registerInnerField(r,e.MathField)})}return t},t.setAriaLabel=function(e){this.__controller.ariaLabel="string"==typeof e?e:"";var t="MathQuill Input"!==this.__controller.ariaLabel?this.__controller.ariaLabel+": ":"";return this.__controller.container.attr("aria-label",t+this.__controller.root.mathspeak().trim()),this},t.getAriaLabel=function(){return this.__controller.ariaLabel||""}})};var ee=_(J,d);N.MathField=function(t){return _(t.EditableField,function(t,n){this.RootBlock=ee,t.__mathquillify=function(t,r){return this.config(t),r>1&&(this.__controller.root.reflow=e),n.__mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this}})};var te=_(Q,function(e,t){e.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[w]instanceof ne&&e[w].isItalic!==!1||e[w]instanceof Se&&e[w][w]instanceof ne&&e[w][w].isItalic!==!1)?(A._().createLeftOf(e),t.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.createLeftOf.call(this,e)},e.mathspeak=function(e){if(e&&e.createdLeftOf){var n=e.createdLeftOf;if(n.options.autoSubscriptNumerals&&n.parent!==n.parent.parent.sub&&(n[w]instanceof ne&&n[w].isItalic!==!1||n[w]instanceof Se&&n[w][w]instanceof ne&&n[w][w].isItalic!==!1))return"Subscript "+t.mathspeak.call(this)+" Baseline"}return t.mathspeak.apply(this,arguments)}}),ne=_(K,function(e,t){e.init=function(e,n){t.init.call(this,e,"<var>"+(n||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return this.isPartOfOperator?"\\"==e[0]?e=e.slice(1,e.length):" "==e[e.length-1]&&(e=e.slice(0,-1)):(!this[w]||this[w]instanceof ne||this[w]instanceof Z||"\\ "===this[w].ctrlSeq||(e="*"+e),!this[E]||this[E]instanceof Z||this[E]instanceof Se||(e+="*")),e},e.mathspeak=function(){var e=this.ctrlSeq;return this.isPartOfOperator||1!==e.length?t.mathspeak.call(this):'"'+e+'"'}});F.p.autoCommands={_maxLength:0},q.autoCommands=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},r=0,i=0;i<t.length;i+=1){var o=t[i];if(o.length<2)throw'autocommand "'+o+'" not minimum length of 2';if(A[o]===ae)throw'"'+o+'" is a built-in operator name';n[o]=1,r=b(r,o.length)}return n._maxLength=r,n},F.p.autoParenthesizedFunctions={_maxLength:0},q.autoParenthesizedFunctions=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},r=0,i=0;i<t.length;i+=1){var o=t[i];if(o.length<2)throw'autocommand "'+o+'" not minimum length of 2';n[o]=1,r=b(r,o.length)}return n._maxLength=r,n};var re=_(ne,function(e,t){function n(e){return!e||e instanceof Z||e instanceof Me}e.init=function(e){return t.init.call(this,this.letter=e)},e.checkAutoCmds=function(e){var t=e.options.autoCommands,n=t._maxLength;if(n>0){for(var r="",i=this,o=0;i instanceof re&&i.ctrlSeq===i.letter&&o<n;)r=i.letter+r,i=i[w],o+=1;for(;r.length;){if(t.hasOwnProperty(r)){for(var o=1,i=this;o<r.length;o+=1,i=i[w]);return C(i,this).remove(),e[w]=i[w],A[r](r).createLeftOf(e)}r=r.slice(1)}}},e.autoParenthesize=function(e){var t=e.parent.ends[E];if(!(t&&t instanceof Pe&&"\\left("===t.ctrlSeq)){for(var n="",r=this,i=0,o=e.options.autoParenthesizedFunctions,s=o._maxLength,a=e.options.autoOperatorNames;r instanceof re&&i<s;)n=r.letter+n,r=r[w],i+=1;for(;n.length;){if(o.hasOwnProperty(n)&&a.hasOwnProperty(n))return e.parent.write(e,"(");n=n.slice(1)}}},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),this.checkAutoCmds(e),this.autoParenthesize(e)},e.italicize=function(e){return this.isItalic=e,this.isPartOfOperator=!e,this.jQ.toggleClass("dcg-mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==w&&this[E]instanceof re||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t=e.autoOperatorNames;if(0!==t._maxLength){for(var r=this.letter,i=this[w];i instanceof re;i=i[w])r=i.letter+r;for(var o=this[E];o instanceof re;o=o[E])r+=o.letter;C(i[E]||this.parent.ends[w],o[w]||this.parent.ends[E]).each(function(e){e.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),e.ctrlSeq=e.letter});e:for(var s=0,a=i[E]||this.parent.ends[w];s<r.length;s+=1,a=a[E])for(var c=v(t._maxLength,r.length-s);c>0;c-=1){var l=r.slice(s,s+c);if(t.hasOwnProperty(l)){for(var u=0,h=a;u<c;u+=1,h=h[E]){h.italicize(!1);var d=h}var p=ie.hasOwnProperty(l);if(a.ctrlSeq=(p?"\\":"\\operatorname{")+a.ctrlSeq,d.ctrlSeq+=p?" ":"}",se.hasOwnProperty(l)&&d[w][w][w].jQ.addClass("dcg-mq-last"),n(a[w])||a.jQ.addClass("dcg-mq-first"),!n(d[E]))if(d[E]instanceof Se){var f=d[E],m=f.siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("dcg-mq-after-operator-name",!(f[E]instanceof Pe))};m()}else d.jQ.toggleClass("dcg-mq-last",!(d[E]instanceof Pe));s+=c-1,a=d;continue e}}}}}),ie={},oe=F.p.autoOperatorNames={_maxLength:9},se={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var e="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),t=0;t<e.length;t+=1)ie[e[t]]=oe[e[t]]=1;for(var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),t=0;t<n.length;t+=1)ie[n[t]]=1;for(var r="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<r.length;t+=1)oe[r[t]]=oe["arc"+r[t]]=oe[r[t]+"h"]=oe["ar"+r[t]+"h"]=oe["arc"+r[t]+"h"]=1;for(var i="gcf hcf lcm proj span".split(" "),t=0;t<i.length;t+=1)oe[i[t]]=1}(),q.autoOperatorNames=function(e){if("string"!=typeof e)throw'"'+e+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of letters or "|"';for(var t=e.split(" "),n={},r=0,i=0;i<t.length;i+=1){var o=t[i];if(o.length<2)throw'"'+o+'" not minimum length of 2';if(o.indexOf("|")<0)n[o]=o,r=b(r,o.length);else{var s=o.split("|");if(s.length>2)throw'"'+o+'" has more than 1 mathspeak delimiter';if(s[0].length<2)throw'"'+o[0]+'" not minimum length of 2';n[s[0]]=s[1].replace(/-/g," "),r=b(r,s[0].length)}}return n._maxLength=r,n};var ae=_(K,function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){for(var t=this.ctrlSeq,n=0;n<t.length;n+=1)re(t.charAt(n)).createLeftOf(e)},e.parser=function(){for(var e=this.ctrlSeq,t=J(),n=0;n<e.length;n+=1)re(e.charAt(n)).adopt(t,t.ends[E],0);return G.succeed(t.children())}});for(var ce in oe)oe.hasOwnProperty(ce)&&(A[ce]=ae);A.operatorname=_(W,function(t){t.createLeftOf=e,t.numBlocks=function(){return 1},t.parser=function(){return $.block.map(function(e){var t=!0,n="",r=e.children();return r.each(function(e){e instanceof re?n+=e.letter:t=!1}),t&&"ans"===n?A[n](n):r})}}),A.f=_(re,function(e,t){e.init=function(){K.p.init.call(this,this.letter="f",'<var class="dcg-mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("dcg-mq-f",e),t.italicize.apply(this,arguments)}}),A[" "]=A.space=t(Q,"\\ ","&nbsp;","space"),A["'"]=A.prime=t(Q,"'","&prime;","prime"),A["″"]=A.dprime=t(Q,"″","&Prime;","double prime"),A.backslash=t(Q,"\\backslash ","\\","backslash"),P["\\"]||(P["\\"]=A.backslash),A.$=t(Q,"\\$","$","dollar"),A.square=t(Q,"\\square ","□","square"),A.mid=t(Q,"\\mid ","∣","mid");var le=_(K,function(e,t){e.init=function(e,n){t.init.call(this,e,'<span class="dcg-mq-nonSymbola">'+(n||e)+"</span>")}});A["@"]=le,A["&"]=t(le,"\\&","&amp;","and"),A["%"]=_(le,function(e,t){e.init=function(){t.init.call(this,"\\%","%","percent")},e.parser=function(){var e=G.optWhitespace,n=G.string;return e.then(n("\\operatorname{of}").map(function(){return A.percentof()})).or(t.parser.call(this))}}),A["∥"]=A.parallel=t(Q,"\\parallel ","&#x2225;","parallel"),A["∦"]=A.nparallel=t(Q,"\\nparallel ","&#x2226;","not parallel"),A["⟂"]=A.perp=t(Q,"\\perp ","&#x27C2;","perpendicular"),A.alpha=A.beta=A.gamma=A.delta=A.zeta=A.eta=A.theta=A.iota=A.kappa=A.mu=A.nu=A.xi=A.rho=A.sigma=A.tau=A.chi=A.psi=A.omega=_(ne,function(e,t){e.init=function(e){
t.init.call(this,"\\"+e+" ","&"+e+";")}}),A.phi=t(ne,"\\phi ","&#981;","phi"),A.phiv=A.varphi=t(ne,"\\varphi ","&phi;","phi"),A.epsilon=t(ne,"\\epsilon ","&#1013;","epsilon"),A.epsiv=A.varepsilon=t(ne,"\\varepsilon ","&epsilon;","epsilon"),A.piv=A.varpi=t(ne,"\\varpi ","&piv;","piv"),A.sigmaf=A.sigmav=A.varsigma=t(ne,"\\varsigma ","&sigmaf;","sigma"),A.thetav=A.vartheta=A.thetasym=t(ne,"\\vartheta ","&thetasym;","theta"),A.upsilon=A.upsi=t(ne,"\\upsilon ","&upsilon;","upsilon"),A.gammad=A.Gammad=A.digamma=t(ne,"\\digamma ","&#989;","gamma"),A.kappav=A.varkappa=t(ne,"\\varkappa ","&#1008;","kappa"),A.rhov=A.varrho=t(ne,"\\varrho ","&#1009;","rho"),A.pi=A["π"]=t(le,"\\pi ","&pi;","pi"),A.lambda=t(le,"\\lambda ","&lambda;","lambda"),A.Upsilon=A.Upsi=A.upsih=A.Upsih=t(K,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>',"capital upsilon"),A.Gamma=A.Delta=A.Theta=A.Lambda=A.Xi=A.Pi=A.Sigma=A.Phi=A.Psi=A.Omega=A.forall=_(Q,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}});var ue=_(W,function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=$.parse(this.latex);t.children().adopt(e.parent,e[w],e[E]),e[w]=t.ends[E],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[E][E].siblingCreated&&t.ends[E][E].siblingCreated(e.options,w),t.ends[w][w].siblingCreated&&t.ends[w][w].siblingCreated(e.options,E),e.parent.bubble(function(e){e.reflow()})},e.mathspeak=function(){return $.parse(this.latex).mathspeak()},e.parser=function(){var e=$.parse(this.latex).children();return G.succeed(e)}});A["¹"]=t(ue,"^1"),A["²"]=t(ue,"^2"),A["³"]=t(ue,"^3"),A["¼"]=t(ue,"\\frac14"),A["½"]=t(ue,"\\frac12"),A["¾"]=t(ue,"\\frac34");var he=_(Z,function(e){e.init=Q.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){function n(e){return e[w]?e[w]instanceof Z||/^[,;:\(\[]$/.test(e[w].ctrlSeq)?"":"dcg-mq-binary-operator":e.parent&&e.parent.parent&&e.parent.parent.isStyleBlock()?n(e.parent.parent):""}if(t!==E)return this.jQ[0].className=n(this),this}});A["+"]=t(he,"+","+","plus"),A["−"]=A["—"]=A["–"]=A["-"]=t(he,"-","&minus;","minus"),A["±"]=A.pm=A.plusmn=A.plusminus=t(he,"\\pm ","&plusmn;","plus-or-minus"),A.mp=A.mnplus=A.minusplus=t(he,"\\mp ","&#8723;","minus-or-plus"),P["*"]=A.sdot=A.cdot=t(Z,"\\cdot ","&middot;","*","times");var de=_(Z,function(e,t){e.init=function(e,n){this.data=e,this.strict=n;var r=n?"Strict":"";t.init.call(this,e["ctrlSeq"+r],e["html"+r],e["text"+r],e["mathspeak"+r])},e.swap=function(e){this.strict=e;var t=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]],this.mathspeakName=this.data["mathspeak"+t]},e.deleteTowards=function(e,n){return e!==w||this.strict?void t.deleteTowards.apply(this,arguments):(this.swap(!0),void this.bubble(function(e){e.reflow()}))}}),pe={ctrlSeq:"\\le ",html:"&le;",text:"≤",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},fe={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"};A["<"]=A.lt=t(de,pe,!0),A[">"]=A.gt=t(de,fe,!0),A["≤"]=A.le=A.leq=t(de,pe,!1),A["≥"]=A.ge=A.geq=t(de,fe,!1);var me=_(Z,function(e,t){e.init=function(){t.init.call(this,"=","=","=","equals")},e.createLeftOf=function(e){return e[w]instanceof de&&e[w].strict?(e[w].swap(!1),void e[w].bubble(function(e){e.reflow()})):void t.createLeftOf.apply(this,arguments)}});A["="]=me,A["×"]=A.times=t(Z,"\\times ","&times;","[x]","times"),A["÷"]=A.div=A.divide=A.divides=t(Z,"\\div ","&divide;","[/]","over"),P["~"]=A.sim=t(Z,"\\sim ","~","~","tilde");var ge,ye,ve=e,be=document.createElement("div"),xe=be.style,_e={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(var we in _e)if(we in xe){ye=we;break}ye?ge=function(e,t,n){e.css(ye,"scale("+t+","+n+")")}:"filter"in xe?(ve=function(e){e.className=e.className},ge=function(e,t,n){function r(){e.css("marginRight",(i.width()-1)*(t-1)/t+"px")}t/=1+(n-1)/2,e.css("fontSize",n+"em"),e.hasClass("dcg-mq-matrixed-container")||e.addClass("dcg-mq-matrixed-container").wrapInner('<span class="dcg-mq-matrixed"></span>');var i=e.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+t+",SizingMethod='auto expand')");r();var o=setInterval(r);S(window).load(function(){clearTimeout(o),r()})}):ge=function(e,t,n){e.css("fontSize",n+"em")};var Ee=_(W,function(e,t){e.init=function(e,n,r){t.init.call(this,e,"<"+n+" "+r+">&0</"+n+">")}});A.mathrm=t(Ee,"\\mathrm","span",'class="dcg-mq-roman dcg-mq-font"'),A.mathit=t(Ee,"\\mathit","i",'class="dcg-mq-font"'),A.mathbf=t(Ee,"\\mathbf","b",'class="dcg-mq-font"'),A.mathsf=t(Ee,"\\mathsf","span",'class="dcg-mq-sans-serif dcg-mq-font"'),A.mathtt=t(Ee,"\\mathtt","span",'class="dcg-mq-monospace dcg-mq-font"'),A.underline=t(Ee,"\\underline","span",'class="dcg-mq-non-leaf dcg-mq-underline"'),A.overline=A.bar=t(Ee,"\\overline","span",'class="dcg-mq-non-leaf dcg-mq-overline"'),A.overrightarrow=t(Ee,"\\overrightarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"'),A.overleftarrow=t(Ee,"\\overleftarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"'),A.overleftrightarrow=t(Ee,"\\overleftrightarrow ","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"'),A.overarc=t(Ee,"\\overarc","span",'class="dcg-mq-non-leaf dcg-mq-overarc"');var Se=(A.textcolor=_(W,function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="dcg-mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,n=G.optWhitespace,r=G.string,i=G.regex;return n.then(r("{")).then(i(/^[#\w\s.,()%-]*/)).skip(r("}")).then(function(n){return e.setColor(n),t.parser.call(e)})},e.isStyleBlock=function(){return!0}}),A.class=_(W,function(e,t){e.parser=function(){var e=this,n=G.string,r=G.regex;return G.optWhitespace.then(n("{")).then(r(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n){return e.cls=n||"",e.htmlTemplate='<span class="dcg-mq-class '+n+'">&0</span>',t.parser.call(e)})},e.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},e.isStyleBlock=function(){return!0}}),_(W,function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){if(this.replacedFragment||e[w]||!e.options.supSubsRequireOperand)return t.createLeftOf.apply(this,arguments)},e.contactWeld=function(e){for(var t=w;t;t=t===w&&E)if(this[t]instanceof Se){for(var n="sub";n;n="sub"===n&&"sup"){var r=this[n],i=this[t][n];if(r){if(i)if(r.isEmpty())var o=M(i,0,i.ends[w]);else{r.jQ.children().insAtDirEnd(-t,i.jQ);var s=r.children().disown(),o=M(i,s.ends[E],i.ends[w]);t===w?s.adopt(i,i.ends[E],0):s.adopt(i,0,i.ends[w])}else this[t].addBlock(r.disown());this.placeCursor=function(e,n){return function(r){r.insAtDirEnd(-t,e||n)}}(i,r)}}this.remove(),e&&e[w]===this&&(t===E&&o?o[w]?e.insRightOf(o[w]):e.insAtLeftEnd(o.parent):e.insRightOf(this[t]));break}},F.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[w].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var n=this.chToCmd(t,e.options);return n instanceof K?e.deleteSelection():e.clearSelection().insRightOf(this.parent),n.createLeftOf(e.show()),void Y.queue("Baseline").alert(n.mathspeak({createdLeftOf:e}))}e[w]&&!e[E]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(t)>-1&&(e.insRightOf(this.parent),Y.queue("Baseline")),J.p.write.apply(this,arguments)}},e.moveTowards=function(e,n,r){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,n){if(n.options.autoSubscriptNumerals&&this.sub){var r=this.sub.ends[-e];r instanceof K?r.remove():r&&r.deleteTowards(e,n.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(w,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-e,this))}else t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var n=t&&t.latex();return t?e+(1===n.length?n:"{"+(n||" ")+"}"):""}return e("_",this.sub)+e("^",this.sup)},e.addBlock=function(e){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=S('<span class="dcg-mq-sup"/>').append(e.jQ.children()).prependTo(this.jQ),T.linkElementByBlockNode(e.jQ[0],e)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=S('<span class="dcg-mq-sub"></span>').append(e.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")),T.linkElementByBlockNode(e.jQ[0],e),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;t<2;t+=1)(function(e,t,n,r){e[t].deleteOutOf=function(i,o){if(o.insDirOf(this[i]?-i:i,this.parent),!this.isEmpty()){var s=this.ends[i];this.children().disown().withDirAdopt(i,o.parent,o[i],o[-i]).jQ.insDirOf(-i,o.jQ),o[-i]=s}e.supsub=n,delete e[t],delete e[r+"Into"],e[n][r+"OutOf"]=p,delete e[n].deleteOutOf,"sub"===t&&S(e.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(),this.remove()}})(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}}));A.subscript=A._=_(Se,function(e,t){e.supsub="sub",e.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.mathspeakTemplate=["Subscript,",", Baseline"],e.ariaLabel="subscript",e.finalizeTree=function(){this.downInto=this.sub=this.ends[w],this.sub.upOutOf=p,t.finalizeTree.call(this)}}),A.superscript=A.supscript=A["^"]=_(Se,function(e,t){e.supsub="sup",e.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>',e.textTemplate=["^"],e.mathspeakTemplate=["Superscript,",", Baseline"],e.ariaLabel="superscript",e.finalizeTree=function(){this.upInto=this.sup=this.ends[E],this.sup.downOutOf=p,t.finalizeTree.call(this)}});var Me=_(W,function(e,t){e.init=function(t,n,r){e.ariaLabel=r||ctrlSeq;var i='<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>'+n+'</big><span class="dcg-mq-from"><span>&0</span></span></span>';K.prototype.init.call(this,t,i)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(re("n").createLeftOf(e),me().createLeftOf(e))},e.latex=function(){function e(e){return 1===e.length?e:"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[w].latex())+"^"+e(this.ends[E].latex())},e.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.ends[w].mathspeak()+" to "+this.ends[E].mathspeak()+", end "+this.ariaLabel+", "},e.parser=function(){for(var e=G.string,t=G.optWhitespace,n=G.succeed,r=$.block,i=this,o=i.blocks=[J(),J()],s=0;s<o.length;s+=1){switch(s){case 0:o[s].ariaLabel="lower bound";break;case 1:o[s].ariaLabel="upper bound";break;default:o[s].ariaLabel="block "+s}o[s].adopt(i,i.ends[E],0)}return t.then(e("_").or(e("^"))).then(function(e){var t=o["_"===e?0:1];return r.then(function(e){return e.children().adopt(t,t.ends[E],0),n(i)})}).many().result(i)},e.finalizeTree=function(){this.downInto=this.ends[w],this.upInto=this.ends[E],this.ends[w].upOutOf=this.ends[E],this.ends[E].downOutOf=this.ends[w]}});A["∏"]=A.sum=A.summation=t(Me,"\\sum ","&sum;","sum"),A["∑"]=A.prod=A.product=t(Me,"\\prod ","&prod;","product"),A.coprod=A.coproduct=t(Me,"\\coprod ","&#8720;","co product"),A["∫"]=A.int=A.integral=_(Me,function(e,t){e.init=function(){e.ariaLabel="integral";var t='<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>';K.prototype.init.call(this,"\\int ",t,"integral")},e.createLeftOf=W.p.createLeftOf});var Ie=A.frac=A.dfrac=A.cfrac=A.fraction=_(W,function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[E].upOutOf=this.ends[w],this.downInto=this.ends[w].downOutOf=this.ends[E],this.ends[w].ariaLabel="numerator",this.ends[E].ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},e.mathspeak=function(e){if(e&&e.createdLeftOf){var n=e.createdLeftOf;return n.parent.mathspeak()}return t.mathspeak.apply(this,arguments)},e.getFracDepth=function(){var e=0,t=function(e,n){return e instanceof T&&e.ctrlSeq&&e.ctrlSeq.toLowerCase().search("frac")>=0&&(n+=1),e.parent?t(e.parent,n):n};return t(this,e)}}),ke=A.over=P["/"]=_(Ie,function(t,n){t.createLeftOf=function(t){if(!this.replacedFragment){var r=t[w];if(!t.options.typingSlashCreatesNewFraction)for(;r&&!(r instanceof Z||r instanceof(A.text||e)||r instanceof Me||"\\ "===r.ctrlSeq||/^[,;:]$/.test(r.ctrlSeq));)r=r[w];r instanceof Me&&r[E]instanceof Se&&(r=r[E],r[E]instanceof Se&&r[E].ctrlSeq!=r.ctrlSeq&&(r=r[E])),r!==t[w]&&(this.replaces(C(r[E]||t.parent.ends[w],t[w])),t[w]=r)}n.createLeftOf.call(this,t)}});A.ans=_(K,function(e,t){e.init=function(e){t.init.call(this,"\\operatorname{ans}",'<span class="dcg-mq-ans">ans</span>',"ans")}}),A.percent=A.percentof=_(K,function(e,t){e.init=function(){t.init.call(this,"\\%\\operatorname{of}",'<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>',"percent of")}});var Te=A.sqrt=A["√"]=_(W,function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">&radic;</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.mathspeakTemplate=["StartRoot,",", EndRoot"],e.ariaLabel="root",e.parser=function(){return $.optBlock.then(function(e){return $.block.map(function(t){var n=Ce();return n.blocks=[e,t],e.adopt(n,0,0),t.adopt(n,e,0),n})}).or(t.parser.call(this))},e.reflow=function(){var e=this.ends[E].jQ;ge(e.prev(),1,e.innerHeight()/+e.css("fontSize").slice(0,-2)-.1)}}),Ce=(A.hat=_(W,function(e,t){e.ctrlSeq="\\hat",e.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>',e.textTemplate=["hat(",")"]}),A.nthroot=_(Te,function(e,t){e.htmlTemplate='<sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">&radic;</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[w].latex()+"]{"+this.ends[E].latex()+"}"},e.mathspeak=function(){return this.ends[w].ariaLabel="Index",this.ends[E].ariaLabel="Radicand","Start "+this.ends[w].mathspeak()+" Root, "+this.ends[E].mathspeak()+", End Root"}})),Ae=_(W,function(e,t){e.init=function(e,n,r){var i='<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">'+n+'</span><span class="dcg-mq-diacritic-stem">&0</span></span>';t.init.call(this,e,i,r)}});A.vec=t(Ae,"\\vec","&rarr;",["vec(",")"]),A.tilde=t(Ae,"\\tilde","~",["tilde(",")"]);var Pe=_(_(W,f),function(t,n){t.init=function(e,t,r,i,o){n.init.call(this,"\\left"+i,g,[t,r]),this.side=e,this.sides={},this.sides[w]={ch:t,ctrlSeq:i},this.sides[E]={ch:r,ctrlSeq:o}},t.numBlocks=function(){return 1},t.html=function(){return this.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-scaled dcg-mq-paren'+(this.side===E?" dcg-mq-ghost":"")+'">'+this.sides[w].ch+'</span><span class="dcg-mq-non-leaf">&0</span><span class="dcg-mq-scaled dcg-mq-paren'+(this.side===w?" dcg-mq-ghost":"")+'">'+this.sides[E].ch+"</span></span>",n.html.call(this)},t.latex=function(){return"\\left"+this.sides[w].ctrlSeq+this.ends[w].latex()+"\\right"+this.sides[E].ctrlSeq},t.mathspeak=function(e){var t=this.sides[w].ch,r=this.sides[E].ch;if("|"===t&&"|"===r)this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else{if(e&&e.createdLeftOf&&this.side){var i="";return this.side===w?i=this.textTemplate[0]:this.side===E&&(i=this.textTemplate[1]),(this.side===w?"left ":"right ")+Le[i]}this.mathspeakTemplate=["left "+Le[t]+",",", right "+Le[r]],this.ariaLabel=Le[t]+" block"}return n.mathspeak.call(this)},t.matchBrack=function(e,t,n){return n instanceof Pe&&n.side&&n.side!==-t&&(!e.restrictMismatchedBrackets||Oe[this.sides[this.side].ch]===n.sides[n.side].ch||{"(":"]","[":")"}[this.sides[w].ch]===n.sides[E].ch)&&n},t.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side],e.delimjQs.eq(this.side===w?0:1).removeClass("dcg-mq-ghost").html(this.sides[this.side].ch)},t.createLeftOf=function(e){if(!this.replacedFragment){var t=e.options;if("|"===this.sides[w].ch)var r=this.matchBrack(t,E,e[E])||this.matchBrack(t,w,e[w])||this.matchBrack(t,0,e.parent.parent);else var r=this.matchBrack(t,-this.side,e[-this.side])||this.matchBrack(t,-this.side,e.parent.parent)}if(r){var i=this.side=-r.side;this.closeOpposing(r),r===e.parent.parent&&e[i]&&C(e[i],e.parent.ends[i],-i).disown().withDirAdopt(-i,r.parent,r,r[i]).jQ.insDirOf(i,r.jQ),r.bubble(function(e){e.reflow()})}else r=this,i=r.side,r.replacedFragment?r.side=0:e[-i]&&(r.replaces(C(e[-i],e.parent.ends[-i],i)),e[-i]=0),n.createLeftOf.call(r,e);i===w?e.insAtLeftEnd(r.ends[w]):e.insRightOf(r)},t.placeCursor=e,t.unwrap=function(){this.ends[w].children().disown().adopt(this.parent,this,this[E]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(e,t,n){var r=this.parent,i=this[e],o=r.ends[e];if(e===this.side)return this.unwrap(),void(i?n.insDirOf(-e,i):n.insAtDirEnd(e,r));var s=n.options,a=!this.side;if(this.side=-e,this.matchBrack(s,e,this.ends[w].ends[this.side])){this.closeOpposing(this.ends[w].ends[this.side]);var c=this.ends[w].ends[e];this.unwrap(),c.siblingCreated&&c.siblingCreated(n.options,e),i?n.insDirOf(-e,i):n.insAtDirEnd(e,r)}else{if(this.matchBrack(s,e,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&a)return this.unwrap(),void(i?n.insDirOf(-e,i):n.insAtDirEnd(e,r));this.sides[e]={ch:Oe[this.sides[this.side].ch],ctrlSeq:Oe[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("dcg-mq-ghost").eq(e===w?0:1).addClass("dcg-mq-ghost").html(this.sides[e].ch)}if(i){var c=this.ends[w].ends[e];C(i,o,-e).disown().withDirAdopt(-e,this.ends[w],c,0).jQ.insAtDirEnd(e,this.ends[w].jQ.removeClass("dcg-mq-empty")),c.siblingCreated&&c.siblingCreated(n.options,e),n.insDirOf(-e,i)}else t?n.insDirOf(e,this):n.insAtDirEnd(e,this.ends[w])}},t.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},t.finalizeTree=function(){this.ends[w].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===w?1:0).removeClass("dcg-mq-ghost"),this.side=0}},t.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}}),Oe={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Le={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};m("(",null,"parenthesis"),m("[",null,"bracket"),m("{","\\{","brace"),A.langle=t(Pe,w,"&lang;","&rang;","\\langle ","\\rangle "),A.rangle=t(Pe,E,"&lang;","&rang;","\\langle ","\\rangle "),P["|"]=t(Pe,w,"|","|","|","|"),A.lVert=t(Pe,w,"&#8741;","&#8741;","\\lVert ","\\rVert "),A.rVert=t(Pe,E,"&#8741;","&#8741;","\\lVert ","\\rVert "),A.left=_(W,function(e){e.parser=function(){var e=G.regex,t=G.string,n=(G.succeed,G.optWhitespace);return n.then(e(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function(r){var i="\\"===r.charAt(0)?r.slice(1):r;return"\\langle"==r&&(i="&lang;",r+=" "),"\\lVert"==r&&(i="&#8741;",r+=" "),$.then(function(o){return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function(e){var t="\\"===e.charAt(0)?e.slice(1):e;"\\rangle"==e&&(t="&rang;",e+=" "),"\\rVert"==e&&(t="&#8741;",e+=" ");var n=Pe(0,i,t,r,e);return n.blocks=[o],o.adopt(n,0,0),n})})})}}),A.right=_(W,function(e){e.parser=function(){return G.fail("unmatched \\right")}});var De=A.binom=A.binomial=_(_(W,f),function(e,t){e.ctrlSeq="\\binom",e.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-paren dcg-mq-scaled">(</span><span class="dcg-mq-non-leaf"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="dcg-mq-paren dcg-mq-scaled">)</span></span>',e.textTemplate=["choose(",",",")"],e.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],e.ariaLabel="binomial"});A.choose=_(De,function(e){e.createLeftOf=ke.prototype.createLeftOf});A.editable=A.MathQuillMathField=_(W,function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>',e.parser=function(){var e=this,n=G.string,r=G.regex,i=G.succeed;return n("[").then(r(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(t){e.name=t}).or(i()).then(t.parser.call(e))},e.finalizeTree=function(e){var t=D(this.ends[w],this.jQ,e);t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),d(t.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[w].controller))},e.latex=function(){return this.ends[w].latex()},e.text=function(){return this.ends[w].text()}});var Ne=A.embed=_(K,function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){var e=this,t=G.string,n=G.regex,r=G.succeed;return t("{").then(n(/^[a-z][a-z0-9]*/i)).skip(t("}")).then(function(i){return t("[").then(n(/^[-\w\s]*/)).skip(t("]")).or(r()).map(function(t){return e.setOptions(j[i](t))})})}}),Fe=h(1);for(var qe in Fe)(function(e,t){"function"==typeof t?(u[e]=function(){return l(),t.apply(this,arguments)},u[e].prototype=t.prototype):u[e]=t})(qe,Fe[qe])}(),define("mathquill_src",["jquery"],function(){}),define("loadcss!Symbola-basic",function(){}),define("loadcss!vendor_css/mathquill/mathquill-basic",function(){}),define("toplevel/mathquill",["require","mathquill_src","loadcss!Symbola-basic","loadcss!vendor_css/mathquill/mathquill-basic"],function(e){return e("mathquill_src"),e("loadcss!Symbola-basic"),e("loadcss!vendor_css/mathquill/mathquill-basic"),window.MathQuill.noConflict()}),define("mathquill",["require","browser","jquery","keys","toplevel/mathquill","config"],function(e){var t=e("browser"),n=e("jquery"),r=e("keys"),i=e("toplevel/mathquill").getInterface(1),o=i.L,s=e("config"),a=["normalcdf normalpdf","binomcdf binompdf","poissoncdf poissonpdf","erf invNorm","tpdf tcdf TTest TScore"].join(" ");return i.config({handlers:{reflow:function(e){setTimeout(function(){n(e.el()).trigger("render")})},enter:function(e){n(e.el()).trigger("enterPressed")},upOutOf:function(e){n(e.el()).trigger("upPressed")},downOutOf:function(e){n(e.el()).trigger("downPressed")},moveOutOf:function(e,t){n(t.el()).trigger((e===o?"left":"right")+"Pressed")},deleteOutOf:function(e,t){n(t.el()).trigger((e===o?"backspace":"del")+"Pressed")}},leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>",autoCommands:"alpha beta sqrt theta phi pi tau nthroot sum prod int ans percent",autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,disableCopyPaste:s.get("restrictedEditing"),substituteTextarea:function(){return t.IS_IOS||t.IS_ANDROID?n('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">').on("keypress.globalConfig",function(e){var t=i(n(document.activeElement).closest(".dcg-mq-editable-field")[0]);t&&(e.preventDefault(),t.typedText(r.lookupChar(e)))})[0]:t.IS_WINDOWS&&t.IS_TOUCH?n("<textarea readonly>").on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0})[0]:n("<textarea>")[0]},autoOperatorNames:["exp|exponent ln|natural-log log","total length mean median quantile quartile nCr nPr","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance corr|correlation","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","polygon","distance midpoint"+(s.get("distributions")?" "+a:"")].join(" "),resetCursorOnBlur:!0})}),define("graphing/poilabelslayer",["require","pjs","jquery","underscore","./domlayer","./label","graphing/graphmode","math/poi","./constants","./poi","./automatic-label-placer","lib/color-helpers","mathquill","math/interpolatedlabel"],function(e){function t(e,t,n,r){var i="html."+n;e.hasOwnProperty(i)&&e[i]===r||(t.find(n).html(r),e[i]=r)}function n(e,t,n,r,i){var o="text."+n;if(!e.hasOwnProperty(o)||e[o]!==r){var s=t.data("id");if(i.hasOwnProperty(s)&&(i[s].revert(),delete i[s]),v(r)){var a=r.substr(1,r.length-2);t.find(n).text(a),i[s]=y.StaticMath(t.find(n)[0])}else t.find(n).text(r);e[o]=r}}function r(e,t,n,r){var i="visible."+n;e.hasOwnProperty(i)&&e[i]===r||(t.find(n).toggle(!!r),e[i]=r)}function i(e,t,n,r){var i="class."+n;e.hasOwnProperty(i)&&e[i]===r||(t.toggleClass(n,!!r),e[i]=r)}function o(e,t,n){var r="css";e.hasOwnProperty(r)&&c.isEqual(e[r],n)||(t.css(n),e[r]=n)}var s=e("pjs"),a=e("jquery"),c=e("underscore"),l=e("./domlayer"),u=e("./label"),h=e("graphing/graphmode"),d=e("math/poi").default,p=e("./constants"),f=e("./poi"),m=e("./automatic-label-placer"),g=e("lib/color-helpers"),y=e("mathquill"),v=e("math/interpolatedlabel").isMathLabel,b=s(l,function(e,s){e.init=function(e,t){s.init.call(this,e),this.$labelsLayer=a('<div class="dcg-poi-labels-layer"></div>'),this.$traceLayer=a('<div class="dcg-trace-layer"></div>'),this.cachedLabels={},this.cachedMQLabels={},this.settings=t,this.dom_node.append(this.$labelsLayer),this.dom_node.append(this.$traceLayer),this.hoveredPOI=null,this.openedPOI2Sketch={}},e.renderPOILabels=function(e,t){var n=function(e,n){var r=t[n];return r&&r.visible?r.getPOIById(e):null};this.savedPOI=[];for(var r in t){var i=t[r];if(i.visible){var o=this.drawLabels(i,e);o.length&&this.savedPOI.push.apply(this.savedPOI,o)}}this.hoveredPOI&&!n(this.hoveredPOI.id,this.hoveredPOI.sketch.id)&&(this.hoveredPOI=null);var s={};for(r in this.openedPOI2Sketch){var a=n(r,this.openedPOI2Sketch[r]);a&&(s[r]=a.sketch.id,this.drawOpenedPOI(a,e),this.savedPOI.push(a))}this.openedPOI2Sketch=s,this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.addGlobalClass("dcg-mouse-over-opened-poi"):(this.drawHoveredPOI(this.hoveredPOI,e),this.addGlobalClass("dcg-mouse-over-closed-poi")):(this.removeGlobalClass("dcg-mouse-over-closed-poi"),this.removeGlobalClass("dcg-mouse-over-opened-poi"))},e.renderTracePt=function(e){var t=this.traceInfo?this.traceInfo.pt:null;if(t){var n=e.mapx(t.x),r=e.mapy(t.y);if(e.coordsAreOnscreen(n,r,p.OFFSCREEN_RENDER_MARGIN)){var i=new f(t.x,t.y,d.TRACE,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch);this.drawTracePt(i,e.viewport,{color:i.sketch.color,x:n,y:r})}}},e.drawTracePt=function(e,t,n){var r=b.getPointLabel(e,t),i=r.is_hole?" dcg-hole":"",o=r.x_label.replace("π","<span class='dcg-pi'>π</span>"),s=r.y_label.replace("π","<span class='dcg-pi'>π</span>"),c="tracept",l=this.cachedLabels[c];l?l.removeClass("dcg-will-remove"):(l=a('<div class="dcg-poi-label dcg-tracept dcg-temp"><div class="dcg-pt"></div><div class="dcg-label"><span class="dcg-label-paren">(</span><span class="dcg-x-value"></span>, <span class="dcg-y-value"></span><span class="dcg-label-paren">)</span></div></div>'),l.data("id",c),this.$traceLayer.append(l)),l.find(".dcg-x-value").html(o),l.find(".dcg-y-value").html(s),l.toggleClass("dcg-hole",!!i),l.find(".dcg-pt").css("background-color",n.color),l.find(".dcg-pt").css("border-color",n.color),l.css({left:n.x+"px",top:n.y+"px"})},e.drawSinglePOI=function(e,s,c){var l=b.getPointLabel(e,s),u=l.is_hole,h=e.isPersistent(),d=e.getLabelSize(),p=e.isAttachedToPlottedPoint(),f=l.x_label.replace("π","<span class='dcg-pi'>π</span>"),m=l.y_label.replace("π","<span class='dcg-pi'>π</span>"),y=e.getLabel(),v=e.id,x=this.cachedLabels[v];x?x.removeClass("dcg-will-remove"):(x=a('<div class="dcg-poi-label dcg-tracept dcg-poi dcg-attached-to-real-point"><div class="dcg-pt"></div><div class="dcg-label"><span class="dcg-pt-value"><span class="dcg-label-paren">(</span><span class="dcg-x-value"></span>, <span class="dcg-y-value"></span><span class="dcg-label-paren">)</span></span><span class="dcg-text-value"></span></div></div>'),x.data("__lastRender",{}),x.data("id",v),this.$labelsLayer.append(x));var _=x.data("__lastRender");t(_,x,".dcg-x-value",f),t(_,x,".dcg-y-value",m),n(_,x,".dcg-text-value",y,this.cachedMQLabels),r(_,x,".dcg-pt-value",!y),r(_,x,".dcg-text-value",!!y),i(_,x,"dcg-hole",!!u),i(_,x,"dcg-persistent",!!h),i(_,x,"dcg-size-small","small"===d),i(_,x,"dcg-size-medium","medium"===d),i(_,x,"dcg-size-large","large"===d),i(_,x,"dcg-attached-to-real-point",!!p),i(_,x,"dcg-opened",!!c.opened),i(_,x,"dcg-mouseover",!!c.hovered);var w={left:c.x+"px",top:c.y+"px"};h&&e&&e.sketch&&e.sketch.color&&(w.color=g.shadeColor(e.sketch.color,.3)),o(_,x,w)},e.drawHoveredPOI=function(e,t){var n=t.mapx(e.x),r=t.mapy(e.y);t.coordsAreOnscreen(n,r,p.OFFSCREEN_RENDER_MARGIN)&&this.drawSinglePOI(e,t.viewport,{hovered:!0,x:n,y:r})},e.drawOpenedPOI=function(e,t){var n=t.mapx(e.x),r=t.mapy(e.y);t.coordsAreOnscreen(n,r,p.OFFSCREEN_RENDER_MARGIN)&&this.drawSinglePOI(e,t.viewport,{opened:!0,x:n,y:r})},e.drawLabels=function(e,t){var n=e.labels;if(!n.length)return[];for(var r=[],i=0;i<n.length;i++){var o=n[i],s=t.mapx(o.x),a=t.mapy(o.y);t.coordsAreOnscreen(s,a,p.OFFSCREEN_RENDER_MARGIN)&&(this.drawSinglePOI(o,t.viewport,{opened:!0,x:s,y:a}),r.push(o))}return r},e.markLabelsDirty=function(){this.labelsDirty=!0},e.positionLabels=function(e,t,n){var r=!this.labelsDirty;this.cachedLabels={},this.labelsDirty=!1;var i=this,o={};c.each(this.savedPOI,function(e){e.sketch&&(o[e.id]=e.sketch)});var s=this.settings.projectorMode?14:10,l=this.$.find(".dcg-poi-label").map(function(){var e=a(this),t=e.find(".dcg-label"),n=t[0].getBoundingClientRect(),c=parseFloat(e[0].style.left),l=parseFloat(e[0].style.top),u=n.width,h=n.height,d=e.data("id");d&&(i.cachedLabels[d]=e);var p=o[d]&&o[d].branches[0].nakedLabel;return{$label:t,pt_x:c,pt_y:l,pt_radius:s,nakedLabel:p,width:u,height:h,keepOrientation:r,priorOrientation:t.data("orientation")}}).get();l=c.filter(l,function(e){return e.width>0&&e.height>0});var u=e.canvas.getBoundingClientRect(),h={width:u.width,height:u.height},d=m.buildStaticEnvGetter(e,h,n),p=l.map(function(e){return m.generateCandidatesForPoint(d,e)}),f=m.computePositions(p);f.forEach(function(e,t){var n=l[t].$label;n.css({left:e.left-e.pt_x,top:e.top-e.pt_y}),n.data("orientation",e.orientation)})},e.redraw=function(e,t,n,r){this.resize(e.screen.width,e.screen.height),
this.dom_node.find(".dcg-poi-label").addClass("dcg-will-remove"),this.renderPOILabels(e,t),this.renderTracePt(e),this.dom_node.find(".dcg-will-remove").remove(),this.positionLabels(n,t,r)},e.getDrawnPOI=function(){return this.savedPOI||[]},e.clearOpenedPOI=function(){this.openedPOI2Sketch={}},e.closePOI=function(e){delete this.openedPOI2Sketch[e.id]},e.openPOI=function(e){this.openedPOI2Sketch[e.id]=e.sketch.id},e.isOpenPOI=function(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)},e.setHoveredPOI=function(e){this.hoveredPOI=e},e.getHoveredPOI=function(){return this.hoveredPOI}});return b.getPointLabel=function(e,t){var n,r=t.xmax-t.xmin,i=t.ymax-t.ymin,o=e.getGraphMode();if(e.type===d.TRACE){var s=o===h.X,a=s?e.y:e.x,c=e.getCompiledFunction();if(n=u.point(a,r,i,c),s){var l=n[0];n[0]=n[1],n[1]=l}}else n=[u.value(e.x,r),u.value(e.y,i)];var p=n[0].superscript?n[0].mantissa+"<sup>"+n[0].superscript+"</sup>":n[0].string,f=n[1].superscript?n[1].mantissa+"<sup>"+n[1].superscript+"</sup>":n[1].string;return{x:n[0].value,x_label:p,y:n[1].value,y_label:f,is_hole:!isFinite(n[1].value)}},b}),define("graphing/stepnumber",["require","pjs"],function(e){var t=e("pjs"),n=document.createElement("canvas").getContext("2d"),r=t(function(e){e.init=function(e,t){this._label=e,this._fontSize=t,this._layout=this._computeLayout(e,t)},e._computeLayout=function(e,t){var i={};return e.superscript?(i.mantissa_height=t,r.setCtxFontSize(n,i.mantissa_height),i.mantissa_width=n.measureText(e.mantissa).width,i.superscript_height=Math.round(.8*t),r.setCtxFontSize(n,i.superscript_height),i.superscript_width=n.measureText(e.superscript).width,i.mantissa_x=0,i.mantissa_y=t/5,i.superscript_x=i.mantissa_width/2+i.superscript_width/2,i.superscript_y=-t/4,i.top=i.superscript_y-i.superscript_height/2,i.bottom=i.mantissa_y+i.mantissa_height/2,i.left=i.mantissa_x-i.mantissa_width/2,i.right=i.superscript_x+i.superscript_width/2):(i.mantissa_height=t,r.setCtxFontSize(n,t),i.mantissa_width=n.measureText(e.string).width,i.mantissa_x=0,i.mantissa_y=0,i.top=i.mantissa_y-i.mantissa_height/2,i.bottom=i.mantissa_y+i.mantissa_height/2,i.left=i.mantissa_x-i.mantissa_width/2,i.right=i.mantissa_x+i.mantissa_width/2),i},e.getRect=function(){return this.getRectWhenCenteredAt({x:0,y:0})},e.getRectWhenCenteredAt=function(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}},e.getWidth=function(){return this._layout.right-this._layout.left},e.getHeight=function(){return this._layout.bottom-this._layout.top},e.clampBoundsWithinRect=function(e,t){var n={};return e.x+this._layout.left<t.left?n.x=t.left-this._layout.left:e.x+this._layout.right>t.right?n.x=t.right-this._layout.right:n.x=e.x,e.y+this._layout.top<t.top?n.y=t.top-this._layout.top:e.y+this._layout.bottom>t.bottom?n.y=t.bottom-this._layout.bottom:n.y=e.y,n},e.getValue=function(){return this._label.value},e.getMinusWidth=function(){return this.getValue()<0?(r.setCtxFontSize(n,this._fontSize),n.measureText("-1").width-n.measureText("1").width):0},e.getString=function(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string},e.drawCenteredAt=function(e,t){var n=t.x,i=t.y;e.save(),r.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+n,this._layout.mantissa_y+i),e.strokeText(this._label.superscript,this._layout.superscript_x+n,this._layout.superscript_y+i),e.fillText(this._label.mantissa,this._layout.mantissa_x+n,this._layout.mantissa_y+i),e.fillText(this._label.superscript,this._layout.superscript_x+n,this._layout.superscript_y+i)):(e.strokeText(this._label.string,this._layout.mantissa_x+n,this._layout.mantissa_y+i),e.fillText(this._label.string,this._layout.mantissa_x+n,this._layout.mantissa_y+i)),e.restore()}});return r.setCtxFontSize=function(e,t){e.font=t+"px Arial",e.textAlign="center",e.textBaseline="middle"},r}),define("graphing/computestepsizes",["require","./stepnumber","./label"],function(e){function t(e){return e?{base:10,major:[e,2*e,5*e],minor:[4,4,5]}:i.RATIONAL_STEPS}var n=e("./stepnumber"),r=e("./label"),i={},o=function(e,t,n,r){var i=Math.ceil(e/n),o=Math.floor(t/n),s=1/n;if(!(i>o||o-i>1e4))for(var a=i;a<=o;a++)r(a/s)};return i.RATIONAL_STEPS={base:10,major:[1,2,5],minor:[5,4,5]},i.PI_STEPS={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},i.PI_FRAC_STEPS={base:2,major:[Math.PI/3],minor:[3]},i.bestStep=function(e,t){for(var n,r,i,o,s=1/0,a=0;a<t.major.length;a++)n=t.major[a],i=Math.ceil(Math.log(e/n)/Math.log(t.base)),o=n*Math.pow(t.base,i),o<s&&(s=o,r=s/t.minor[a]);return{major:s,minor:r}},i.countStepsInRange=function(e,t,n){return 1+(t-e)/n},i.calculateSpaceBetweenRects=function(e,t){var n,r;return r=e.right<t.left?t.left-e.right:t.right<e.left?e.left-t.right:0,n=e.bottom<t.top?t.top-e.bottom:t.bottom<e.top?e.top-t.bottom:0,Math.max(n,r)},i.estimateMajors=function(e){var t=e.screen.width,n=e.screen.height,r=e.viewport.xmax-e.viewport.xmin,i=e.viewport.ymax-e.viewport.ymin,o=e.settings.pixelsPerLabel;return{majorStepX:o/t*r,majorStepY:o/n*i}},i.cartesian=function(e){var s={},a=Math.abs(e.settings.xAxisStep),c=Math.abs(e.settings.yAxisStep),l=e.viewport.xmax-e.viewport.xmin,u=e.viewport.ymax-e.viewport.ymin,h=r.value(a,l).string.indexOf("π")>=0,d=r.value(c,u).string.indexOf("π")>=0,p=i.countStepsInRange(e.viewport.xmin,e.viewport.xmax,a),f=i.countStepsInRange(e.viewport.ymin,e.viewport.ymax,c),m=i.estimateMajors(e),g=e.settings.labelSize;if(a&&a!==Math.PI&&p>=3&&p<100){var y=0;o(e.viewport.xmin,e.viewport.xmax,a,function(e){var t=n(r.value(e,l),g);y=Math.max(t.getWidth(),y)}),p*(y+10)<=e.screen.width&&(s.majorStepX=a,3===a||5===a?s.minorStepX=1:s.minorStepX=a/4)}if(c&&c!==Math.PI&&f>=3&&f<100){var v=0;o(e.viewport.ymin,e.viewport.ymax,c,function(e){var t=n(r.value(e,u),g);v=Math.max(t.getHeight(),v)}),f*(v+10)<=e.screen.height&&(s.majorStepY=c,3===c||5===c?s.minorStepY=1:s.minorStepY=c/4)}if(!s.majorStepX){var b;b=h?m.majorStepX>=1?i.PI_STEPS:i.PI_FRAC_STEPS:t(a);var x=i.bestStep(m.majorStepX,b);s.majorStepX=x.major,s.minorStepX=x.minor}if(!s.majorStepY){var _;_=d?m.majorStepY>=1?i.PI_STEPS:i.PI_FRAC_STEPS:t(c);var w=i.bestStep(m.majorStepY,_);s.majorStepY=w.major,s.minorStepY=w.minor}if(a===c){var E=2,S=e.screen.width/l/(e.screen.height/u);S>=1&&S<=E?(s.majorStepX=s.majorStepY,s.minorStepX=s.minorStepY):S<=1&&S>=1/E&&(s.majorStepY=s.majorStepX,s.minorStepY=s.minorStepX)}return e.settings.xAxisMinorSubdivisions>0&&(s.minorStepX=s.majorStepX/e.settings.xAxisMinorSubdivisions),e.settings.yAxisMinorSubdivisions>0&&(s.minorStepY=s.majorStepY/e.settings.yAxisMinorSubdivisions),s},i.polar=function(e){var t=i.estimateMajors(e),n=i.bestStep(t.majorStepX,i.RATIONAL_STEPS),r=i.bestStep(t.majorStepY,i.RATIONAL_STEPS),o=n.major>r.major?n:r;return{majorStepR:o.major,minorStepR:o.minor}},i}),define("graphing/gridlayer",["require","pjs","./stepnumber","./label","./computestepsizes","./axisarrowmode"],function(e){var t=e("pjs"),n=e("./stepnumber"),r=e("./label"),i=e("./computestepsizes"),o=e("./axisarrowmode"),s=t(function(e){e.redrawToCtx=function(e,t,n){var r,o,s=t.settings.showGrid;t.settings.polarMode&&s?(r=i.polar(t),this.drawPolarGrid(e,t,r),this.drawAxes(e,t,n),o=this.drawPolarStepNumbers(e,t,r),this.drawLabels(e,t,o)):(r=i.cartesian(t),s&&this.drawCartesianGrid(e,t,r),this.drawAxes(e,t,n),o=this.drawCartesianStepNumbers(e,t,r),this.drawLabels(e,t,o))},e.addTextShadow=function(e){e.strokeStyle="white",e.lineWidth=3,e.miterLimit=2},e.drawPolarGrid=function(e,t,n){e.save();var r=t.settings.minorAxisOpacity,i=t.settings.majorAxisOpacity,o=1-(1-i)/(1-r),s=Math.round(t.mapx(0))-.5,c=Math.round(t.mapy(0))-.5,l=t.screen.height/(t.viewport.ymax-t.viewport.ymin),u=t.screen.width/(t.viewport.xmax-t.viewport.xmin),h=l/u,d=u/l,p=c/h,f=t.viewport.smallestR(),m=t.viewport.largestR(),g=n.minorStepR*Math.max(1,Math.floor(f/n.minorStepR)),y=n.majorStepR*Math.max(1,Math.floor(f/n.majorStepR));e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+r+")",e.save(),a(g,m,n.minorStepR,function(n){e.beginPath(),e.scale(1,h);var r=t.mapx(n)-s;e.moveTo(s+r,p),e.arc(s,p,r,0,2*Math.PI),e.scale(1,d),e.stroke()}),e.restore();var v=f>0?5:15;a(0,359,v,function(n){if((0!==n&&180!==n||!t.settings.showXAxis)&&(90!==n&&270!==n||!t.settings.showYAxis)){e.beginPath(),e.moveTo(s,c);var r=t.mapx(m*Math.cos(n*Math.PI/180)),i=t.mapy(m*Math.sin(n*Math.PI/180));e.lineTo(Math.round(r)-.5,Math.round(i)-.5),e.stroke()}}),e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+o+")",e.save(),a(y,m,n.majorStepR,function(n){e.beginPath(),e.scale(1,h);var r=t.mapx(n)-s;e.moveTo(s+r,p),e.arc(s,p,r,0,2*Math.PI),e.scale(1,d),e.stroke()}),e.restore()},e.drawCartesianGrid=function(e,t,n){e.save();var r=t.viewport.xmin,i=t.viewport.ymin,o=t.viewport.xmax,s=t.viewport.ymax,c=t.screen.width,l=t.screen.height,u=t.settings.minorAxisOpacity,h=t.settings.majorAxisOpacity;e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+u+")",a(r,o,n.minorStepX,function(n){if(0!==n||!t.settings.showYAxis){var r=Math.round(t.mapx(n));r!==c&&(e.beginPath(),e.moveTo(r-.5,0),e.lineTo(r-.5,l),e.stroke())}}),a(i,s,n.minorStepY,function(n){if(0!==n||!t.settings.showXAxis){var r=Math.round(t.mapy(n));r!==l&&(e.beginPath(),e.moveTo(0,r-.5),e.lineTo(c,r-.5),e.stroke())}});var d=1-(1-h)/(1-u);e.strokeStyle="rgba(0, 0 , 0, "+d+")",a(r,o,n.majorStepX,function(n){if(0!==n||!t.settings.showYAxis){var r=Math.round(t.mapx(n));r!==c&&(e.beginPath(),e.moveTo(r-.5,0),e.lineTo(r-.5,l),e.stroke())}}),a(i,s,n.majorStepY,function(n){if(0!==n||!t.settings.showXAxis){var r=Math.round(t.mapy(n));r!==l&&(e.beginPath(),e.moveTo(0,r-.5),e.lineTo(c,r-.5),e.stroke())}}),e.restore()},e.drawAxes=function(e,t,n){function r(t,n,r){e.save();var i=Math.PI/12,o=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=c,e.strokeStyle=c,e.beginPath(),e.moveTo(t,n),e.lineTo(t+Math.cos(r-i)*o,n+Math.sin(r-i)*o),e.lineTo(t+Math.cos(r+i)*o,n+Math.sin(r+i)*o),e.lineTo(t,n),e.lineTo(t+Math.cos(r-i)*o,n+Math.sin(r-i)*o),e.stroke(),e.fill(),e.restore()}var i=t.settings.axisLineOffset,s=t.settings.axisOpacity.toString(),a="rgba(127,205,230,"+s+")",c="rgba(0,0,0,"+s+")",l=t.settings.xAxisArrowMode,u=t.settings.yAxisArrowMode,h=t.settings.showXAxis,d=t.settings.showYAxis,p=1,f=Math.round(t.mapx(0))-i,m=Math.round(t.mapy(0))-i,g=t.screen.height,y=t.screen.width;d&&(e.lineWidth=t.settings.axisLineWidth*("y"===n?p:1),e.strokeStyle="y"===n?a:c,u===o.BOTH?(e.beginPath(),e.moveTo(f,2*t.settings.axisLineWidth),e.lineTo(f,g-2*t.settings.axisLineWidth),e.stroke(),r(f,g-t.settings.axisLineWidth,3*Math.PI/2),r(f,t.settings.axisLineWidth,Math.PI/2)):u===o.POSITIVE?(e.beginPath(),e.moveTo(f,2*t.settings.axisLineWidth),e.lineTo(f,g),e.stroke(),r(f,t.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(f,0),e.lineTo(f,g),e.stroke())),h&&(e.lineWidth=t.settings.axisLineWidth*("x"===n?p:1),e.strokeStyle="x"===n?a:c,l===o.BOTH?(e.beginPath(),e.moveTo(2*t.settings.axisLineWidth,m),e.lineTo(y-2*t.settings.axisLineWidth,m),e.stroke(),r(t.settings.axisLineWidth,m,0),r(y-t.settings.axisLineWidth,m,Math.PI)):l===o.POSITIVE?(e.beginPath(),e.moveTo(0,m),e.lineTo(y-2*t.settings.axisLineWidth,m),e.stroke(),r(y-t.settings.axisLineWidth,m,Math.PI)):(e.beginPath(),e.moveTo(0,m),e.lineTo(y,m),e.stroke()))},e.drawPolarStepNumbers=function(e,t,i){function o(e,n,r){var i=Math.sqrt(e*e-n*n);v<=i&&i<=b&&r.push({x:t.mapx(n),y:t.mapy(i)}),v<=-i&&-i<=b&&r.push({x:t.mapx(n),y:t.mapy(-i)})}function s(e,n,r){var i=Math.sqrt(e*e-n*n);g<=i&&i<=y&&r.push({x:t.mapx(i),y:t.mapy(n)}),g<=-i&&-i<=y&&r.push({x:t.mapx(-i),y:t.mapy(n)})}e.save();var u=t.settings.showGrid,h=t.settings.xAxisNumbers&&t.settings.showXAxis,d=t.settings.yAxisNumbers&&t.settings.showYAxis,p=u&&t.settings.polarNumbers,f=t.viewport.largestR(),m=t.viewport.smallestR(),g=t.viewport.xmin,y=t.viewport.xmax,v=t.viewport.ymin,b=t.viewport.ymax,x=t.screen.width,_=t.screen.height,w={left:3,right:x-3,top:3,bottom:_-3},E=t.settings.labelHangingColor,S=t.settings.labelNormalColor,M=t.settings.labelSize,I=M;e.textAlign="center",e.textBaseline="middle",this.addTextShadow(e),e.font=M.toString()+"px Arial",e.fillStyle=S;var k=t.mapx(0),T=t.mapy(0),C=v<=0&&0<=b,A=g<=0&&0<=y,P=C&&h,O=A&&d,L="";if(!P&&!O&&u){var D,N,F,q,R=Math.abs(k),j=Math.abs(k-x),V=Math.abs(T),B=Math.abs(T-_);R<=j?(D="left",F=R):(D="right",F=j),V<=B?(N="top",q=V):(N="bottom",q=B),h&&d?L=F<=q?D:N:d?L=D:h&&(L=N)}var U={left:0,right:x,top:T-1,bottom:T+1},z={left:k-1,right:k+1,top:0,bottom:_};if(a(0,f,i.majorStepR,function(i){var a=[],c=[],u=[],p=n(r.value(i,f),M),m=p.getRect();switch(i>0?(O&&v<=i&&i<=b&&c.push({x:k-m.right-5,y:t.mapy(i)}),O&&v<=-i&&-i<=b&&c.push({x:k-m.right-5,y:t.mapy(-i)}),P&&g<=i&&i<=y&&a.push({x:t.mapx(i),y:T-m.top+3}),P&&g<=-i&&-i<=y&&a.push({x:t.mapx(-i),y:T-m.top+3})):O&&!h&&v<=i&&i<=b?c.push({x:k-m.right-5,y:t.mapy(i)}):P&&!d&&g<=i&&i<=y&&a.push({x:t.mapx(i),y:T-m.top+3}),L){case"top":s(i,b,u);break;case"bottom":s(i,v,u);break;case"left":o(i,g,u);break;case"right":o(i,y,u)}a.forEach(function(t){t=p.clampBoundsWithinRect(t,w),p.drawCenteredAt(e,t),l(U,p.getRectWhenCenteredAt(t))}),c.forEach(function(t){t=p.clampBoundsWithinRect(t,w),p.drawCenteredAt(e,t),l(z,p.getRectWhenCenteredAt(t))}),u.forEach(function(t){t=p.clampBoundsWithinRect(t,w),p.drawCenteredAt(e,t)})}),p){var G=Math.ceil(m/i.majorStepR),$=Math.floor(f/i.majorStepR),H=Math.ceil((G+$)/2),Y=H*i.majorStepR,X=m>0?15:30;a(0,359,X,function(n){var i;i=t.settings.degreeMode?n.toString()+"°":r.value(n*Math.PI/180,2*Math.PI).string;var o=e.measureText(i).width/2,s=Y/1.05,a=s*Math.cos(n*Math.PI/180),l=s*Math.sin(n*Math.PI/180);if(!(a<g||a>y||l<v||l>b)){var u=t.mapx(a),h=t.mapy(l);0===n||180===n?h-=I:90!==n&&270!==n||(u+=o+3);var d=c(u,3+o,x-3-o),p=c(h,3+I,_-3-I);e.fillStyle=E,e.strokeText(i,d,p),e.fillText(i,d,p)}})}return e.restore(),{x:U,y:z}},e.drawLabels=function(e,t,n){var r=t.viewport.xmin,i=t.viewport.xmax,o=t.viewport.ymin,s=t.viewport.ymax,a=t.screen.width,c=t.screen.height,l=(i-r)/a,h=(s-o)/c,d=t.settings.labelNormalColor,p=t.mapx(0),f=t.mapy(0),m=t.settings.labelSize,g=15,y=t.settings.showXAxis&&t.settings.xAxisLabel,v=t.settings.showYAxis&&t.settings.yAxisLabel,b=n.x,x=n.y;if(y&&b){e.save(),e.fillStyle=d;var _;if(e.__xLabelOffset&&t.settings.isViewportTransient&&u(e.__xLabelOffset.xscale,l)&&u(e.__xLabelOffset.yscale,h)&&(_={x:e.__xLabelOffset.x+p,y:e.__xLabelOffset.y+f}),this._setAxisLabelFont(e,y,m),!_){var w=e.measureText(y).width,E=a-w-g,S=m;_=b.bottom+S<c?{x:E,y:b.bottom+S}:{x:E,y:b.top-S/2},e.__xLabelOffset={x:_.x-p,y:_.y-f,xscale:l,yscale:h}}e.strokeText(y,_.x,_.y),e.fillText(y,_.x,_.y),e.restore()}else e.__xLabelPosition=null;if(v&&x){e.save(),e.fillStyle=d;var M;if(e.__yLabelOffset&&t.settings.isViewportTransient&&u(e.__yLabelOffset.xscale,l)&&u(e.__yLabelOffset.yscale,h)&&(M={x:e.__yLabelOffset.x+p,y:e.__yLabelOffset.y+f}),this._setAxisLabelFont(e,v,m),!M){var I=e.measureText(v).width,k=m,T=I+5;if(!this._isShortMathyLabel(v)){var C=I;I=k,k=C,T=.5*I}var A=0+g+k;M=x.left-I>0?{x:x.left-T,y:A}:{x:x.right+I,y:A},e.__yLabelOffset={x:M.x-p,y:M.y-f,xscale:l,yscale:h}}e.translate(M.x,M.y),this._isShortMathyLabel(v)||e.rotate(-Math.PI/2),e.strokeText(v,0,0),e.fillText(v,0,0),e.restore()}else e.__yLabelPosition=null},e._isShortMathyLabel=function(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)},e._setAxisLabelFont=function(e,t,n){this.addTextShadow(e),this._isShortMathyLabel(t)?e.font="italic "+Math.round(1.4*n.toString())+"px Times":e.font=Math.round(1.2*n.toString())+"px Arial"},e.drawCartesianStepNumbers=function(e,t,i){e.save();var o=t.settings.showXAxis,s=t.settings.showYAxis,c=o&&t.settings.xAxisNumbers,u=s&&t.settings.yAxisNumbers,h=t.viewport.xmin,d=t.viewport.xmax,p=t.viewport.ymin,f=t.viewport.ymax,m=t.screen.width,g=t.screen.height,y={left:3,top:3,right:m-3,bottom:g-3},v=t.settings.labelHangingColor,b=t.settings.labelNormalColor,x=t.mapx(0),_=t.mapy(0),w=t.settings.labelSize;this.addTextShadow(e);var E={left:0,right:m,top:_-1,bottom:_+1},S={left:x-1,right:x+1,top:0,bottom:g},M=!1;if(o&&s&&(c||u)){M=!0,e.fillStyle=b;var I=n(r.value(0,1),w);I.drawCenteredAt(e,{x:x-I.getRect().right-5,y:_-I.getRect().top+3})}return c&&a(h,d,i.majorStepX,function(i){var o=n(r.value(i,d-h),w),s={x:t.mapx(o.getValue())-.5*o.getMinusWidth(),y:_-o.getRect().top+5},a=o.clampBoundsWithinRect(s,y);e.fillStyle=s.y===a.y?b:v,"0"===o.getString()&&M||(o.drawCenteredAt(e,a),l(E,o.getRectWhenCenteredAt(a)))}),u&&a(p,f,i.majorStepY,function(i){var o=n(r.value(i,f-p),w),s={x:x-5-o.getRect().right,y:t.mapy(o.getValue())},a=o.clampBoundsWithinRect(s,y);e.fillStyle=s.x===a.x?b:v,"0"===o.getString()&&M||(o.drawCenteredAt(e,a),l(S,o.getRectWhenCenteredAt(a)))}),e.restore(),{x:E,y:S}}}),a=function(e,t,n,r){var i=Math.ceil(e/n),o=Math.floor(t/n);if(isFinite(o-i)&&!(o-i>1e4))for(var s=i;s<=o;s++)r(s*n)},c=function(e,t,n){return e<t?t:e>n?n:e},l=function(e,t){t.left<e.left&&(e.left=t.left),t.right>e.right&&(e.right=t.right),t.top<e.top&&(e.top=t.top),t.bottom>e.bottom&&(e.bottom=t.bottom)},u=function(e,t){var n=Math.abs(e),r=Math.abs(t),i=1e-4;return Math.abs(n-r)<=(n<r?r:n)*i};return s}),define("graphing/graphsketch",["require","math/poi","./poi","graphing/graphmode"],function(e){function t(e,t){this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.labels=[],this.id=e,this.branches=void 0!==t?t:[],this.getPOI().forEach(function(e){e.type===n.LABEL&&this.labels.push(e)}.bind(this))}var n=e("math/poi").default,r=e("./poi"),i=e("graphing/graphmode");return t.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;var e,t;this.__cachedPOI=[],this.__cachedPOIIds={};for(var r=0;r<this.branches.length;r++){e=this.branches[r],t=e.graphMode;var o=e.poi;if(t===i.X||t===i.Y)this._pushPOI(o.zeros,r,n.ZERO),this._pushPOI(o.intercept,r,n.INTERCEPT),this._pushPOI(o.extrema,r,n.EXTREMUM),this._pushPOI(o.intersections,r,n.INTERSECTION);else if(t===i.XYPOINT||t===i.XYPOINT_MOVABLE)if(e.showLabel===!0){var s=e.nakedLabel;this._pushPOI(o.defined,r,n.LABEL,s)}else this._pushPOI(o.defined,r,n.DEFINITION)}return this.__cachedPOI},t.prototype.getMovablePoints=function(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];var e=this.branches[0];if(e&&1===e.segments.length&&e.graphMode===i.XYPOINT_MOVABLE)for(var t=e.segments[0],n=0;n<t.length;n++){var r;e.tableId&&(r={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[n].index,dragX:e.movablePointInfo[n].dragX,dragY:e.movablePointInfo[n].dragY});var o;e.scaleFactors&&(o=e.scaleFactors[0][n]);var s=r?r.rowIndex:n;this.__cachedMovablePoints.push({id:"movable:["+this.id+","+s+"]",sketch:this,color:this.color,tableInfo:r,scaleFactor:o,x:t[n][0],y:t[n][1],isMovable:!0,label:e.labels&&e.labels[n]})}return this.__cachedMovablePoints},t.prototype._pushPOI=function(e,t,n,i){if(e)for(var o=0,s=e.x.length;o<s;o++){var a=new r(e.x[o],e.y[o],n,this,t,o,i);e.intersects&&(a.intersects=e.intersects[o]),this.__cachedPOI.push(a),this.__cachedPOIIds[a.id]=a}},t.prototype.updateIntersections=function(e){for(var t=0,r=this.branches.length;t<r;t++)this.branches[t].poi.intersections=e[t];var o=this.__cachedPOI;this.__cachedPOI=[],o.forEach(function(e){e.type!==n.INTERSECTION?this.__cachedPOI.push(e):delete this.__cachedPOIIds[e.id]}.bind(this));var s,a;for(t=0;t<this.branches.length;t++){s=this.branches[t],a=s.graphMode;var c=s.poi;a!==i.X&&a!==i.Y||this._pushPOI(c.intersections,t,n.INTERSECTION)}},t.prototype.getPOIById=function(e){return this.__cachedPOIIds[e]},t.prototype.updateFrom=function(e){if(e){this.visible=!0,this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected;var t=this.branches[0].graphMode;if(t===i.XYPOINT||t===i.XYPOINT_MOVABLE){var n,r,o,s=!0;for(o=0;o<this.__cachedPOI.length;o++)if(n=e.__cachedPOI[o],r=this.__cachedPOI[o],!n||n.type!==r.type){s=!1;break}if(s)for(o=0;o<this.__cachedPOI.length;o++)n=e.__cachedPOI[o],r=this.__cachedPOI[o],delete this.__cachedPOIIds[r.id],this.__cachedPOIIds[n.id]=r,r.id=n.id}}},t}),define("lib/named-colors",["require"],function(e){return{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}),define("lib/color-distance",["require","underscore","lib/named-colors"],function(e){function t(e){var t=[],i=e.toLowerCase();if("rgb"===i.slice(0,3))try{t=i.replace(/[^\d,]/g,"").split(",").slice(0,3),t=u.map(t,function(e){return parseInt(e,10)})}catch(t){r(e)}else if("#"===i[0]){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/;i=i.replace(o,function(e,t,n,r){return t+t+n+n+r+r});try{t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(i).slice(1),t=u.map(t,function(e){return parseInt(e,16)})}catch(t){r(e)}}else t=h[i];return n(t)||r(e),{R:t[0],G:t[1],B:t[2]}}function n(e){return!!u.isArray(e)&&(3===e.length&&u.every(e,function(e){return Number.isInteger(e)&&e>=0&&e<=255}))}function r(e){throw new Error("Invalid color string: "+e)}function i(e){var t=e.R,n=e.G,r=e.B,i=[];return i[0]=.49*t+.31*n+.2*r,i[1]=.17697*t+.8124*n+.01063*r,i[2]=.01*n+.99*r,i=u.map(i,function(e){return e/.17697}),{X:i[0],Y:i[1],Z:i[2]}}function o(e){var t=95.047,n=100,r=108.883,i=e.X,o=e.Y,a=e.Z,c=[];return c[0]=116*s(o/n)-16,c[1]=500*(s(i/t)-s(o/n)),c[2]=200*(s(o/n)-s(a/r)),{L:c[0],a:c[1],b:c[2]}}function s(e){var t=6/29;return e>Math.pow(t,3)?Math.pow(e,1/3):e/(3*t*t)+4/29}function a(e,t){var n=1,r=.045,i=.015,o=1,s=1,a=1,c=e.L,l=e.a,u=e.b,h=t.L,d=t.a,p=t.b,f=c-h,m=Math.sqrt(l*l+u*u),g=Math.sqrt(d*d+p*p),y=m-g,v=l-d,b=u-p,x=Math.sqrt(v*v+b*b-y*y),_=1+r*m,w=1+i*m,E=f/(n*a),S=y/(o*_),M=x/(s*w);return Math.sqrt(E*E+S*S+M*M)}function c(e,n){var r=o(i(t(e))),s=o(i(t(n)));return a(r,s)}function l(e,t){var n=u.map(t,function(t){return c(e,t)}),r=u.min(n);return t[n.indexOf(r)]}var u=e("underscore"),h=e("lib/named-colors");return{str2rgb:t,difference:c,closestColor:l}}),define("graphing-calc/models/abstract-item",["require","exports","./list"],function(e,t,n){"use strict";function r(){return"abstract_item_"+l++}function i(e){return{guid:r(),controller:e,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}}function o(e,t){e.secret=t}function s(e,t){e.folderId=t}function a(e){e.isHiddenFromUI=n.isItemHiddenFromUI(e)}function c(e){return e.isHiddenFromUI?"none":e.renderShell?"shell":"render"}Object.defineProperty(t,"__esModule",{value:!0});var l=0;t.getGUID=r,t.DEFAULTS=i,t.setSecret=o,t.setFolderId=s,t.updateIsHiddenFromUI=a,t.getDisplayState=c}),define("expressions/opacity",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOW=.2,t.DEFAULT=.4,t.HIGH=.8}),define("expressions/slider_loop_modes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",t.LOOP_FORWARD="LOOP_FORWARD"}),define("lib/evaluate-single-expression",["require","exports","parser","math/builtinframe","math/parsenode/constant"],function(e,t,n,r,i){"use strict";function o(e,t){var o=/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/;if(o.test(e))return parseFloat(e);var s=Object.create(r);return s.trigAngleMultiplier=i(t?Math.PI/180:1),+n.parse(e).tryGetConcreteTree(s).constantValue}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o}),define("lib/rounding",["require","exports","math/distance"],function(e,t,n){"use strict";function r(e,t){var r=n.mean(e,t);if(e>0!=t>0)return 0;if(0===e||0===t)return 0;var i=e>0?1:-1,o=Math.abs(e).toExponential().split("e"),s=Math.abs(t).toExponential().split("e"),a=o[0],c=s[0],l=o[1],u=s[1];if(u!==l)return i*Math.pow(10,Math.max(parseFloat(l),parseFloat(u)));if(a[0]!==c[0])return parseFloat(r.toPrecision(1));for(var h=1,d=2;d<Math.min(a.length,c.length)&&(h++,a[d]===c[d]);d++);return parseFloat(r.toPrecision(h))}Object.defineProperty(t,"__esModule",{value:!0}),t.shortestDecimalBetween=r}),define("lib/default-spec",["require","exports","underscore","lib/deepCopy"],function(e,t,n,r){"use strict";function i(e,t){var r={};for(var i in t)t.hasOwnProperty(i)&&(n.isEqual(e[i],t[i])||(r[i]=t[i]));return r}function o(e,t){t||(t={});var n={};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(n[i]=r.default(e[i]));for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=i,t.populateDefaults=o}),define("lib/copy-properties",["require","exports","lib/deepCopy"],function(e,t,n){"use strict";function r(e){var t=e.from,r=e.to,i=e.props;for(var o in i)i[o]&&t.hasOwnProperty(o)&&(r[o]=n.default(t[o]))}Object.defineProperty(t,"__esModule",{value:!0}),t.copyProperties=r}),define("graphing-calc/models/expression",["require","exports","parser","math/builtinframe","math/policyGraphing","tslib","graphing/dragmode","expressions/styles","expressions/opacity","expressions/slider_loop_modes","graphing/reconcileDragMode","lib/evaluate-single-expression","graphing/label","lib/rounding","lib/default-spec","lib/deepCopy","lib/copy-properties","lib/number-to-latex","./abstract-item","./list","underscore","math/expression-types"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b,x,_){"use strict";function w(e,t){var n=/=(.*?)([-\.0-9]+)/,r=e.match(n);return r?parseFloat(r[2])===t?e:e.replace(n,"=$1"+t):e}function E(e){var t=e.latex||"",n=e.label||"",r=t+n;return""===r.split(" ").join("")}function S(e){var t=e.dragMode===s.AUTO?e.formula.default_drag_mode:e.dragMode;e.reconciledDragMode=u.default(t,e.formula.move_strategy)}function M(e){var t=e.memoizedUpdateComputedDomainParams,n=e.controller.isDegreeMode(),r=e.domain;if(!t||t.useDegrees!==n||t.domain!==r){e.memoizedUpdateComputedDomainParams={useDegrees:n,domain:r};var i=h.default(r.min,n),o=h.default(r.max,n);e.isDomainMinValid=isFinite(i)&&i<o,e.isDomainMaxValid=isFinite(o)&&i<o,e.isDomainMinValid&&e.isDomainMaxValid&&(e.lastValidDomain=r,e.domainMinNumber=i,e.domainMaxNumber=o)}}function I(e){if(e.sliderExists){var t=k(e,e.slider.min,e.slider.max,e.slider.step);t.min&&t.max&&t.step&&(e.sliderMinNumber=t.values.min,e.sliderMaxNumber=t.values.max,e.sliderStepNumber=""===e.slider.step?void 0:t.values.step)}}function k(e,t,n,r){var i,o,s=e.controller.isDegreeMode(),a=h.default(t,s),c=h.default(n,s),l=isFinite(a)&&a<c&&!(a+"").match(/e/),u=isFinite(c)&&a<c&&!(c+"").match(/e/);return""===r?(i=NaN,o=!0):(i=h.default(r,s),o=isFinite(i)&&i>=0&&i<=c-a),{min:l,max:u,step:o,values:{min:a,max:c,step:i}}}function T(e,t,n){if(!e.sliderExists)return NaN;var r=e.sliderMinNumber,i=e.sliderMaxNumber,o=n||e.sliderStepNumber;if(o){var s=Math.round((t-r)/o);t=d.value(o*s+r,i-r).value}return e.slider.hardMin&&t<r&&(t=r),e.slider.hardMax&&t>i&&(t=i),t}function C(e,t){if(!e.sliderExists)return NaN;var n,r=e.sliderValue,i=r,o=A(e),s=o.length-1;switch(t){case"up":n=P(o,r,{movingForward:!0}),n=Math.min(n+1,s),i=o[n];break;case"down":n=P(o,r,{movingForward:!1}),n=Math.max(n-1,0),i=o[n];break;case"bigup":n=P(o,r,{movingForward:!0}),n=Math.min(n+5,s),i=o[n];break;case"bigdown":n=P(o,r,{movingForward:!1}),n=Math.max(n-5,0),i=o[n];break;case"min":i=o[0];break;case"max":i=o[s]}return i}function A(e){if(!e.sliderExists)return[];for(var t=e.sliderMinNumber,n=e.sliderMaxNumber,r=e.sliderStepNumber||Math.abs(n-t)/20,i=[],o=t;o<=n;o+=r){var s=T(e,o,r);i[i.length-1]!==s&&i.push(s)}return i[i.length-1]!==n&&i.push(n),i}function P(e,t,n){if(t<=e[0])return 0;if(t>=e[e.length-1])return e.length-1;for(var r=0;r<e.length-1;r++){if(e[r]===t)return r;if(e[r]<t&&t<e[r+1])return r+(n.movingForward?0:1)}return e[e.length-1]}function O(e,t){if(e.sliderExists){var n=e.sliderMinNumber,r=e.sliderMaxNumber,i=e.sliderStepNumber,o=e.slider.animationPeriod,s=e.slider.loopMode,a=i?i/2:0;if(s===l.LOOP_FORWARD_REVERSE)e.sliderAnimationTargetValue>=r?W(e,{playDirection:-1}):e.sliderAnimationTargetValue<=n&&W(e,{playDirection:1});else{if(s!==l.LOOP_FORWARD)throw new Error("Unexpected slider loop mode: "+s);W(e,{playDirection:1}),e.sliderAnimationTargetValue>=r+a&&(e.sliderAnimationTargetValue=n-a)}isFinite(t)||(t=0),t=Math.min(t,o/10);var c=(r-n)*t/o;e.sliderAnimationTargetValue+=c*e.slider.playDirection,e.sliderAnimationTargetValue=Math.max(n-a,Math.min(r+a,e.sliderAnimationTargetValue));var u=T(e,e.sliderAnimationTargetValue);i||(u=p.shortestDecimalBetween(u-.1*c,u+.1*c)),u=Math.max(n,Math.min(r,u)),e.sliderValue=u,e.latex=w(e.latex,u)}}function L(e,t){e.formula=t,e.loading=!1,e.error=t.error?t.error:"",e.isGraphable=t.is_graphable,e.dependent=t.assignment,e.isTableable=t.is_tableable,e.unresolved=!1,t.is_slidable?(e.sliderExists||D(e),G(e)||(e.sliderValue=t.constant_value)):e.sliderExists=!1;
var n={};t.is_regression&&(n=t.regression.parameters,e.residualVariable=t.regression.residualVariable),x.isEqual(e.regressionParameters,n)||(e.regressionParameters=n)}function D(e){e.sliderValue=e.formula.constant_value||0,e.sliderAnimationTargetValue=e.sliderValue,e.sliderDragging=!1,e.sliderExists=!0,I(e)}function N(e){var t=b.getParentFolderModel(e);t&&t.hidden?e.shouldGraph=!1:e.shouldGraph=!e.hidden}function F(e,n){var r=e.cachedViewState;if(n.stripDefaults)return f.stripDefaults(t.DEFAULTS,o.__assign({},r,{slider:f.stripDefaults(t.SLIDER_DEFAULTS,r.slider)}));if(void 0===r.points||void 0===r.lines||void 0===r.fill){var i=m.default(r);return void 0===i.points&&delete i.points,void 0===i.lines&&delete i.lines,void 0===i.fill&&delete i.fill,i}return r}function q(e){var t=e.cachedViewState;t&&t.folderId===e.folderId&&t.color===e.color&&t.latex===e.latex&&t.domain===e.domain&&t.showLabel===e.showLabel&&t.label===e.label&&t.hidden===e.hidden&&t.secret===e.secret&&t.fill===e.fill&&t.fillOpacity===e.fillOpacity&&t.points===e.points&&t.lines===e.lines&&t.lineStyle===e.lineStyle&&t.pointStyle===e.pointStyle&&t.dragMode===e.dragMode&&t.labelSize===e.labelSize&&t.residualVariable===e.residualVariable&&t.regressionParameters===e.regressionParameters&&t.isLogModeRegression===e.isLogModeRegression&&t.slider===e.slider||(e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,color:e.color,latex:e.latex,domain:e.domain,showLabel:e.showLabel,label:e.label,hidden:e.hidden,secret:e.secret,points:e.points,lines:e.lines,lineStyle:e.lineStyle,pointStyle:e.pointStyle,fill:e.fill,fillOpacity:e.fillOpacity,dragMode:e.dragMode,labelSize:e.labelSize,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,slider:e.slider})}function R(e){if(e.formula){var t=e.formula.expression_type;if(void 0!==t)return void 0===e.cachedExpressionType?void(e.cachedExpressionType=t):void(e.cachedExpressionType!==t&&(fe(e,void 0),ge(e,void 0),he(e,void 0),e.cachedExpressionType=t))}}function j(e,t){e.draggingOnGraphpaper=t}function V(e){var t=e.memoizedUndoRedoStateParams,n=e.cachedViewState,r=e.preTransientState;if(!t||t.viewState!==n||t.preTransientState!==r){e.memoizedUndoRedoStateParams={viewState:n,preTransientState:r};var i;i=r?o.__assign({},n,{latex:r.latex,slider:o.__assign({},n.slider,r.slider)}):o.__assign({},n),delete i.regressionParameters,delete i.residualVariable,e.cachedUndoRedoState=i}}function B(e,n){var r=m.default(o.__assign({},t.DEFAULTS,e,{slider:o.__assign({},t.SLIDER_DEFAULTS,e.slider)})),i=o.__assign({},r,v.DEFAULTS(n),{loading:!0,formula:{error:void 0},error:void 0,unresolved:!1,color:r.color||n.getNextColor(),fill:r.fill,points:r.points,lines:r.lines,pointStyle:r.pointStyle,lineStyle:r.lineStyle,lastValidDomain:r.domain,shouldGraph:void 0,sliderMinNumber:void 0,sliderMaxNumber:void 0,sliderStepNumber:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,sliderValue:void 0,domainMinNumber:void 0,domainMaxNumber:void 0,isDomainMinValid:void 0,isDomainMaxValid:void 0,draggingOnGraphpaper:!1,cachedUndoRedoState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedExpressionType:void 0});return i}function U(e){var t=b.getParentFolderModel(e),n=!(!t||!t.hidden),r=e.cachedViewState,i=e.index,o=e.showLabel&&!n,s=e.shouldGraph,a=e.domainMinNumber,c=e.domainMaxNumber,l=e.memoizedParsableStateParams;l&&l.viewState===r&&l.index===i&&l.showLabel===o&&l.shouldGraph===s&&l.domainMinNumber===a&&l.domainMaxNumber===c||(e.memoizedParsableStateParams={viewState:r,index:i,domainMinNumber:a,domainMaxNumber:c,showLabel:o,shouldGraph:s},e.cachedParsableState={type:"statement",id:r.id,latex:r.latex,label:r.label,color:r.color,fill:r.fill,fillOpacity:r.fillOpacity,points:r.points,lines:r.lines,pointStyle:r.pointStyle,lineStyle:r.lineStyle,dragMode:r.dragMode,labelSize:r.labelSize,residualVariable:r.residualVariable,regressionParameters:r.regressionParameters,isLogModeRegression:r.isLogModeRegression,index:i,showLabel:o,domain:{min:a,max:c},shouldGraph:s})}function z(e,t){t(e.latex),e.residualVariable&&t(e.residualVariable)}function G(e){return e.sliderExists&&(e.slider.isPlaying||e.sliderDragging)}function $(e){e.draggingOnGraphpaper||G(e)?e.preTransientState||(e.preTransientState={latex:e.latex,slider:{min:e.slider.min,max:e.slider.max,playDirection:e.slider.playDirection}}):delete e.preTransientState,v.updateIsHiddenFromUI(e),N(e),M(e),S(e),I(e),q(e),V(e),U(e),R(e)}function H(e,t){g.copyProperties({from:t,to:e,props:{id:!1,type:!1,color:!0,folderId:!0,latex:!0,domain:!0,showLabel:!0,label:!0,hidden:!0,secret:!0,points:!0,lines:!0,lineStyle:!0,pointStyle:!0,fill:!0,fillOpacity:!0,dragMode:!0,labelSize:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,slider:!0}})}function Y(e,t,n){var r=e.sliderValue;W(e,{hardMin:t,min:n}),I(e);var i=e.sliderMinNumber,o=i>r?e.latex:"",s=i>r?w(o,i):null;s&&(e.latex=s)}function X(e,t,n){var r=e.sliderValue;W(e,{hardMax:t,max:n}),I(e);var i=e.sliderMaxNumber,o=i<r?e.latex:"",s=i<r?w(o,i):"";s&&(e.latex=s)}function W(e,t){e.slider=o.__assign({},e.slider,t)}function K(e,t){if(e&&e.sliderExists){var n=e.slider.isPlaying;n!==t&&(W(e,{isPlaying:t}),t&&(e.sliderAnimationTargetValue=e.sliderValue))}}function Q(e,t){e.sliderExists&&(e.slider.isPlaying&&K(e,!1),e.sliderValue=t,e.latex=w(e.latex,t),t<e.sliderMinNumber&&Y(e,e.slider.hardMin,y.default(t)),t>e.sliderMaxNumber&&X(e,e.slider.hardMax,y.default(t)))}function Z(e){var t=n.parse(e);if("Assignment"!==t.type)return NaN;if("Constant"!==t._expression.type)return NaN;if(!i.validLHS(t._symbol))return NaN;if(r[t._symbol])return NaN;var o=t._expression.constantValue;return"number"==typeof o?o:NaN}function J(e,t){var n=Z(t);isFinite(n)&&(e.sliderExists||(e.sliderExists=!0,I(e),e.sliderExists=!1),n>e.sliderMaxNumber&&(e.sliderMaxNumber=n,W(e,{max:y.default(n)})),n<e.sliderMinNumber&&(e.sliderMinNumber=n,W(e,{min:y.default(n)}))),e.latex=t}function ee(e,t){W(e,{loopMode:t,playDirection:1}),e.sliderAnimationTargetValue=e.sliderMinNumber}function te(e,t){e.sliderDragging=t}function ne(e,t){W(e,{step:t})}function re(e,t){W(e,{animationPeriod:t})}function ie(e,t){e.label=t}function oe(e,t){e.showLabel=t}function se(e,t){e.domain=o.__assign({},e.domain,{min:t})}function ae(e,t){e.domain=o.__assign({},e.domain,{max:t})}function ce(e){e.domain=e.lastValidDomain}function le(e,t){e.isLogModeRegression=t}function ue(e,t){e.color=t}function he(e,t){e.fill=t}function de(e,t){e.fillOpacity!==t&&(e.fillOpacity=t)}function pe(e,t){e.dragMode!==t&&(e.dragMode=t,t!==s.NONE&&(e.pointStyle=a.POINT))}function fe(e,t){e.points=t}function me(e,t){e.pointStyle!==t&&(e.pointStyle=t,t!==a.POINT&&(e.dragMode=s.NONE))}function ge(e,t){e.lines=t}function ye(e,t){e.lineStyle!==t&&(e.lineStyle=t)}function ve(e,t){e.labelSize=t}function be(e,t){if(e.hidden=t,e.formula&&e.formula.expression_type){var n=e.points,r=e.lines,i=e.fill,o=_.getReconciledExpressionProps(e.formula.expression_type,{points:n,lines:r,fill:i});if(!(t||o.points||o.lines||o.fill)){var s=_.EXPRESSION_PROP_DEFAULTS[e.formula.expression_type];e.points=s.points,e.lines=s.lines,e.fill=s.fill}}}function xe(e){var t=e.points,n=e.lines,r=e.fill,i=_.getReconciledExpressionProps(e.formula.expression_type,{points:t,lines:n,fill:r});return!i.points&&!i.lines&&!i.fill}function _e(e){return!(!e.formula||!Se(e))}function we(e){return!!e.sliderExists}function Ee(e){return e.formula.expression_type===_.POLYGON}function Se(e){return e.formula.expression_type===_.PARAMETRIC}function Me(e){return e.formula.expression_type===_.SINGLE_POINT}function Ie(e){return e.formula.expression_type===_.POINT_LIST}function ke(e){return e.formula.expression_type===_.POINT_LIST||e.formula.expression_type===_.SINGLE_POINT}function Te(e){e.showLabel=t.DEFAULTS.showLabel,e.label=t.DEFAULTS.label,e.hidden=t.DEFAULTS.hidden,e.dragMode=t.DEFAULTS.dragMode,e.fill=t.DEFAULTS.fill,e.fillOpacity=t.DEFAULTS.fillOpacity,e.points=t.DEFAULTS.points,e.pointStyle=t.DEFAULTS.pointStyle,e.lines=t.DEFAULTS.lines,e.lineStyle=t.DEFAULTS.lineStyle,e.domain=t.DEFAULTS.domain,e.slider=t.SLIDER_DEFAULTS,e.latex="",e.labelSize="medium"}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS={folderId:"",latex:"",color:"",showLabel:!1,label:"",hidden:!1,secret:!1,dragMode:s.AUTO,labelSize:"medium",residualVariable:"",isLogModeRegression:!1,pointStyle:a.POINT,lineStyle:a.SOLID,fillOpacity:c.DEFAULT,domain:{min:"0",max:"1"},regressionParameters:{},slider:{},points:void 0,lines:void 0,fill:void 0},t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:l.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.computeNewSliderLatex=w,t.isEmpty=E,t.updateReconciledDragMode=S,t.updateComputedDomainLimits=M,t.computeSliderLimits=I,t.checkSliderLimits=k,t.computeSliderSnappedValue=T,t.computeSliderAdjustment=C,t.computeSliderSteps=A,t.nearestSliderStepIndex=P,t.tickSliderStep=O,t.onFormulaUpdate=L,t.createSliderModel=D,t.computeShouldGraph=N,t.getState=F,t.updateCachedViewState=q,t.updateExpressionType=R,t.setIsDraggingOnGrapher=j,t.updateCachedUndoRedoState=V,t.initModel=B,t.updateCachedParsableState=U,t.eachLatex=z,t.isSliderTransient=G,t.onControllerUpdate=$,t.restoreState=H,t.setSliderMin=Y,t.setSliderMax=X,t.setSliderIsPlaying=K,t.setSliderValue=Q,t.extractSliderValueFromLatex=Z,t.setLatex=J,t.setSliderLoopMode=ee,t.setSliderDragging=te,t.setSliderStep=ne,t.setSliderAnimationPeriod=re,t.setLabel=ie,t.setShowLabel=oe,t.setDomainMin=se,t.setDomainMax=ae,t.revertToLastValidDomain=ce,t.setLogMode=le,t.setColor=ue,t.setFill=he,t.setFillOpacity=de,t.setDragMode=pe,t.setPoints=fe,t.setPointStyle=me,t.setLines=ge,t.setLineStyle=ye,t.setLabelSize=ve,t.setHidden=be,t.shouldHide=xe,t.hasDomain=_e,t.hasSlider=we,t.isPolygon=Ee,t.isParametric=Se,t.isSinglePoint=Me,t.isPointList=Ie,t.isPointOrPointList=ke,t.blankOutExpressionAfterClearingLatex=Te}),define("graphing-calc/models/folder",["require","exports","tslib","lib/default-spec","lib/deepCopy","lib/copy-properties","./abstract-item","./list"],function(e,t,n,r,i,o,s,a){"use strict";function c(e,n){var i=e.cachedViewState;return n.stripDefaults?r.stripDefaults(t.DEFAULTS,i):i}function l(e){e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,title:e.title,hidden:e.hidden,collapsed:e.collapsed,secret:e.secret}}function u(e){e.cachedUndoRedoState=e.cachedViewState}function h(e,r){var o=i.default(n.__assign({},t.DEFAULTS,e)),a=n.__assign({},o,s.DEFAULTS(r),{cachedUndoRedoState:{},cachedViewState:{}});return a}function d(e){f(e),s.updateIsHiddenFromUI(e),l(e),u(e)}function p(e,t){o.copyProperties({from:t,to:e,props:{id:!1,type:!1,folderId:!0,hidden:!0,secret:!0,collapsed:!0,title:!0}})}function f(e){var t=e.controller,n=t.getSelectedItem();e.collapsed?n&&n.folderId===e.id?(e.selectedHiddenChild=n,a.setSelected(t.getListModel(),e)):n!==e&&(e.selectedHiddenChild=void 0):(n===e&&e.selectedHiddenChild&&a.setSelected(t.getListModel(),e.selectedHiddenChild),e.selectedHiddenChild=void 0)}function m(e,t){e.collapsed=t}function g(e,t){e.title=t}function y(e,t){e.hidden=t}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULTS={folderId:"",collapsed:!1,hidden:!1,secret:!1,title:""},t.getState=c,t.updateCachedViewState=l,t.updateCachedUndoRedoState=u,t.initModel=h,t.onControllerUpdate=d,t.restoreState=p,t.updateSelectedHiddenChild=f,t.setCollapsed=m,t.setTitle=g,t.setHidden=y}),define("graphing-calc/models/table",["require","exports","math/rational-arithmetic-sequence","tslib","graphing/dragmode","expressions/styles","./abstract-item","underscore","graphing/label","lib/default-spec","lib/evaluate-single-expression","math/distance","lib/deepCopy","lib/copy-properties","graphing-calc/models/list"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f){"use strict";function m(e,t,n,r){r.row=e.rowModels[t],r.row.cells.splice(n,0,r)}function g(e,t,n){e.rowModels[t].cells.splice(n,1)}function y(e){return isFinite(e)?c.truncatedLatexLabel(e,{zeroCutoff:1e-15,digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function v(e,t,n){var r=e.columnModels[t];r.error=n.error,r.discrete=n.discrete,r.disabled=n.dependent,r.draggable=!n.error&&!n.dependent,r.packedErrors=[],r.computedValues=[];for(var i=n.values,o=i.length-1;o>=0;o--){var s=i[o];"number"==typeof s?r.computedValues[o]=y(s):r.computedValues[o]="",r.packedErrors[o]=s&&s.msg?s:void 0}}function b(e,t){var n=e.columnModels[t],r=e.columns[t].values.slice();return{values:r,dragMode:n.dragMode,hidden:n.hidden,id:n.id,color:n.color,points:n.points,lines:n.lines,pointStyle:n.pointStyle,lineStyle:n.lineStyle,latex:n.latex}}function x(){return"table_guid_"+oe++}function _(){return{guid:x(),type:"cell",row:void 0,column:void 0}}function w(e){return{index:e,guid:x(),cells:[]}}function E(e,t,n,r){var i=e.columnModels[t];i.cells.splice(n,0,r),r.column=i,e.columns[i.index].values.splice(n,0,"")}function S(e,t,n){var r=e.columnModels[t];r.cells.splice(n,1),e.columns[r.index].values.splice(n,1)}function M(e,t,n){var i=r.__assign({},n,{type:"header",guid:x(),index:t,error:void 0,table:e,color:n.color||e.controller.getNextColor(),packedErrors:[],computedValues:[],cells:void 0,row:void 0,discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return i.cells=i.values.map(function(){var e=_();return e.column=i,e}),delete i.values,0===t&&(i.hidden=!0),i}function I(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={columns:q(e,{stripDefaults:!1}).columns}):delete e.preTransientState,s.updateIsHiddenFromUI(e);var t=f.getParentFolderModel(e),n=t&&t.hidden;a.each(e.columnModels,function(e){e.shouldGraph=!n&&!e.hidden}),R(e),V(e),D(e)}function k(e,t){e.formula=t;var n,r=e.formula.column_data,i=e.columnModels[0].cells.length,o=0;for(n=0;n<r.length;n++){var s=r[n].values.length;s>o&&(o=s)}for(n=o-i;n>0;n--)T(e,i),i++;for(n=0;n<r.length;n++)v(e,n,r[n]);var a=e.columnModels[e.columnModels.length-1];a.disabled=!0,a.error=void 0}function T(e,t){var n=w(t+1);e.rowModels.splice(t+1,0,n);for(var r=t+1;r<e.rowModels.length;r++)e.rowModels[r].index=r;for(r=0;r<e.columnModels.length;r++){var i=_();E(e,r,t,i),m(e,t+1,r,i)}}function C(e,t){for(var n=0;n<e.columnModels.length;n++)S(e,n,t);for(e.rowModels.splice(t+1,1),n=t+1;n<e.rowModels.length;n++)e.rowModels[n].index=n}function A(e,n,i){var o=r.__assign({},t.COLUMN_DEFAULTS,i,{values:e.columns[0].values.map(function(){return""})}),s=M(e,n,o);e.columnModels.splice(n,0,s),e.columns.splice(n,0,o);for(var a=n+1;a<e.columnModels.length;a++)e.columnModels[a].index=a;for(m(e,0,n,s),a=1;a<e.rowModels.length;a++)m(e,a,n,s.cells[a-1])}function P(e,t){e.columnModels.splice(t,1);for(var n=t;n<e.columnModels.length;n++)e.columnModels[n].index=n;for(n=0;n<e.rowModels.length;n++)g(e,n,t)}function O(e,t){var r,i=e.columnModels.length,o=[];for(r=0;r<i;r++)o.push("");var s=e.columns[0].values;if(t>1){var a=e.controller.isDegreeMode(),c=u.default(s[0],a),l=u.default(s[1],a);if(isFinite(c)&&isFinite(l)){var d=n(c,l);if(d){var p=d.nstart,f=p/d.lcm;for(r=0;r<t;r++){var m=u.default(s[r],a);if(!h.approx(m,f))return o;p+=d.nstep,f=p/d.lcm}(""+c).length<8&&(""+l).length<8?o[0]=""+f:o[0]="\\frac{"+p+"}{"+d.lcm+"}"}}}return o}function L(e,t){for(var n=0;n<e.columnModels.length;n++){var r=e.columnModels[n];t(r.latex);for(var i=e.columns[n],o=0;o<i.values.length;o++)i.values[o]&&t(i.values[o])}}function D(e){var t=e.columnModels.map(function(t){var n=b(e,t.index);return r.__assign({},n,{hidden:!t.shouldGraph,tableId:e.id})});e.cachedParsableState={type:"table",id:e.id,columns:t}}function N(e,n){return e=d.default(e),e.push(r.__assign({},t.COLUMN_DEFAULTS,{id:n,values:e[0].values.map(function(){return""})})),e.forEach(function(e){e.values.push("")}),e}function F(e){return e=d.default(e),e.pop(),e.forEach(function(e){e.values.pop()}),e}function q(e,n){var i=r.__assign({},e.cachedViewState,{columns:F(e.cachedViewState.columns)});return n.stripDefaults?(i=r.__assign({},i,{columns:i.columns.map(function(e){return l.stripDefaults(t.COLUMN_DEFAULTS,e)})}),l.stripDefaults(t.DEFAULTS,i)):i}function R(e){var t=e.columnModels.map(function(t,n){return b(e,n)});e.cachedViewState={id:e.id,type:e.type,folderId:e.folderId,columns:t,secret:e.secret}}function j(e,t){e.draggingOnGraphpaper=t}function V(e){var t=r.__assign({},e.cachedViewState,{columns:F(e.cachedViewState.columns)});e.preTransientState&&(t=r.__assign({},t,e.preTransientState)),e.cachedUndoRedoState=t}function B(e,t){if(e.columnModels.length-1!==t.length)return{type:"start-fresh"};if(e.columnModels[0].cells.length-1!==t[0].values.length)return{type:"start-fresh"};for(var n=-1,r=t.length-1;r>=0;r--){var i=e.columns[r],o=t[r];if(i.id!==o.id)return{type:"start-fresh"};for(var s=i.values,a=o.values,c=a.length-1;c>=0;c--)if(s[c]!==a[c]&&(n===-1&&(n=c),n!==c))return{type:"start-fresh"}}return n===-1?{type:"none"}:{type:"edit-row",rowIndex:n}}function U(e,t){var n=B(e,t.columns);if(p.copyProperties({from:t,to:e,props:{id:!1,type:!1,columns:!1,folderId:!0,secret:!0}}),"start-fresh"===n.type)e.columns=N(t.columns,e.controller.generateId()),G(e);else{switch(n.type){case"none":break;case"edit-row":for(var r=t.columns.length-1;r>=0;r--){var i={column:r,row:n.rowIndex+1},o=t.columns[r].values[n.rowIndex];re(e,i,o)}break;default:var s=n;return s}for(var a=0;a<t.columns.length;a++)p.copyProperties({from:t.columns[a],to:e.columnModels[a],props:{id:!1,values:!1,color:!0,latex:!0,hidden:!0,points:!0,lines:!0,dragMode:!0,lineStyle:!0,pointStyle:!0}})}}function z(e,n){var i=d.default(r.__assign({},t.DEFAULTS,e)),o=r.__assign({},i,s.DEFAULTS(n),{columnModels:void 0,rowModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoState:{}});o.columns=o.columns.map(function(e){return r.__assign({},t.COLUMN_DEFAULTS,e)}),o.columns=N(o.columns,n.generateId());var a,c=0;for(a=0;a<o.columns.length;a++)o.columns[a].values||(o.columns[a].values=[]),o.columns[a].values.length>c&&(c=o.columns[a].values.length);for(a=0;a<o.columns.length;a++)for(var l=c-o.columns[a].values.length;l>0;l--)o.columns[a].values.push("");return G(o),o}function G(e){e.columnModels=e.columns.map(function(t,n){return M(e,n,t)}),e.rowModels=[w(0)];for(var t=0;t<e.columnModels.length;t++)m(e,0,t,e.columnModels[t]);for(var t=0;t<e.columnModels[0].cells.length;t++){var n=w(t+1);e.rowModels.push(n);for(var r=0;r<e.columnModels.length;r++)m(e,t+1,r,e.columnModels[r].cells[t])}}function $(e,t,n){for(var r=[],s=Math.min(t.length,se.length),a=0;a<s;a++)r.push({id:n.generateId(),latex:c.identifierToLatex(se[a]+"_"+e),values:t[a],color:n.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:i.NONE,pointStyle:o.POINT,lineStyle:o.SOLID});return{id:n.generateId(),type:"table",folderId:"",secret:!1,columns:r}}function H(e,t){var n=q(e,{stripDefaults:!1});if(!n.columns||!t.columns)return t;for(var r=0;r<t.columns.length;r++){var i=n.columns[r],o=t.columns[r];if(i)for(var s in i)i.hasOwnProperty(s)&&(o.hasOwnProperty(s)||(o[s]=i[s]))}return t}function Y(e){var t=e.controller.getFocusLocation();return t&&"table"===t.type&&t.id===e.id?t.location:void 0}function X(e,t){for(var n=0;n<e.columnModels.length;n++){var r=e.columnModels[n];if(r.id===t)return r}throw new Error("could not find ColumnModel with id: "+t)}function W(e,t,n){var r=X(e,t);r.points=n,n||(r.dragMode=i.NONE)}function K(e,t,n){var r=X(e,t);r.pointStyle=n}function Q(e,t,n){var r=X(e,t);r.lines=n}function Z(e,t,n){var r=X(e,t);r.lineStyle=n}function J(e,t,n){var r=X(e,t);r.dragMode=n,n===i.NONE||r.points||(r.points=!0)}function ee(e,t,n){var r=X(e,t);r.color=n}function te(e,t,n){var r=X(e,t);r.hidden=n}function ne(e,t){var n=X(e,t);return!n.points&&!n.lines}function re(e,t,n){if(0===t.row){var r=e.columnModels[t.column].id,i=X(e,r);return i.latex=n,void(t.column>=e.columnModels.length-1&&A(e,t.column+1,{id:e.controller.generateId(),latex:"",color:e.controller.getNextColor()}))}var o=e.columnModels[t.column];e.columns[o.index].values[t.row-1]=n,""!==n&&t.row>=e.columnModels[0].cells.length&&T(e,t.row)}function ie(e,t){return t.row<e.rowModels.length&&t.column<e.columnModels.length}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULTS={folderId:"",secret:!1,columns:[]},t.COLUMN_DEFAULTS={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:i.NONE,pointStyle:o.POINT,lineStyle:o.SOLID},t.insertCellToRow=m,t.removeCellFromRow=g,t.formatValueForDisplay=y,t.setColumnComputedValues=v,t.getColumnState=b;var oe=0;t.getGUID=x,t.makeCell=_,t.makeRow=w,t.insertCellToColumn=E,t.removeCellFromColumn=S,t.makeColumn=M,t.onControllerUpdate=I,t.onFormulaUpdate=k,t.insertBlankRow=T,t.removeRow=C,t.insertBlankColumn=A,t.removeColumn=P,t.getRowAutoFillValues=O,t.eachLatex=L,t.updateCachedParsableState=D,t.addBlankRowAndColumn=N,t.stripBlankRowAndColumn=F,t.getState=q,t.updateCachedViewState=R,t.setIsDraggingOnGrapher=j,t.updateCachedUndoRedoState=V,t.computeTableStructureMutation=B,t.restoreState=U,t.initModel=z,t.buildEntireColumnStructure=G;var se=["x","y","z","u","v","w"];t.makeTableState=$,t.cloneTableAndExtendWithProperties=H,t.getSelectedCell=Y,t.getColumnModel=X,t.setColumnPoints=W,t.setColumnPointStyle=K,t.setColumnLines=Q,t.setColumnLineStyle=Z,t.setColumnDragMode=J,t.setColumnColor=ee,t.setColumnHidden=te,t.shouldHideColumn=ne,t.setCellLatex=re,t.doesCellExist=ie}),define("graphing-calc/models/text",["require","exports","tslib","lib/default-spec","./abstract-item","lib/deepCopy","lib/copy-properties"],function(e,t,n,r,i,o,s){"use strict";function a(e,t){e.text=t}function c(e,r){var s=o.default(n.__assign({},t.DEFAULTS,e)),a=n.__assign({},s,i.DEFAULTS(r),{cachedUndoRedoState:{},cachedViewState:{}});return a}function l(e){i.updateIsHiddenFromUI(e),d(e),p(e)}function u(e,t){s.copyProperties({from:t,to:e,props:{id:!1,type:!1,folderId:!0,text:!0,secret:!0}})}function h(e,n){var i=e.cachedViewState;return n.stripDefaults?r.stripDefaults(t.DEFAULTS,i):i}function d(e){e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,text:e.text,secret:e.secret}}function p(e){e.cachedUndoRedoState=e.cachedViewState}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULTS={folderId:"",text:"",secret:!1},t.setText=a,t.initModel=c,t.onControllerUpdate=l,t.restoreState=u,t.getState=h,t.updateCachedViewState=d,t.updateCachedUndoRedoState=p}),define("graphing-calc/models/helper-expression",["require","exports","math/evaluationstate","tslib","underscore"],function(e,t,n,r,i){"use strict";function o(e){var t=r.__assign({},e,{formula:n.default(),cachedParsableState:{type:"statement",id:e.id,latex:e.latex,shouldGraph:!1}});return t}function s(e,t){e.formula=t;var n,r=e.proxy,o={numericValue:r.numericValue,listValue:r.listValue},t=e.formula;t.zero_values&&1===t.zero_values.length&&(n=t.zero_values[0].val),r.numericValue=i.isNumber(n)?n:NaN,r.listValue=i.isArray(n)?n.slice(0):void 0,i.isEqual(r.numericValue,o.numericValue)||r.notifyPropertyChange("numericValue"),i.isEqual(r.listValue,o.listValue)||r.notifyPropertyChange("listValue")}Object.defineProperty(t,"__esModule",{value:!0}),t.init=o,t.onFormulaUpdate=s}),define("graphing-calc/models/image",["require","exports","tslib","lib/default-spec","lib/color-helpers","./abstract-item","lib/deepCopy","lib/copy-properties","./list","jquery"],function(e,t,n,r,i,o,s,a,c,l){"use strict";function u(e,t){e.hidden=t}function h(e,t){e.secret=t}function d(e,t,n){e[t]=n}function p(e,t){return e[t]}function f(e,t){e.name=t}function m(e,t){e.opacity=t}function g(e,t){e.image_url=t}function y(e){e.cachedParsableState={type:"image",id:e.id,guid:e.guid,index:e.index,center:e.center,angle:e.angle,width:e.width,height:e.height,shouldGraph:e.shouldGraph,showPoints:e.showPoints,color:e.color}}function v(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={center:e.center,angle:e.angle,width:e.width,height:e.height}):delete e.preTransientState,o.updateIsHiddenFromUI(e);var t=c.getParentFolderModel(e);e.shouldGraph=(!t||!t.hidden)&&!e.hidden,e.showPoints=e.shouldGraph&&c.isItemSelected(e)&&"loaded"===e.loadStatus,w(e),S(e),y(e)}function b(e,t){e.formula=t,e.computed_x=e.formula.dimensions.x,e.computed_y=e.formula.dimensions.y,e.computed_radian_angle=e.formula.dimensions.radianAngle,e.computed_height=e.formula.dimensions.height,e.computed_width=e.formula.dimensions.width;var n={center:e.controller.t("Invalid center. Try, for example, (0,0)."),angle:e.controller.t("Invalid angle. Try using any number."),width:e.controller.t("Invalid width. Try using any number."),height:e.controller.t("Invalid height. Try using any number.")},r=[];for(var i in e.formula.errorMap)e.formula.errorMap[i]&&r.push(n[i]);e.error=r[0],e.inputErrors={center:!!e.formula.errorMap.center,width:!!e.formula.errorMap.width,height:!!e.formula.errorMap.height,angle:!!e.formula.errorMap.angle}}function x(e,t){return!!e.inputErrors&&e.inputErrors[t]}function _(e,n){var i=e.cachedViewState;return n.stripDefaults?r.stripDefaults(t.DEFAULTS,i):i}function w(e){e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,image_url:e.image_url,name:e.name,hidden:e.hidden,height:e.height,width:e.width,center:e.center,angle:e.angle,opacity:e.opacity,secret:e.secret}}function E(e,t){e.draggingOnGraphpaper=t}function S(e){var t=e.cachedViewState;e.preTransientState&&(t=n.__assign({},t,e.preTransientState)),e.cachedUndoRedoState=t}function M(e,t,n,r){l(e).on("load",n).on("error",r),/^data:/.test(t)||(e.crossOrigin="anonymous"),e.src=t}function I(e,r){function a(){u.controller.dispatch({type:"image-load-success",id:u.id})}function c(){u.controller.dispatch({type:"image-load-error",id:u.id})}var l=s.default(n.__assign({},t.DEFAULTS,e)),u=n.__assign({},l,o.DEFAULTS(r),{color:i.colors.BLUE,loadStatus:"loading",failures:0,imageObj:new Image,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,computed_x:void 0,computed_y:void 0,computed_width:void 0,computed_height:void 0,computed_radian_angle:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoState:{}});return M(u.imageObj,u.image_url,a,c),u}function k(e,t){a.copyProperties({from:t,to:e,props:{id:!1,type:!1,image_url:!1,name:!0,folderId:!0,hidden:!0,secret:!0,center:!0,angle:!0,width:!0,height:!0,opacity:!0}})}function T(e,t){for(var n={errors:[],tokens:[]},r=0;r<t.length;r++){var i=t[r];i.type.match("image/*")?n.tokens.push(C(e,i)):n.errors.push(e.t('The file "__file__" is not an image',{file:i.name}))}return n}function C(e,t){var n=""+O++;return e.getGraphSettings().config.imageUploadCallback(t,function(r,i){setTimeout(function(){if(r)e.dispatch({type:"image-upload-error",token:n,error:r});else{var o=new Image,s=function(){var r=o.width,s=o.height,a=Math.max(r,s)/Math.min(r,s);r<s?(s=10,r=Math.round(10*s/a)/10):(r=10,s=Math.round(10*r/a)/10),e.dispatch({type:"image-upload-success",token:n,url:i,width:r+"",height:s+"",name:t.name})},a=function(){e.dispatch({type:"image-upload-error",token:n,error:""})};M(o,i,s,a)}})}),n}function A(e,t){e.loadStatus=t,"loaded"===t&&(e.failures=0),"failed"===t&&(e.failures+=1)}function P(e){e.imageObj.src=e.imageObj.src,A(e,"loading")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULTS={folderId:"",hidden:!1,secret:!1,center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:1,name:""},t.setHidden=u,t.setSecret=h,t.setMQAttribute=d,t.getMQAttribute=p,t.setName=f,t.setOpacity=m,t.setImageURL=g,t.updateCachedParsableState=y,t.onControllerUpdate=v,t.onFormulaUpdate=b,t.hasInputError=x,t.getState=_,t.updateCachedViewState=w,t.setIsDraggingOnGrapher=E,t.updateCachedUndoRedoState=S,t.initModel=I,t.restoreState=k,t.uploadImages=T;var O=0;t.uploadImageAndGenerateToken=C,t.setLoadStatus=A,t.retryLoading=P}),define("graphing-calc/models/list",["require","exports","lib/color-distance","./abstract-item","./expression","./folder","./table","./text","./helper-expression","./image","underscore","lib/deepCopy"],function(e,t,n,r,i,o,s,a,c,l,u,h){"use strict";function d(e){var t={controller:e,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1};return t}function p(e){for(var t=0;t<e.__itemModelArray.length;t++){var n=e.__itemModelArray[t];if("image"===n.type&&"loading"===n.loadStatus)return!0}return!1}function f(e){var t=u.values(e.controller.getColors()),n=t[e.colorIdx];return e.colorIdx=(e.colorIdx+1)%t.length,n}function m(e,t){return e.__itemModelArray[t]}function g(e){for(var t=0;t<e.__itemModelArray.length;t++){var n=e.__itemModelArray[t];if(E(n))return n}}function y(e){for(var t=e.__itemModelArray.length-1;t>=0;t--){var n=e.__itemModelArray[t];if(E(n))return n}}function v(e,t){var n;do{if(t--,t===-1)return;n=m(e,t)}while(n&&!E(n));return n}function b(e,t){var n,r=N(e);do{if(t++,t===r)return;n=m(e,t)}while(n&&!E(n));return n}function x(e){if(e.folderId){var t=e.controller.getListModel(),n=A(t,e.folderId);if(n&&"folder"===n.type)return n}}function _(e,t){var n=A(e,t);if(!n||"folder"!==n.type)return 0;for(var r=0,i=e.__itemModelArray.length,o=n.index+1;o<i&&e.__itemModelArray[o].folderId===t;o++)r+=1;return r}function w(e){if(!e)return!1;if(e.secret)return!0;var t=x(e);return!(!t||!t.secret)}function E(e){return!S(e)}function S(e){if(!e)return!0;if(e.controller.isItemBeingDragged(e.id))return!1;var t=!e.controller.canAdministerSecretFolders();if(t&&w(e))return!0;var n=x(e);return!(!n||!n.collapsed)}function M(e){return e.__itemModelArray}function I(e){return u.values(e.__helperIdToModel)}function k(e,t){for(var n=0;n<e.__itemModelArray.length;n++){var r=e.__itemModelArray[n];switch(r.type){case"expression":i.eachLatex(r,t);break;case"table":s.eachLatex(r,t);break;case"image":case"folder":case"text":break;default:var o=r;return o}}}function T(e){var t=[];k(e,function(e){if(e.indexOf("~")===-1&&e.indexOf("\\sim")===-1)for(var n=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var r=n.exec(e);if(!r)break;t.push(parseInt(r[1]||r[2],10))}}),t.sort(function(e,t){return e-t});for(var n=1,r=0;r<t.length;r++)t[r]===n&&n++;return n}function C(e){var t=[];u.each(e.__itemModelArray,function(e){"table"===e.type?u.each(e.columnModels,function(e){t.push(e.id)}):t.push(e.id)}),e.drawOrder=t}function A(e,t){return e.__itemIdToModel[t]}function P(e,t){return e.__helperIdToModel[t]}function O(e,t){var n=c.init(t);e.__helperIdToModel[n.id]=n}function L(e){for(var t=!e.controller.canAdministerSecretFolders(),n=1,r=1,i=0;i<e.__itemModelArray.length;i++){var o=e.__itemModelArray[i];o.index=i,o.displayIndex=n,w(o)&&(o.secretIndex=r,r+=1),t&&w(o)||(n+=1)}e.nextDisplayIndex=n}function D(e){e.__itemModelArray=[],e.__itemIdToModel={},e.__helperIdToModel={}}function N(e){return e.__itemModelArray.length}function F(e){return 1===e.nextDisplayIndex}function q(e){for(var t=[],n=0;n<e.__itemModelArray.length;n++){var r=e.__itemModelArray[n];"expression"===r.type&&r.sliderExists&&t.push(r)}return t}function R(e){return e.selectedItem}function j(e){return{list:e.__itemModelArray.map(function(e){return e.cachedUndoRedoState})}}function V(e,t){return{list:e.__itemModelArray.map(function(e){switch(e.type){case"expression":return i.getState(e,t);case"image":return l.getState(e,t);case"table":return s.getState(e,t);case"folder":return o.getState(e,t);case"text":return a.getState(e,t);default:var n=e;return n}})}}function B(e){for(var t=0,n=/^[0-9]+$/,r=e.list.length-1;r>=0;r--){var i=e.list[r],o=i.id;if(n.test(o)){var s=parseInt(o,10);s>t&&(t=s)}if("table"===i.type&&i.columns)for(var a=i.columns.length-1;a>=0;a--)if(o=i.columns[a].id,n.test(o)){var s=parseInt(o,10);s>t&&(t=s)}}return t}function U(e,t,r){r||(r={});var i,o;for(e.colorIdx=0,D(e),i=0;i<t.list.length;i++){o=z(e,t.list[i]);var s=o.color;if(r.remapColors&&s){var a=u.values(e.controller.getColors());u.contains(a,s)||(o.color=n.closestColor(s,a))}e.__itemModelArray.push(o),e.__itemIdToModel[o.id]=o}if(L(e),1===e.nextDisplayIndex){
var c=z(e,{type:"expression",id:e.controller.generateId(),color:e.controller.getNextColor()});K(e,c,e.__itemModelArray.length)}}function z(e,t){switch(t.type){case"expression":return i.initModel(t,e.controller);case"table":return s.initModel(t,e.controller);case"image":return l.initModel(t,e.controller);case"folder":return o.initModel(t,e.controller);case"text":return a.initModel(t,e.controller);default:var n=t;return n}}function G(e,t){var n,r,c=e.__itemIdToModel;for(e.__itemModelArray=[],e.__itemIdToModel={},n=0;n<t.list.length;n++){var u=t.list[n];if(r=c[u.id],r&&r.type===u.type)switch(r.type){case"expression":if(u.type!==r.type)throw new Error("invalid restoration");i.restoreState(r,u);break;case"table":if(u.type!==r.type)throw new Error("invalid restoration");s.restoreState(r,u);break;case"image":if(u.type!==r.type)throw new Error("invalid restoration");l.restoreState(r,u);break;case"folder":if(u.type!==r.type)throw new Error("invalid restoration");o.restoreState(r,u);break;case"text":if(u.type!==r.type)throw new Error("invalid restoration");a.restoreState(r,u);break;default:var h=r;return h}else r=z(e,u);e.__itemModelArray.push(r),e.__itemIdToModel[r.id]=r}L(e)}function $(e,t,n){var r=A(e,t);if(r&&"expression"===r.type){var i=!n.every(function(e){return!e.hasOwnProperty("resolved")||e.resolved});r.unresolved=i}}function H(e,t){var n,r,o,a=h.default(e.expressionAnalysis);for(n in t)if(t.hasOwnProperty(n)){if(o=t[n],r=A(e,n))switch(r.type){case"expression":i.onFormulaUpdate(r,o);break;case"image":l.onFormulaUpdate(r,o);break;case"table":s.onFormulaUpdate(r,o);break;case"folder":case"text":break;default:var u=r;return u}else{var d=P(e,n);if(!d)continue;c.onFormulaUpdate(d,o)}var p={isGraphable:!!o.is_graphable,isError:!!o.error,errorMessage:o.error?e.controller.unpack(o.error):void 0};a[n]=p}e.expressionAnalysis=a}function Y(e,t){var n=R(e);n!==t&&(e.selectedItem=t)}function X(e){for(var t="",n=0,i=e.__itemModelArray;n<i.length;n++){var o=i[n];"folder"===o.type?(t=o.id,""!==o.folderId&&r.setFolderId(o,"")):""===o.folderId?t="":o.folderId!==t&&(r.setFolderId(o,""),t="")}}function W(e,t,n,r){if(t!==n){var i=e.__itemModelArray.splice(t,r);t<n&&(n=n-r+1),e.__itemModelArray.splice.apply(e.__itemModelArray,[n,0].concat(i)),L(e)}}function K(e,t,n){var r=String(t.id);if(e.__itemIdToModel.hasOwnProperty(r))throw Error("Item with id '"+r+"' is already in list");e.__itemIdToModel[r]=t,e.__itemModelArray.splice(n,0,t),L(e)}function Q(e,t){K(e,t,N(e))}function Z(e,t){var n=e.__itemModelArray[t];if("folder"===n.type){for(var r=0,i=n.index+1;i<e.__itemModelArray.length;i++){var o=e.__itemModelArray[i];if(o.folderId!==n.id)break;r+=1,ne(o)&&Y(e,void 0),delete e.__itemIdToModel[o.id]}e.__itemModelArray.splice(t,1+r)}else e.__itemModelArray.splice(t,1);ne(n)&&Y(e,void 0),delete e.__itemIdToModel[n.id],L(e)}function J(e,t){var n=A(e,t);n&&Z(e,n.index)}function ee(e){var t=R(e);if(!t)return!1;var n=v(e,t.index);return!!n&&(Y(e,n),n.index===N(e)-1&&"expression"===t.type&&i.isEmpty(t)&&Z(e,n.index),!0)}function te(e){var t=R(e);if(!t)return!1;var n=b(e,t.index);return!!n&&(Y(e,n),!0)}function ne(e){return e.controller.getListModel().selectedItem===e}function re(e,t){e.dragState=t}Object.defineProperty(t,"__esModule",{value:!0}),t.init=d,t.areAnyImagesLoading=p,t.getNextColor=f,t.getItemByIndex=m,t.getFirstSelectableItem=g,t.getLastSelectableItem=y,t.findPrevSelectableItem=v,t.findNextSelectableItem=b,t.getParentFolderModel=x,t.getNumberOfItemsInFolder=_,t.isItemSecret=w,t.isItemSelectable=E,t.isItemHiddenFromUI=S,t.getAllItemModels=M,t.getAllHelperItemModels=I,t.eachLatex=k,t.findAvailableColumnSubscript=T,t.updateDrawOrder=C,t.getItemById=A,t.getHelperExpressionById=P,t.addHelperExpression=O,t.reindex=L,t.removeAllItems=D,t.getItemCount=N,t.hasNoVisibleExpressions=F,t.getAllModelsWithSliders=q,t.getSelected=R,t.getUndoRedoState=j,t.getState=V,t.getLargestIntegerId=B,t.setListState=U,t.modelFromSpec=z,t.restoreListState=G,t.onGraphComputed=$,t.onEvaluatorFormulaUpdates=H,t.setSelected=Y,t.verifyFolderIntegrity=X,t.moveItemsTo=W,t.insertItemAtIndex=K,t.insertItemAtEnd=Q,t.removeItemAtIndex=Z,t.removeItemById=J,t.selectPrevItem=ee,t.selectNextItem=te,t.isItemSelected=ne,t.setDragState=re}),define("graphing/imagelayer",["require","pjs","underscore","graphing-calc/models/list"],function(e){var t=e("pjs"),n=e("underscore"),r=e("graphing-calc/models/list"),i=t(function(e){e.redrawToCtx=function(e,t,r,i){(void 0===i||i.length<n.size(r))&&(i=n.keys(r));for(var o=this,s=0;s<i.length;s++){var a=r[i[s]];a&&a.shouldGraph&&o.drawImageToCtx(a,e,t)}},e.drawImageToCtx=function(e,t,n){if(e.computed_x)for(var i=0;i<e.computed_x.length;i++){var o=e.computed_x[i],s=e.computed_y[i],a=e.computed_width[i],c=e.computed_height[i],l=e.computed_radian_angle[i];if(isFinite(o)&&isFinite(s)&&isFinite(a)&&isFinite(c)&&isFinite(l)){t.save(),t.globalAlpha=e.opacity;var u=n.mapy(c)-n.mapy(0),h=n.mapx(a)-n.mapx(0),d=0===l?1:Math.abs(h/a*(c/u)),p=n.mapx(o),f=n.mapy(s),m=p-h/2,g=f+u*d/2,y=c<0?-1:1,v=a<0?-1:1,b=m*v,x=g*y,_=Math.abs(h),w=Math.abs(u);0!==l&&(t.translate(p,f),t.scale(1,1/d),t.rotate(l),t.translate(-p,-f)),t.scale(v,y),t.drawImage(e.imageObj,b,x,_,w*d),r.isItemSelected(e)&&(t.beginPath(),t.rect(b,x,_,w*d),t.restore(),t.save(),t.strokeStyle="#6993C7",t.lineWidth=2,t.stroke()),t.restore()}}}});return i}),define("math/recttransformation",["require","pjs"],function(e){var t=e("pjs"),n=t(function(e,t,r){function i(e,t){var n=e-1;return 1+n*n*n===1?t*(1+n*(t-1)*(.5+1/6*n*(t-2))):(Math.pow(e,t)-1)/n}e.init=function(e,t,n,r){this.tx=void 0!==e?e:0,this.ty=void 0!==t?t:0,this.sx=void 0!==n?n:1,this.sy=void 0!==r?r:this.sx},r.scale=function(e,t){return new n(0,0,e,t)},r.translate=function(e,t){return(new n).translate(e,t)},r.scaleAtPoint=function(e,t,r){return void 0===r&&(r=t),new n(e.x*(1-t),e.y*(1-r),t,r)},e.compose=function(e){return new n(this.sx*e.tx+this.tx,this.sy*e.ty+this.ty,this.sx*e.sx,this.sy*e.sy)},e.translate=function(e,t){var r=void 0===t?e.x:t.x-e.x,i=void 0===t?e.y:t.y-e.y;return new n(this.tx+r,this.ty+i,this.sx,this.sy)},e.scale=function(e,t){return n.scale(e,t).compose(this)},e.scaleAtPoint=function(e,t,r){return n.scaleAtPoint(e,t,r).compose(this)},e.inverse=function(){return new n(-this.tx/this.sx,-this.ty/this.sy,1/this.sx,1/this.sy)},e.div=function(e){return new n((this.tx*e.sx-this.sx*e.tx)/e.sx,(this.ty*e.sy-this.sy*e.ty)/e.sy,this.sx/e.sx,this.sy/e.sy)},e.conjugate=function(e){return new n(this.tx*e.sx+e.tx*(1-this.sx),this.ty*e.sy+e.ty*(1-this.sy),this.sx,this.sy)},e.pow=function(e){return new n(this.tx*i(this.sx,e),this.ty*i(this.sy,e),Math.pow(this.sx,e),Math.pow(this.sy,e))},r.fromRects=function(e,t){var r=(t.right-t.left)/(e.right-e.left),i=(t.top-t.bottom)/(e.top-e.bottom);return new n(t.left-r*e.left,t.bottom-i*e.bottom,r,i)},e.mapX=function(e){return this.sx*e+this.tx},e.mapY=function(e){return this.sy*e+this.ty},e.mapPoint=function(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}},e.mapRect=function(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}},e.toJSON=function(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}},e.fromJSON=function(e){return new n(e.tx,e.tj,e.sx,e.sy)}});return n}),define("graphing/projection",["require","math/recttransformation"],function(e){function t(e){return{left:0,right:e.width,top:0,bottom:e.height}}function n(e){return{left:e.xmin,right:e.xmax,bottom:e.ymin,top:e.ymax}}var r=e("math/recttransformation"),i=function(e,i,o){this.screen=e,this.viewport=i,this.settings=o,this.mathCoordinates=n(i),this.pixelCoordinates=t(e),this.mathToPixels=r.fromRects(this.mathCoordinates,this.pixelCoordinates),this.pixelsToMath=r.fromRects(this.pixelCoordinates,this.mathCoordinates)};return i.prototype.mapx=function(e){return this.mathToPixels.mapX(e)},i.prototype.mapy=function(e){return this.mathToPixels.mapY(e)},i.prototype.map_pt=function(e){return this.mathToPixels.mapPoint(e)},i.prototype.reverse_mapx=function(e){return this.pixelsToMath.mapX(e)},i.prototype.reverse_mapy=function(e){return this.pixelsToMath.mapY(e)},i.prototype.reverse_map_pt=function(e){return this.pixelsToMath.mapPoint(e)},i.prototype.coordsAreOnscreen=function(e,t,n){return n=void 0===n?0:n,e>-n&&t>-n&&e<this.screen.width+n&&t<this.screen.height+n},i.prototype.closestPointOnScreen=function(e){var t=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,t.left),t.right),y:Math.min(Math.max(e.y,t.top),t.bottom)}},i}),define("lib/aria",["require","jquery","pjs"],function(e){var t=e("jquery"),n=e("pjs"),r=n(function(e){e.init=function(){this.jQ=t([]),t(document).ready(function(){var e=".dcg-aria-alert";t(e).length||t("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),this.jQ=t(e)}.bind(this)),this.items=[]},e.queue=function(e){return this.items.push(e),this},e.alert=function(e){return e&&this.queue(e),this.items.length&&this.jQ.empty().text(this.items.join(" ").replace(/ +(?= )/g,"")),this.clear()},e.clear=function(){return this.items.length=0,this},e.addAria=function(e){return e.attr("aria-atomic","true").attr("aria-live","assertive")},e.removeAria=function(e){return e.removeAttr("aria-atomic").removeAttr("aria-live")},e.toggleAria=function(e){return e.hasClass("dcg-visible")?this.addAria(e):this.removeAria(e)}});return r()}),define("graphing/movablepointslayer",["require","pjs","jquery","./domlayer","browser","./constants","lib/aria","i18n","./label"],function(e){var t=e("pjs"),n=e("jquery"),r=e("./domlayer"),i=e("browser"),o=e("./constants"),s=e("lib/aria"),a=e("i18n"),c=e("./label"),l=t(r,function(e,t){e.init=function(e,n){t.init.call(this,e),this.graphSettings=n,this.renderedMovablePoints={},this.prevLabels={},this.prevCoordinates={},this.cachedAriaLabels={}},e.t=function(e,t){return a.t(e,t,this.graphSettings.language)},e.redraw=function(e,t){this.resize(e.screen.width,e.screen.height);var n=null,r=null;for(var i in this.renderedMovablePoints)this.renderedMovablePoints[i].shouldGarbageCollect=!0;for(i in t){var o=t[i];if(o.visible)for(var s=o.getMovablePoints(),a=0;a<s.length;a++){var c=s[a],l={};c.id===this.hoveredPointId&&(l.hovered=!0,n=c),c.id===this.pressedPointId&&(l.pressed=!0,r=c),this.drawMovablePoint(c,e,l)}}for(i in this.renderedMovablePoints)this.renderedMovablePoints[i].shouldGarbageCollect&&(this.renderedMovablePoints[i].$.off(".mp_listener"),this.renderedMovablePoints[i].$.remove(),delete this.renderedMovablePoints[i]);var u,h;n?(u=n.tableInfo&&n.tableInfo.dragX,h=n.tableInfo&&n.tableInfo.dragY,u&&h||!u&&!h?this.addGlobalClass("dcg-mouse-over-movable-point"):u?this.addGlobalClass("dcg-mouse-over-movable-point-ew"):this.addGlobalClass("dcg-mouse-over-movable-point-ns")):(this.hoveredPointId=null,this.removeGlobalClass("dcg-mouse-over-movable-point-ew"),this.removeGlobalClass("dcg-mouse-over-movable-point-ns"),this.removeGlobalClass("dcg-mouse-over-movable-point")),r?(u=r.tableInfo&&r.tableInfo.dragX,h=r.tableInfo&&r.tableInfo.dragY,u&&h||!u&&!h?this.addGlobalClass("dcg-dragging-movable-point"):u?this.addGlobalClass("dcg-dragging-movable-point-ew"):this.addGlobalClass("dcg-dragging-movable-point-ns")):(this.pressedPointId=null,this.removeGlobalClass("dcg-dragging-movable-point-ew"),this.removeGlobalClass("dcg-dragging-movable-point-ns"),this.removeGlobalClass("dcg-dragging-movable-point"))},e.drawMovablePoint=function(e,t,r){var s=e.id,a=e.color,c=e.x,l=e.y,u=t.mapx(c),h=t.mapy(l),d=!(s in this.renderedMovablePoints);if(d){var p=e.tableInfo?"dcg-table-movable-point":"",f=n("<div class='dcg-movable-point "+p+"'>").append(n("<div class='dcg-background'></div>")).append(n("<div class='dcg-dot'></div></div>"));this.dom_node.append(f),this.renderedMovablePoints[s]={$:f,shouldGarbageCollect:!0}}var m=this.renderedMovablePoints[s].$;if(t.coordsAreOnscreen(u,h,o.OFFSCREEN_RENDER_MARGIN)){m.attr("aria-hidden",!this.graphSettings.config.graphpaper).attr("role","button").attr("tabindex",this.graphSettings.config.graphpaper&&this.graphSettings.enableTabindex?0:-1).css({transform:i.translateRule(u,h),backgroundColor:a}).data("movablePoint",e);var g=m[0]===document.activeElement,y=this.getAriaLabel(e,t,g);""!==y&&(m.attr("aria-label",y),this.speakPointCoordinates(m[0],y)),m.toggleClass("dcg-simulate-hovered",!!r.hovered),m.toggleClass("dcg-simulate-active",!!r.pressed),d&&m.on("blur.mp_listener",function(e){setTimeout(function(){m.attr("aria-label",this.getAriaLabel(m.data("movablePoint"),t,!1))}.bind(this),0)}.bind(this)),this.renderedMovablePoints[s].shouldGarbageCollect=!1}},e.getAriaLabel=function(e,t,n){if(!e||!t)return"";var r=t.viewport;if(!r)return"";var i=this.getLabelFromMovablePoint(e),o="X: "+c.value(e.x,r.xmax-r.xmin).ariaString+". Y: "+c.value(e.y,r.ymax-r.ymin).ariaString+".",s=this.t(" is movable. Press Arrows or Shift+Arrows to adjust."),a=this.prevLabels[e.id],l=this.prevCoordinates[e.id],u=!a||a!==i,h=!l||l.x!==e.x||l.y!==e.y;return u&&(this.prevLabels[e.id]=i),h&&(this.prevCoordinates[e.id]={x:e.x,y:e.y}),n?u?i:h?o:"":i+". "+o+s},e.getLabelFromMovablePoint=function(e){return e.label||this.t("Graph point")},e.speakPointCoordinates=function(e,t){document.activeElement===e&&i.IS_APPLE&&s.alert(t)}});return l}),define("animation-frame-src",["require"],function(e){var t=0,n=function(e,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=window.setTimeout(function(){e(r+i)},i);return t=r+i,o};return window.requestAnimationFrame&&window.cancelAnimationFrame?{requestAnimationFrame:window.requestAnimationFrame.bind(window),cancelAnimationFrame:window.cancelAnimationFrame.bind(window)}:{requestAnimationFrame:n,cancelAnimationFrame:window.clearTimeout.bind(window)}}),define("lib/animation-frame",["require","exports","animation-frame-src"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestAnimationFrame=n.requestAnimationFrame,t.cancelAnimationFrame=n.cancelAnimationFrame}),define("jquery.handleevent",["require","jquery"],function(e){var t=e("jquery"),n="_*_";t.Event.prototype.wasHandled=function(e){e=e?e:n;var r=this.originalEvent,i=r&&r.handledBy;if(i&&i[e])return!0;if(e!==n)return!1;var o=t(this.target).closest("[handleEvent]");return!(!o.length||o[0]===this.currentTarget)&&"false"!==o.attr("handleEvent")},t.Event.prototype.handle=function(e){e=e?e:n;var t=this.originalEvent;if(t){var r=t.handledBy;r||(r=t.handledBy={}),r[e]=!0}}}),function(e){"function"==typeof define&&define.amd?define("vendor/jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=c.call(arguments,1),l=0,u=0,h=0,d=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(h=s.detail*-1),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(u=s.wheelDeltaX*-1),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=h*-1,h=0),l=0===h?u:h,"deltaY"in s&&(h=s.deltaY*-1,l=h),"deltaX"in s&&(u=s.deltaX,0===h&&(l=u*-1)),0!==h||0!==u){if(1===s.deltaMode){var p=e.data(this,"mousewheel-line-height");l*=p,h*=p,u*=p}else if(2===s.deltaMode){var f=e.data(this,"mousewheel-page-height");l*=f,h*=f,u*=f}return d=Math.max(Math.abs(h),Math.abs(u)),(!o||d<o)&&(o=d,r(s,d)&&(o/=40)),r(s,d)&&(l/=40,u/=40,h/=40),l=Math[l>=1?"floor":"ceil"](l/o),u=Math[u>=1?"floor":"ceil"](u/o),h=Math[h>=1?"floor":"ceil"](h/o),t.deltaX=u,t.deltaY=h,t.deltaFactor=o,t.deltaMode=0,a.unshift(t,l,u,h),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){o=null}function r(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(e.event.fixHooks)for(var l=s.length;l;)e.event.fixHooks[s[--l]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("graphing/viewportcontroller",["require","jquery","pjs","lib/aria","i18n","math/recttransformation","./viewport","math/distance","./constants","lib/animation-frame","./projection","jquery.handleevent","vendor/jquery.mousewheel"],function(e){var t=e("jquery"),n=e("pjs"),r=e("lib/aria"),i=e("i18n"),o=e("math/recttransformation"),s=e("./viewport"),a=e("math/distance"),c=e("./constants"),l=e("lib/animation-frame"),u=e("./projection");e("jquery.handleevent"),e("vendor/jquery.mousewheel");var h=n(function(e){function n(e,t){var n=t.x-e.x,r=t.y-e.y,i=.5*(e.x+t.x),o=.5*(e.y+t.y),s=.5*a.hypot(n,r);return{center:d(i,o),radius:s}}function h(e,t){for(var n=[],r=0;r<e.length;r++)n.push(d(e[r].x-t.left,e[r].y-t.top));return n}function d(e,t){return{x:e,y:t}}function p(e){return d(.5*(e.left+e.right),.5*(e.bottom+e.top))}var f=0;e.init=function(e,t){this.grapher=e,this.$=this.grapher.$,this.__id=f++,this.controller=t,this.addMouseWheelEventHandler(),this.addTouchEventHandler()},e.remove=function(){t(window).off("viewportcontroller-"+this.__id)},e.t=function(e,t){return i.t(e,t,this.grapher.settings.language)},e.getViewport=function(){return this.grapher.getProjection().viewport},e.getProjection=function(){return this.grapher.getProjection()},e.getDefaultViewport=function(){return this.grapher.getDefaultViewport()},e._setViewportWithoutCancellingAnimation=function(e){if(e.isValid()&&!e.equals(this.getViewport())){var t=this.getProjection();this.grapher._setProjection(new u(t.screen,e,t.settings))}},e.setViewport=function(e){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(e)},e.setScreen=function(e){var t=this.getProjection(),n=new u(e,this.getViewportForScreen(t.viewport,e),t.settings);this.grapher._setProjection(n)},e.getTransformedViewport=function(e){var t=this.getProjection(),n=t.pixelsToMath.div(e).mapRect(t.pixelCoordinates);return new s(n.left,n.right,n.bottom,n.top)},e.transformViewport=function(e){this.setViewport(this.getTransformedViewport(e))},e.animateTransformation=function(e){function t(s){r||(r=s);var a=(s-r)/c.ANIMATE_ZOOM_DURATION;o+=a,o<1?(n.__animationTimeout=l.requestAnimationFrame(t),n._setViewportWithoutCancellingAnimation(n.getTransformedViewport(e.pow(a))),n.grapher.debounceUserRequestedViewportChange()):(n.setViewport(i),n.grapher.debounceUserRequestedViewportChange())}var n=this;this.cancelAnimation();var r,i=this.getTransformedViewport(e),o=0;this.__animationTimeout=l.requestAnimationFrame(t)},e.cancelAnimation=function(){l.cancelAnimationFrame(this.__animationTimeout)},e.addMouseWheelEventHandler=function(){var e,n,r=!1;t(window).on("scroll.viewportcontroller-"+this.__id,function(e){r=!0}),t(window).on("mousewheel.viewportcontroller-"+this.__id,function(t){e=t.originalEvent.clientX,n=t.originalEvent.clientY}),t(window).on("mousemove.viewportcontroller-"+this.__id,function(t){if(r){var i=t.originalEvent.clientX-e,o=t.originalEvent.clientY-n,s=i*i+o*o;s<100||(r=!1)}});var i=0,s=function(e,t){var n=this.getProjection();if(!n.settings.config.lockViewport){var s=n.mathToPixels;if(!r){e.preventDefault();var a=this.$[0].getBoundingClientRect(),u=d(e.clientX-a.left,e.clientY-a.top),h=s.mapPoint(d(0,0)),p=Math.abs(u.x-h.x)<50&&Math.abs(u.y-h.y)<50,f=p&&t>0?h:u;if(!(i>0)){i+=1,l.requestAnimationFrame(function(){i--}),t=t>0?1:-1;var m=t>0?c.ZOOM_FACTOR:1/c.ZOOM_FACTOR;this.transformViewport(o.scaleAtPoint(f,m)),this.grapher.debounceUserRequestedViewportChange()}}}};this.$.mousewheel(s.bind(this))},e.handleDoubleClick=function(e){var t=this.getProjection();if(!t.settings.config.lockViewport&&!t.settings.config.disable_dblclick_zooming&&!e.wasHandled()){e.preventDefault();var n=this.$[0].getBoundingClientRect(),r=d(e.clientX-n.left,e.clientY-n.top);this.animateTransformation(o.scaleAtPoint(r,c.DOUBLETAP_ZOOM))}},e.applyPanTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport){var n=d(t[0].x-e[0].x,t[0].y-e[0].y);this.transformViewport(o.translate(n)),this.grapher.debounceUserRequestedViewportChange()}},e.applyScaleTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport){var r=this.grapher.scaleAxis,i=n(e[0],e[1]),s=n(t[0],t[1]),a=s.radius/i.radius,c="y"===r?1:a,l="x"===r?1:a,u=o.scaleAtPoint(i.center,c,l).translate(i.center,s.center);this.transformViewport(u),this.grapher.debounceUserRequestedViewportChange()}},e.addTouchEventHandler=function(){var e=this,n=[],r=!1,i=function(n){e.getProjection().settings.config.lockViewport||n.wasHandled()||r||n.touches.length===n.changedTouches.length&&(r=!0,e.grapher.isDragging=!0,e.controller.dispatch({type:"begin-dragging-grapher"}),t(document).on("dcg-tapmove.graphdrag",c),t(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",l))},o=function(t){if(!(t.length<2)){var n=e.grapher.getProjection(),r=n.pixelCoordinates,i=n.mathToPixels.mapX(0),o=n.mathToPixels.mapY(0);i=Math.min(Math.max(r.left,i),r.right),o=Math.min(Math.max(r.top,o),r.bottom);var s=t[1].x-t[0].x,a=t[1].y-t[0].y,c=40;return Math.abs(t[0].x-i)<c&&Math.abs(t[1].x-i)<c&&Math.abs(a)>3*Math.abs(s)?"y":Math.abs(t[0].y-o)<c&&Math.abs(t[1].y-o)<c&&Math.abs(s)>3*Math.abs(a)?"x":"both"}},s=function(t){return e.grapher.scaleAxis||(e.grapher.scaleAxis=o(t)),e.grapher.scaleAxis},a=function(){e.grapher.scaleAxis=void 0,e.grapher.redrawAllLayers()},c=function(t){if(r&&!e.getProjection().settings.config.lockViewport){var i=h(t.touches,e.$.offset());2===n.length&&2===i.length?(s(i),e.applyScaleTouchChanges(n,i)):a(),1===n.length&&e.applyPanTouchChanges(n,i),n=i}},l=function(i){r&&(e.cancelAnimation(),n=h(i.touches,e.$.offset()),0===i.touches.length&&(r=!1,e.grapher.isDragging=!1,t(document).off(".graphdrag"),e.grapher.debounceUserRequestedViewportChange()),i.touches.length<2&&a())};this.$.css("touch-action","none"),this.$.on("dcg-tapstart",i),this.$.on("dblclick",this.handleDoubleClick.bind(this))},e.zoom=function(e){var t=this.getProjection().pixelCoordinates;"in"===e?this.animateTransformation(o.scaleAtPoint(p(t),2)):"out"===e?this.animateTransformation(o.scaleAtPoint(p(t),.5)):"default"===e&&this.animateTransformation(this.getDefaultZoomTransform());var n=this.grapher.getAudioTrace();n&&n.recomputePoints(),r.alert(this.t("Graph zoom __action__",{action:e}))},e.getDefaultZoomTransform=function(){var e=this.getProjection().viewport,t=this.getDefaultViewport(),n=this.getProjection().pixelCoordinates,r=this.getProjection().mathCoordinates,i=(e.xmax-e.xmin)/(t.xmax-t.xmin),s=(e.ymax-e.ymin)/(t.ymax-t.ymin),a=o.fromRects(r,n),c=new o.translate({x:a.mapX(0),y:a.mapY(0)},{x:0,y:0}),l=new o.scale(i,s),u=new o.translate({x:0,y:0},{x:n.right/2,y:n.bottom/2});return u.compose(l.compose(c))},e.isZoomRestored=function(){var e=this.getProjection(),t=e.viewport,n=this.getDefaultViewport(),r=.05;return e.settings.squareAxes&&Math.abs((t.xmin-n.xmin)/t.xmin)<r&&Math.abs((t.xmax-n.xmax)/t.xmax)<r&&Math.abs((t.ymin-n.ymin)/t.ymin)<r&&Math.abs((t.ymax-n.ymax)/t.ymax)<r},e.getViewportForScreen=function(e,t){var n=this.getProjection(),r=n.settings;if(!r.squareAxes)return e;var i=r.lastChangedAxis;return"y"==i?e.squareXAxis(t):e.squareYAxis(t)},e.enforceSquareAxes=function(){var e=this.getProjection();this.setViewport(this.getViewportForScreen(e.viewport,e.screen))}});return h}),define("lib/conditional_blur",["require","exports","touchtracking","jquery"],function(e,t,n,r){"use strict";function i(){var e=r(document.activeElement);n.elIsFocusable(e)&&r(document.activeElement).blur()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("graphing/poicontroller",["require","jquery","math/distance","lib/rounding","graphing/graphmode","lib/conditional_blur","keys"],function(e){function t(e,t){this.manager=e,this.controller=e.controller,this.graphSettings=t,this.$=this.manager.$,this.__id=c++,this.graphSettings.config.graphpaper&&!this.graphSettings.config.disableMouseInteractions&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler())}var n=e("jquery"),r=e("math/distance"),i=e("lib/rounding"),o=e("graphing/graphmode"),s=e("lib/conditional_blur").default,a=e("keys"),c=0;return t.prototype.remove=function(){this.removeAllGlobalMouseListeners()},t.prototype.addGlobalMouseListener=function(e,t){for(var r=e.split(" "),i=0;i<r.length;i++)n(document).on(r[i]+".dcg-poiController-"+this.__id,t)},t.prototype.removeAllGlobalMouseListeners=function(){n(document).off(".dcg-poiController-"+this.__id)},t.prototype.getToleranceByDevice=function(e){return"touch"===e?20:10},t.prototype.addHoverEventHandler=function(){this.$.on("dcg-tapmove",function(e){if("touch"!==e.device){var t=n(document.elementFromPoint(e.clientX,e.clientY)).closest(".dcg-grapher").length,r=this.getMouseRelativeToGrapher(e),i=this.getToleranceByDevice(e.device),o=t?this.getPOIUnderPoint(r,i):null,s=null;o&&o.isMovable()&&(s=o.getMovablePoint().id);var a=o&&!o.isAttachedToPlottedPoint()?o:null;if(a!==this.manager.poiLabelsLayer.getHoveredPOI()){if(this.graphSettings.config.trace===!1)return;this.manager.poiLabelsLayer.setHoveredPOI(a),this.manager.redrawAllLayers()}s!==this.manager.movablePointsLayer.hoveredPointId&&(this.manager.movablePointsLayer.hoveredPointId=s,this.manager.redrawAllLayers())}}.bind(this))},t.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(e){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device);(this.getPOIUnderPoint(t,n)||this.getBranchInfoUnderPoint(t,n))&&(e.preventDefault(),e.handle())}.bind(this)),this.$.css("touch-action","none"),this.$.on("dcg-tapstart",function(e){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device);s();var r=this.getPOIUnderPoint(t,n);if((!r||!r.isMovable()&&!r.isBareLabel())&&this.togglePOIUnderPoint(t,n))return e.handle(),void e.handle("do-not-clear-poi-labels");if(r&&(r.isMovable()&&(this.controller.dispatch({type:"start-moving-point",pointInfo:r.getMovablePoint()}),this.startMovingPoint(r),e.handle()),!r.isBareLabel()))return void e.handle("do-not-clear-poi-labels");var i=this.getBranchInfoUnderPoint(t,n);if(this.graphSettings.config.onlyTraceSelected){if(i&&i.sketch&&i.sketch.selected)return this.startTracingBranch(i,t),e.handle(),void e.handle("do-not-clear-poi-labels")}else if(i){if(this.controller.dispatch({type:"set-selected-id",id:i.id}),this.graphSettings.config.trace===!1)return;return this.startTracingBranch(i,t),e.handle(),void e.handle("do-not-clear-poi-labels")}i||this.getImgUnderMouse(t,n)||this.controller.dispatch({type:"set-none-selected"});var o=this;this.addGlobalMouseListener("dcg-tapmove",function(){o.removeAllGlobalMouseListeners()}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(e){o.removeAllGlobalMouseListeners();var r=o.getBranchInfoUnderPoint(t,n);if(r&&r.sketch&&!r.sketch.selected)return void this.controller.dispatch({type:"set-selected-id",id:r.id});var i=o.getImgUnderMouse(t,n);return i?void this.controller.dispatch({type:"set-selected-id",id:i.id}):void 0}.bind(this))}.bind(this))},t.prototype.addKeydownEventHandler=function(){this.$.on("keydown",function(e){if(n(document.activeElement).hasClass("dcg-movable-point")){var t=n(document.activeElement).data("movablePoint");if(t){var r,i=this.getElementRelativeToGrapher(e.target),o=0,s=0,c=e.shiftKey?10:2,l=e.shiftKey?"big":"";if(a.lookup(e)===a.UP?(r="y",s-=c,l+="up"):a.lookup(e)===a.DOWN?(r="y",s+=c,l+="down"):a.lookup(e)===a.LEFT?(r="x",o-=c,l+="down"):a.lookup(e)===a.RIGHT&&(r="x",o+=c,l+="up"),0!==o||0!==s){e.preventDefault(),e.stopPropagation();var u,h={x:i.x+o,y:i.y+s},d=this.manager.getProjection();"x"===r?u=[l,""]:"y"===r&&(u=["",l]),this.controller.dispatch({type:"on-move-point",pointInfo:t,screenPt:h,projection:d,keyboardDirection:u})}}}}.bind(this))},t.prototype.getMouseRelativeToGrapher=function(e){var t=this.$[0].getBoundingClientRect(),n=e.touches?e.touches[0]:e,r=this.manager.appliedScaling,i=isNaN(r.x)?1:r.x,o=isNaN(r.y)?1:r.y,s=(n.clientX-t.left)/i,a=(n.clientY-t.top)/o;return{x:s,y:a}},t.prototype.getElementRelativeToGrapher=function(e){var t=this.pageOffset||this.$.offset(),n=this.manager.appliedScaling,r=isNaN(n.x)?1:n.x,i=isNaN(n.y)?1:n.y,o=e.getBoundingClientRect(),s=(o.left-t.left)/r,a=(o.top-t.top)/i;return{x:s,y:a}},t.prototype._getClosestPoint=function(e,t,n){for(var i=n,o=null,s=this.manager.getProjection(),a=0;a<e.length;a++){var c=e[a],l=s.map_pt(c),u=r.hypot(l.x-t.x,l.y-t.y);u<i&&(i=u,o=c)}return o},t.prototype.getPOIUnderPoint=function(e,t){var n=[],r=[],i=[];return this.manager.poiDotsLayer.getDrawnPOI().forEach(function(e){e.isMovable()?n.push(e):e.isAttachedToPlottedPoint()?r.push(e):i.push(e)}),this._getClosestPoint(n,e,t)||this._getClosestPoint(i,e,t)||this._getClosestPoint(r,e,t)},t.prototype.clearOpenedPOI=function(){this.manager.poiLabelsLayer.clearOpenedPOI(),this.manager.redrawAllLayers()},t.prototype.togglePOIUnderPoint=function(e,t){if(this.graphSettings.config.trace!==!1){var n=this.getPOIUnderPoint(e,t);return!!n&&(this.manager.poiLabelsLayer.isOpenPOI(n)?(this.manager.poiLabelsLayer.closePOI(n),this.manager.poiLabelsLayer.setHoveredPOI(null)):(this.manager.poiLabelsLayer.openPOI(n),this.speakPoint(n)),this.manager.redrawAllLayers(),!0)}},t.prototype.getImgUnderMouse=function(e,t){var n=this.manager.getProjection(),r=n.reverse_map_pt(e),i=null,o=function(e,t,n,r){return e<t+.5*Math.abs(n)+r&&e>t-.5*Math.abs(n)+r};for(var s in this.manager.graphImages){var a=this.manager.graphImages[s];if(a&&a.computed_x&&a.computed_y&&a.computed_width&&a.computed_height&&!a.hidden&&!this.controller.isItemSecret(a.id)){for(var c=!1,l=0;l<a.computed_x.length;l++){var u=a.computed_x[l],h=a.computed_y[l],d=a.computed_radian_angle[l],p=u+Math.cos(d)*(r.x-u)-Math.sin(d)*(r.y-h),f=h+Math.sin(d)*(r.x-u)+Math.cos(d)*(r.y-h);if(o(p,a.computed_x[l],a.computed_width[l],0)&&o(f,a.computed_y[l],a.computed_height[l],0)){c=!0;break}}c&&(i={id:s,img:a})}}return i},t.prototype.getBranchInfoUnderPoint=function(e,n){var r=null,i=n,o=this.manager.getProjection(),s=o.reverse_map_pt(e);for(var a in this.manager.graphSketches){var c=this.manager.graphSketches[a];if(c&&c.visible){var l=c.branches;if(l&&l.length)for(var u=0;u<l.length;u++){var h=t.calculateDistanceFromBranch(l[u],s,o);h<i&&(i=h,r={id:a,branch:u,sketch:c})}}}return r},t.calculateDistanceFromBranch=function(e,n,r){var i=t.getBranchesDistanceInfo(e,n,r);return i?i.minDistance:1/0},t.getBranchesDistanceInfo=function(e,t,n){var i=n.screen.width/(n.viewport.xmax-n.viewport.xmin),s=n.screen.height/(n.viewport.ymax-n.viewport.ymin),a=t.x,c=t.y;switch(e.graphMode){case o.Y:break;case o.X:var l=a;a=c,c=l,l=i,i=s,s=l;break;default:return null}for(var u,h,d=1/0,p=1/0,f=0;f<e.segments.length;f++)for(var m=e.segments[f],g=0;g<m.length-3;g+=2){var y=m[g],v=m[g+1],b=m[g+2],x=m[g+3],_=r.closestPointOnSegment(0,0,(y-a)*i,(v-c)*s,(b-a)*i,(x-c)*s),w=r.hypot(_[0],_[1]);_[0]<0?w<d&&(d=w,u=_):w<p&&(p=w,h=_)}var E=d<p?u:h;if(!E)return null;var S=E[0]/i+a,M=E[1]/s+c;return{closestPoint:{x:e.graphMode===o.Y?S:M,y:e.graphMode===o.Y?M:S},minDistance:Math.min(d,p),secondDistance:Math.max(d,p)}},t.getBranchesTracePoint=function(e,n,r){if(e&&e.compiled&&e.compiled.fn){var s=e.compiled.fn,a=r.screen.width/(r.viewport.xmax-r.viewport.xmin),c=r.screen.height/(r.viewport.ymax-r.viewport.ymin),l=this.getBranchesDistanceInfo(e,n,r);
if(!l)return null;var u=l.minDistance/l.secondDistance;u*=u;var h=e.graphMode===o.Y?"x":"y",d=l.closestPoint[h]*(1-u)+n[h]*u,p=1/(2*a),f=1/(2*c),m=s(d-p),g=s(d),y=s(d+p),v=p*Math.min(1,f/Math.abs(m-g)),b=p*Math.min(1,f/Math.abs(y-g));isFinite(v)||(v=p),isFinite(b)||(b=p),d=i.shortestDecimalBetween(d-v,d+b);var x=t.fillHole(s,d,a,c,n.x,n.y);return{x:e.graphMode===o.Y?d:x,y:e.graphMode===o.Y?x:d}}},t.prototype.startMovingPoint=function(e){var t=!1;this.manager.movablePointsLayer.pressedPointId=e.isMovable()?e.getMovablePoint().id:null,this.manager.redrawAllLayers();var n=null,r=function(){if(n){t=!0;var r=this.manager.getProjection(),i=this.getMouseRelativeToGrapher(n);n=null,this.controller.dispatch({type:"on-move-point",pointInfo:e.getMovablePoint(),screenPt:i,projection:r})}}.bind(this);this.manager.registerMovablePointListener(r),this.addGlobalMouseListener("dcg-tapmove",function(e){n=e}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(n){if(r(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.pressedPointId=null,this.manager.redrawAllLayers(),this.controller.dispatch({type:"stop-moving-point",pointInfo:e.getMovablePoint()}),!t){var i=this.manager.getProjection(),o=this.getToleranceByDevice(n.device),s=i.map_pt(e);this.togglePOIUnderPoint(s,o)}}.bind(this))},t.prototype.startTracingBranch=function(e,n){this.manager.markLabelsDirty(),this.last_screen_pt=n;var r=this.manager.getProjection(),i=r.reverse_map_pt(n),o=e.sketch,s=o.branches[e.branch],a=t.getBranchesTracePoint(s,i,r);a&&this.speakPoint(a),this.manager.traceLayer.traceInfo={pt:a,branchInfo:e},this.manager.redrawAllLayers(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))},t.prototype.stopTracingBranch=function(e){this.manager.markLabelsDirty();var t=this.manager.poiLabelsLayer.getHoveredPOI();t&&!this.manager.poiLabelsLayer.isOpenPOI(t)&&(this.manager.poiLabelsLayer.openPOI(t),this.speakPoint(t),this.manager.redrawAllLayers()),this.last_screen_pt=null,this.manager.traceLayer.traceInfo=null,this.manager.redrawAllLayers(),this.removeAllGlobalMouseListeners()},t.prototype.handleTraceUpdate=function(e){if(this.manager.traceLayer.traceInfo){var n,r=this.manager.getProjection();if(e)n=this.getMouseRelativeToGrapher(e),this.last_screen_pt=n,this.manager.markLabelsDirty();else{if(!this.last_screen_pt)return;n=this.last_screen_pt}var i=r.reverse_map_pt(n),o=1/0,s=-1,a=this.manager.traceLayer.traceInfo,c=this.manager.graphSketches[a.branchInfo.sketch.id];if(c){a.branchInfo.sketch=c;for(var l=a.branchInfo.sketch.branches,u=0;u<l.length;u++){var h=t.calculateDistanceFromBranch(l[u],i,r);h<o&&(s=u,o=h)}var d=l[s],p=d?t.getBranchesTracePoint(d,i,r):null;p&&this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=s,this.manager.traceLayer.traceInfo.pt=p,this.manager.redrawAllLayers()}}},t.prototype.speakPoint=function(e){var t=this.manager.getAudioTrace();t&&e&&t.queueCoordinates(e,void 0,!0)},t.fillHole=function(e,t,n,i,o,s){var a=e(t);if(isFinite(a))return a;var c=t-1e-11,l=t+1e-11,u=e(c),h=e(l);if(isNaN(u)&&isNaN(h))return NaN;if(isNaN(u))return h;if(isNaN(h))return u;var d=(o-c)*n,p=(o-l)*n,f=(s-u)*i,m=(s-h)*i;return r.hypot(d,f)<r.hypot(p,m)?u:h},t}),define("graphing/audiographnavigator",["require","underscore","pjs","lib/aria","graphing/graphmode","./label","i18n","math/poi"],function(e){var t=e("underscore"),n=e("pjs"),r=e("lib/aria"),i=e("graphing/graphmode"),o=e("./label"),s=e("i18n"),a=e("math/poi").default,c=n(function(e){e.init=function(e,t,n){this.grapher=t,this.controller=this.grapher.controller,this.tonegen=n,this.tonegen.audioPointMove=this.drawTrace.bind(this),this.tonegen.audioPointReset=this.resetTracePoint.bind(this),this.audiograph=e,this.reset()},e.reset=function(){this.currentPoint=null,this.branch=0,this.pois=[],this.independent=0,this.xmid=0,this.xstep=0,this.ymid=0,this.ystep=0},e.t=function(e,t){return s.t(e,t,this.grapher.settings.language)},e.getBranchPoints=function(e){var t=[];if(!isNaN(e)&&e>=0)for(var n=this.getPoints(),r=0;r<n.length;r++){var i=n[r];i.hasOwnProperty("branch")&&i.branch===e&&t.push(i)}return t},e.resetTracePoint=function(){var e=this.getCurrentPoint();this.drawTrace(e)},e.drawTrace=function(e){var t=this.getCurrentSketch();if(e&&t){var n={x:e.x,y:e.y};this.grapher.traceLayer.traceInfo={branchInfo:{branch:e.branch,id:t.id,sketch:t},pt:n},this.grapher.redrawAllLayers()}},e.moveToOrigin=function(){var e=this.getCurrentSketch();if(e){var t=e.branches[0].graphMode;t===i.Y||t===i.POLAR?this.setIndependent("x",0):t===i.X&&this.setIndependent("y",0)}},e.getCurrentSketch=function(){var e=this.controller.getSelectedItem();return e?this.grapher.getGraphSketch(e.id):null},e.getFirstTraceableSketch=function(e){for(var t=null,n=this.controller.getItemCount(),r=0;r<n;r++){var i=this.controller.getItemModelByIndex(r);if(this.canTrace(i)){t=this.grapher.getGraphSketch(i.id),e&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:r});break}}return t},e.canTrace=function(e){if(e&&!e.hidden&&e.formula&&!e.formula.error){var t=this.grapher.getGraphSketch(e.id);if(t){var n=t.branches[0].graphMode;return n===i.X||n===i.Y}}return!1},e.computeStepSizes=function(){var e=this.grapher.getProjection().viewport;if(e){this.viewport=e;var t=e.xmin,n=e.xmax;this.xmid=(t+n)/2,this.xstep=Math.abs(n-t)/100,this.xscale=n-t;var r=e.ymin,o=e.ymax;this.ymid=(r+o)/2,this.ystep=Math.abs(o-r)/100,this.yscale=o-r,this.tonegen.setMinMax(t,n,r,o);var s=this.getCurrentSketch();if(s){var a=s.branches[0].graphMode;a===i.Y||a===i.POLAR?this.independent<t?this.independent=t:this.independent>n&&(this.independent=n):a===i.X&&(this.independent<r?this.independent=r:this.independent>o&&(this.independent=o))}}},e.getPoint=function(e,t){var n=null,r=this.getCurrentSketch();if(r){var o,s,a,c,l,u=null;r.branches[e].compiled&&(s=r.branches[e].compiled.fn,o=r.branches[e].graphMode,o===i.Y?(u=this.getInterveningPOIs(t,t+this.xstep,e,o)[0],u&&u.x===t&&u.branch===e?(isNaN(u.y)||!isNaN(u.y)&&(u.y<this.viewport.ymin||this.viewport.ymax<u.y))&&(u.y=void 0):(u=null,l=s(t),(isNaN(l)||!isNaN(l)&&(l<this.viewport.ymin||this.viewport.ymax<l))&&(l=void 0)),n=u?{x:u.x,y:u.y,type:u.type,typeChain:u.typeChain,branch:u.branch,graphMode:o,intersects:u.intersects}:{x:t,y:l,branch:e,graphMode:o}):o===i.X?(u=this.getInterveningPOIs(t,t+this.ystep,e,o)[0],u&&u.y===t&&u.branch===e?(isNaN(u.x)||!isNaN(u.x)&&(u.x<this.viewport.xmin||this.viewport.xmax<u.x))&&(u.x=void 0):(u=null,l=s(t),(isNaN(l)||!isNaN(l)&&(l<this.viewport.xmin||this.viewport.xmax<l))&&(l=void 0)),n=u?{x:u.x,y:u.y,type:u.type,typeChain:u.typeChain,branch:u.branch,graphMode:o,intersects:u.intersects}:{y:t,x:l,branch:e,graphMode:o}):o===i.POLAR&&(c=t,a=s(t),n={x:a*Math.cos(c),y:a*Math.sin(c),branch:e,graphMode:o}))}return n},e.getPoints=function(){var e=[],t=this.getCurrentSketch();if(t){var n,r,o,s,a,c=t.branches[0].graphMode;for(c===i.Y||c===i.POLAR?(n=this.viewport.xmin,r=this.viewport.xmax,o=this.xstep):c===i.X&&(n=this.viewport.ymin,r=this.viewport.ymax,o=this.ystep),s=0;s<t.branches.length;s++)for(a=n;a<=r;a+=o){var l=this.getInterveningPOIs(a,a+o,s,c)[0];l?e.push(l):e.push(this.getPoint(s,a))}}return e},e.getCurrentPoint=function(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint},e.updateCurrentPoint=function(e){this.currentPoint=e||this.getPoint(this.branch,this.independent)},e.prevPoint=function(){this.moveToPoint(-1)},e.nextPoint=function(){this.moveToPoint(1)},e.firstPoint=function(){var e=this.getCurrentSketch();if(e){var t=e.branches[0].graphMode;t===i.Y||t===i.POLAR?this.independent=this.viewport.xmin:t===i.X&&(this.independent=this.viewport.ymin),this.branch=0,this.updateCurrentPoint()}},e.lastPoint=function(){var e=this.getCurrentSketch();if(e){var t=e.branches[0].graphMode;t===i.Y||t===i.POLAR?this.independent=this.viewport.xmax:t===i.X&&(this.independent=this.viewport.ymax),this.branch=e.branches.length-1,this.updateCurrentPoint()}},e.moveToPoint=function(e){var t=this.getCurrentSketch();if(t){var n,o,s,a=t.branches.length-1,c=t.branches[0].graphMode;c===i.Y||c===i.POLAR?(n=this.viewport.xmin,o=this.viewport.xmax,s=this.xstep):c===i.X&&(n=this.viewport.ymin,o=this.viewport.ymax,s=this.ystep);var l,u,h,d,p,f,m=(o-n)%s,g=this.independent,y=this.branch,v=this.getCurrentPoint(),b=!1;do{for(l=g+e*(s-e*(g%m)),(e===-1&&l<n||1===e&&l>o)&&(a>0&&(h=y+e,e===-1?(h=Math.max(h,0),h!==y&&(y=h,l=o)):(h=Math.min(h,a),h!==y&&(y=h,l=n))),l<=n&&0===y?(l=n,r.queue(this.t("First point"))):l>=o&&y===a&&(l=o,r.queue(this.t("Last point")))),d=this.getInterveningPOIs(g,l,y,c),p=0;p<d.length;p++)if(f=d[p],f&&(c===i.Y&&f.x!==v.x||c===i.X&&f.y!==v.y||f.branch!==v.branch)){u=f,b=!0;break}b||(u=this.getPoint(y,l)),g=l}while(v.x===u.x&&v.y===u.y&&v.type===u.type&&v.branch===u.branch&&l!==n&&l!==o);c===i.Y||c===i.POLAR?this.independent=u.x:c===i.X&&(this.independent=u.y),this.branch=y,this.updateCurrentPoint()}},e.prevPOI=function(){this.moveToPOI(-1)},e.nextPOI=function(){this.moveToPOI(1)},e.getSortedPOI=function(){return this.pois&&0!==this.pois.length||this.updatePOI(),this.pois},e.updatePOI=function(){var e,n=[],r=this.getCurrentSketch();r&&(e=r.branches[0].graphMode,n=r.getPOI(),e===i.Y||e===i.POLAR?n=t.sortBy(t.sortBy(n,"x"),"branch"):e===i.X&&(n=t.sortBy(t.sortBy(n,"y"),"branch"))),this.pois=this.removeDuplicates(n,e)},e.removeDuplicates=function(e,t){var n,r,i,s,c,l,u,h,d=0;if(e.length>0)do n=o.value(e[d].x).value,r=o.value(e[d].y).value,i=e[d].type,s=e[d].branch,e[d].typeChain||(e[d].typeChain=[i]),d+1<e.length?(c=o.value(e[d+1].x).value,l=o.value(e[d+1].y).value,u=e[d+1].type,h=e[d+1].branch):c=l=u=h=void 0,n===c&&r===l&&s===h?(e[d].typeChain.indexOf(u)===-1&&(e[d].typeChain.push(u),u===a.INTERSECTION&&(e[d].intersects=e[d+1].intersects)),e.splice(d+1,1)):d++;while(d<e.length);return e},e.getInterveningPOIs=function(e,t,n,r){for(var o,s=[],a=this.getSortedPOI(),c=0;c<a.length;c++)r===i.Y||r===i.POLAR?o=a[c].x:r===i.X&&(o=a[c].y),a[c].branch===n&&(e<=o&&o<t||t<=o&&o<e)&&s.push(a[c]);return e>t?s.reverse():s},e.setIndependent=function(e,t){for(var n=this.getPoints(),r=0;r<n.length;r++){var i=n[r];if(i.hasOwnProperty(e)&&i[e]===t){if("x"===e)return this.independent=i.x,void this.updateCurrentPoint();if("y"===e)return this.independent=i.y,void this.updateCurrentPoint()}}"x"===e?this.independent=this.xmid:"y"===e&&(this.independent=this.ymid),this.updateCurrentPoint(),this.branch=0},e.moveToPOI=function(e){var t=this.getCurrentSketch();if(t){var n,o,s,a,c,l,u,h,d,p=this.getCurrentPoint(),f=t.branches[0].graphMode,m=this.branch;f===i.Y||f===i.POLAR?(s=this.xstep,n=1===e?this.viewport.xmin:this.viewport.xmax,o=1===e?this.viewport.xmax:this.viewport.xmin,a=(this.viewport.xmax-this.viewport.xmin)%this.xstep):f===i.X&&(s=this.ystep,n=1===e?this.viewport.ymin:this.viewport.ymax,o=1===e?this.viewport.ymax:this.viewport.ymin,a=(this.viewport.ymax-this.viewport.ymin)%this.ystep);var g=!1;c=this.independent;do{for(d=c+e*(s-e*(c%a)),u=this.getInterveningPOIs(c,d,m,f),l=0;l<u.length;l++)if(h=u[l],h&&(f===i.Y&&h.x!==this.independent||f===i.X&&h.y!==this.independent||h.branch!==p.branch)){f===i.Y||f===i.POLAR?this.independent=h.x:f===i.X&&(this.independent=h.y),this.branch=h.branch,this.updateCurrentPoint(h),g=!0;break}g||(c=d,(1===e&&c>o||e===-1&&c<o)&&(c=n,m+=e))}while(!g&&m>=0&&m<t.branches.length&&(1===e&&c<=o||e===-1&&c>=o));g||r.queue(this.t("No more points of interest"))}},e.prevCurve=function(){var e=this.controller.getSelectedItem();if(e){var t=e.index,n=this.controller.getItemModelByIndex(this.findPrevTraceableIndex(t));n&&this.controller.dispatch({type:"set-selected-id",id:n.id}),this.controller.getSelectedItem()!==e&&this.audiograph.enterAudioTrace()}},e.nextCurve=function(){var e=this.controller.getSelectedItem();if(e){var t=e.index,n=this.controller.getItemModelByIndex(this.findNextTraceableIndex(t));n&&this.controller.dispatch({type:"set-selected-id",id:n.id}),this.controller.getSelectedItem()!==e&&this.audiograph.enterAudioTrace()}},e.findPrevTraceableIndex=function(e){var t;do e--,t=this.controller.getItemModelByIndex(e);while(t&&!this.canTrace(t));return t?e:void 0},e.findNextTraceableIndex=function(e){var t;do e++,t=this.controller.getItemModelByIndex(e);while(t&&!this.canTrace(t));return t?e:void 0}});return c}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("base64",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.base64js=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({"/":[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,s,a,c=e.length;s=r(e),a=new h(3*c/4-s),i=s>0?c-4:c;var l=0;for(t=0,n=0;t<i;t+=4,n+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[l++]=o>>16&255,a[l++]=o>>8&255,a[l++]=255&o;return 2===s?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[l++]=255&o):1===s&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[l++]=o>>8&255,a[l++]=255&o),a}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function a(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,c=0,u=n-r;c<u;c+=s)o.push(a(e,c,c+s>u?u:c+s));return 1===r?(t=e[n-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=c;for(var l=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,f=d.length;p<f;++p)l[p]=d[p],u[d.charCodeAt(p)]=p;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}]},{},[])("/")}),define("bin",["base64"],function(e){var t={};return{load:function(e,n,r,i){var o=n.toUrl("assets_src/"+e);if(i.isBuild){var s=require.nodeRequire("fs");t[e]=s.readFileSync(o).toString("base64"),r()}else{var a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=function(){r(a.response)},a.send()}},write:function(e,n,r,i){n in t?r("define('"+e+"!"+n+"', ['base64'], function (base64) {  return base64.toByteArray('"+t[n]+"').buffer;});"):console.log("ERROR - failed to find file "+n+" in buildMap")}}}),define("bin!audio/poi.mp3",["base64"],function(e){return e.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer}),define("graphing/tonegenerator",["require","pjs","bugsnag","browser","graphing/graphmode","math/poi","bin!audio/poi.mp3"],function(e){var t=e("pjs"),n=e("bugsnag"),r=e("browser"),i=e("graphing/graphmode"),o=e("math/poi").default,s=e("bin!audio/poi.mp3"),a=t(function(e){e.init=function(e){if(this.toneType=e,this.pointArray=[],this.pointIndex=0,this.isPlaying=!1,this.audioSpeed=50,this.freqMin=125,this.freqBase=500,this.freqMax=2e3,this.audioPointMove=function(){},this.audioPointReset=function(){},this.playbackSupported)try{this.createNoiseNode()}catch(e){this.playbackSupported=!1}},e.createNoiseNode=function(){this.noiseNode&&(this.noiseNode.stop(),this.noiseNode.disconnect(),this.noiseNode=null);for(var e=2*this.audioCtx.sampleRate,t=0,n=this.audioCtx.createBuffer(1,e,this.audioCtx.sampleRate),r=n.getChannelData(0),i=0;i<e;i++){var o=2*Math.random()-1;r[i]=(t+.02*o)/1.02,t=r[i]}return this.noiseNode=this.audioCtx.createBufferSource(),this.noiseNode.buffer=n,this.noiseNode.loop=!0,this.noiseNode.start(),this},e.setMinMax=function(e,t,n,r){return this.xmin=e,this.xmax=t,this.ymin=n,this.ymax=r,this},e.queueArray=function(e){return e&&e.length&&(this.pointArray=this.pointArray.concat(e),this.pointIndex=0),this},e.queuePoint=function(e){return e&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&(this.continuousPlay&&(this.pointArray.length=0),this.pointArray.push(e),this.pointIndex=0),this},e.createOscillator=function(e,t,n,i,o){return this.playbackSupported&&(this.oscillator=this.audioCtx.createOscillator(),this.oscillator.type=this.toneType||"sine",this.oscillatorHigh=this.audioCtx.createOscillator(),this.oscillatorHigh.type=this.toneType||"sine",this.gainOscillatorHigh=this.audioCtx.createGain(),this.gainOscillatorHigh.gain.value=.7,this.oscillatorHigh.connect(this.gainOscillatorHigh),this.gainLeft=this.audioCtx.createGain(),this.gainRight=this.audioCtx.createGain(),this.gainMaster=this.audioCtx.createGain(),this.splitter=this.audioCtx.createChannelSplitter(2),this.merger=this.audioCtx.createChannelMerger(2),this.oscillator.connect(this.splitter),this.splitter.connect(this.gainLeft,0),this.splitter.connect(this.gainRight,0),this.gainLeft.connect(this.merger,0,0),this.gainRight.connect(this.merger,0,1),this.merger.connect(this.gainMaster),this.gainMaster.connect(this.audioCtx.destination),r.IS_APPLE?this.masterVolume=1:this.masterVolume=.5,this.setPan(e),this.setFreq(t),this.setOriginCues(n,i,o)),this},e.startContinuousPlay=function(){return this.continuousPlay=!0,this},e.play=function(){if(this.pointArray.length>0&&this.pointIndex<this.pointArray.length){var e,t,n,r,s,a=1===this.pointArray.length,c=this.pointArray[this.pointIndex];if(c.graphMode&&c.graphMode!==i.Y&&c.graphMode!==i.POLAR?c.graphMode===i.X&&(t=void 0===c.x||c.x<this.xmin||c.x>this.xmax?-1:Math.abs((c.x-this.xmin+1e-5)/(this.xmax-this.xmin)),e=Math.abs((c.y-this.ymin+1e-5)/(this.ymax-this.ymin)),n=c.y,r=c.x):(e=Math.abs((c.x-this.xmin+1e-5)/(this.xmax-this.xmin)),t=void 0===c.y||c.y<this.ymin||c.y>this.ymax?-1:Math.abs((c.y-this.ymin+1e-5)/(this.ymax-this.ymin)),n=c.x,r=c.y),s=c.typeChain&&c.typeChain.indexOf(o.INTERSECTION)!==-1?o.INTERSECTION:c.type,this.isPlaying?(this.setPan(e),this.setFreq(t),this.setOriginCues(n,r,s)):(this.resume(),this.createOscillator(e,t,n,r,s),this.playbackSupported&&(this.oscillator.start(),this.oscillatorHigh.start()),this.isPlaying=!0),this.continuousPlay)return;this.audioPointMove(c),a?(this.gainMaster.gain.value=this.masterVolume,this.playTimeout=setTimeout(this.play.bind(this),50)):this.playTimeout=setTimeout(this.play.bind(this),this.audioSpeed),this.pointIndex++}else this.stop();return this},e.setPan=function(e){return this.playbackSupported&&(isFinite(e)||(e=0),e=Math.max(Math.min(e,1),0),this.gainLeft.gain.value=Math.cos(Math.PI/2*e),this.gainRight.gain.value=Math.sin(Math.PI/2*e)),this},e.setFreq=function(e){if(this.playbackSupported){var t;void 0===e||isNaN(e)||e<=0?t=null:(t=parseInt(this.freqBase*Math.pow(2,e),10),t<this.freqMin&&(t=this.freqMin),t>this.freqMax&&(t=this.freqMax)),t?(this.oscillator.frequency.value=t,this.noiseNode.disconnect(),this.oscillator.connect(this.splitter)):(this.oscillator.disconnect(),this.oscillatorHigh.disconnect(),this.noiseNode.connect(this.splitter))}return this},e.setOriginCues=function(e,t,n){return void 0===e||isNaN(e)||void 0===t||isNaN(t)||(e<0?(this.oscillatorHigh.frequency.value=2*this.oscillator.frequency.value,this.gainOscillatorHigh.connect(this.splitter)):this.gainOscillatorHigh.disconnect(),t<0?this.noiseNode.connect(this.splitter):this.noiseNode.disconnect(),isNaN(n)||n!==o.INTERSECTION||this.playPOI()),this},e.stop=function(){return this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),this.pointArray.length=0,this.pointIndex=0,this.isPlaying&&(this.playbackSupported&&(this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.oscillatorHigh&&(this.oscillatorHigh.stop(),this.oscillatorHigh.disconnect(),this.oscillatorHigh=null),this.noiseNode.disconnect()),this.isPlaying=!1),this.audioPointReset(),this.continuousPlay=!1,this},e.suspend=function(){return this.playbackSupported&&this.audioCtx&&(this.stop(),this.noiseNode&&(this.noiseNode.stop(),this.noiseNode=null),this.audioCtx.suspend()),this},e.resume=function(){if(!this.audioCtx){var e=window.AudioContext||window.webkitAudioContext;if(r.IS_IE)this.playbackSupported=!1,this.audioCtx=null;else try{this.audioCtx=e?new e:void 0,this.playbackSupported=!0}catch(e){n.notify(e),this.playbackSupported=!1,this.audioCtx=null}}return this.playbackSupported&&this.audioCtx&&("suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.createNoiseNode(),this.loadPOI()),this},e.loadPOI=function(){return!this.playbackSupported||this.poiBuffer?this:(this.audioCtx.decodeAudioData(s.slice(0),function(e){this.poiBuffer=e}.bind(this)),this)},e.playPOI=function(){if(!this.playbackSupported||!this.poiBuffer)return this;var e=this.audioCtx.createBufferSource();e.buffer=this.poiBuffer,e.connect(this.splitter),e.start()}});return a}),define("graphing/audiograph",["require","exports","lib/aria","graphing/audiographnavigator","browser","keys","graphing/tonegenerator","graphing/graphmode","i18n","graphing/label","math/poi","graphing-calc/models/expression"],function(e,t,n,r,i,o,s,a,c,l,u,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=0,p=function(){function e(e){var t=this;this.__id=d++,this.grapher=e,this.controller=e.controller,this.audioTraceActive=!1,this.wasFocusInExpressionsView=!1,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=0,this.tonegen=s("triangle"),this.tonegen.suspend(),this.agNavigator=new r(this,this.grapher,this.tonegen),this.grapher.$root.on("keydown.audiograph-"+this.__id,function(e){return t.handleKeydown(e)})}return e.prototype.remove=function(){this.grapher.$root.off(".audiograph-"+this.__id)},e.prototype.t=function(e,t){return c.t(e,t,this.grapher.settings.language)},e.prototype.handleKeydown=function(e){var t=e.altKey||e.metaKey,n=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,r=e.ctrlKey&&!e.metaKey&&!e.altKey,s=i.IS_APPLE?r:t,a=s&&e.shiftKey&&(61===e.which||187===e.which),c=s&&!e.shiftKey&&(173===e.which||189===e.which),l=s&&!e.shiftKey&&"0"===o.lookupChar(e);n&&"S"===o.lookupChar(e)?this.controller.getSelectedItem()&&this.isFocusInExpressionsView()&&(e.preventDefault(),e.stopPropagation(),this.describeGraph()):n&&"T"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):a?(e.preventDefault(),e.stopPropagation(),this.zoom("in")):c?(e.preventDefault(),e.stopPropagation(),this.zoom("out")):l?(e.preventDefault(),e.stopPropagation(),this.zoom("default")):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):this.audioTraceKeydown(e))},e.prototype.sliderTraceKeydown=function(e){var t=e.altKey||e.metaKey,n=!t&&!e.ctrlKey&&!e.shiftKey;n&&o.lookup(e)===o.LEFT||"J"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):n&&o.lookup(e)===o.RIGHT||"L"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):n&&o.lookup(e)===o.PAGEDOWN?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):n&&o.lookup(e)===o.PAGEUP?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):t||o.lookup(e)!==o.DOWN&&(e.shiftKey||o.lookup(e)!==o.TAB)&&"K"!==o.lookupChar(e)?!t&&(o.lookup(e)===o.UP||e.shiftKey&&o.lookup(e)===o.TAB||"I"===o.lookupChar(e))?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):n&&o.lookup(e)===o.HOME||"U"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):n&&o.lookup(e)===o.END||"N"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):n&&"P"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleSliderAnimation()):(this.stopAnimations(),this.audioTraceKeydown(e)):(e.preventDefault(),e.stopPropagation(),this.nextSlider())},e.prototype.audioTraceKeydown=function(e){var t=this,r=e.altKey||e.metaKey,i=r&&!e.ctrlKey&&!e.shiftKey,s=!r&&!e.ctrlKey&&!e.shiftKey;if(o.lookup(e)===o.UP&&i)e.preventDefault(),e.stopPropagation(),this.agNavigator.prevCurve();else if(o.lookup(e)===o.DOWN&&i)e.preventDefault(),e.stopPropagation(),this.agNavigator.nextCurve();else if(s&&o.lookup(e)===o.LEFT||o.lookup(e)===o.UP||"J"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.prevPoint(),this.reportAudioTrace();else if(s&&o.lookup(e)===o.RIGHT||o.lookup(e)===o.DOWN||"L"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.nextPoint(),this.reportAudioTrace();else if(r||o.lookup(e)!==o.PAGEDOWN&&(e.shiftKey||o.lookup(e)!==o.TAB)&&"I"!==o.lookupChar(e))if(!r&&(o.lookup(e)===o.PAGEUP||e.shiftKey&&o.lookup(e)===o.TAB||"K"===o.lookupChar(e)))e.preventDefault(),e.stopPropagation(),this.agNavigator.prevPOI(),this.reportAudioTrace();else if(s&&o.lookup(e)===o.HOME||"U"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.firstPoint(),this.reportAudioTrace();else if(s&&o.lookup(e)===o.END||"N"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.lastPoint(),this.reportAudioTrace();else if(s&&"X"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("x");else if(s&&"P"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.queuePOICount(),n.alert();else if(s&&"Y"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("y");else if(s&&"T"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("type");else if(s&&"B"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("branch");else if(s&&"O"===o.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.agNavigator.moveToOrigin(),this.reportAudioTrace();else if(s&&"H"===o.lookupChar(e))if(e.preventDefault(),e.stopPropagation(),this.tonegen.playbackSupported){this.tonegen.stop();var a=this.agNavigator.getPoints();a.length>0?(n.alert(this.t("Playing graph.")),this.tonegen.queueArray(a),setTimeout(function(){return t.tonegen.play()},500)):n.alert(this.t("Graph is empty."))}else n.alert(this.t("Unable to play audio."));else if(s&&o.lookupChar(e)>="0"&&o.lookupChar(e)<="9"){e.preventDefault(),e.stopPropagation(),this.tonegen.stop();var c=this.agNavigator.getCurrentSketch();if(c){var l=void 0;if(l=48===e.which?9:e.which-49,l<c.branches.length)if(this.tonegen.playbackSupported){var u=this.agNavigator.getBranchPoints(l);0===u.length?n.alert(this.t("Branch __branch__ is empty.",{branch:l+1})):(n.alert(this.t("Branch __branch__",{branch:l+1})),this.tonegen.queueArray(u),setTimeout(function(){return t.tonegen.play()},500))}else n.alert(this.t("Unable to play audio."));else n.alert(this.t("Branch __branch__ does not exist.",{branch:l+1}))}else n.alert(this.t("No graph selected."))}else r&&o.lookupChar(e)>="1"&&o.lookupChar(e)<="5"?(e.preventDefault(),e.stopPropagation(),this.adjustPlaybackSpeed(o.lookupChar(e))):s&&"A"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.queueAnimatingPoints(!0),n.alert()):s&&"S"===o.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace()):s&&this.exitAudioTrace();else e.preventDefault(),e.stopPropagation(),this.agNavigator.nextPOI(),this.reportAudioTrace()},e.prototype.describeGraph=function(){var e=this.agNavigator.getCurrentSketch();if(e){var t=e.branches.length;t>1&&n.queue(this.t("Branches: __branches__.",{branches:t}));var r=this.agNavigator.getSortedPOI();if(n.queue(this.t("Points of interest: __poiCount__.",{poiCount:r.length})),r.length>0)for(var i=0;i<r.length;i++)this.queueCoordinates(r[i])}else n.queue(this.t("No graph information available."));n.alert()},e.prototype.queueCoordinates=function(e,t,r){if(void 0===r&&(r=!1),e){var i=this.agNavigator.getCurrentSketch();(e.hasOwnProperty("branch")&&i&&i.branches.length>1&&this.lastSpokenBranch!==e.branch||"branch"===t)&&n.queue(this.t("Branch __branch__.",{branch:e.branch+1})),this.lastSpokenBranch=e.branch,e.hasOwnProperty("type")&&!t?n.queue(this.t("__type__ at",{type:this.describePOI(e)})):"type"===t&&n.queue(this.describePOI(e)),t&&"x"!==t||n.queue(this.t("X: __x__.",{x:l.value(e.x,this.agNavigator.xscale).ariaString})),t&&"y"!==t||n.queue(this.t("Y: __y__.",{y:l.value(e.y,this.agNavigator.yscale).ariaString})),r&&n.alert()}},e.prototype.describePOI=function(e){if(e.typeChain){for(var t=[],n=0;n<e.typeChain.length;n++)t.push(this.poiTypeToText(e,n));return t.join(", ")}return this.poiTypeToText(e)},e.prototype.poiTypeToText=function(e,t){var n=t?e.typeChain[t]:e.type;switch(n){case u.default.INTERSECTION:var r=this.getIntersectingCurves(e);return""!==r?this.t("Intersection with __curves__",{curves:r}):this.t("Intersection");case u.default.ZERO:return this.t("Zero");case u.default.INTERCEPT:return this.t("Intercept");case u.default.EXTREMUM:return this.t("Extremum");case u.default.EDGE:return this.t("Edge");case u.default.DEFINITION:return this.t("Definition");case u.default.TRACE:return this.t("Trace");case u.default.LABEL:return this.t("Label");default:return this.t("Not a P O I")}},e.prototype.getIntersectingCurves=function(e){return e&&e.intersects?this.getExpressionAriaLabel(e.intersects):"";
},e.prototype.getExpressionAriaLabel=function(e){var t=this.controller.getItemModel(e);return t&&"expression"===t.type?t.label?t.label:this.controller.isItemSecret(t.id)?this.t("Secret expression __index__",{index:t.secretIndex}):this.t("Expression __index__",{index:t.displayIndex}):""},e.prototype.exitAudioTrace=function(e){if(this.audioTraceActive){if(this.audioTraceActive=!1,e||(e=this.t("Audio trace off.")),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView){var t=this.controller.getSelectedItem();t&&this.controller.isItemSelectable(t.id)||(t=this.controller.getFirstFullyVisibleItem()),t&&this.controller.isItemSelectable(t.id)&&this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"end"})}this.wasFocusInExpressionsView=!1,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.suspend(),this.agNavigator.reset(),this.lastSpokenBranch=0,this.grapher.traceLayer.traceInfo=null,this.grapher.redrawAllLayers(),n.alert(e),this.resumeAnimations()}},e.prototype.isFocusInExpressionsView=function(){return!!this.controller.getFocusedItem()},e.prototype.enterAudioTrace=function(){var e=this,t=!1;this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),t=!this.wasFocusInExpressionsView);var r;if(t)r=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else{var o=this.controller.getSelectedItem();if(o&&"expression"===o.type&&o.formula&&o.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.t("No graph to trace.")}});r=this.agNavigator.getCurrentSketch()}if(!r)return this.agNavigator.reset(),this.lastSpokenBranch=0,this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.t("No graph to trace.")}});var s=r.branches[0].graphMode;return s===a.IMPLICIT?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.t("Sorry, but I can't trace implicit curves yet.")}})):s===a.PARAMETRIC?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.t("Sorry, but I can't trace parametric curves yet.")}})):(this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=0,this.audioTraceActive||(this.grapher.poiLabelsLayer.clearOpenedPOI(),this.grapher.redrawAllLayers(),this.wasFocusInExpressionsView&&this.grapher.$root.find(".dcg-audio-trace-placeholder").focus(),this.controller.dispatch({type:"toast/show",toast:{message:this.t("Audio trace on."),noAria:!0,onHide:function(){return e.exitAudioTrace()},hideAfter:0}}),n.queue(this.t("Audio trace on.")),this.pauseAnimations(),this.queueAnimatingPoints(!1),n.queue(this.t("Use Arrow keys to navigate.")),this.tonegen.resume(),this.tonegen.playbackSupported&&n.queue(this.t("To hear the graph, press H.")),i.IS_APPLE?n.queue(this.t("To disable audio trace, press OPTION+T.")):n.queue(this.t("To disable audio trace, press ALT+T.")),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),n.alert()),void(this.audioTraceActive=!0))},e.prototype.checkIfSelectedItemChanged=function(e){this.lastSelectedId!==e&&(this.lastSelectedId=e,this.audioTraceActive&&(e?(n.queue(this.getExpressionAriaLabel(e)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),n.alert()):this.exitAudioTrace()))},e.prototype.pauseAnimations=function(){var e=this;this.sliderArray.length=0;var t=this.controller.getAllModelsWithSliders();t.forEach(function(t){t.slider.isPlaying&&(e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1}),e.sliderArray.push(t))})},e.prototype.resumeAnimations=function(){if(0!==this.sliderArray.length){for(var e=0;e<this.sliderArray.length;e++){var t=this.sliderArray[e];t.slider.isPlaying!==!0&&this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!0})}this.sliderArray.length=0}},e.prototype.stopAnimations=function(){var e=this,t=this.controller.getAllModelsWithSliders();t.forEach(function(t){t.slider.isPlaying&&e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1})})},e.prototype.getAnimatingVars=function(){for(var e=[],t=0;t<this.sliderArray.length;t++)e.push('"'+this.sliderArray[t].dependent+'"');return e},e.prototype.hasActiveSliders=function(){for(var e=this.controller.getAllModelsWithSliders(),t=0;t<e.length;t++)if(e[t].slider.isPlaying)return!0;return!1},e.prototype.queueAnimatingPoints=function(e){var t=this.getAnimatingVars();0!==t.length?n.queue(this.t("Animating __vars__.",{vars:t.join(", ")})):e&&n.queue(this.t("No animations."))},e.prototype.queueSliderValue=function(){this.hasActiveSliders()||this.tonegen.stop();var e=this.getSelectedSlider();if(e){var t='"'+e.dependent+'"',r=e.sliderValue;n.queue(this.t("__label__: __value__.",{label:t,value:r}))}else n.queue(this.t("Unable to determine slider value"))},e.prototype.getSelectedSlider=function(){var e=this.controller.getAllModelsWithSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null},e.prototype.incrementSliderValue=function(){this.adjustSlider("up")},e.prototype.decrementSliderValue=function(){this.adjustSlider("down")},e.prototype.incrementBigSliderValue=function(){this.adjustSlider("bigup")},e.prototype.decrementBigSliderValue=function(){this.adjustSlider("bigdown")},e.prototype.nextSlider=function(){this.adjustSlider("next")},e.prototype.prevSlider=function(){this.adjustSlider("prev")},e.prototype.sliderMin=function(){this.adjustSlider("min")},e.prototype.sliderMax=function(){this.adjustSlider("max")},e.prototype.toggleSliderAnimation=function(){this.adjustSlider("animation")},e.prototype.adjustSlider=function(e){var t=this.getSelectedSlider();if(!t)return void n.queue(this.t("Unable to adjust slider"));var r=t.sliderValue,i=this.controller.getAllModelsWithSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":var o=h.computeSliderAdjustment(t,e),s=h.computeNewSliderLatex(t.latex,o);this.controller.dispatch({type:"set-item-latex",id:t.id,latex:s});break;case"next":return this.sliderIndex++,this.sliderIndex>=i&&(n.queue(this.t("Last slider.")),this.sliderIndex=i-1),this.queueSliderValue(),void n.alert();case"prev":return this.sliderIndex--,this.sliderIndex<0&&(n.queue(this.t("First slider.")),this.sliderIndex=0),this.queueSliderValue(),void n.alert();case"animation":return this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!t.slider.isPlaying}),t.slider.isPlaying?n.queue(this.t("__variable__ playing.",{variable:t.dependent})):(n.queue(this.t("__variable__ paused.",{variable:t.dependent})),this.queueSliderValue()),void n.alert()}t.slider.isPlaying||r===t.sliderValue||(this.queueSliderValue(),n.alert())},e.prototype.toggleAudioTrace=function(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()},e.prototype.toggleSliderTrace=function(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()},e.prototype.enterSliderTrace=function(){if(!this.sliderTraceActive){this.sliderIndex=0;var e=this.controller.getAllModelsWithSliders().length;0!==e?(n.queue(this.t("Slider trace on.")),this.queueSliderValue(),this.sliderTraceActive=!0):(n.queue(this.t("No sliders to trace.")),this.sliderTraceActive=!1),n.alert()}},e.prototype.exitSliderTrace=function(){this.sliderTraceActive&&(n.queue(this.t("Slider trace off.")),this.sliderTraceActive=!1,this.sliderIndex=0,n.alert())},e.prototype.recomputePoints=function(){if(this.audioTraceActive&&(!this.sliderTraceActive||this.hasActiveSliders())){this.agNavigator.updatePOI(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint();var e=this.hasActiveSliders();if(e){var t=this.agNavigator.getCurrentPoint();this.tonegen.startContinuousPlay().queuePoint(t).play()}else this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes()}},e.prototype.queuePOICount=function(){var e=this.agNavigator.getCurrentSketch(),t=null!==e?e.getPOI().length:0;n.queue(this.t("Points of interest, __x__.",{x:t}))},e.prototype.reportAudioTrace=function(e,t){var r=this.agNavigator.getCurrentPoint();if(e||(t||this.tonegen.stop(),this.tonegen.queuePoint(r).play()),!t){this.queueCoordinates(r,e);var i=e?0:100;setTimeout(function(){n.alert()},i)}},e.prototype.adjustPlaybackSpeed=function(e){switch(e){case"1":return this.tonegen.audioSpeed=150,n.alert(this.t("Graph playback very slow"));case"2":return this.tonegen.audioSpeed=100,n.alert(this.t("Graph playback slow"));case"3":return this.tonegen.audioSpeed=50,n.alert(this.t("Graph playback normal"));case"4":return this.tonegen.audioSpeed=30,n.alert(this.t("Graph playback fast"));case"5":return this.tonegen.audioSpeed=16,n.alert(this.t("Graph playback very fast"));default:return this.tonegen.audioSpeed=50,n.alert(this.t("Graph playback normal"))}},e.prototype.zoom=function(e){var t=this.grapher.viewportController;t.zoom(e)},e}();t.default=p}),define("graphing/grapher",["require","jquery","underscore","./viewport","./screen","main/graph_settings","./canvaslayer","./poidotslayer","./poilabelslayer","./gridlayer","./graphsketch","./graphslayer","./imagelayer","./projection","./movablepointslayer","./viewportcontroller","./poicontroller","lib/animation-frame","underscore_model","./graph-defaults","lib/default-spec","./audiograph","lib/deepCopy"],function(e){function t(){return new a(1024,768)}function n(){return new s(-10,10,-10,10)}function r(e,r,s,a,c){this.container=e,this.$=i(e),this.$root=s,this.evaluator=c,this.controller=a,this.settings=r,this.appliedScaling={};var p=t(),x=n().squareYAxis(p);this.setUserRequestedViewport(x),this.__projection=new g(p,x,r),this.triggerProjectionChanged=function(){};var w=this;this.markLabelsDirty=o.debounce(function(){w.evaluator.notifyWhenSynced(function(){w.__isRedrawingSlowly?w.notifyAfterRedraw(function(){w.poiLabelsLayer.markLabelsDirty(),w.redrawAllLayers()}):(w.poiLabelsLayer.markLabelsDirty(),w.redrawAllLayers())})},300),this.poiController=new b(this,r),this.viewportController=v(this,this.controller),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.graphSketches={},this.graphImages={},this.canvasLayer=l(this),this.$.append(this.canvasLayer.$),this.imageLayer=m(),this.gridLayer=d(),this.poiDotsLayer=u(),this.graphsLayer=f(this.settings),this.movablePointsLayer=y(this.$root,this.settings),this.movablePointsLayer.$.css("z-index","0"),this.$.append(this.movablePointsLayer.$),this.poiLabelsLayer=h(this.$root,this.settings),this.traceLayer=this.poiLabelsLayer,this.traceLayer.$.css("z-index","0"),this.$.append(this.traceLayer.$),this.scaleAxis=void 0,this.__transient=!1,this.__sketchOrder=[],this.selectedId=null,this.__redrawRequested=!1,this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.domObstructions=[],this.events=_(),this.audioGraph=new S(this)}var i=e("jquery"),o=e("underscore"),s=e("./viewport"),a=e("./screen"),c=e("main/graph_settings"),l=e("./canvaslayer"),u=e("./poidotslayer"),h=e("./poilabelslayer"),d=e("./gridlayer"),p=e("./graphsketch"),f=e("./graphslayer"),m=e("./imagelayer"),g=e("./projection"),y=e("./movablepointslayer"),v=e("./viewportcontroller"),b=e("./poicontroller"),x=e("lib/animation-frame"),_=e("underscore_model"),w=e("./graph-defaults"),E=e("lib/default-spec"),S=e("./audiograph").default,M=e("lib/deepCopy").default;return r.prototype.remove=function(){this.$.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()},r.prototype.tick=function(e){this.__isRedrawingSlowly?this._redrawSlowly():this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()},r.prototype.registerMovablePointListener=function(e){this.__movablePointListener=e},r.prototype.deregisterMovablePointListener=function(){this.__movablePointListener=null},r.prototype.setSketchOrder=function(e){o.isEqual(this.__sketchOrder,e)||(this.__sketchOrder=e,this.redrawAllLayers())},r.prototype.clear=function(){this.graphSketches={},this.graphImages={}},r.prototype.getGraphSketch=function(e){return e in this.graphSketches?this.graphSketches[e]:null},r.prototype.addGraphSketch=function(e){this.graphSketches[e.id]=e},r.prototype.removeGraphSketch=function(e){delete this.graphSketches[e]},r.prototype.addGraphImage=function(e){e.imageObj.width&&e.imageObj.height?(this.graphImages[e.id]=e,this.redrawAllLayers()):i(e.imageObj).on("load.calc_load",function(){this.addGraphImage(e)}.bind(this))},r.prototype.removeGraphImage=function(e){var t=this.graphImages[e];t&&i(t.imageObj).off("load.calc_load"),delete this.graphImages[e],this.redrawAllLayers()},r.prototype.getProjection=function(){return this.__projection},r.prototype._setProjection=function(e){this.__projection=e,this.redrawAllLayers(),this.triggerProjectionChanged()},r.prototype.getAudioTrace=function(){return this.audioGraph},r.prototype.getDefaultViewport=function(){var e=this.getProjection();return n().squareYAxis(e.screen)},r.prototype.updateScreenSize=function(e,t){if(!(e<=0||t<=0)){var n=this.getProjection(),r=n.screen;if(r.width!==e||r.height!==t){this.$.width(e);var i=new a(e,t);this.viewportController.setScreen(i)}}},r.prototype.syncSquareAxes=function(){var e=this.getProjection();this.settings.setProperty("squareAxes",e.viewport.isSquare(e.screen))},r.prototype.setIsVisible=function(e){e!==this.isVisible&&(this.isVisible=e,e?this.redrawAllLayers():this.canvasLayer.resize(0,0))},r.prototype.hide=function(e){var t=this.getGraphSketch(e);t&&(t.visible=!1)},r.prototype.select=function(e){var t=this.getGraphSketch(this.selectedId);t&&(t.selected=t.showPOI=t.showHighlight=!1);var n=this.getGraphSketch(e);n&&(n.selected=n.showPOI=n.showHighlight=!0),this.selectedId=e},r.prototype.updateSketch=function(e,t){var n=this.getGraphSketch(e);if(!t.length)return this.hide(e);var r=new p(e,t);r.color=t[0].color,r.style=t[0].style,r.updateFrom(n),r.selected=r.showPOI=r.showHighlight=String(e)===String(this.selectedId),this.addGraphSketch(r)},r.prototype.updateIntersections=function(e,t){var n=this.getGraphSketch(e);n&&n.updateIntersections(t)},r.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.__redrawRequested=!0},r.prototype._clear=function(){var e=this.getProjection(),t=e.screen;this.canvasLayer.resize(e.screen.width,e.screen.height),this.canvasLayer.ctx.clearRect(0,0,t.width,t.height)},r.prototype._redrawAllLayers=function(){this.isVisible&&(this._clear(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPointsAndLabels(),this._updateCanvasLayerAria(),this.audioGraph.recomputePoints(),this.__redrawRequested=!1,this.events.triggerEvent("redraw"))},r.prototype.cancelRedrawSlowly=function(){this.__isRedrawingSlowly&&(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.redrawAllLayers())},r.prototype.redrawSlowly=function(){this.__isRedrawingSlowly||(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!0,this.audioGraph.recomputePoints())},r.prototype._redrawSlowly=function(){var e=this.__redrawSlowlyIndex;if(0===e&&(this._clear(),this._redrawGridLayer()),e>=this.__sketchOrder.length)return void this.cancelRedrawSlowly();var t=this.__sketchOrder[e],n=this.graphSketches[t],r={};r[t]=n,n&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),r,[t]),this.__redrawSlowlyIndex+=1},r.prototype._redrawGridLayer=function(){this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)},r.prototype._redrawGraphsLayer=function(){this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.__sketchOrder)},r.prototype._updateCanvasLayerAria=function(){this.canvasLayer.updateAria(this.isVisible,Object.keys(this.graphSketches).length)},r.prototype.addDomObstruction=function(e){this.domObstructions.push(e)},r.prototype._redrawPointsAndLabels=function(){this.movablePointsLayer.redraw(this.getProjection(),this.graphSketches),this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches);var e,t=[],n=this.poiLabelsLayer.$[0].getBoundingClientRect(),r=this.movablePointsLayer.renderedMovablePoints;for(var i in r){var s=r[i].$.find(".dcg-background")[0];e=s.getBoundingClientRect(),t.push({left:e.left-n.left,top:e.top-n.top,right:e.right-n.left,bottom:e.bottom-n.top})}o.each(this.domObstructions,function(r){e=r.getBoundingClientRect(),t.push({left:e.left-n.left,top:e.top-n.top,right:e.right-n.left,bottom:e.bottom-n.top})}),this.poiLabelsLayer.redraw(this.getProjection(),this.graphSketches,this.canvasLayer.ctx,t)},r.prototype._redrawImageLayer=function(){this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)},r.prototype._parseScreenshotOpts=function(e){var t,n,r,i,o,s=this.getProjection();return e?(t=e.width||e.height||s.screen.width,n=e.height||e.width||s.screen.height,r=e.targetPixelRatio||1,i=(e.width<256||e.height<256)&&!e.preserveAxisNumbers,o=c.fromObject(this.settings||this.settings)):(t=s.screen.width,n=s.screen.height,r=1,i=!1,o=c.fromObject(this.settings)),i&&(o.setProperty("xAxisNumbers",!1),o.setProperty("yAxisNumbers",!1),o.setProperty("polarNumbers",!1)),{width:t,height:n,targetPixelRatio:r,settings:o}},r.prototype.screenshot=function(e){var t=this._parseScreenshotOpts(e),n=document.createElement("canvas");return n.width=t.width*t.targetPixelRatio,n.height=t.height*t.targetPixelRatio,this.screenshotToCanvas(n,e),n.toDataURL("image/png")},r.prototype.getImageData=function(e,t,n,r){return this.canvasLayer.ctx.getImageData(e,t,n,r)},r.prototype.screenshotToCanvas=function(e,t){t=this._parseScreenshotOpts(t);var n=t.width,r=t.height,i=t.targetPixelRatio,o=t.settings;o.takingScreenshot=!0;var s=e.getContext("2d");s.scale(i,i);var c=new a(n,r),l=this.getProjection().viewport;this.getSetting("squareAxes")&&(l=l.squareCrop(c));var u=new g(c,l,o);s.fillStyle="white",s.fillRect(0,0,c.width,c.height),this.imageLayer.redrawToCtx(s,u,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(s,u),this.graphsLayer.redrawToCtx(s,u,this.graphSketches,this.__sketchOrder)},r.prototype.thumbnail=r.prototype.screenshot,r.prototype.getSetting=function(e,t){var n=this.settings.getProperty(e);return void 0!==n?n:t},r.prototype.getState=function(e){var t={},n=this;return this.settings.stateProperties.forEach(function(e){t[e]=n.getSetting(e)}),t.viewport=this.getCurrentViewport(),e.stripDefaults&&(t=E.stripDefaults(w,t)),t},r.prototype.getUndoRedoState=function(){var e={},t=this;return this.settings.stateProperties.forEach(function(n){e[n]=t.getSetting(n)}),e.viewport=this.getUserRequestedViewport(),e},r.prototype.notifyAfterRedraw=function(e){if(this.__isRedrawingSlowly)x.requestAnimationFrame(this.notifyAfterRedraw.bind(this,e));else if(this.__redrawRequested){this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;var t="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(t,function(){this.events.unobserveEvent(t),e()}.bind(this))}else e()},r.prototype.getUserRequestedViewport=function(){return this._lastUserRequestedViewport},r.prototype.getCurrentViewport=function(){return this.viewportController.getViewport().toObject()},r.prototype.setUserRequestedViewport=function(e){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=M(e)},r.prototype.debounceUserRequestedViewportChange=function(){if(!this.__debouncedViewportCommit){var e=1e3;this.__debouncedViewportCommit=o.debounce(function(e,t){this.isDragging||this._lastUserRequestedViewportUpdateToken===t&&this.controller.dispatch({type:"commit-user-requested-viewport",viewport:e})}.bind(this),e)}var t=this.getCurrentViewport();this.__debouncedViewportCommit(t,this._lastUserRequestedViewportUpdateToken)},r.prototype.setGrapherState=function(e,t){e=E.populateDefaults(w,e),t&&t.doNotClear||this.clear();for(var n in w)w.hasOwnProperty(n)&&this.settings.setProperty(n,e[n]);if("viewport"in e){var r=s.fromObject(e.viewport);this.setUserRequestedViewport(r);var i=this.getProjection().screen;this.getSetting("squareAxes")&&!r.isSquare(i)&&(r=r.squareYAxis(i)),this.viewportController.setViewport(r)}this.redrawAllLayers()},r}),define("loadcss!keypad",function(){}),define("template",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("template!keypad",["underscore"],function(_){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='dcg-keypad' role='complementary' aria-label='Keypad'>\n  <div class='dcg-keys-container dcg-retracted'>\n    <div class='dcg-keys-background dcg-do-not-blur'>\n      <div class='dcg-keys'>\n\n        <div class='dcg-functions-popover dcg-popover dcg-top' style=\"display: none;\">\n          <div class='dcg-popover-interior'>\n            <div class='dcg-popover-header'>\n              <table><tr>\n              ",_.each(popups.functionsPopup,function(e,t){__p+='\n                <td>\n                  <span role="button" key="'+(null==(__t=e.tab.id)?"":_.escape(__t))+'" class="dcg-heading dcg-tappable dcg-btn-medium-gray'+(null==(__t="trig"==t?" dcg-selected":"")?"":_.escape(__t))+'">\n                    '+(null==(__t=e.tab.html)?"":__t)+"\n                  </span>\n                </td>\n              "}),__p+="\n              </tr></table>\n            </div>\n\n            ",_.each(popups.functionsPopup,function(e,t){__p+="\n              <table class='dcg-interior-buttons' section='"+(null==(__t=t)?"":_.escape(__t))+"'>\n                ","trig"==t&&(__p+="\n                  <tr class='dcg-section-headings'>\n                    <td>trig</td>\n                    <td>inverse</td>\n                    <td>hyperb</td>\n                  </tr>\n                "),__p+="\n                <tr>\n\n                ";var n=0;_.each(e.funcs,function(e){__p+="\n                  "+(null==(__t=n%3==0?"</tr><tr>":"")?"":__t)+"\n                  ",n++,__p+='\n                  <td>\n                    <span\n                      role="button"\n                      aria-label="'+(null==(__t=e.ariaLabel)?"":_.escape(__t))+'"\n                      class="dcg-option dcg-tappable '+(null==(__t=e.aClass)?"":_.escape(__t))+" dcg-"+(null==(__t=e.id)?"":_.escape(__t))+'-key"\n                      key="'+(null==(__t=e.id)?"":_.escape(__t))+'"\n                    >\n                      '+(null==(__t=e.html)?"":__t)+"\n                    </span>\n                  </td>\n              "}),__p+="\n              </tr></table>\n            "}),__p+="\n          </div>\n          <div class='dcg-arrow'></div>\n        </div>\n\n        ",_.each(buttons,function(e,t){__p+='\n         <div class="dcg-'+(null==(__t=t)?"":_.escape(__t))+' dcg-main-keypad-section">\n           ',_.each(e,function(e){__p+='\n             <div class="dcg-row">\n               ',_.each(e.keys,function(e){__p+='<div\n                   class="dcg-cell '+(null==(__t=e.cellClass?e.cellClass:"")?"":_.escape(__t))+'"\n                 >\n                   ',e.html&&(__p+='\n                     <span\n                       aria-label="'+(null==(__t=e.ariaLabel)?"":_.escape(__t))+'"\n                       role="button" class="'+(null==(__t=e.aClass)?"":_.escape(__t))+" dcg-"+(null==(__t=e.id)?"":_.escape(__t))+'-key"\n                       key="'+(null==(__t=e.id)?"":_.escape(__t))+'"\n                     >\n                       '+(null==(__t=e.html)?"":__t)+"\n                     </a>\n                   "),__p+="\n                 </div>"}),__p+="\n               <div style='clear:both'></div>\n             </div>\n           "}),__p+="\n         </div>\n        "}),__p+='\n        <div style=\'clear:both\'></div>\n      </div>\n\n      <div role="button" aria-label="'+(null==(__t=t("Hide Keypad"))?"":_.escape(__t))+"\" class='dcg-minimize-keypad dcg-tooltip' tooltip=\""+(null==(__t=t("Hide Keypad").split(" ").map(_.escape).join("&nbsp;"))?"":__t)+"\">\n        <i class='dcg-icon-keyboard'></i>\n        <i class='dcg-icon-caret-down'></i>\n      </div>\n    </div>\n  </div>\n\n  <div role=\"button\" aria-label=\""+(null==(__t=t("Show Keypad"))?"":_.escape(__t))+'" class="dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur dcg-tooltip" tooltip="'+(null==(__t=t("Show Keypad").split(" ").map(_.escape).join("&nbsp;"))?"":__t)+'">\n    <i class=\'dcg-icon-keyboard\'></i>\n    <i class="dcg-icon-caret-up dcg-do-not-blur"></i>\n  </div>\n</div>\n';return __p}});define("underscore_view",["require","jquery","underscore","./underscore_model","pjs","i18n"],function(e){var t=e("jquery"),n=e("underscore"),r=e("./underscore_model"),i=e("pjs"),o=e("i18n"),s=[],a=i(r,function(e,r,i){i.staticTemplate=function(e){var n=t(e)[0];return function(){return n.cloneNode(!0)}},e.$=function(e){var n=t(this.__domNode);return e?n.filter(e).add(n.find(e)):n};var a=function(e){return function(n){var r=0===s.length;if(s.push(this),this.__domNode||c.call(this),t(n)[e](this.$()),r)for(;s.length;)s.pop().didInsertElement();return this.$()}};e.appendTo=a("append"),e.replace=a("replaceWith"),e.prependTo=a("prepend"),e.insertAfter=a("after"),e.insertBefore=a("before"),e.remove=function(){this.$().remove(),this.destruct()},e.destruct=function(){},e.didCreateElement=function(){},e.didInsertElement=function(){},e.getTemplateParams=function(){return{}},e.beforeRerender=function(){},e.afterRerender=function(){},e.rerender=function(){var e=this.getTemplateParams();if(!n.isEqual(e,this.__lastRenderParams)){var t=this.__domNode;this.beforeRerender(),c.call(this),this.replace(t),this.afterRerender()}},e.setDomNode=function(e){this.__domNode=e[0]?e[0]:e,this.didInsertElement()};var c=function(){var e=this.getTemplateParams(),r=n.extend({},e);r.t||(r.t=o.t.bind(o));var i,s=this.template(r);if(i=t("string"==typeof s?t.parseHTML(s.trim()):s),1!==i.length)throw new Error("Template Error: template must return exactly one DOM node.");this.__domNode=i[0],this.__lastRenderParams=e,this.didCreateElement()}});return a});define("submodules/dcgview/src/attr-event-handler",[],function(){function e(e,t){if(null!==t&&void 0!==t){if("string"!=typeof e)throw new Error("Must pass a string for an EventHandler name");if("function"!=typeof t)throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(n){n[e.toLowerCase()]=t}}}}}return e}),define("submodules/dcgview/src/const",["require"],function(e){function t(e){var t=function(){return e};return t.isDCGViewConst=!0,t}function n(e){return!("function"!=typeof e||!e.isDCGViewConst)}return{isConst:n,makeConst:t}}),define("submodules/dcgview/src/attr",["require"],function(e){function t(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n+"")}return{update:t}}),define("submodules/dcgview/src/attr-generic",["require","./const","./attr"],function(e){function t(e,t){var i,o=t();return n.isConst(t)||(i={onUpdate:function(n){var i=t();i!==o&&(o=i,r.update(n,e,i))}}),{value:o,bindings:i}}var n=e("./const"),r=e("./attr");return t}),define("submodules/dcgview/src/is-event-handler",[],function(){function e(e){return"o"===e[0]&&"n"===e[1]&&e[2].toUpperCase()===e[2]}return e}),define("submodules/dcgview/src/custom-attributes",["require"],function(e){function t(e,t){i[e]=t}function n(e){return i.hasOwnProperty(e)}function r(e,t){var n=i[e];return n(t)}var i={};return{isCustomAttribute:n,add:t,parse:r}}),define("submodules/dcgview/src/bindings",["require"],function(e){function t(e,t,n){var r=e._bindings[t];r?r.push(n):e._bindings[t]=[n]}function n(e,t){var n=e._bindings[t];if(n)for(var r=n.length,i=0;i<r;i++)n[i]()}return{add:t,invoke:n}}),define("submodules/dcgview/src/bind-attrs",["require","./attr-event-handler","./attr-generic","./is-event-handler","./custom-attributes","./bindings"],function(e){function t(e,t,n){var r=n.bindings;if(r)for(var i in r){var o=r[i];i in l&&(o=o.bind(null,t)),c.add(e,i,o)}}function n(e,t){if("function"!=typeof t)throw new Error('The "'+e+'" attr must be a function. It is: '+JSON.stringify(t));return a.isCustomAttribute(e)?a.parse(e,t):s(e)?i(e,t):o(e,t)}function r(e,r,i){if(r)for(var o in r){var s=n(o,r[o]);if(s){var a=s.value;void 0!==a&&i.setAttribute(o,a),s.bindings&&t(e,i,s)}}}var i=e("./attr-event-handler"),o=e("./attr-generic"),s=e("./is-event-handler"),a=e("./custom-attributes"),c=e("./bindings"),l={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0};return r}),define("submodules/dcgview/src/bind-text",["require","./bindings"],function(e){function t(){i=!0}function n(e,t,n){if("function"!=typeof n)throw new Error("bindText expects a function");var o=n();void 0!==o&&null!==o||(o="");var s=document.createTextNode(o);if(i){var a=document.createElement("span");a.appendChild(s),t.appendChild(a)}else t.appendChild(s);r.add(e,"onUpdate",function(){var e=n();void 0!==e&&null!==e||(e=""),o!==e&&(s.nodeValue=e,o=e)})}var r=e("./bindings"),i=!1;return{bindText:n,enableSpanWrapping:t}}),define("submodules/dcgview/src/warnings",["require"],function(e){function t(e){i.push(e)}function n(e){var t=i;i=[];for(var n=0;n<t.length;n++){var r=t[n];r!==e&&i.push(r)}}function r(e){try{throw new Error(e)}catch(e){console.warn(e);for(var t=0;t<i.length;t++)i[t](e)}}var i=[];return{warn:r,addWarningHandler:t,removeWarningHandler:n}}),define("submodules/dcgview/src/dcg-element",["require","./bind-attrs","./bind-text","./const","./warnings"],function(e){function t(e,t){var n=document.createTextNode(t);e.appendChild(n)}function n(e,t,n){this.tagName=e,this.attrs=t,this.children=n}var r=e("./bind-attrs"),i=e("./bind-text").bindText,o=e("./const"),s=e("./warnings");return n.prototype._isDCGElement=!0,n.prototype.renderToDocFrag=function(e,n){if(this._domNode)throw new Error("Cannot remount a DCGElement");var a=this.children,c=document.createElement(this.tagName);this._domNode=c,r(n,this.attrs,c),e.appendChild(c);for(var l=a.length,u=0;u<l;u++){var h=a[u];h._isDCGElement?h.renderToDocFrag(c,n):o.isConst(h)?t(c,h()):"function"==typeof h?i(n,c,h):(s.warn("Text should be a const or a getter: "+JSON.stringify(h)),t(c,h))}},n}),define("submodules/dcgview/src/create-element",["require","./dcg-element"],function(e){function t(e,n){if(null!==e&&void 0!==e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],n);else n.push(e)}function n(e,n){for(var i=[],o=arguments.length-1,s=2;s<=o;s++)t(arguments[s],i);if("string"==typeof e)return new r(e,n,i);if(e&&e._isDCGViewClass)return new e(n,i);throw new Error("createElement expects a String or DCGViewClass")}var r=e("./dcg-element");return n}),define("submodules/dcgview/src/mounting",["require","./bindings"],function(e){function t(){for(var e=this._element;e._isDCGView;)e=e._element;return e._domNode}function n(e,t){if(t&&t._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(e,this)}function r(e,t,n){if(!e||!e._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!t||1!==t.nodeType)throw new Error("Must pass an HTMLElement for the node");if(t._mountedDCGView)throw new Error("This node is already mounted by a view");var r=new e(n),i=document.createDocumentFragment();return r.renderToDocFrag(i),t.innerHTML="",o(r),t._mountedDCGView=r,t.appendChild(i),s(r),a(r),r}function i(e){var t=e._mountedDCGView;if(!t)throw new Error("This node is not mounted by a DCGView");c(t),e.innerHTML="",delete e._mountedDCGView,l(t),u(t)}function o(e){e.willMount&&e.willMount(),d.invoke(e,"willMount"),e._childViews.forEach(o)}function s(e){e._isMounted=!0,e.onMount&&e.onMount(),d.invoke(e,"onMount"),e._childViews.forEach(s)}function a(e){e.didMount&&e.didMount(),d.invoke(e,"didMount"),e._childViews.forEach(a)}function c(e){e.willUnmount&&e.willUnmount(),d.invoke(e,"willUnmount"),e._childViews.forEach(c)}function l(e){
e._isMounted=!1,e._childViews.forEach(l),d.invoke(e,"onUnmount"),e.onUnmount&&e.onUnmount()}function u(e){e._childViews.forEach(u),d.invoke(e,"didUnmount"),e.didUnmount&&e.didUnmount()}function h(e,t){var n=document.createDocumentFragment();return e.renderToDocFrag(n,t),n.firstChild}var d=e("./bindings");return{renderToDocFrag:n,findRootNode:t,createNodeForView:h,willMount:o,onMount:s,didMount:a,willUnmount:c,onUnmount:l,didUnmount:u,mountToNode:r,unmountFromNode:i}}),define("submodules/dcgview/src/update",["require","./bindings","./warnings"],function(e){function t(){if(!this._isMounted)return r.warn("Trying to update view that is not mounted. Ignoring update.");if(!this.shouldUpdate||this.shouldUpdate()){if(this.willUpdate&&this.willUpdate(),n.invoke(this,"willUpdate"),n.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var e=this._childViews,t=e.length,i=0;i<t;i++)e[i].update();n.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var n=e("./bindings"),r=e("./warnings");return{update:t}}),define("submodules/dcgview/src/spread",["require"],function(e){function t(e){var t=arguments.length;if(t<2)return e;for(var n=1;n<t;n++)for(var r=arguments[n],i=Object.keys(r),o=i.length,s=0;s<o;s++){var a=i[s];e[a]=r[a]}return e}return t}),define("submodules/dcgview/src/create-class",["require","./create-element","./mounting","./update","./const","./spread"],function(e){function t(e){if(!e)throw new Error("must pass a spec to DCGView.createClass");if("function"!=typeof e.template)throw new Error("must pass a template function to DCGView.createClass");var t=function(e,t){this._setupProps(e,t),this.init&&this.init(),this._callTemplate()};t.prototype._setupProps=function(e,t){if(this.p={},e){for(var n in e){var r=e[n];if("function"!=typeof r)throw new Error('The "'+n+'" prop must be a function. It is: '+JSON.stringify(r));Object.defineProperty(this.p,n,{get:r})}this.props=e}else this.props={};this.children=t,this._childViews=[],this._bindings={}},t.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement")},t.prototype.bindFn=function(e){return e.bind(this)},t.prototype.findRootNode=r.findRootNode,t.prototype.renderToDocFrag=r.renderToDocFrag,t.prototype.const=o.makeConst,t.prototype.spread=s,t.prototype.createElement=n,t.prototype.update=i.update;for(var a in e)if(e.hasOwnProperty(a)){if(t.prototype.hasOwnProperty(a))throw new Error("Cannot override the "+a+"() method");t.prototype[a]=e[a]}return t._isDCGViewClass=!0,t.prototype._isDCGView=!0,t.prototype._isDCGElement=!0,t}var n=e("./create-element"),r=e("./mounting"),i=e("./update"),o=e("./const"),s=e("./spread");return t}),define("submodules/dcgview/src/attr-style",["require","./const","./attr"],function(e){function t(e){var t=e(),n=typeof t;if("string"===n)return t;if(!n||"object"!==n)throw new Error("Unsupported type returned from style getter: "+n);var r="";for(var i in t){var o=t[i];t.hasOwnProperty(i)&&null!==o&&void 0!==o&&(r?r+=";"+i+":"+o:r=i+":"+o)}return r}function n(e){var n,o=t(e);return r.isConst(e)||(n={onUpdate:function(n){var r=t(e);o!==r&&(i.update(n,"style",r),o=r)}}),{value:o,bindings:n}}var r=e("./const"),i=e("./attr");return n}),define("submodules/dcgview/src/attr-class",["require","./const"],function(e){function t(e){var t=e(),n=typeof t;if("string"===n)return t;if(!n||"object"!==n)throw new Error("Unsupported type returned from class getter: "+n);var r="";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];o&&(r?r+=" "+i:r=i)}return r}function n(e,t,n){for(var r=[],i=e.className.replace(o,"").split(s),a=t.replace(o,"").split(s),c={},l=a.length-1;l>=0;l--)c[a[l]]=!0;var u=i.length;for(l=0;l<u;l++){var h=i[l];c.hasOwnProperty(h)||r.push(h)}return n?r.length?n+" "+r.join(" "):n:r.join(" ")}function r(e){var r,o=t(e);return i.isConst(e)||(r={onUpdate:function(r){var i=t(e);o!==i&&(r.className===o?(r.className=i,o=i):(r.className=n(r,o,i),o=i))}}),{value:o,bindings:r}}var i=e("./const"),o=/^\s+|\s+$/g,s=/\s+/;return r}),define("submodules/dcgview/src/attr-lifecycle",["require","./const"],function(e){function t(e){return function(t){if("function"!=typeof t)throw new Error("The "+e+" attribute expects a function for the value");if(n.isConst(t))throw new Error("The "+e+" attribute does not expect a const for the value");var r={bindings:{}};return r.bindings[e]=t,r}}var n=e("./const");return t}),define("submodules/dcgview/src/longest-subsequence",["require"],function(e){return function(e){var t,n,r=e.length,i=new Array(r),o=new Array(r+1),s=0;for(n=0;n<r;n++){if(e[o[s]]<e[n])t=s+1;else{for(var a=1,c=s-1;a<=c;){var l=Math.ceil((a+c)/2);e[o[l]]<e[n]?a=l+1:c=l-1}t=a}i[n]=o[t-1],o[t]=n,t>s&&(s=t)}var u=new Array(s),h=o[s];for(n=s-1;n>=0;n--)u[n]=e[h],h=i[h];return u}}),define("submodules/dcgview/src/compute-key-mutations",["require","./longest-subsequence"],function(e){function t(e,t){var r,i,o={},s=[],a=[];for(r=0;r<t.length;r++)i=t[r],o[i]=r;for(r=0;r<e.length;r++)i=e[r],void 0===o[i]&&s.push(i);var c=[];for(r=0;r<e.length;r++){i=e[r];var l=o[i];void 0!==l&&c.push(l)}var u=n(c),h={};for(r=0;r<u.length;r++)i=t[u[r]],h[i]=!0;for(r=t.length-1;r>=0;r--)i=t[r],h[i]||a.push({key:i,beforeKey:t[r+1]});return{removes:s,inserts:a}}var n=e("./longest-subsequence");return t}),define("submodules/dcgview/src/for",["require","./create-class","./compute-key-mutations","./const","./mounting"],function(e){var t=e("./create-class"),n=e("./compute-key-mutations"),r=e("./const"),i=e("./mounting"),o=t({template:function(){return this.children[0]}}),s=t({_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],"string"!==this._chosenKeyType&&"number"!==this._chosenKeyType))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var n=0;n<t.length;n++){var r=t[n];if(typeof r!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(r)+" is not a "+this._chosenKeyType);if(r in this._keyToItem)throw new Error("The key: "+JSON.stringify(r)+" is not unique");this._keyToItem[r]=e[n]}return t},createViewForKey:function(e){var t=this._keyToItem[e],n=this._viewFunction.call(this,t,e),r=n;return r._isDCGView||(r=this.createElement(o,null,n)),this._keyToView[e]=r,r},template:function(){if(this._keyToView={},"function"!=typeof this.props.each)throw new Error("<For each={}> must be a function");if(1!==this.children.length)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(1!==e.children.length)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(r.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var n=[],i=0;i<this._keys.length;i++){var o=this._keys[i];n.push(this.createViewForKey(o))}return e.children=n,e},detachAllRemovedViews:function(){for(var e,t=this._childViews,n=0,r=t.length,i=0;i<r;i++)e=t[i],e._will_be_unmounted_?n++:t[i-n]=e;t.splice(r-n,n)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;var r,o,s,a,c,l,u=this.findRootNode(),h=n(e,t),d=[];for(r=h.removes.length-1;r>=0;r--)l=h.removes[r],d.push(this._keyToView[l]);for(d.forEach(i.willUnmount),r=0;r<h.removes.length;r++)l=h.removes[r],o=this._keyToView[l],delete this._keyToView[l],o._will_be_unmounted_=!0,u.removeChild(o.findRootNode());d.length>0&&this.detachAllRemovedViews(),d.forEach(i.onUnmount),d.forEach(i.didUnmount);var p=[];for(r=h.inserts.length-1;r>=0;r--)l=h.inserts[r].key,l in this._keyToView||(o=this.createViewForKey(l),p.push(o),i.createNodeForView(o,this));for(p.forEach(i.willMount),r=0;r<h.inserts.length;r++)c=h.inserts[r],s=this._keyToView[c.key].findRootNode(),a=void 0!==c.beforeKey?this._keyToView[c.beforeKey].findRootNode():null,u.insertBefore(s,a);p.forEach(i.onMount),p.forEach(i.didMount);var f=this._childViews,m=f.length-p.length;for(r=0;r<m;r++)f[r].update()}});return s}),define("submodules/dcgview/src/switch",["require","./create-class","./const","./mounting"],function(e){var t=e("./create-class"),n=e("./const"),r=e("./mounting"),i=t({template:function(){return this.children[0]}}),o=t({_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);return null!==e&&void 0!==e||(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,e)},template:function(){if(this._key=void 0,"function"!=typeof this.props.key)throw new Error("<Switch key={}> must be a function");if(1!==this.children.length)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(n.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e=this._key;this.updateKey();var t=this._key;if(e===t)this._element.update();else{var n=this.findRootNode(),i=document.createTextNode("");n.parentNode.insertBefore(i,n),r.willUnmount(this._element),this._childViews=[],n.parentNode.removeChild(n),r.onUnmount(this._element),r.didUnmount(this._element),this._element=this.createView();var o=r.createNodeForView(this._element,this);r.willMount(this._element),i.parentNode.insertBefore(o,i),i.parentNode.removeChild(i),r.onMount(this._element),r.didMount(this._element)}}});return o}),define("submodules/dcgview/src/if",["require","./create-class","./const","./switch"],function(e){var t=e("./create-class"),n=e("./const"),r=e("./switch"),i=t({_isDCGIf:!0,template:function(){if("function"!=typeof this.props.predicate)throw new Error("<If predicate={}> must be a function");if(1!==this.children.length)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+e)}if(n.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var t=function(){return!!this.props.predicate()}.bind(this),i=function(e){if(e)return this._viewFunction()}.bind(this);return this.createElement(r,{key:t},i)}});return i}),define("submodules/dcgview/src/textarea",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeValue:function(){var e=this.props.value();return null===e||void 0===e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var e=n({},this.props,{onInput:function(e){this.props.onInput(e.target.value),this.update()}.bind(this)});return delete e.value,this.createElement("textarea",e,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})}),define("submodules/dcgview/src/input",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeValue:function(){var e=this.props.value();return null===e||void 0===e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var e=n({},this.props,{value:this.const(this.computeValue()),onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})}),define("submodules/dcgview/src/checkbox",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=n({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:function(e){this.props.onChange(e.target.checked),this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})}),define("submodules/dcgview/src/components",["require","./for","./switch","./if","./textarea","./input","./checkbox"],function(e){var t=e("./for"),n=e("./switch"),r=e("./if"),i=e("./textarea"),o=e("./input"),s=e("./checkbox");return{For:t,Switch:n,If:r,Textarea:i,Input:o,Checkbox:s}}),define("submodules/dcgview/src/class",["require","./create-class"],function(e){var t=e("./create-class");return t({template:function(){}})}),define("submodules/dcgview/src/dcg-view",["require","./create-element","./create-class","./mounting","./spread","./const","./custom-attributes","./attr-style","./attr-class","./attr-lifecycle","./components","./warnings","./bind-text","./class"],function(e){var t=e("./create-element"),n=e("./create-class"),r=e("./mounting"),i=e("./spread"),o=e("./const"),s=e("./custom-attributes"),a=e("./attr-style"),c=e("./attr-class"),l=e("./attr-lifecycle"),u=e("./components"),h=e("./warnings"),d=e("./bind-text").enableSpanWrapping,p=e("./class"),f={createElement:t,createClass:n,mountToNode:r.mountToNode,unmountFromNode:r.unmountFromNode,spread:i,const:o.makeConst,addCustomAttribute:s.add,Components:u,addWarningHandler:h.addWarningHandler,removeWarningHandler:h.removeWarningHandler,enableSpanWrapping:d,Class:p};return f.addCustomAttribute("style",a),f.addCustomAttribute("class",c),f.addCustomAttribute("willMount",l("willMount")),f.addCustomAttribute("onMount",l("onMount")),f.addCustomAttribute("didMount",l("didMount")),f.addCustomAttribute("willUnmount",l("willUnmount")),f.addCustomAttribute("onUnmount",l("onUnmount")),f.addCustomAttribute("didUnmount",l("didUnmount")),f.addCustomAttribute("willUpdate",l("willUpdate")),f.addCustomAttribute("onUpdate",l("onUpdate")),f.addCustomAttribute("didUpdate",l("didUpdate")),f}),define("submodules/dcgview/dcgview",["require","./src/dcg-view"],function(e){return e("./src/dcg-view")}),define("loadcss!dcgview-shim",function(){}),function(){define("dcgview",["require","jquery","underscore","submodules/dcgview/dcgview","submodules/dcgview/src/const","bugsnag","loadcss!dcgview-shim"],function(e){var t,n,r,i,o,s;return t=e("jquery"),o=e("underscore"),i=e("submodules/dcgview/dcgview"),r=e("submodules/dcgview/src/const"),n=e("bugsnag"),e("loadcss!dcgview-shim"),i.addWarningHandler(function(e){return n.notify(e)}),s=[],i.onUrlChange=function(e){return s.push(e)},i.addCustomAttribute("href",function(e){var n;return n={value:""+e(),bindings:{onMount:function(n){var r;if(!t(n).is("a")&&!t(n).is("use"))throw new Error("Cannot have an href on a non-link element.");return r=!1,t(n).on("dcg-tap",function(t){var n,i;if(!t.metaKey&&(r=!1,n=e(),i=o.any(s.map(function(e){return e(n,t)}))))return r=!0}),t(n).on("click",function(e){if(r)return r=!1,e.preventDefault()})}}},r.isConst(e)||(n.bindings.onUpdate=function(t){return t.setAttribute("href",e())}),n}),i.addCustomAttribute("onTap",function(e){return{value:"",bindings:{onMount:function(n){return t(n).on("dcg-tap",e)}}}}),i.addCustomAttribute("ignoreRealClick",function(e){return{bindings:{onMount:function(n){return t(n).on("click",function(t){if(e())return t.preventDefault()})}}}}),i.addCustomAttribute("onTapStart",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-tapstart",e)}}}}),i.addCustomAttribute("onTapMove",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-tapmove",e)}}}}),i.addCustomAttribute("onTapEnd",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-tapend",e)}}}}),i.addCustomAttribute("onLongHold",function(e){return{bindings:{onMount:function(n){return t(n).on("dcg-longhold",e)}}}}),i.addCustomAttribute("manageFocus",function(e){return{bindings:{onMount:function(t){return e().shouldBeFocused()&&t.focus(),t.onfocus=function(){if(!e().shouldBeFocused())return e().onFocusedChanged(!0)},t.onblur=function(){if(e().shouldBeFocused())return e().onFocusedChanged(!1)}},onUpdate:function(t){var n,r;return r=e().shouldBeFocused(),n=document.activeElement===t,r&&!n?t.focus():n&&!r?t.blur():void 0},willUnmount:function(e){return delete e.onfocus,delete e.onblur}}}}),i})}.call(this),define("vendor/mathquill",["require","exports","toplevel/mathquill","mathquill"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQ=n.getInterface(1).config(r)}),define("loadcss!dcgview-helpers/mathquill-view",function(){}),define("dcgview-helpers/mathquill-view",["require","exports","browser","lib/aria","keys","tslib","dcgview","vendor/mathquill","jquery","loadcss!./mathquill-view"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastLatexProp="",t.wasFocusedLastUpdate=!1,t}return o.__extends(t,e),t.prototype.template=function(){var e=this;return 1===this.children.length?this.children[0]:s.createElement("div",{class:s.const("dcg-mq-container")},s.createElement("span",{class:s.const("dcg-mq-placeholder")},function(){return e.getPlaceholder()}),s.createElement("div",{didMount:function(t){return e.didMountMathquill(t)}}))},t.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},t.prototype.willUnmount=function(){this.$mathField.off(".view"),this.mathField=void 0},t.prototype.getPlaceholder=function(){return this.props.placeholder?this.props.isFocused()?"":this.props.latex()?"":this.props.placeholder():""},t.prototype.didMountMathquill=function(e){var t=this,r=o.__assign({},this.props.config(),{handlers:{reflow:function(e){t.props.onReflow&&t.mathField&&t.props.onReflow(e)}},onCut:function(){t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},onPaste:function(){t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},overrideTypedText:function(e){t.mathField&&(t.props.onUserTypedText?t.props.onUserTypedText(e):(t.mathField.typedText(e),t.props.onUserChangedLatex(t.mathField.latex())))},overrideKeystroke:function(e,n){if("Backspace"===e&&n.preventDefault(),t.mathField){if("Spacebar"===e&&t.props.disableSpace&&t.props.disableSpace())return n.preventDefault();if(n.originalEvent){var r=i.lookup(n.originalEvent);if("Up"===r||"Down"===r||"Left"===r||"Right"===r||"Esc"===r){var o=[];n.ctrlKey&&o.push("Ctrl"),n.metaKey&&o.push("Meta"),n.altKey&&o.push("Alt"),n.shiftKey&&o.push("Shift"),o.length?(o.push(r),e=o.join("-")):e=r}}t.props.onUserPressedKey?t.props.onUserPressedKey(e,n):(t.mathField.keystroke(e,n),t.props.onUserChangedLatex(t.mathField.latex()))}}});this.$mathField=c(e),this.mathField=a.MQ.MathField(e,r),e._mqMathFieldInstance=this.mathField,e._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",function(){return t.onFocusEvent()}),(n.IS_IOS||n.IS_ANDROID)&&(this.$mathField.find(".dcg-mathquill-input-span").off("keypress.globalConfig"),this.$mathField.on("keypress.view",function(e){return t.onKeypressEvent(e)})),this.hookupMQTapTouch(),this.updateMathquill()},t.prototype.didUpdate=function(){this.updateMathquill()},t.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel()},t.prototype.onFocusEvent=function(){var e=this.isFocused();e!==this.shouldBeFocused()&&this.props.onFocusedChanged(e)},t.prototype.onKeypressEvent=function(e){if(e.stopPropagation(),e.preventDefault(),this.mathField){var t=i.lookupChar(e.originalEvent);this.props.onUserTypedText?this.props.onUserTypedText(t):(this.mathField.typedText(t),this.props.onUserChangedLatex(this.mathField.latex()))}},t.prototype.hookupMQTapTouch=function(){var e=this;this.$mathField.on("dcg-tap.view",function(t){if("touch"===t.device&&e.mathField){var n=t.originalEvent.changedTouches[0];e.mathField.clickAt(n.clientX,n.clientY,n.target),e.mathField.focus();var r=void 0;setTimeout(function(){r=Date.now()},0),e.mathField.ignoreNextMousedown(function(){return void 0===r||Date.now()-r<500})}})},t.prototype.updateMathquillAria=function(){if(this.mathField){var e=this.props.getAriaLabel();e!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)}},t.prototype.updateMathquillPostLabel=function(){var e=this;if(this.mathField){var t=this.props.getAriaPostLabel();if(t!==this.mathField.getAriaPostLabel()&&this.mathField.setAriaPostLabel(t),this.cachedAriaAlert!==t){this.cachedAriaAlert=t,clearTimeout(this.ariaAlertTimeout);var n=this.props.hasError()?5e3:1e3;this.ariaAlertTimeout=setTimeout(function(){e.isFocused()&&r.alert(t)},n)}}},t.prototype.updateMathquillLatex=function(){var e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e))},t.prototype.updateMathquillFocused=function(){if(this.mathField){var e=this.isFocused(),t=this.shouldBeFocused();t&&t!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=t,e!==t&&(t?this.mathField.focus():this.mathField.blur())}},t.prototype.isFocused=function(){return!!c(document.activeElement).closest(this.$mathField).length},t.prototype.shouldBeFocused=function(){return this.props.isFocused()},t.getFocusedMathquill=function(){var e=c(document.activeElement).closest(".dcg-mq-editable-field")[0];return e?e._mqMathFieldInstance:void 0},t.getMQViewInstance=function(e){var t=e.el();return t?t._mqViewInstance:void 0},t.applyArrowKeyAndReturnIfWasAtBounds=function(e,t,n){var r=c(e.el()),i=r.find(".dcg-mq-selection"),o=1===i.length&&i.parent().parent()[0]===r[0]&&1===i.parent().children().length;if(("Up"===t||"Down"===t)&&o)return e.keystroke(t,n),!0;var s=r.find(".dcg-mq-cursor")[0];if(!s)return e.keystroke(t,n),!1;var a=s.previousSibling||s.parentElement;e.keystroke(t,n);var l=s.previousSibling||s.parentElement;return a===l},t.simulateKeypress=function(e,n){var r=t.getMQViewInstance(e);r?r.props.onUserPressedKey?r.props.onUserPressedKey(n):(e.keystroke(n),r.props.onUserChangedLatex(e.latex())):"Enter"===n?e.typedText("\n"):e.keystroke(n)},t.simulateUserChangedLatex=function(e){var n=t.getMQViewInstance(e);n&&n.mathField&&n.props.onUserChangedLatex(n.mathField.latex())},t.handleKeystrokeAndDecideIfSpecialEvent=function(e,n,r){return"Enter"===n||("Delete"===n&&""===e.latex()||("Backspace"===n&&""===e.latex()||("Up"===n?t.applyArrowKeyAndReturnIfWasAtBounds(e,n,r):"Down"===n?t.applyArrowKeyAndReturnIfWasAtBounds(e,n,r):"Left"===n?t.applyArrowKeyAndReturnIfWasAtBounds(e,n,r):"Right"===n?t.applyArrowKeyAndReturnIfWasAtBounds(e,n,r):(e.keystroke(n,r),!1))))},t}(s.Class);t.default=l}),define("loadcss!tipsycss",function(){}),define("tipsy",["require","loadcss!tipsycss","jquery"],function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e,t){this.$element=s(e),this.options=t,this.fixTitle()}function r(){return 0!==u}function i(){u--}function o(){u++}e("loadcss!tipsycss");var s=e("jquery"),a=null,c=!1,l=0;s(document).on("dcg-tap",".tipsy-sticky",function(e){if(c)return void(c=!1);var t=e.currentTarget,r=s(t);if(r.attr("tooltip")||(r=r.find("[tooltip]").filter(':not([tooltip=""])')),1===r.length&&"none"!==r.css("display")&&!r.parents().filter(function(){return"none"===s(this).css("display")}).length){var i=s.extend({},s.fn.tipsy.defaults);i.title="tooltip",r.attr("tipsy-dir")?i.gravity=r.attr("tipsy-dir"):i.gravity="nw",a=new n(r[0],i),a.show(),a.opener=t}}),s(document).on("dcg-tapstart keydown",function(e){if(a){a.hide();var t=a.opener;"dcg-tapstart"===e.type&&s(e.target).closest(t).length&&s(document).one("dcg-tapend",function(e){s(e.target).closest(t).length&&(c=!0)}),a=null}}),n.prototype={show:function(){var e=this.getTitle();if(e&&!r()){var n=this.tip(),i=n.find(".tipsy-arrow");this.uuid=l,l++,s(document).on("scroll.tipsy"+this.uuid,this.hide.bind(this)),n.find(".tipsy-inner")[this.options.html?"html":"text"](e),n[0].className="tipsy",n.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o,a=this.$element[0],c=this.$tip[0],u=a.getBoundingClientRect(),h=c.getBoundingClientRect(),d=h.width,p=h.height,f=t(this.options.gravity,this.$element[0]);switch(f.charAt(0)){case"n":o={top:u.top+u.height+this.options.offset,left:u.left+u.width/2-d/2};break;case"s":o={top:u.top-p-this.options.offset,left:u.left+u.width/2-d/2};break;case"e":o={top:u.top+u.height/2-p/2,left:u.left-d-this.options.offset};break;case"w":o={top:u.top+u.height/2-p/2,left:u.left+u.width+this.options.offset}}2==f.length&&("w"==f.charAt(1)?o.left=u.left+u.width/2-15:o.left=u.left+u.width/2-d+15);var m=0;o.left<0?(m=o.left,o.left=0):o.left+d>window.innerWidth&&(m=o.left+d-window.innerWidth,o.left=window.innerWidth-d),"n"!==f&&"s"!==f||(m-=5);var g=u.width/a.offsetWidth,y=u.height/a.offsetHeight;o.top/=y,o.left/=g,m/=g,i.css("marginLeft",m),n.css(o).addClass("tipsy-"+f),i[0].className="tipsy-arrow tipsy-arrow-"+f.charAt(0),this.options.className&&n.addClass(t(this.options.className,this.$element[0])),this.options.fadeIn?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeIn):n.css({visibility:"visible",opacity:this.options.opacity}),this.options.sticky&&n.addClass("tipsy-sticky");var v=this,b=function(){v.validate(),v.validateTimeout=setTimeout(b,100)};b()}},hide:function(){clearTimeout(this.validateTimeout),s(document).off("scroll.tipsy"+this.uuid),this.options.fadeOut?this.tip().stop().fadeOut(this.options.fadeOut,function(){s(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),n=this.options,"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e&&(e=(""+e).replace(/(^\s*|\s*$)/,"")),e||n.fallback},tip:function(){return this.$tip||(this.$tip=s('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>')),this.$tip},validate:function(){var e=!!this.getTitle(),t=!1;if(e)try{for(var n=this.$element[0];n;){if(n===document){t=!0;break}n=n.parentNode}}catch(e){}t||this.hide()}},s.fn.tipsy=function(e){function t(t){var r=s.data(t,"tipsy");return r||(r=new n(t,s.fn.tipsy.elementOptions(t,e)),s.data(t,"tipsy",r)),r}function r(n){if(("tipsyshow"!==n.type||n.target===this)&&a!==this){var r=t(this);r.hoverState="in",0===e.delayIn?r.show():(r.fixTitle(),setTimeout(function(){"in"==r.hoverState&&r.show()},e.delayIn))}}function i(n){if("tipsyhide"!==n.type||n.target===this){var r=t(this);"dcg-tapstart"===n.type&&r.options.sticky||(r.hoverState="out",0===e.delayOut?r.hide():setTimeout(function(){"out"==r.hoverState&&r.hide()},e.delayOut))}}if(e===!0)return this.data("tipsy");if("string"==typeof e){var o=this.data("tipsy");return o&&o[e](),this}if(e=s.extend({},s.fn.tipsy.defaults,e),e.fadeIn=e.fadeIn||e.fade,e.fadeOut=e.fadeOut||e.fade,e.live||this.each(function(){t(this)}),"manual"!=e.trigger){var c="hover"==e.trigger?"tipsyshow":"focus",l="hover"==e.trigger?"tipsyhide dcg-tapstart dcg-tapend dcg-tapcancel":"blur";if(e.live&&e.delegate)this.on(c,e.delegate,r).on(l,e.delegate,i);else{var u=e.live?"on":"bind";this[u](c,r)[u](l,i)}}return this},s.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fadeIn:!1,fadeOut:!1,fallback:"",gravity:"n",html:!1,live:!0,offset:0,opacity:1,title:"title",trigger:"hover"},s.fn.tipsy.elementOptions=function(e,t){t=s.extend({},t);var n=s(e).attr("tipsy-gravity");n&&(t.gravity=n);var r=parseInt(s(e).attr("tipsy-offset"),10);return isNaN(r)||(t.offset=r),t},s.fn.tipsy.autoNS=function(){return s(this).offset().top>s(document).scrollTop()+s(window).height()/2?"s":"n"},s.fn.tipsy.autoWE=function(){return s(this).offset().left>s(document).scrollLeft()+s(window).width()/2?"e":"w"},s.fn.tipsy.autoBounds=function(e,t){return function(){var n={ns:t[0],ew:t.length>1&&t[1]},r=s(document).scrollTop()+e,i=s(document).scrollLeft()+e,o=s(this);return o.offset().top<r&&(n.ns="n"),o.offset().left<i&&(n.ew="w"),s(window).width()+s(document).scrollLeft()-o.offset().left<e&&(n.ew="e"),s(window).height()+s(document).scrollTop()-o.offset().top<e&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}},s(document).tipsy({title:"tooltip",wait:0,live:!0,delegate:".tipsy-sticky",gravity:"nw",sticky:!0,fade:!1});var u=0;return{isDisabled:r,removeDisableLock:i,addDisableLock:o}}),define("text!data/keypad_keys.json",[],function(){return'{\n  "trigFuncs": [\n    { "name": "sin", "ariaLabel": "sine" },\n    { "name": "cos", "ariaLabel": "cosine" },\n    { "name": "tan", "ariaLabel": "tangent" },\n    { "name": "csc", "ariaLabel": "co secant" },\n    { "name": "sec", "ariaLabel": "secant" },\n    { "name": "cot", "ariaLabel": "co tangent" }\n  ],\n\n  "oneArgFuncs": [\n    { "name": "ceil", "ariaLabel": "ceiling" },\n    { "name": "floor" },\n    { "name": "round" },\n    { "name": "abs", "ariaLabel": "absolute value" },\n    { "name": "sign" },\n    { "name": "ln", "ariaLabel": "natural log" },\n    { "name": "log" },\n    { "name": "exp", "ariaLabel": "exponent" },\n    { "name": "total" },\n    { "name": "length" },\n    { "name": "mean" },\n    { "name": "median" },\n    { "name": "stdev", "ariaLabel": "standard deviation" },\n    { "name": "stdevp", "ariaLabel": "standard deviation of population" },\n    { "name": "var", "ariaLabel": "variance" },\n    { "name": "varp", "ariaLabel": "variance of population" },\n    { "name": "mad" }\n  ],\n\n  "twoArgFuncs": [\n    { "name": "min" },\n    { "name": "max" },\n    { "name": "lcm" },\n    { "name": "gcd" },\n    { "name": "mod" },\n    { "name": "nCr" },\n    { "name": "nPr" },\n    { "name": "cov", "ariaLabel": "co variance" },\n    { "name": "corr", "ariaLabel": "correlation" },\n    { "name": "quantile" },\n    { "name": "quartile" }\n  ],\n\n  "tabs": ["trig", "stats", "misc"],\n\n  "staticKeys": {\n    "unknown": {\n      "display": { "html": "?", "ariaLabel": "unknown" },\n      "action": { "cmd": "?" }\n    },\n    "pi": {\n      "display": { "html": "π", "ariaLabel": "pi" },\n      "action": { "cmd": "\\\\pi" }\n    },\n    "tau": {\n      "display": { "html": "τ", "ariaLabel": "tau" },\n      "action": { "cmd": "\\\\tau" }\n    },\n    "leftparen": {\n      "display": { "html": "(", "ariaLabel": "left parenthesis" },\n      "action": { "cmd": "(" }\n    },\n    "rightparen": {\n      "display": { "html": ")", "ariaLabel": "right parenthesis" },\n      "action": { "cmd": ")" }\n    },\n    "sqrt": {\n      "display": { "html": "√", "ariaLabel": "square root" },\n      "action": { "cmd": "\\\\sqrt" }\n    },\n    "nthroot": {\n      "display": { "html": "n&radic;", "ariaLabel": "nth root" },\n      "action": { "custom": "nthroot" }\n    },\n    "lt": {\n      "display": { "html": "&lt;", "ariaLabel": "less than" },\n      "action": { "cmd": "<" }\n    },\n    "gt": {\n      "display": { "html": "&gt;", "ariaLabel": "greater than" },\n      "action": { "cmd": ">" }\n    },\n    "le": {\n      "display": { "html": "≤", "ariaLabel": "less than or equal to" },\n      "action": { "cmd": "\\\\le" }\n    },\n    "ge": {\n      "display": { "html": "≥", "ariaLabel": "greater than or equal to" },\n      "action": { "cmd": "\\\\ge" }\n    },\n\n    "squared": {\n      "display": {\n        "aClass": "dcg-exponent",\n        "html": "a^2",\n        "ariaLabel": "squared"\n      },\n      "action": { "custom": "squared" }\n    },\n\n    "exponent": {\n      "display": {\n        "aClass": "dcg-exponent",\n        "html": "a^b",\n        "ariaLabel": "exponent"\n      },\n      "action": { "cmd": "^" }\n    },\n    "subscript": {\n      "display": { "html": "a_b", "ariaLabel": "subscript" },\n      "action": { "cmd": "_" }\n    },\n    "fact": {\n      "display": { "html": "n!", "ariaLabel": "factorial" },\n      "action": { "cmd": "!" }\n    },\n    "theta": {\n      "display": { "html": "θ", "ariaLabel": "theta" },\n      "action": { "cmd": "\\\\theta" }\n    },\n\n    "openbracket": {\n      "display": {\n        "html": "{ <span class=\'dcg-ghost-bracket\'>}</span>",\n        "ariaLabel": "left brace",\n        "noMQ": true\n      },\n      "action": { "cmd": "{" }\n    },\n    "closebracket": {\n      "display": {\n        "html": "<span class=\'dcg-ghost-bracket\'>{</span> }",\n        "ariaLabel": "right brace",\n        "noMQ": true\n      },\n      "action": { "cmd": "}" }\n    },\n    "opensquare": {\n      "display": {\n        "html": "[ <span class=\'dcg-ghost-bracket\'>]</span>",\n        "ariaLabel": "left bracket",\n        "noMQ": true\n      },\n      "action": { "cmd": "[" }\n    },\n    "closesquare": {\n      "display": {\n        "html": "<span class=\'dcg-ghost-bracket\'>[</span> ]",\n        "ariaLabel": "right bracket",\n        "noMQ": true\n      },\n      "action": { "cmd": "]" }\n    },\n    "leftparenghost": {\n      "display": {\n        "html": "( <span class=\'dcg-ghost-bracket\'>)</span>",\n        "ariaLabel": "left parenthesis",\n        "noMQ": true\n      },\n      "action": { "cmd": "(" }\n    },\n    "rightparenghost": {\n      "display": {\n        "html": "<span class=\'dcg-ghost-bracket\'>(</span> )",\n        "ariaLabel": "right parenthesis",\n        "noMQ": true\n      },\n      "action": { "cmd": ")" }\n    },\n    "colon": {\n      "display": { "html": ":", "ariaLabel": "colon" },\n      "action": { "cmd": ":" }\n    },\n    "pipes": {\n      "display": { "html": "|a|", "ariaLabel": "pipes" },\n      "action": { "cmd": "|" }\n    },\n    "comma": {\n      "display": { "html": ",", "ariaLabel": "comma" },\n      "action": { "cmd": "," }\n    },\n    "commaghost": {\n      "display": {\n        "html": ",\\\\ \\\\textcolor{#B5B5B5}{\'}",\n        "ariaLabel": "comma"\n      },\n      "action": { "cmd": "," }\n    },\n    "percent": {\n      "display": { "html": "%", "ariaLabel": "percent" },\n      "action": { "cmd": "%" }\n    },\n    "prime": {\n      "display": { "html": "\'", "ariaLabel": "prime" },\n      "action": { "cmd": "\'" }\n    },\n    "primeghost": {\n      "display": {\n        "html": "\\\\textcolor{#B5B5B5}{,}\\\\ \'",\n        "ariaLabel": "prime"\n      },\n      "action": { "cmd": "\'" }\n    },\n    "times": {\n      "display": { "html": "×", "ariaLabel": "times" },\n      "action": { "cmd": "*" }\n    },\n    "plus": {\n      "display": { "html": "+", "ariaLabel": "plus" },\n      "action": { "cmd": "+" }\n    },\n    "divide": {\n      "display": { "html": "÷", "ariaLabel": "divide by" },\n      "action": { "cmd": "/" }\n    },\n    "minus": {\n      "display": { "html": "−", "ariaLabel": "minus" },\n      "action": { "cmd": "-" }\n    },\n    "equals": {\n      "display": { "html": "=", "ariaLabel": "equals" },\n      "action": { "cmd": "=" }\n    },\n    "twiddle": {\n      "display": { "html": "~", "ariaLabel": "tilde" },\n      "action": { "cmd": "~" }\n    },\n    "decimal": {\n      "display": { "html": ".", "ariaLabel": "decimal" },\n      "action": { "cmd": "." }\n    },\n\n    "backspace": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "<i class=\\"dcg-icon-delete\\"></i>",\n        "ariaLabel": "backspace",\n        "colspan": 1.5\n      },\n      "action": { "key": "Backspace" }\n    },\n    "enter": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "<i class=\\"dcg-icon-arrow-enter\\"></i>",\n        "ariaLabel": "enter",\n        "colspan": 2,\n        "noMQ": true\n      },\n      "action": {\n        "cmd": "\\n",\n        "custom": "enter"\n      }\n    },\n    "toggleLetters": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "A B C",\n        "ariaLabel": "show letters",\n        "colspan": 2\n      },\n      "action": { "changeLayout": "letters" }\n    },\n    "toggleNumbers": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "1 2 3",\n        "ariaLabel": "show numbers",\n        "colspan": 2\n      },\n      "action": { "changeLayout": "mainNumbers" }\n    },\n\n    "popupFunctions": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "func<span class=\'dcg-hide-on-narrow\'>tion</span>s",\n        "ariaLabel": "functions",\n        "colspan": 2\n      },\n      "action": { "popup": "functions" }\n    },\n\n    "blank": {\n      "display": {},\n      "action": {}\n    },\n\n    "halfBlank": {\n      "display": { "colspan": 0.5 },\n      "action": {}\n    },\n\n    "left": {\n      "display": {\n        "html": "<i class=\\"dcg-icon-arrow-left\\"></i>",\n        "ariaLabel": "left arrow"\n      },\n      "action": { "key": "Left" }\n    },\n    "up": {\n      "display": { "html": "&uarr;", "ariaLabel": "up arrow" },\n      "action": { "key": "Up" }\n    },\n    "right": {\n      "display": {\n        "html": "<i class=\\"dcg-icon-arrow-right\\"></i>",\n        "ariaLabel": "right arrow"\n      },\n      "action": { "key": "Right" }\n    },\n    "down": {\n      "display": { "html": "&darr;", "ariaLabel": "down arrow" },\n      "action": { "key": "Down" }\n    },\n\n    "toggleCapital": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray",\n        "html": "<i class=\\"dcg-icon-shift\\"></i>",\n        "ariaLabel": "show uppercase letters",\n        "colspan": 1.5\n      },\n      "action": { "changeLayout": "capitalLetters" }\n    },\n    "toggleLowercase": {\n      "display": {\n        "aClass": "dcg-btn-medium-gray dcg-active",\n        "html": "<i class=\\"dcg-icon-shift\\"></i>",\n        "ariaLabel": "show lowercase letters",\n        "colspan": 1.5\n      },\n      "action": { "changeLayout": "letters" }\n    },\n    "loga": {\n      "display": { "html": "log_a", "ariaLabel": "log sub a" },\n      "action": { "custom": "loga" }\n    },\n    "ddx": {\n      "display": { "html": "d/dx", "ariaLabel": "d over dx" },\n      "action": { "custom": "d/dx" }\n    },\n    "sum": {\n      "display": { "html": "\\\\sum", "ariaLabel": "sum" },\n      "action": { "cmd": "\\\\sum" }\n    },\n    "prod": {\n      "display": { "html": "\\\\prod", "ariaLabel": "product" },\n      "action": { "cmd": "\\\\prod" }\n    },\n    "integral": {\n      "display": { "html": "\\\\int", "ariaLabel": "integral" },\n      "action": { "cmd": "\\\\int" }\n    },\n    "highlightedX": {\n      "display": { "html": "x", "aClass": "dcg-highlighted" },\n      "action": { "cmd": "x" }\n    },\n    "highlightedY": {\n      "display": { "html": "y", "aClass": "dcg-highlighted" },\n      "action": { "cmd": "y" }\n    }\n  }\n}\n';
}),define("main/keypad_keys",["require","jquery","underscore","i18n","mathquill","text!data/keypad_keys.json"],function(e){var t,n=e("jquery"),r=e("underscore"),i=e("i18n"),o=e("mathquill"),s=JSON.parse(e("text!data/keypad_keys.json")),a=s.staticKeys;i.t("functions"),i.t("A B C"),i.t("more"),i.t("enter"),r.each(s.tabs,function(e){a[e+"Tab"]={display:{html:e},action:{tab:e}}}),r.each(s.oneArgFuncs,function(e){a[e.name]={display:{html:'<var class="dcg-mq-operator-name">'+e.name+"</var>",ariaLabel:e.ariaLabel||e.name,aClass:"dcg-mq-math-mode",noMQ:!0},action:{func:e.name}}}),r.each(s.twoArgFuncs,function(e){a[e.name]={display:{html:'<var class="dcg-mq-operator-name">'+e.name+"</var>",ariaLabel:e.ariaLabel||e.name,aClass:"dcg-mq-math-mode",noMQ:!0},action:{func:e.name,args:2}}}),r.each(s.trigFuncs,function(e){var t=e.ariaLabel||e.name;r.each([e.name,e.name+"h"],function(e){var n="h"===e[e.length-1];a[e]={display:{html:'<var class="dcg-mq-operator-name">'+e+"</var>",ariaLabel:n?"hyperbolic "+t:t,aClass:"dcg-mq-math-mode",noMQ:!0},action:{func:e}}}),a["arc"+e.name]={display:{html:e.name+"^{-1}",aClass:"dcg-inverse-trig",ariaLabel:"arc "+t},action:{custom:"inverse",fn:e.name}}});var c;for(t=0;t<26;t++)c=String.fromCharCode(65+t),a[c]={display:{html:c,ariaLabel:c},action:{cmd:c}};for(t=0;t<26;t++)c=String.fromCharCode(97+t),a[c]={display:{html:c,ariaLabel:c},action:{cmd:c}};for(t=0;t<10;t++){var l=String.fromCharCode(48+t);a[l]={display:{html:l,ariaLabel:l},action:{cmd:l}}}var u=function(e,t){var r=e.display,i=e.action;if(r.id=t,"cellClass"in r||(r.cellClass=""),"aClass"in r||(r.aClass=""),r.colspan)switch(r.cellClass&&(r.cellClass+=" "),r.colspan){case.5:r.cellClass+="dcg-halfwide";break;case 2:r.cellClass+="dcg-twowide";break;case 1.5:r.cellClass+="dcg-onepointfivewide"}r.aClass.indexOf("dcg-btn-")===-1&&(r.aClass=r.aClass?r.aClass+" dcg-btn-light-gray":"dcg-btn-light-gray"),r.html&&(r.aClass=r.aClass?r.aClass+" dcg-key":"dcg-key",r.aClass+=" dcg-tappable"),i.tab||i.key||i.popup||i.changeLayout||r.noMQ||!r.html||(r.mathquill=!0,/^[π%]$/.test(r.html)&&(r.aClass+=" dcg-mq-nonSymbola"),/^([0-9?:,'~().=+\−τ√≤≥θ×÷π%]|&lt;|&gt;)$/.test(r.html)?r.html="<span>"+r.html+"</span>":/^[a-zA-Z]$/.test(r.html)?r.html="<var>"+r.html+"</var>":r.html=o.StaticMath(n("<span>"+r.html+"</span>")[0]).html(),r.aClass+=" dcg-mq-math-mode")};return r.each(a,u),a}),define("main/keypad_view",["require","loadcss!keypad","jquery","mathquill","underscore","main/cookie","template!keypad","underscore_view","pjs","dcgview-helpers/mathquill-view","tipsy","main/keypad_keys"],function(e){e("loadcss!keypad");var t=e("jquery"),n=e("mathquill"),r=e("underscore"),i=e("main/cookie"),o=e("template!keypad"),s=e("underscore_view"),a=e("pjs"),c=e("dcgview-helpers/mathquill-view").default;e("tipsy");var l=e("main/keypad_keys"),u=a(s,function(e,s){e.template=o,e.init=function(e){s.init.call(this),this.keys=l,this.controller=e,this.setupKeypad(),this.setLayout("mainNumbers"),this.setProperty("functionsOpen",!1),this.setProperty("isOpen",!1),this.userMinimized=!1,this.unsubscribeFromController=this.controller.subToChanges(this.onControllerUpdate.bind(this))},this.destruct=function(){this.unsubscribeFromController()},e.onControllerUpdate=function(){this.onNeedsFakeKeypad()},e.getActiveMathquill=function(){return n(t(document.activeElement).closest(".dcg-mq-editable-field")[0])},e.onNeedsFakeKeypad=function(){this.requestSetIsOpen(!this.userMinimized&&this.controller.needsFakeKeypad())},e.onLanguageChange=function(){this.rerender()},e.didCreateElement=function(){var e=this;e.setLayout(e.layout),e.$hideBtn=e.$(".dcg-minimize-keypad"),e.$showBtn=e.$(".dcg-show-keypad"),e.$funcPopover=e.$(".dcg-functions-popover"),e.$container=e.$(".dcg-keys-container"),e.$keys=e.$(".dcg-keys"),e.$funcBtn=e.$(".dcg-popupFunctions-key"),e.setTab("trig"),this.observeAndSync("isOpen",function(){e.$showBtn.toggle(!e.isOpen)}),this.observe("functionsOpen",this.renderFunctionsOpen.bind(this)),this.observe("graphpaperHeight",this.positionFunctionsPopup.bind(this)),this.$().tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip",gravity:"s",offset:2}),e.$().on("dcg-tap",".dcg-tappable",function(n){var r=t(n.target).closest(".dcg-tappable");e.buttonClicked(r)}),e.$hideBtn.on("dcg-tap",function(){e.$hideBtn.attr("aria-hidden",!0),e.$showBtn.attr("aria-hidden",!1),e.userMinimized=!0,i.setCookie("keypadMinimized","true"),e._hideKeypad()}),e.$showBtn.on("dcg-tap",function(){e.$hideBtn.attr("aria-hidden",!1),e.$showBtn.attr("aria-hidden",!0),e.userMinimized=!1,i.setCookie("keypadMinimized","false"),e._showKeypad(),e.getActiveMathquill()||e.controller.dispatch({type:"show-keypad"})}),e.userMinimized="true"===i.getCookie("keypadMinimized")},e._hideKeypad=function(){clearTimeout(this.__showHideTimeout);var e=this;this.__showHideTimeout=setTimeout(function(){e.__showHideTimeout=null,e.setProperty("isOpen",!1),e.setProperty("functionsOpen",!1),e.$container.addClass("dcg-retracted").attr("aria-hidden",!0)})},e._showKeypad=function(){clearTimeout(this.__showHideTimeout);var e=this;this.__showHideTimeout=setTimeout(function(){e.__showHideTimeout=null,e.setLayout("mainNumbers"),e.setProperty("isOpen",!0),e.$container.removeClass("dcg-retracted").removeAttr("aria-hidden")})},e.requestSetIsOpen=function(e){this.userMinimized&&!this.isOpen||(e!==this.isOpen||this.__showHideTimeout)&&(e?this._showKeypad():this._hideKeypad())},e.getButton=function(e){return this.keys[e]||(e="unknown"),this.keys[e].display},e.buttonArray=function(e){var t=function(){return!0};return this.controller.areFunctionsRestricted()&&(t=function(e){return["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov"].indexOf(e)===-1}),r.map(r.filter(e.split(" "),t),this.getButton,this)},e.setupKeypad=function(){this.buttons={mainNumbersLeft:[{keys:this.buttonArray("highlightedX highlightedY squared exponent")},{keys:this.buttonArray("leftparen rightparen lt gt")},{keys:this.buttonArray("pipes comma le ge")},{keys:this.buttonArray("toggleLetters sqrt pi")}],numbersMiddle:[{keys:this.buttonArray("7 8 9 divide")},{keys:this.buttonArray("4 5 6 times")},{keys:this.buttonArray("1 2 3 minus")},{keys:this.buttonArray("0 decimal equals plus")}],numbersRight:[{keys:this.buttonArray("popupFunctions")},{keys:this.buttonArray("left right")},{keys:this.buttonArray("halfBlank backspace")},{keys:this.buttonArray("enter")}],letters:[{keys:this.buttonArray("q w e r t y u i o p")},{keys:this.buttonArray("a s d f g h j k l theta")},{keys:this.buttonArray("toggleCapital z x c v b n m backspace")},{keys:this.buttonArray("toggleNumbers subscript leftparenghost openbracket opensquare twiddle commaghost enter")}],capitalLetters:[{keys:this.buttonArray("Q W E R T Y U I O P")},{keys:this.buttonArray("A S D F G H J K L tau")},{keys:this.buttonArray("toggleLowercase Z X C V B N M backspace")},{keys:this.buttonArray("toggleNumbers exponent rightparenghost closebracket closesquare colon primeghost enter")}],noQwertyLetters:[{keys:this.buttonArray("a b c d e f g h i")},{keys:this.buttonArray("j k l m n o p q r")},{keys:this.buttonArray("s t u v w x y z backspace")},{keys:this.buttonArray("toggleNumbers subscript leftparenghost openbracket opensquare twiddle commaghost enter")}]},this.popups={functionsPopup:{trig:{tab:this.getButton("trigTab"),funcs:this.buttonArray("sin arcsin sinh cos arccos cosh tan arctan tanh csc arccsc csch sec arcsec sech cot arccot coth")},stats:{tab:this.getButton("statsTab"),funcs:this.buttonArray("total length mean median min max quartile quantile twiddle stdev stdevp mad var cov corr nCr nPr fact")},misc:{tab:this.getButton("miscTab"),funcs:this.buttonArray("lcm gcd mod ceil floor round abs sign percent exp ln nthroot log loga ddx integral sum prod")}}}},e.getTemplateParams=function(){var e=this;return{buttons:this.buttons,popups:this.popups,t:function(t,n){return e.controller.t(t,n)}}},e.height=function(){return this.isOpen?this.$container.height():0},e.setLayout=function(e){this.layout=e,this.$().removeClass("dcg-layout-letters dcg-layout-capitalLetters dcg-layout-mainNumbers dcg-layout-noQwertyLetters").addClass("dcg-layout-"+e)},e.setTab=function(e){var t=["trig","stats","misc"],n=this;r.each(t,function(e){n.$("[key="+e+"Tab]").removeClass("dcg-selected"),n.$("[section="+e+"]").attr("aria-hidden",!0).hide()}),this.$("[key="+e+"Tab]").addClass("dcg-selected"),this.$("[section="+e+"]").attr("aria-hidden",!1).show()},e.renderFunctionsOpen=function(){this.$funcBtn.toggleClass("dcg-active",this.functionsOpen).attr("aria-hidden",!this.functionsOpen),this.$funcPopover.toggle(this.functionsOpen).attr("aria-hidden",!this.functionsOpen),this.positionFunctionsPopup()},e.positionFunctionsPopup=function(){if(this.functionsOpen){var e=this.$funcPopover.find(".dcg-arrow");if(this.graphpaperHeight<525){this.$funcPopover.removeClass("dcg-top").addClass("dcg-left");var t=this.$container.outerHeight()-(this.$funcBtn.offset().top-this.$container.offset().top),n=t-this.$funcBtn.outerHeight()/2-2-10;e.css({left:"auto",bottom:n})}else this.$funcPopover.removeClass("dcg-left").addClass("dcg-top"),e.css({left:this.$funcPopover.width()-this.$funcBtn.width()/2,bottom:"auto"})}},e.buttonClicked=function(e){var t=this.$(e).attr("key"),n=this.keys[t].action;if(n.changeLayout)return this.setProperty("functionsOpen",!1),void(this.controller.isQwertyKeyboardEnabled()||"letters"!=n.changeLayout?this.setLayout(n.changeLayout):this.setLayout("noQwertyLetters"));if(n.tab)return this.setTab(n.tab);if("functions"===n.popup)return this.setProperty("functionsOpen",!this.functionsOpen);this.setProperty("functionsOpen",!1);var r=this.getActiveMathquill();if(r){if(n.custom)switch(n.custom){case"enter":c.simulateKeypress(r,"Enter");break;case"loga":r.write("\\log_{}"),r.typedText("("),r.keystroke("Left"),r.keystroke("Down");break;case"nthroot":r.write("\\sqrt[]{}"),r.keystroke("Left"),r.keystroke("Left");break;case"squared":r.cmd("^"),r.cmd("2"),r.keystroke("Right");break;case"cubed":r.write("^{3}");break;case"inverse":r.write(n.fn),r.write("^{-1}"),r.typedText("(");break;case"d/dx":r.write("\\frac{d}{dx}")}else if(n.key)c.simulateKeypress(r,n.key);else if(n.cmd)r.cmd(n.cmd);else if(n.func){var i="(";2===n.args&&(i="(,"),r.typedText(n.func+i),2===n.args&&r.keystroke("Left")}c.simulateUserChangedLatex(r)}}});return u}),define("main/layout_controller",["require","console","pjs","jquery"],function(e){var t=e("console"),n=e("pjs"),r=e("jquery");return n(function(e){e.init=function(e,t,n){this.views=e,this.$root=t,this.currentScreen={},this.controller=n,this.triggerGraphpaperRectChanged=null,this.isAnimating=!1,this.$grapher=this.views.grapher.$,this.appliedScale={x:1,y:1},this.resize(),this.views.keypadView&&this.views.keypadView.observe("isOpen",this.resize.bind(this))},e.getSmartDefaultWidth=function(){var e=this.currentScreen.width;if(!e)return 356;var t=.2*e+160;return Math.min(500,Math.max(280,t))},e.getExpListWidth=function(){var e;e=void 0!==this.userSpecifiedExpListWidth?Math.max(280,Math.min(this.currentScreen.width-200,this.userSpecifiedExpListWidth)):this.getSmartDefaultWidth();var t=this.currentScreen.width-this.currentScreen.height;return Math.abs(t-e)<=10?t:e},e.setExpListWidth=function(e){this.userSpecifiedExpListWidth!==e&&(this.userSpecifiedExpListWidth=e,this.forceRecompute=!0)},e.keypadOpen=function(){return!!this.views.keypadView&&this.views.keypadView.isOpen},e.didViewportChange=function(e){return e.width!==this.currentScreen.width||e.height!==this.currentScreen.height||this.keypadOpen()!==this.currentScreen.keypadOpen||this.controller.isListVisible()!==this.currentScreen.expressionsVisible},e.resize=function(){if(!this.isAnimating&&this.triggerGraphpaperRectChanged){var e=this.$root[0].getBoundingClientRect();if(this.didViewportChange(e)||this.forceRecompute){this.forceRecompute=!1,this.currentScreen.width=e.width,this.currentScreen.height=e.height,this.currentScreen.expressionsVisible=this.controller.isListVisible(),this.currentScreen.keypadOpen=this.keypadOpen(),this.views.keypadView&&this.$root.toggleClass("dcg-keypad-open",!!this.views.keypadView.isOpen),this.$root.toggleClass("dcg-narrow",this.isNarrow(e.width)),this.$root.toggleClass("dcg-short",this.isShort(e.height));var t=e.width,n=this.$grapher[0].getBoundingClientRect().height;if(0===n||0===t)return void this.views.grapher.setIsVisible(!1);var r,i=!this.controller.isListVisible();this.views.keypadView&&this.views.keypadView.height&&(r=this.views.keypadView.height());var o=this.isNarrow(t)?t:this.getExpListWidth();this.isNarrow(t)||(o=2*Math.floor(.5*o)),this.views.keypadView&&this.views.keypadView.setProperty("graphpaperHeight",n);var s=this.isNarrow(t)||i?0:o;this.views.grapher.$.css({left:s+"px",transform:null}),this.views.grapher.setIsVisible(t-s>0&&n>0),this.views.grapher.updateScreenSize(t-s,n);var a={top:0,bottom:n,left:s,right:t,height:n,width:t-s};this.controller.dispatch({type:"computed-layout",measurements:{isNarrow:this.isNarrow(t),keypadHeight:r}}),this.triggerGraphpaperRectChanged(a)}}},e.isNarrow=function(e){return e<450},e.isShort=function(e){return e<=480},e.animateSlidingInterior=function(){this.isAnimating||(this.isAnimating=!0,setTimeout(function(){this.isAnimating=!1,this.resize()}.bind(this),this.parseTransitionDuration(".dcg-sliding-interior")))},e.parseTransitionDuration=function(e){var n=r(e),i=n.css("transition-duration");return"s"!==i[i.length-1]?(t.warn("Unexpected transition-duration format. Expected a number followed by 's' but saw "+i),0):1e3*parseFloat(i.slice(0,-1))},e.defocusMobile=function(){var e=r(document.activeElement);0!==e.filter("input, textarea").length&&r("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}})}),define("math/conics",["require","numeric","math/distance"],function(e){var t=e("numeric"),n=e("math/distance"),r={isLine:function(e,r,i,o,s,a){var c=t.svd([[e,r,1],[i,o,1],[s,a,1]]).S;return n.approx(c[c.length-1]/c[0],0)},isCircle:function(e,r,i,o,s,a,c,l){var u=t.svd([[e*e+r*r,e,r,1],[i*i+o*o,i,o,1],[s*s+a*a,s,a,1],[c*c+l*l,c,l,1]]).S;return n.approx(u[u.length-1]/u[0],0)},isConic:function(e,r,i,o,s,a,c,l,u,h,d,p){var f=t.svd([[e*e,r*r,2*e*r,e,r,1],[i*i,o*o,2*i*o,i,o,1],[s*s,a*a,2*s*a,s,a,1],[c*c,l*l,2*c*l,c,l,1],[u*u,h*h,2*u*h,u,h,1],[d*d,p*p,2*d*p,d,p,1]]).S;return n.approx(f[f.length-1]/f[0],0)},conicQuadraticParameters:function(e,n,r,i,o,s,a,c,l,u){return{a:t.det([[n*n,2*e*n,e,n,1],[i*i,2*r*i,r,i,1],[s*s,2*o*s,o,s,1],[c*c,2*a*c,a,c,1],[u*u,2*l*u,l,u,1]]),b:t.det([[e*e,n*n,e,n,1],[r*r,i*i,r,i,1],[o*o,s*s,o,s,1],[a*a,c*c,a,c,1],[l*l,u*u,l,u,1]]),c:-t.det([[e*e,2*e*n,e,n,1],[r*r,2*r*i,r,i,1],[o*o,2*o*s,o,s,1],[a*a,2*a*c,a,c,1],[l*l,2*l*u,l,u,1]])}},classifyConic:function(e,i,o,s,a,c,l,u,h,d,p,f){if(r.isLine(e,i,a,c,p,f))return"line";if(r.isCircle(e,i,o,s,h,d,p,f))return"circle";if(!r.isConic(e,i,o,s,a,c,l,u,h,d,p,f))return"none";var m=r.conicQuadraticParameters(e,i,o,s,a,c,l,u,h,d),g=t.svd([[m.a,m.b],[m.b,m.c]]).S;return n.approx(g[g.length-1]/g[0],0,20)?"parabola":m.b*m.b>m.a*m.c?"hyperbola":"ellipse"},classifyBranchConic:function(e){var t,n;if(1===e.length&&4===e[0].length)return"line";for(var i=0;i<e.length;i++){var o=e[i],s=o.length;if(s<12)return"unknown";try{n=r.classifyConic(o[0],o[1],o[2*Math.floor(1*s/12)],o[2*Math.floor(1*s/12)+1],o[2*Math.floor(2*s/12)],o[2*Math.floor(2*s/12)+1],o[2*Math.floor(3*s/12)],o[2*Math.floor(3*s/12)+1],o[2*Math.floor(4*s/12)],o[2*Math.floor(4*s/12)+1],o[s-2],o[s-1])}catch(e){return"unknown"}if("none"===n)return"none";if(t&&n!==t)return"none";t=n}return t}};return r}),define("predicates/common",["require","parser","math/conics","graphing-calc/models/expression","graphing-calc/models/list"],function(e){var t=e("parser"),n=e("math/conics"),r=e("graphing-calc/models/expression"),i=e("graphing-calc/models/list");return{FOCUSED_EXP:function(e,t){return i.isItemSelected(e)&&"expression"===e.type},FOCUSED_OR_EMPTY_EXP:function(e,t){return!(!i.isItemSelected(e)||"expression"!==e.type)||"expression"===e.type&&r.isEmpty(e)},COMPLEX_EXP:function(e,t){return e.isGraphable&&"expression"===e.type&&t&&t.branches[0]&&"line"!==n.classifyBranchConic(t.branches[0].segments)},TABLEABLE_EXP:function(e,t){return e.isGraphable&&e.isTableable},EXP:function(e,t){return"expression"===e.type},GRAPHABLE_EXP:function(e,t){return e.isGraphable},HAS_ERROR:function(e,t){return e.error&&("expression"!==e.type||!r.isEmpty(e))},DEPENDS_ON:function(e){return function(n,r){if(!n.latex)return!1;var i=t.parse(n.latex);return i.getDependencies().indexOf(e)>=0}},DEFINES:function(e){return function(n,r){if(!n.latex)return!1;var i=t.parse(n.latex);return i.getExports().indexOf(e)>=0}},HAS_N_DEPENDENCIES:function(e){return function(t,n){return"expression"===t.type&&t.formula&&t.formula.variables&&t.formula.variables.length>=e}},NONCONSTANT_LINE:function(e,t){return t&&"line"===n.classifyBranchConic(t.branches[0].segments)&&!isFinite(e.formula.constant_value)},RESTRICTED_LINE:function(e,t){return this.NONCONSTANT_LINE(e,t)&&this.RESTRICTED(e,t)},EXP_NOT_RESTRICTED_LINE:function(e,t){return this.EXP(e,t)&&!this.RESTRICTED_LINE(e,t)},PARABOLA:function(e,t){return t&&t.branches&&t.branches.some(function(e){return"parabola"===n.classifyBranchConic(e.segments)})},RESTRICTED:function(e,t){return!(!e||!e.latex)&&!!e.latex.match(/\\left\\{(.+)\\right\\}/)},SHIFTED_PARABOLA:function(e,t){if(!this.PARABOLA(e,t))return!1;var n=t.branches[0].compiled.fn;return 0!==n(0)||1!==n(1)},EVALUATION:function(e,t){return e.formula&&e.formula.is_evaluable&&isFinite(e.formula.constant_value)},HAS_DEPENDENT_Y:function(e,t){return"y"===e.formula.assignment},SLIDER:function(e,t){return!!e.sliderExists&&!e.isGraphable},ANIMATING_SLIDER:function(e,t){return e.sliderExists&&e.slider.isPlaying},SLID_SLIDER:function(e,t){return e.sliderExists&&!e.isGraphable&&1!==e.sliderValue},TABLE:function(e,t){return"table"===e.type},REGRESSION:function(e,t){return e.formula&&e.formula.regression},HAS_DATA_COLUMN:function(e,t){if(!this.TABLE(e,t))return!1;for(var n=1;n<e.columnModels.length;n++)if(e.columnModels[n].discrete)return!0;return!1},HAS_FUNCTION_COLUMN:function(e,t){if(!this.TABLE(e,t))return!1;for(var n=1;n<e.columnModels.length;n++)if(e.columnModels[n].discrete===!1)return!0;return!1}}}),define("tours/base_tour",["require","pjs","jquery","underscore","../predicates/common"],function(e){var t=e("pjs"),n=e("jquery"),r=e("underscore"),i=e("../predicates/common");return t(function(e){e.init=function(e){this.Calc=e,this.controller=this.Calc.controller},e.expressionsVisible=function(){return this.controller.isListVisible()},e.t=function(e,t){return this.controller.t(e,t)},e.requireExpressionsVisible=function(){return{position:"e",content:this.t("Click to show the list of expressions."),sel:n(".dcg-action-showexpressions"),delayBeforeEnter:400,delayBeforeExit:400}},e.resourcesOpen=function(){return n("body").hasClass("resources-open")},e.requireResourcesNotOpen=function(){return{position:"e",content:this.t("Click to return to this graph."),sel:n(".dcg-action-opendrawer"),delayBeforeEnter:400,delayBeforeExit:400}},e.editListMode=function(){return this.controller.isInEditListMode()},e.requireNotEditListMode=function(){return{position:"s",content:this.t("Click to return to your expressions."),sel:n(".dcg-action-toggle-edit")}},e.expressionCount=function(){return this.controller.getItemCount()},e.getExpSketch=function(e){var t=this.Calc.grapher.graphSketches[e.id];if(!t||t.visible)return t},e.getAvailableExp=function(e){var t=this.getMatchingExpSelector(i.FOCUSED_OR_EMPTY_EXP,e);return t?t:".dcg-new-math-div"},e.expList=function(){return n(this.Calc.rootElt).find(".dcg-exppanel")},e.getSelectorById=function(e){return this.controller.getItemSelectorById(e)},e.getModelById=function(e){return this.controller.getItemModel(e)},e.expMatches=function(e,t){if(!e)return!1;if("function"==typeof t)return t.call(i,e,this.getExpSketch(e));for(var n=0;n<t.length;n++)if(!t[n].call(i,e,this.getExpSketch(e)))return!1;return!0},e.getMatchingExpId=function(e,t){var n=this.controller.getSelectedItem();if(t=r.filter(t,function(e){return"string"==typeof e||"number"==typeof e}),this.expMatches(n,e)&&t.indexOf(n.id)===-1)return n.id;var i=this.controller.getAllItemModels();i=r.filter(i,function(e){var n=e.folderId&&this.getModelById(e.folderId);return!(n&&n.collapsed||t.indexOf(e.id)!==-1)}.bind(this));for(var o=0;o<i.length;o++)if(n=i[o],this.expMatches(n,e))return n.id;return null},e.getMatchingExpSelector=function(e,t){var n=this.getMatchingExpId(e,t);return n?this.getSelectorById(n):n},e.getMatchingExpModel=function(e,t){var n=this.getMatchingExpId(e,t);return n?this.getModelById(n):n}})}),define("tours/mathart",["require","underscore","jquery","pjs","./base_tour","predicates/common"],function(e){var t=e("underscore"),n=e("jquery"),r=e("pjs"),i=e("./base_tour"),o=e("predicates/common");return{mathart_intro:r(i,function(e){e.restrictedLineTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExpSelector(o.RESTRICTED_LINE),t=this.getMatchingExpSelector(o.EXP_NOT_RESTRICTED_LINE);if(e)return t?(this.phaseOn++,this.update()):{position:"e",content:"<b>Brilliant!</b><br>Click here to create a new expression",sel:".dcg-new-math-div"};var n=this.getMatchingExpId(o.EXP),r=this.getSelectorById(n),i=this.getModelById(n);if(r){var s=this.expMatches(i,o.NONCONSTANT_LINE),a=this.expMatches(i,o.HAS_ERROR);return a?{doNotUpdate:!0}:s?{position:"e",content:["<b>Awesome!</b><br>","Restrict the domain of this line by making it!<br>",'<span class="trip-math">y=2x\\left\\{1 < x < 2\\right\\}</span><br>',"<i>Hint: press the 'A B C' button on the keypad to find the { } buttons</i>"].join(""),sel:r}:{position:"e",content:["<b>Let's get started!</b><br>",'Try graphing a straight line, like <span class="trip-math">y=2x</span>'].join(""),sel:r}}return{position:"e",content:"Click here to make a new blank expression",sel:".dcg-new-math-div"}},e.restrictedParabolaTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExpSelector([o.RESTRICTED,o.PARABOLA]);if(e)return this.phaseOn++,this.update();var t=this.getMatchingExpId(o.EXP_NOT_RESTRICTED_LINE),n=this.getSelectorById(t),r=this.getModelById(t);if(n){var i=this.expMatches(r,[o.PARABOLA,o.HAS_DEPENDENT_Y]),s=this.expMatches(r,o.SHIFTED_PARABOLA),a=this.expMatches(r,o.PARABOLA),c=this.expMatches(r,o.HAS_ERROR);return c?{doNotUpdate:!0}:a?i?s?{position:"e",content:["<b>Nice!</b><br>Now let's restrict the range. Change this to:<br>",'<span class="trip-math">y=x^2-2\\left\\{y<4\\right\\}</span>'].join(""),sel:n}:{position:"e",content:["<b>Move the parabola.</b><br>",'Change this equation to <span class="trip-math">y=x^2-2</span>'].join(""),sel:n}:{position:"e",content:['<b>Don\'t forget the "y="!</b><br>','Try typing all of <span class="trip-math">y=x^2</span>'].join(""),sel:n}:{position:"e",content:['Now graph: <span class="trip-math">y=x^2</span><br>',"<i>Hint: you can type y=x^2,"," or use the a<sup>2</sup> button on the keypad below</i>"].join(""),sel:n}}return{position:"e",content:"Click here to make a new blank expression",sel:".dcg-new-math-div"}},e.colorWasChanged=!1,e.changeColorTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this;if(t.each(this.controller.getAllItemModels(),function(t){t.unobserve("color.tour"),t.observe("color.tour",function(){e.colorWasChanged=!0})}),this.colorWasChanged)return n(".dcg-options-menu").length?{position:"e",content:"... and click anywhere to close the color menu.",sel:".dcg-exppanel"}:{final:!0,position:"e",endingMsg:"Great job! Now to complete your mission: make a face. Good luck!",sel:".dcg-exppanel"};if(n(".dcg-options-menu").length)return{position:"e",content:"<b>Last step...</b><br>Change the color!",sel:".dcg-options-menu"};var r=this.getMatchingExpSelector(o.GRAPHABLE_EXP),i=this.getMatchingExpSelector(o.EXP);return r?{position:"e",content:"<b>Great!</b><br>Click and hold to open the secret drawing menu.",sel:r.find(".dcg-graph-icon")}:{position:"e",content:'<b>Oops...</b><br>Make this graphable by typing <span class="trip-math">y=x</span>',sel:i}},e.phaseOn=0,e.phases=[e.restrictedLineTour,e.restrictedParabolaTour,e.changeColorTour],e.update=function(){return this.phases[this.phaseOn].call(this)}})}}),define("scroll_helpers",["require"],function(e){var t=function(e,t,n){var r,i=t.height(),o=e.height(),s=t[0].scrollTop,a=e.offset().top+s-t.offset().top,c=a-n,l=o+a+n-i;return r=c>=l?Math.min(Math.max(s,l),c):.5*(c+l),r!==s&&(t[0].scrollTop=r,t[0].scrollTop!=s)};return{scrollVisible:t}}),define("tours/trip",["require","jquery","pjs","mathquill","scroll_helpers"],function(e){var t=e("jquery"),n=e("pjs"),r=e("mathquill"),i=e("scroll_helpers"),o=n({init:function(e){this.settings=e,this.__cachedStepName=null},ensureTripBlock:function(){if(!this.$tripBlock){var e=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),n=this,r=this.$tripBlock=t(e);r.css({top:"-100px"}),t("body").append(r),r.find(".trip-close").on("dcg-tap",function(e){e.preventDefault(),n.stop()}),this.bindKeyEvents()}},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var e=this;t(document).on({"keydown.Trip":function(t){e.keyEvent.call(e,t)}})},unbindKeyEvents:function(){t(document).off("keydown.Trip")},keyEvent:function(e){27===e.which&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop(),this.__cachedContent=null,this.__cachedSel=null},showTripBlock:function(e){if(this.ensureTripBlock(),"string"==typeof e.sel&&(e.sel=t(e.sel)),e.sel=e.sel.filter(":visible"),e.content!==this.__cachedContent||e.sel[0]!==this.__cachedSel){this.__cachedContent=e.content,this.__cachedSel=e.sel[0],e.scrollContainer&&i.scrollVisible(e.sel,e.scrollContainer,0);var n=this.$tripBlock;n.find(".trip-content").html(e.content),n.toggleClass("trip-hidden",!!e.hidden);var o=e.sel,s=o.outerWidth(),a=o.outerHeight(),c=n.outerWidth(),l=n.outerHeight(),u=10,h=10;n.removeClass("trip-e trip-s trip-w trip-n");var d=0;switch(e.position){case"e":n.addClass("trip-e"),n.css({left:o.offset().left+s+h,top:o.offset().top-(l-a)/2});break;case"s":n.addClass("trip-s");var p=o.offset().left+(s-c)/2;n.css({left:p,top:o.offset().top+a+u}),p+c>t(window).width()-1&&(d=t(window).width()-1-p-c),p<1&&(d=1-p);break;case"w":n.addClass("trip-w"),n.css({left:o.offset().left-(h+c),top:o.offset().top-(l-a)/2});break;default:n.addClass("trip-n"),n.css({left:o.offset().left+(s-c)/2,top:o.offset().top-u-l})}n.find(".trip-interior").css("transform","translate("+d+"px, 0)"),n.css({display:"inline-block"}),n.find(".trip-math:not(.dcg-mq-math-mode)").each(function(){r.StaticMath(this)})}},fadeInTripBlock:function(){this.ensureTripBlock();var e=this.$tripBlock;setTimeout(function(){e.addClass("trip-is-loaded")},0)},hideTripBlock:function(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}});return o}),define("tours/tour_manager",["require","pjs","analytics/google_analytics","./trip"],function(e){var t=e("pjs"),n=e("analytics/google_analytics"),r=e("./trip"),i=t(function(e,t){e.init=function(){this.tripManager=new r({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0},e._tripLoop=function(){if(clearTimeout(this.__tripLoopTimeout),this.running){var e=this;e._advanceTrip(),e.__tripLoopTimeout=setTimeout(e._tripLoop.bind(e),200)}},e._advanceTrip=function(){var e=this.currentTour.update(),t=(new Date).getTime();if(e&&this.currentStep&&e.content!==this.currentStep.content){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer)return void(this.throttleTimer=t)}e.delayBeforeEnter&&(this.currentStep=e,this.throttleTimer=t)}if(!(e&&this.currentStep&&e.content===this.currentStep.content&&this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,e&&!e.doNotUpdate)){if(this.currentStep=e,e.final)return this.finishTour(e,5),void n.send(["_trackEvent","Completed tour",e.endingMsg]);this.tripManager.showTripBlock(e)}},e.updateNow=e._advanceTrip,e.startTour=function(e){this.running||(this.currentTour=e,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())},e.closingMsg="<b>__endingMessage__</b><br>This message will self-destruct in __seconds__...",e.finishTour=function(e,t){clearTimeout(this.__tripLoopTimeout),this.running=!1;var n=this;return t<0?void n.tripManager.stop():(e.endingMsg&&(e.content=n.closingMsg.replace("__endingMessage__",e.endingMsg).replace("__seconds__",t)),n.tripManager.showTripBlock(e),void setTimeout(function(){n.finishTour(e,t-1)},1e3))},e.stopTour=function(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}});return i}),define("ipad.scrollfix",["require","jquery"],function(e){var t=e("jquery"),n=0,r=1,i=2,o=!1,s=function(){a(document),o=!0},a=function(e){o||t(e).bind("touchstart",function(e){var o=t(e.target),s=n,a=null;if(!o.closest("[disablescroll]").length)for(;s===n&&o.length&&void 0!==o[0].tagName;){var c=o.css("overflow"),l=o.css("overflow-y");if("hidden"!==c&&"visible"!==c&&"hidden"!==l&&"hidden"!==l){var u=o.scrollTop();0!==u&&(s=i),o.scrollTop(u+1),o.scrollTop()!==u&&(s|=r,o.scrollTop(u))}o=o.parent()}if(s!==n){a=[];for(var h=e.originalEvent.touches,d=0;d<h.length;d++){var p={};for(var f in h[d])h[d].hasOwnProperty(f)&&(p[f]=h[d][f]);a.push(p)}}t(document).on("touchmove.scrollfix",function(e){if(a){var t=a[0],o=e.originalEvent.touches[0],c=o.screenY-t.screenY;c>0&&!(s&i)?s=n:c<0&&!(s&r)&&(s=n),c&&(a=null)}s===n&&e.preventDefault()}),t(document).on("touchend.scrollfix",function(){t(document).off(".scrollfix")})})};return{limitScrollOnElement:a,limitScrollOnDocument:s}}),define("migrations/0",["require","graphing/axisarrowmode"],function(e){function t(e){if(e.type){if(c.hasOwnProperty(e.type))return e.type;throw new Error("Invalid item type: '"+e.type+"'.")}return void 0!==e.text?"text":void 0!==e.columns||void 0!==e.headings?"table":"expression"}function n(e){return e.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function r(e){var t={};for(var r in e)e.hasOwnProperty(r)&&("latex"===r?t[r]=n(e[r]):"values"===r?t[r]=e[r].map(n):t[r]=e[r]);return t}function i(e){var i,o=t(e),s={};switch(o){case"expression":for(i in e)e.hasOwnProperty(i)&&("latex"===i?s[i]=n(e[i]):s[i]=e[i]);return s.type=o,s;case"table":for(i in e)e.hasOwnProperty(i)&&("columns"===i?s[i]=e[i].map(r):s[i]=e[i]);return s.type=o,s;case"image":for(i in e)e.hasOwnProperty(i)&&("width"===i||"height"===i||"x"===i||"y"===i?s[i]=n(e[i]):s[i]=e[i]);return s.type=o,s;case"text":case"folder":for(i in e)e.hasOwnProperty(i)&&(s[i]=e[i]);return s.type=o,s}}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"xAxisArrows"!==n&&"yAxisArrows"!==n&&(t[n]=e[n]);return t.xAxisArrowMode=l[e.xAxisArrows||"none"],t.yAxisArrowMode=l[e.yAxisArrows||"none"],t}function s(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=o(e.graph),t.expressions={list:e.expressions.list.map(i)},t.version=0,t}var a=e("graphing/axisarrowmode"),c={expression:!0,table:!0,image:!0,folder:!0,text:!0},l={none:a.NONE,both:a.BOTH,positive:a.POSITIVE};return s}),define("migrations/1",["require"],function(e){
function t(e){return e.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function n(e){var n={};for(var r in e)e.hasOwnProperty(r)&&("latex"===r?n[r]=t(e[r]):"values"===r?n[r]=e[r].map(t):n[r]=e[r]);return n}function r(e){var r,i=e.type,o={};switch(i){case"expression":for(r in e)e.hasOwnProperty(r)&&("latex"===r?o[r]=t(e[r]):o[r]=e[r]);return o;case"table":for(r in e)e.hasOwnProperty(r)&&("columns"===r?o[r]=e[r].map(n):o[r]=e[r]);return o;case"image":for(r in e)e.hasOwnProperty(r)&&("width"===r||"height"===r||"x"===r||"y"===r?o[r]=t(e[r]):o[r]=e[r]);return o;case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+i)}}function i(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=o,t}var o=1;return i}),define("migrations/2",["require","expressions/colors"],function(e){function t(e){switch(e){case a:return s.RED;case c:return s.BLUE;case l:return s.GREEN;case u:return s.PURPLE;case h:return s.ORANGE;case d:return s.BLACK;default:return e}}function n(e){var n={};for(var r in e)e.hasOwnProperty(r)&&("color"===r?n[r]=t(e[r]):n[r]=e[r]);return n}function r(e){var r,i=e.type,o={};switch(i){case"expression":for(r in e)e.hasOwnProperty(r)&&("color"===r?o[r]=t(e[r]):o[r]=e[r]);return o;case"table":for(r in e)e.hasOwnProperty(r)&&("columns"===r?o[r]=e[r].map(n):o[r]=e[r]);return o;case"image":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+i)}}function i(e){if(e.version>1)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=o,t}var o=2,s=e("expressions/colors"),a="#C0504D",c="#4F81BD",l="#9BBB59",u="#8064A2",h="#F79646",d="#000000";return i}),define("migrations/3",["require","lib/number-to-latex"],function(e){function t(e){var t,n=e.type,r={};switch(n){case"expression":for(t in e)e.hasOwnProperty(t)&&("sliderMax"===t||"sliderMin"===t||"sliderInterval"===t?r[t]=i(e[t]):"domain"===t?r[t]={max:i(e[t].max),min:i(e[t].min)}:r[t]=e[t]);return r.hasOwnProperty("sliderMin")&&void 0===r.sliderInterval&&(r.sliderInterval=""),r;case"image":case"table":case"text":case"folder":for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r;default:throw new Error("Unexpected expression type: "+n)}}function n(e){if(e.version>2)throw new Error("Unexpected version: "+e.version);var n={};return n.graph=e.graph,n.expressions={list:e.expressions.list.map(t)},n.version=r,n}var r=3,i=e("lib/number-to-latex").default;return n}),define("migrations/4",["require","expressions/styles"],function(e){function t(e){switch(e){case a:return s.POINT;case c:return s.CROSS;case l:return s.OPEN;case u:return s.SOLID;case h:return s.DASHED;case d:return s.DOTTED;default:return e}}function n(e){var n={};for(var r in e)e.hasOwnProperty(r)&&("style"===r?n[r]=t(e[r]):n[r]=e[r]);return n}function r(e){var r,i=e.type,o={};switch(i){case"expression":for(r in e)e.hasOwnProperty(r)&&("style"===r?o[r]=t(e[r]):o[r]=e[r]);return o;case"table":for(r in e)e.hasOwnProperty(r)&&("columns"===r?o[r]=e[r].map(n):o[r]=e[r]);return o;case"image":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+i)}}function i(e){if(3!==e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=o,t}var o=4,s=e("expressions/styles"),a="point",c="cross",l="open",u="normal",h="dashed",d="dotted";return i}),define("graphing/columnmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POINTS="POINTS",t.LINES="LINES",t.POINTS_AND_LINES="POINTS_AND_LINES"}),define("migrations/5",["require","graphing/columnmode"],function(e){function t(e){var t,n={};for(var r in e)if(e.hasOwnProperty(r))switch(t=e[r],r){case"showAxes":n.showXAxis=t,n.showYAxis=t;break;case"showLabels":n.xAxisNumbers=t,n.yAxisNumbers=t,n.polarNumbers=t;break;case"labelXMode":n.xAxisStep="pi"===t?Math.PI:0;break;case"labelYMode":n.yAxisStep="pi"===t?Math.PI:0;break;default:n[r]=t}return n}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"showPoints"!==n&&"showLine"!==n&&(t[n]=e[n]);return void 0===e.showPoints&&void 0===e.showLine||(e.showPoints&&e.showLine?t.columnMode=o.POINTS_AND_LINES:e.showPoints?t.columnMode=o.POINTS:e.showLine?t.columnMode=o.LINES:(t.hidden=!0,t.columnMode=o.POINTS)),t}function r(e){var t,r=e.type,i={};switch(r){case"expression":void 0===e.hidden?e.hasOwnProperty("graphed")?i.hidden=!e.graphed:e.hasOwnProperty("userRequestedGraphing")?i.hidden="never"===e.userRequestedGraphing:i.hidden=!1:i.hidden=e.hidden;for(t in e)e.hasOwnProperty(t)&&"graphed"!==t&&"userRequestedGraphing"!==t&&"hidden"!==t&&"slider"!==t&&("color"!==t?"style"!==t?"sliderInterval"!==t?i[t]=e[t]:i.sliderInterval="undefined"===e.sliderInterval?"":e.sliderInterval:i.style="normal"===e.style?"SOLID":e.style:"object"==typeof e.color?i.color=e.color.value:i.color=e.color);return i;case"table":if(e.headings||e.columns){var o=e.headings?e.headings:e.columns;if(i.columns=o.map(n),e.rows)for(var s=0;s<i.columns.length;s++){var a=i.columns[s];a.values=[];for(var c=0;c<e.rows.length;c++)a.values.push(e.rows[c][s])}}for(t in e)e.hasOwnProperty(t)&&"rows"!==t&&"headings"!==t&&"columns"!==t&&(i[t]=e[t]);return i;case"image":case"text":case"folder":for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i;default:throw new Error("Unexpected expression type: "+r)}}function i(e){if(4!==e.version)throw new Error("Unexpected version: "+e.version);var n={};return n.graph=t(e.graph),n.expressions={list:e.expressions.list.map(r)},n.version=s,n}var o=e("graphing/columnmode"),s=5;return i}),define("migrations/legacy-interpolated-label-parser",["require","exports"],function(e,t){"use strict";function n(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function r(e){if(n(e))return{raw:e,parts:[e]};for(var t,r=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],i="({"+r.join("})|({")+"})",o=new RegExp(i,"g"),s=[],a=0,c=0;t=o.exec(e);){c=t.index,c>a&&s.push(e.substr(a,c-a));var l=t[0],u=l.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");s.push({symbol:u,str:l}),a=t.index+l.length}return a<e.length&&s.push(e.substr(a)),{raw:e,parts:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.isMathLabel=n,t.parse=r}),define("migrations/6",["require","lib/deepCopy","graphing/columnmode","expressions/styles","expressions/opacity","./legacy-interpolated-label-parser","underscore"],function(e){function t(e){var t={};for(var n in e)if(e.hasOwnProperty(n)&&"style"!==n)if("values"===n&&(t[n]=e[n].map(function(e){return e?""+e:""})),"columnMode"!==n||e.hasOwnProperty("points")||e.hasOwnProperty("lines"))t[n]=e[n];else switch(e[n]){case a.LINES:t.points=!1,t.lines=!0;break;case a.POINTS_AND_LINES:t.points=!0,t.lines=!0;break;default:t.points=!0,t.lines=!1}return t.hasOwnProperty("pointStyle")||(t.pointStyle=c.POINT),t.hasOwnProperty("lineStyle")||(t.lineStyle=c.SOLID),t.id=""+t.id,t}function n(e){var t=u.parse(e),n="";return h.each(t.parts,function(e){n+="object"==typeof e&&e.str?"$"+e.str:e}),n}function r(e,r,i){var o,s=e.type,a={};switch(s){case"folder":for(o in e)e.hasOwnProperty(o)&&("memberIds"===o||(a[o]=e[o]));break;case"expression":for(o in e)if(e.hasOwnProperty(o))if("style"!==o||e.hasOwnProperty("pointStyle")||e.hasOwnProperty("lineStyle"))p.hasOwnProperty(o)?(a.slider=a.slider||{},a.slider[p[o]]=e[o]):a[o]=e[o],e.label&&(a.label=n(e.label));else{var u=e[o];h.contains([c.POINT,c.OPEN,c.CROSS],u)?(a.pointStyle=u,a.lineStyle=c.SOLID):h.contains([c.SOLID,c.DASHED,c.DOTTED],u)?(a.pointStyle=c.POINT,a.lineStyle=u):(a.pointStyle=c.POINT,a.lineStyle=c.SOLID)}a.hasOwnProperty("fillOpacity")||(a.fillOpacity=l.DEFAULT),a.label===!1&&(a.label=""),a.labelSize||(a.labelSize="medium");break;case"image":for(o in e)e.hasOwnProperty(o)&&"x"!==o&&"y"!==o&&(a[o]=e[o]);a.center="\\left("+(e.x||"0")+","+(e.y||"0")+"\\right)",a.angle=e.angle||"0";break;case"text":for(o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);break;case"table":for(o in e)e.hasOwnProperty(o)&&("columns"===o?a[o]=e[o].map(t):a[o]=e[o]);break;default:throw new Error("Unexpected expression type: "+s)}if(a.id=""+a.id,"folder"===e.type)r.folderId=a.id,r.memberIds=e.memberIds,a.folderId="";else{var d=i[a.id];r.memberIds&&r.memberIds[d]?a.folderId=r.folderId:(a.folderId="",r.folderId=void 0,r.memberIds=void 0)}return a}function i(e){for(var t=0,n=/^[0-9]+$/,r=e.length-1;r>=0;r--){var i,o=e[r],s=o.id;if(n.test(s)&&(i=parseInt(s,10),i>t&&(t=i)),"table"===o.type&&o.columns)for(var a=o.columns.length-1;a>=0;a--)s=o.columns[a].id,n.test(s)&&(i=parseInt(s,10),i>t&&(t=i))}return t+1}function o(e){if(5!==e.version)throw new Error("Unexpected version: "+e.version);var t=e.expressions.list,n=-1,o={},a={},c={},l={};return l.graph=e.graph,l.expressions={list:t.map(function(e){return o[e.id]?(n===-1&&(n=i(t)),a[n]=e.id,e=s(e),e.id=n+"",n+=1):a[e.id]=e.id,o[e.id]=!0,r(e,c,a)})},l.version=d,l}var s=e("lib/deepCopy").default,a=e("graphing/columnmode"),c=e("expressions/styles"),l=e("expressions/opacity"),u=e("./legacy-interpolated-label-parser"),h=e("underscore"),d=6,p={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};return o}),define("main/migrate_state",["require","console","migrations/0","migrations/1","migrations/2","migrations/3","migrations/4","migrations/5","migrations/6"],function(e){function t(e){if(e.version>i)return n.warn("Loading saved state with version "+e.version+" but last known version is "+i+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),e;if(e.hasOwnProperty("version")&&!r[e.version])return n.warn("State has invalid version "+e.version+". If a version is present, it should be a non-negative integer less than or equal to "+i+"."),e;for(e.hasOwnProperty("version")||(e=r[0](e));e.version<i;)e=r[e.version+1](e);return e}var n=e("console"),r=[e("migrations/0"),e("migrations/1"),e("migrations/2"),e("migrations/3"),e("migrations/4"),e("migrations/5"),e("migrations/6")],i=6;return{migrations:r,currentVersion:i,migrateToLatest:t}}),define("vendor/papaparse",["require","jquery"],function(e){"use strict";function t(e,t){var n=a(t);if("string"==typeof e){if(!n.download){var s=new o(n),c=s.parse(e);return c}var u=new r(n);u.stream(e)}else if(e instanceof File)if(n.step||n.chunk){var u=new i(n);u.stream(e)}else{var s=new o(n);reader=new FileReader,reader.onload=function(e){var t=new o(n);t.parse(e.target.result)},reader.onerror=function(){l(n.error)&&n.error(reader.error,e)},reader.readAsText(e,n.encoding)}}function n(e,t){function n(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&d.BAD_DELIMITERS.indexOf(t.delimiter)==-1&&(c=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(a=t.quotes),"string"==typeof t.newline&&(l=t.newline))}function r(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function i(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&e.length>0,i=!(t[0]instanceof Array);if(r){for(var s=0;s<e.length;s++)s>0&&(n+=c),n+=o(e[s],s);t.length>0&&(n+=l)}for(var a=0;a<t.length;a++){for(var u=r?e.length:t[a].length,h=0;h<u;h++){h>0&&(n+=c);var d=r&&i?e[h]:h;n+=o(t[a][d],h)}a<t.length-1&&(n+=l)}return n}function o(e,t){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(/"/g,'""');var n="boolean"==typeof a&&a||a instanceof Array&&a[t]||s(e,d.BAD_DELIMITERS)||e.indexOf(c)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1);return n?'"'+e+'"':e}function s(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var a=!1,c=",",l="\r\n";if(n(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return i(null,e);if("object"==typeof e[0])return i(r(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:r(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),i(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function r(e){e=e||{},e.chunkSize||(e.chunkSize=d.RemoteChunkSize);var t,n,r=0,i=0,s="",a="",u=new o(c(e));this.stream=function(o){function c(){if(t=new XMLHttpRequest,t.onload=h,t.onerror=d,t.open("GET",o,!0),e.step){var n=r+e.chunkSize-1;i&&n>i&&(n=i),t.setRequestHeader("Range","bytes="+r+"-"+n)}t.send(),r+=e.chunkSize}function h(){if(4==t.readyState){if(t.status<200||t.status>=400)return void d();s+=a+t.responseText,a="";var i=!e.step||r>p(t);if(!i){var o=s.lastIndexOf("\n");if(o<0&&(o=s.lastIndexOf("\r")),!(o>-1))return void n();a=s.substring(o+1),s=s.substring(0,o)}var c=u.parse(s);s="",l(e.chunk)&&(e.chunk(c),c=void 0),i||c.meta.paused||n()}}function d(){l(e.error)&&e.error(t.statusText)}function p(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}(n=function(){c()})()}}function i(e){e=e||{},e.chunkSize||(e.chunkSize=d.LocalChunkSize);var t,n=0,r="",i="",s=new o(c(e)),a="function"==typeof FileReader;this.stream=function(o){function c(){n<o.size&&u()}function u(){var r=Math.min(n+e.chunkSize,o.size),i=t.readAsText(p.call(o,n,r),e.encoding);a||h({target:{result:i}})}function h(t){n+=e.chunkSize,r+=i+t.target.result,i="";var a=n>=o.size;if(!a){var u=r.lastIndexOf("\n");if(u<0&&(u=r.lastIndexOf("\r")),!(u>-1))return void c();i=r.substring(u+1),r=r.substring(0,u)}var h=s.parse(r);r="",l(e.chunk)&&(e.chunk(h,o),h=void 0),a||h.meta.paused||c()}function d(){l(e.error)&&e.error(t.error,o)}var p=o.slice||o.webkitSlice||o.mozSlice;a?(t=new FileReader,t.onload=h,t.onerror=d):t=new FileReaderSync,c()}}function o(e){function t(){return b&&f&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),f=!1),n()&&r(),i()}function n(){return e.header&&0==v.length}function r(){if(b){for(var e=0;n()&&e<b.data.length;e++)for(var t=0;t<b.data[e].length;t++)v.push(b.data[e][t]);b.data.splice(0,1)}}function i(){if(!b||!e.header&&!e.dynamicTyping)return b;for(var t=0;t<b.data.length;t++){for(var n={},r=0;r<b.data[t].length;r++){if(e.dynamicTyping){var i=b.data[t][r];"true"==i?b.data[t][r]=!0:"false"==i?b.data[t][r]=!1:b.data[t][r]=a(i)}e.header&&(r>=v.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(b.data[t][r])):n[v[r]]=b.data[t][r])}e.header&&(b.data[t]=n,r>v.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+r,t):r<v.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+r,t))}return e.header&&b.meta&&(b.meta.fields=v),b}function o(t){for(var n,r,i,o=[",","\t","|",";",d.RECORD_SEP,d.UNIT_SEP],a=0;a<o.length;a++){var c=o[a],l=0,u=0;i=void 0;for(var h=new s({delimiter:c,preview:10}).parse(t),p=0;p<h.data.length;p++){var f=h.data[p].length;u+=f,"undefined"!=typeof i?f>1&&(l+=Math.abs(f-i),i=f):i=f}u/=h.data.length,("undefined"==typeof r||l<r)&&u>1.99&&(r=l,n=c)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function a(e){var t=m.test(e);return t?parseFloat(e):e}function u(e,t,n,r){b.errors.push({type:e,code:t,message:n,row:r})}var h,p,f,m=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,g=this,y=!1,v=[],b={data:[],errors:[],meta:{}};e=c(e),this.parse=function(r){if(f=!1,!e.delimiter){var i=o(r);i.successful?e.delimiter=i.bestDelimiter:(f=!0,e.delimiter=d.DefaultDelimiter),b.meta.delimiter=e.delimiter}if(l(e.step)){var a=e.step;e.step=function(e){b=e,n()?t():a(t(),g)}}return e.preview&&e.header&&e.preview++,h=r,p=new s(e),b=p.parse(h),t(),l(e.complete)&&!y&&e.complete(b),y?{meta:{paused:!0}}:b},this.pause=function(){y=!0,p.abort(),h=h.substr(p.getCharIndex())},this.resume=function(){y=!1,p=new s(e),p.parse(h),l(e.complete)&&!y&&e.complete(b)},this.abort=function(){p.abort(),l(e.complete)&&e.complete(b),h=""}}function s(e){function t(){for(;P<M.length&&!V&&!(C>0&&R>=C);)'"'==A?i():O?o():s(),n();return r()}function n(){P++,A=M[P]}function r(){if(V&&_("Abort","ParseAbort","Parsing was aborted by the user's step function"),O&&_("Quotes","MissingQuotes","Unescaped or mismatched quotes"),f(),!l(T))return S()}function i(){b()&&!v()?O=!O:(u(),O&&v()?P++:_("Quotes","UnexpectedQuotes","Unexpected quotes"))}function o(){(g(P)||y(P))&&L++,u()}function s(){A==I?h():g(P)?(p(),n()):y(P)?p():a()?c():u()}function a(){if(!k)return!1;var e=0==P||y(P-1)||g(P-2);return e&&M[P]===k}function c(){for(;!g(P)&&!y(P)&&P<M.length;)n()}function u(){D[F][q]+=A}function h(){D[F].push(""),q=D[F].length-1}function p(){f(),L++,R++,D.push([]),F=D.length-1,h()}function f(){m(),l(T)&&(D[F]&&T(S()),E())}function m(){1==D[F].length&&j.test(D[F][0])&&(e.keepEmptyRows?D[F].splice(0,1):D.splice(F,1),F=D.length-1)}function g(e){return e<M.length-1&&("\r"==M[e]&&"\n"==M[e+1]||"\n"==M[e]&&"\r"==M[e+1])}function y(e){return"\r"==M[e]||"\n"==M[e]}function v(){return!b()&&P<M.length-1&&'"'==M[P+1]}function b(){return!O&&x(P-1)||x(P+1)}function x(e){"number"!=typeof e&&(e=P);var t=M[e];return e<=-1||e>=M.length||t==I||"\r"==t||"\n"==t}function _(e,t,n){N.push({type:e,code:t,message:n,line:L,row:F,index:P})}function w(e){M=e,O=!1,P=0,R=0,L=1,E(),D=[[""]],A=M[P]}function E(){D=[],N=[],F=0,q=0}function S(){return{data:D,errors:N,meta:{lines:L,delimiter:I,aborted:V,truncated:C>0&&P<M.length}}}var M,I,k,T,C,A,P,O,L,D,N,F,q,R,j=/^\s*$/,V=!1;e=e||{},I=e.delimiter,k=e.comments,T=e.step,C=e.preview,("string"!=typeof I||1!=I.length||d.BAD_DELIMITERS.indexOf(I)>-1)&&(I=","),k===!0?k="#":("string"!=typeof k||1!=k.length||d.BAD_DELIMITERS.indexOf(k)>-1||k==I)&&(k=!1),this.parse=function(e){if("string"!=typeof e)throw"Input must be a string";return w(e),t()},this.abort=function(){V=!0},this.getCharIndex=function(){return P}}function a(e){"object"!=typeof e&&(e={});var t=c(e);return("string"!=typeof t.delimiter||1!=t.delimiter.length||d.BAD_DELIMITERS.indexOf(t.delimiter)>-1)&&(t.delimiter=h.delimiter),"boolean"!=typeof t.header&&(t.header=h.header),"boolean"!=typeof t.dynamicTyping&&(t.dynamicTyping=h.dynamicTyping),"number"!=typeof t.preview&&(t.preview=h.preview),"function"!=typeof t.step&&(t.step=h.step),"function"!=typeof t.complete&&(t.complete=h.complete),"function"!=typeof t.error&&(t.error=h.error),"string"!=typeof t.encoding&&(t.encoding=h.encoding),"boolean"!=typeof t.download&&(t.download=h.download),"boolean"!=typeof t.keepEmptyRows&&(t.keepEmptyRows=h.keepEmptyRows),t}function c(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=c(e[n]);return t}function l(e){return"function"==typeof e}var u=e("jquery"),h={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},d={};return d.parse=t,d.unparse=n,d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\ufeff",d.BAD_DELIMITERS=["\r","\n",'"',d.BYTE_ORDER_MARK],d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=s,d.ParserHandle=o,d.NetworkStreamer=r,d.FileStreamer=i,u.fn.parse=function(e){function t(){if(0!=o.length){var t=o[0];if(l(e.before)){var i=e.before(t.file,t.inputElem);if("object"==typeof i){if("abort"==i.action)return void n("AbortError",t.file,t.inputElem,i.reason);if("skip"==i.action)return void r();"object"==typeof i.config&&(t.instanceConfig=u.extend(t.instanceConfig,i.config))}else if("skip"==i)return void r()}var s=t.instanceConfig.complete;t.instanceConfig.complete=function(e){l(s)&&s(e,t.file,t.inputElem),r()},d.parse(t.file,t.instanceConfig)}}function n(t,n,r,i){l(e.error)&&e.error({name:t},n,r,i)}function r(){o.splice(0,1),t()}var i=e.config||{},o=[];return this.each(function(e){var t="INPUT"==u(this).prop("tagName").toUpperCase()&&"file"==u(this).attr("type").toLowerCase()&&window.FileReader;if(!t||!this.files||0==this.files.length)return!0;for(var n=0;n<this.files.length;n++)o.push({file:this.files[n],inputElem:this,instanceConfig:u.extend({},i)})}),t(),this},d}),define("main/data_helpers",["require","vendor/papaparse","underscore","i18n","bugsnag"],function(e){var t=e("vendor/papaparse"),n=e("underscore"),r=e("i18n"),i=e("bugsnag"),o=function(e){if(/^\s*$/.test(e))return null;var n,o,s,a=t.parse(e,{preview:50}),c=[];if(a.errors.length&&!a.data.length&&i.notify("PapaParse.parse returned errors.",{metaData:{input:e,output:a.errors}}),!a.data.length||a.data.length<2)return null;var l=a.data[0].length;for(s=0;s<l;s++)c.push([]);for(o=0;o<a.data.length;o++)if(0!==o||!isNaN(parseFloat(a.data[o][0]))){if(a.data[o].length<2)return null;if(a.data[o][0]||a.data[o][1])for(s=0;s<l;s++){if(n=(a.data[o][s]||"").replace(/,/g,""),n&&isNaN(parseFloat(n)))return{error:r.t("Error: Row __rowNum__, Column __colNum__ isn't a number.",{rowNum:o+1,colNum:s+1})};c[s].push(n)}}return c[0].length<2?null:{data:c}},s=function(e,t,r){var i=n.map(e,function(e){return parseFloat(e)});i=n.filter(i,function(e){return isFinite(e)}),i.push(0);var o=n.max(i),s=n.min(i),a=Math.max(o,r)-Math.min(s,t),c=r,l=t;return o+.1*a>r&&(c=o+.2*a),s-.1*a<t&&(l=s-.2*a),[l,c]},a=function(e,t){var n=s(t[0],e.xmin,e.xmax),r=s(t[1],e.ymin,e.ymax);return{xmin:n[0],xmax:n[1],ymin:r[0],ymax:r[1]}};return{parse:o,computeNewViewport:a}}),define("main/propagate_selection",["require","graphing-calc/models/table"],function(e){function t(e){var t=e&&e.id;if(e&&"table"===e.type){var r=n.getSelectedCell(e);if(r){var i=e.columnModels[r.column];t=i?i.id:void 0}else t=void 0}if(e&&"folder"===e.type){var o=e.selectedHiddenChild;t=o?o.id:void 0}return t}var n=e("graphing-calc/models/table");return function(e,n,r,i){var o=e.getSelectedItem(),s=t(o),a=s!==i;if(a){n.select(s);var c={};"undefined"!=typeof s&&(c[s]=!0),r.setIntersectIds(c),r.updateIntersections(s)}return s}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("flux",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Flux=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports.Dispatcher=e("./lib/Dispatcher")},{"./lib/Dispatcher":2}],2:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("./invariant"),o="ID_",s=function(){function e(){r(this,e),this._lastID=1,this._callbacks={},this._isPending={},this._isHandled={},this._isDispatching=!1,this._pendingPayload=null}return e.prototype.register=function(e){var t=o+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){i(this._callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this._callbacks[e]},e.prototype.waitFor=function(e){i(this._isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?i(this._isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(i(this._callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this._invokeCallback(n))}},e.prototype.dispatch=function(e){i(!this._isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){this._pendingPayload=null,this._isDispatching=!1},e}();t.exports=s},{"./invariant":3}],3:[function(e,t,n){var r=function(e,t,n,r,i,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],u=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return l[u++]}))}throw c.framesToPop=1,c}};t.exports=r},{}]},{},[1])(1)}),define("lib/state-stack",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=100),this.clear(),this._sizeLimit=e}return e.prototype.clear=function(){this._stack=[],this._stackPointer=-1},e.prototype.getState=function(){return this._stack[this._stackPointer]},e.prototype.addState=function(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1},e.prototype.replaceState=function(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),0===this._stack.length?(this._stack.push(e),this._stackPointer=0):this._stack[this._stackPointer]=e},e.prototype.canUndo=function(){return this._stackPointer>0},e.prototype.canRedo=function(){return this._stackPointer<this._stack.length-1},e.prototype.undo=function(){this.canUndo()&&(this._stackPointer-=1)},e.prototype.redo=function(){this.canRedo()&&(this._stackPointer+=1)},e}();t.default=n}),define("graphing-calc/models/focus",["require","exports","./expression","./list"],function(e,t,n,r){"use strict";function i(e,t,n){var r=s(e,t,n);o(e,r)}function o(e,t){if(e.focusLocation=t,t&&"settings"!==t.type){var i=e.getItemModel(t.id);r.setSelected(e.getListModel(),i),i&&"expression"===i.type&&n.setSliderIsPlaying(i,!1)}}function s(e,t,n){var r=e.getItemModel(t);if(r)switch(r.type){case"expression":return{type:r.type,id:t};case"folder":return{type:r.type,id:t};case"text":return{type:r.type,id:t};case"table":var i={row:1,column:0};return n&&("cell"===n.location?i={row:n.row,column:n.column}:"end"===n?i={row:r.columnModels[0].cells.length,column:0}:"start"===n&&(i={row:0,column:0})),{type:r.type,id:t,location:i};case"image":return{type:r.type,id:t,location:"name"};default:var o=r;return o}}function a(e){var t=e.getSelectedItem();if(t&&"expression"===t.type)return void i(e,t.id);if(!t||"table"!==t.type||!e.focusLocation){for(var n=e.getFirstFullyVisibleItem();n&&"expression"!==n.type;)n=e.getItemModelByIndex(n.index+1);if(n)return void i(e,n.id);var o=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()});r.insertItemAtEnd(e.getListModel(),o),i(e,o.id)}}function c(e){var t=e.focusLocation;if(t&&"settings"!==t.type)return e.getItemModel(t.id)}function l(e,t,n){o(e,{type:"table",id:t,location:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.moveFocusToItem=i,t.setFocusLocation=o,t.computeFocusLocationForItem=s,t.addFocusForKeypad=a,t.getFocusedItem=c,t.focusTableCell=l}),define("graphing-calc/actions/keyboard",["require","exports","browser","lib/conditional_blur","../models/table","../models/focus","../models/list","../models/abstract-item"],function(e,t,n,r,i,o,s,a){"use strict";function c(e,t,n){var r=e.getItemModel(t);if(r&&"table"===r.type){var s=r,a=i.getSelectedCell(s),c=a?a.row:-1,f=a?a.column:-1,m=s.columnModels,g=m[0].cells.length,y=m.length,v=function(n,r){n===-1?l(e):n>g?u(e):(r===-1?(r=y-1,n--):r===y&&(n++,r=0),o.focusTableCell(e,t,{row:n,column:r}))},b=function(n){g>2&&i.removeRow(s,c-1),o.focusTableCell(e,t,{row:n,column:f})},x=function(n){0===f||y<=2||(i.removeColumn(s,f),o.focusTableCell(e,t,{row:c,column:n}))};switch(n){case"Left":v(c,f-1);break;case"Right":v(c,f+1);break;case"Up":v(c-1,f);break;case"Down":v(c+1,f);break;case"Enter":if(c>=g)return p(e);if(f>0)return v(c+1,f);if(c===g-1){var _=i.getRowAutoFillValues(s,c);i.insertBlankRow(s,c);for(var w=0;w<_.length;w++)i.setCellLatex(s,{row:c+1,column:w},_[w]);return void o.focusTableCell(e,t,{row:c+1,column:f})}i.insertBlankRow(s,c),o.focusTableCell(e,t,{row:c+1,column:f});break;case"Backspace":0===c?0===f?h(e):f===y-1||1===f&&3===y?v(0,f-1):x(f-1):0!==f?v(c,f-1):c===g?v(c-1,f):b(c-1);break;case"Delete":0===c?0===f?d(e):f<y-1&&x(f):c>=g||b(c)}}}function l(e){var t=e.getSelectedItem();t&&(e.inAudioTraceMode()||0!==t.index&&(s.selectPrevItem(e.getListModel()),t=e.getSelectedItem(),t&&o.moveFocusToItem(e,t.id,"end")))}function u(e){if(!e.inAudioTraceMode()){if(!s.selectNextItem(e.getListModel())){var t=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()});s.insertItemAtEnd(e.getListModel(),t),s.setSelected(e.getListModel(),t)}var n=e.getSelectedItem();n&&o.moveFocusToItem(e,n.id,"start")}}function h(e){var t=e.getSelectedItem();if(t&&(1!==e.getItemCount()||"expression"!==t.type)){var r="text"===t.type,i=s.getParentFolderModel(t);if(i){var c=e.getNumberOfItemsInFolder(i.id);if(t.index===i.index+c)return void a.setFolderId(t,"")}if(f(e),r&&n.IS_IPAD&&n.IS_IN_IFRAME)return void s.setSelected(e.getListModel(),void 0);t=e.getSelectedItem(),t&&o.moveFocusToItem(e,t.id,"end")}}function d(e){var t=e.getSelectedItem();t&&(1===e.getItemCount()&&"expression"===t.type||(m(e),t=e.getSelectedItem(),t&&o.moveFocusToItem(e,t.id,"start")))}function p(e){var t=e.getSelectedItem();if(t){if("text"===t.type&&n.IS_IPAD&&n.IS_IN_IFRAME)return r.default(),void s.setSelected(e.getListModel(),void 0);var i=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),c=t.index+1;"folder"===t.type&&t.collapsed&&(c+=e.getNumberOfItemsInFolder(t.id)),s.insertItemAtIndex(e.getListModel(),i,c),s.setSelected(e.getListModel(),i),"folder"!==t.type||t.collapsed?t.folderId&&a.setFolderId(i,t.folderId):a.setFolderId(i,t.id),t=e.getSelectedItem(),t&&o.moveFocusToItem(e,t.id)}}function f(e){var t=e.getSelectedItem(),n=e.getListModel();if(t){var r=s.findPrevSelectableItem(n,t.index);if(e._removeExpressionSynchronously(t),!r){var i=s.getFirstSelectableItem(n);i&&(r=i)}s.setSelected(n,r)}}function m(e){var t=e.getSelectedItem(),n=e.getListModel();if(t){var r=s.findNextSelectableItem(n,t.index);if(e._removeExpressionSynchronously(t),!r){var i=s.getLastSelectableItem(n);i&&(r=i)}s.setSelected(n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.navigateTableByKey=c,t.onUpPressed=l,t.onDownPressed=u,t.onBackspacePressed=h,t.onDeletePressed=d,t.onEnterPressed=p,t.upwardDeleteSelectedExpression=f,t.downwardDeleteSelectedExpression=m}),define("migrations/6to5",["require","exports","math/baseparser","lib/deepCopy","expressions/styles","graphing/columnmode","math/interpolatedlabel","./legacy-interpolated-label-parser","underscore"],function(e,t,n,r,i,o,s,a,c){"use strict";function l(e){if(6!==e.version)throw new Error("Unexpected version: "+e.version);var t={version:5,graph:e.graph,expressions:r.default(e.expressions)},l={};return t.expressions.list.forEach(function(e){if("folder"===e.type)l[e.id]=e,e.memberIds={};else if("expression"===e.type){if(e.slider)for(var t in e.slider)e.slider.hasOwnProperty(t)&&u.hasOwnProperty(t)&&(e[u[t]]=e.slider[t]);if(e.label&&!a.isMathLabel(e.label)){var r=s.parse(e.label),h="";
c.each(r.parts,function(e){h+="object"==typeof e&&e.str?e.str.substr(1):e}),e.label=h}delete e.slider,e.hasOwnProperty("style")||(e.pointStyle===i.POINT&&e.lineStyle!==i.SOLID?e.style=e.lineStyle:e.lineStyle===i.SOLID&&e.pointStyle!==i.POINT?e.style=e.pointStyle:e.style=i.SOLID)}else if("image"===e.type){if(e.center){var d=n.parse(e.center);"OrderedPair"===d.type&&(e.x=d.args[0]._inputString,e.y=d.args[1]._inputString),delete e.center}}else"table"===e.type&&e.columns.forEach(function(e){e.hasOwnProperty("style")||(e.style=i.SOLID),e.points&&e.lines?e.columnMode=o.POINTS_AND_LINES:e.lines?e.columnMode=o.LINES:e.columnMode=o.POINTS});e.folderId&&(l[e.folderId].memberIds[e.id]=!0),delete e.folderId}),t}Object.defineProperty(t,"__esModule",{value:!0});var u={min:"sliderMin",max:"sliderMax",step:"sliderInterval",hardMin:"sliderHardMin",hardMax:"sliderHardMax",animationPeriod:"sliderAnimationPeriod",loopMode:"sliderLoopMode",playDirection:"sliderPlayDirection",isPlaying:"sliderIsPlaying"};t.default=l}),define("main/layout-model",["require","exports"],function(e,t){"use strict";function n(e){return{graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!e.expressions,inEditListMode:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLayoutModel=n}),define("main/settings-view-model",["require","exports","tslib","graphing/label"],function(e,t,n,r){"use strict";function i(e,t){var n=r.value(e,t),i="";if(n.mantissa)i=n.mantissa.split("×").join("\\cdot")+"^{"+n.superscript+"}";else{var o=n.string.split("/");i=2===o.length?"-"===o[0][0]?"-\\frac{"+o[0].slice(1)+"}{"+o[1]+"}":"\\frac{"+o[0]+"}{"+o[1]+"}":n.string}return i=i.replace(/π/,"\\pi")}function o(e){return{xmin:i(e.xmin,e.xmax-e.xmin),xmax:i(e.xmax,e.xmax-e.xmin),ymin:i(e.ymin,e.ymax-e.ymin),ymax:i(e.ymax,e.ymax-e.ymin)}}function s(e,t){return 0===e?"":i(e,t)}function a(e,t,r){var i=o(e);return n.__assign({},i,{xstep:s(t,e.xmax-e.xmin),ystep:s(r,e.ymax-e.ymin)})}function c(){return{limitLatex:{xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:""},focusOnOpen:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatLatex=i,t.formatViewport=o,t.formatStep=s,t.limitLatex=a,t.defaultSettingsViewModel=c}),define("expressions/list_move_controller",["require","exports","graphing/dragmode","lib/number-to-latex","graphing/label","lib/rounding","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/list","graphing-calc/models/image"],function(e,t,n,r,i,o,s,a,c,l){"use strict";function u(e,t,r){if(r.tableInfo){c.setSelected(t,void 0);var i=e.getItemModel(r.tableInfo.tableId);if(!i||"table"!==i.type)return;a.setIsDraggingOnGrapher(i,!0)}else{var o=e.getItemModel(r.sketch.id);if(!o||"expression"!==o.type&&"image"!==o.type)return;if("image"!==o.type&&c.setSelected(t,void 0),!o.formula||!o.formula.move_strategy)return;for(var u=o.formula.move_strategy,h=0;h<u.length;h++)if("updateCoordinate"===u[h].type)"image"===o.type?l.setIsDraggingOnGrapher(o,!0):"expression"===o.type&&s.setIsDraggingOnGrapher(o,!0);else if("updateSlider"===u[h].type){var d=e.getItemModel(u[h].id);if(!d||"expression"!==d.type)continue;var p;if(p="expression"===o.type?o.reconciledDragMode:void 0,p===n.NONE||0===h&&p===n.Y||1===h&&p===n.X)continue;s.setSliderDragging(d,!0)}}}function h(e,t){if(t.tableInfo){var n=e.getItemModel(t.tableInfo.tableId);if(!n||"table"!==n.type)return;return void a.setIsDraggingOnGrapher(n,!1)}var r=e.getItemModel(t.sketch.id);if(r&&("expression"===r.type||"image"===r.type)&&r.formula&&r.formula.move_strategy)for(var i=r.formula.move_strategy,o=0;o<i.length;o++)if("image"===r.type?l.setIsDraggingOnGrapher(r,!1):"expression"===r.type&&s.setIsDraggingOnGrapher(r,!1),"updateSlider"===i[o].type){var c=e.getItemModel(i[o].id);c&&"expression"===c.type&&s.setSliderDragging(c,!1)}}function d(e,t,n,i){var s=t.tableInfo.tableId,c=t.tableInfo.rowIndex,l=t.tableInfo.columnId,u=t.tableInfo.dragX,h=t.tableInfo.dragY,d=e.getItemModel(s);if(d&&"table"===d.type&&a.getColumnModel(d,l)){var f=i.closestPointOnScreen(n),m=i.pixelsToMath.mapRect(p(f,.5)),g={x:r.default(o.shortestDecimalBetween(m.left,m.right)),y:r.default(o.shortestDecimalBetween(m.top,m.bottom))};if(u&&a.setCellLatex(d,{row:c+1,column:0},g.x),h){var y=a.getColumnModel(d,l).index;a.setCellLatex(d,{row:c+1,column:y},g.y)}}}function p(e,t){return{left:e.x-t,right:e.x+t,top:e.y+t,bottom:e.y-t}}function f(e,t,n){var s;s=e.assignment?i.identifierToLatex(e.assignment)+"=":"";var a=o.shortestDecimalBetween(t[0].min,t[0].max),c=o.shortestDecimalBetween(t[1].min,t[1].max),l="updateCoordinate"===e.move_strategy[0].type&&m(0,n),u="updateCoordinate"===e.move_strategy[1].type&&m(1,n),h=l?r.default(a):e.move_strategy[0].inputString,d=u?r.default(c):e.move_strategy[1].inputString;return s+"\\left("+h+","+d+"\\right)"}function m(e,t){switch(t){case n.X:return 0===e;case n.Y:return 1===e;case n.XY:return!0;default:return!1}}function g(e,t,n){if(0===n[0]&&0===n[1])return{x:t.x,y:t.y,width:e.width,height:e.height};var r=Math.cos(e.radianAngle),i=Math.sin(e.radianAngle),o=t.x-e.x,s=t.y-e.y;if(0===n[0])return{x:e.x,y:e.y,width:e.width,height:2*n[1]*(r*s+i*o)};if(0===n[1])return{x:e.x,y:e.y,width:2*n[0]*(r*o-i*s),height:e.height};var a=2*(e.width*n[0]*(r*o-i*s)+e.height*n[1]*(i*o+r*s))/(e.width*e.width+e.height*e.height);return{x:e.x,y:e.y,width:a*e.width,height:a*e.height}}function y(e,t,n){for(var r=[{x:t.left,y:t.bottom},{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom}],i=["x","y","width","height"],o={x:1/0,y:1/0,width:1/0,height:1/0},s={x:-(1/0),y:-(1/0),width:-(1/0),height:-(1/0)},a=0;a<r.length;a++)for(var c=g(e,r[a],n),l=0;l<i.length;l++){var u=i[l];o[u]=Math.min(o[u],c[u]),s[u]=Math.max(s[u],c[u])}return{min:o,max:s}}function v(e,t,n,i,s){var a=t.formula;if(!a||!a.move_strategy)return!1;var c=a.dimensions,u=n.scaleFactor,h=0!==u[0]&&0!==u[1],d=s.closestPointOnScreen(i),f=s.pixelsToMath.mapRect(p(d,h?.05:.5)),m=y(c,f,u),g=s.mathToPixels.mapRect({left:c.x-.5*c.width,right:c.x+.5*c.width,top:c.y-.5*c.height,bottom:c.y+.5*c.height}),v=Math.abs(g.right-g.left),b=Math.abs(g.bottom-g.top),_=s.mathToPixels.mapRect({left:m.min.x-.5*m.min.width,right:m.min.x+.5*m.min.width,top:m.min.y-.5*m.min.height,bottom:m.min.y+.5*m.min.height}),w=Math.abs(_.right-_.left),E=Math.abs(_.bottom-_.top);if(w<v&&w<1||E<b&&E<1)return!1;for(var S=["width","height","x","y"],M=!1,I=0;I<S.length;I++){var k=S[I],T=a.move_strategy[I];switch(T.type){case"updateCoordinate":var C=o.shortestDecimalBetween(m.min[k],m.max[k]),A=r.default(C);switch(k){case"width":case"height":l.setMQAttribute(t,k,A);break;case"x":if("updateCoordinate"===a.move_strategy[3].type){var P=o.shortestDecimalBetween(m.min.y,m.max.y),O=r.default(P),L="\\left("+A+","+O+"\\right)";l.setMQAttribute(t,"center",L)}else{var L="\\left("+A+","+a.move_strategy[3].inputString+"\\right)";l.setMQAttribute(t,"center",L)}break;case"y":if("updateCoordinate"!==a.move_strategy[2].type){var L="\\left("+a.move_strategy[2].inputString+","+A+"\\right)";l.setMQAttribute(t,"center",L)}break;default:var D=k;return D}M=!0;break;case"updateSlider":var N=e.getItemModel(T.id);if(!N||"expression"!==N.type||!N.sliderExists)continue;var F=T.coefficients[0],q=T.coefficients[1],R=q*m.min[k]+F,j=q*m.max[k]+F,V=o.shortestDecimalBetween(R,j);x(N,V)&&(M=!0)}}return M}function b(e,t,n,r,i){var a=t.formula;if(!a||!a.move_strategy)return!1;var c=t.reconciledDragMode,l=!1,u=r.closestPointOnScreen(n),h=r.pixelsToMath.mapRect(p(u,.5)),d=[{min:h.left,max:h.right},{min:h.top,max:h.bottom}];"updateCoordinate"!==a.move_strategy[0].type&&"updateCoordinate"!==a.move_strategy[1].type||(s.setLatex(t,f(a,d,c)),l=!0);for(var g=0;g<2;g++){var y=a.move_strategy[g];if("updateSlider"===y.type&&m(g,c)){var v=e.getItemModel(y.id);if(v&&"expression"===v.type&&v.sliderExists){var b=y.coefficients[0],_=y.coefficients[1],w=o.shortestDecimalBetween(_*d[g].min+b,_*d[g].max+b),E=i?i[g]:"";x(v,w,E)&&(l=!0)}}}return l}function x(e,t,n){var r=e.formula.constant_value,i=n?s.computeSliderAdjustment(e,n):s.computeSliderSnappedValue(e,t);return i!==r&&(s.setSliderValue(e,i),!0)}function _(e,t,n,r,i){if(t.tableInfo)return d(e,t,n,r),!0;var o=e.getItemModel(t.sketch.id);return!!o&&("image"===o.type?v(e,o,t,n,r):"expression"===o.type&&b(e,o,n,r,i))}Object.defineProperty(t,"__esModule",{value:!0}),t.onStartMovingPoint=u,t.onStopMovingPoint=h,t.onMovePoint=_}),define("main/blank_state",["require","exports","main/migrate_state"],function(e,t,n){"use strict";if(Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_STATE={version:6,graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},t.BLANK_STATE.version!==n.currentVersion)throw new Error("Blank state version is "+t.BLANK_STATE.version+", but latest migration version is "+n.currentVersion+". The blank state should be migrated to the latest version.");t.default=t.BLANK_STATE}),define("expressions/measure-expressions",["require","exports","jquery"],function(e,t,n){"use strict";function r(e){for(var t=[],n=e.getAllItemModels(),r=0,i=n;r<i.length;r++){var o=i[r],s=e.getItemRootNodeById(o.id);s&&t.push(s)}return t}function i(e){for(var t=e.getAllItemModels(),n=t.length-1;n>=0;n--){var r=t[n];if(r.dcgView)return r.id}}function o(e,t){for(var n=r(e),i=0,o=n.length-1;i<=o;){var s=i+Math.floor((o-i)/2),a=n[s],c=a.getBoundingClientRect();if(c.top>t)o=s-1;else{if(!(c.bottom<t))return a;i=s+1}}}function s(e,t){for(var n,i=r(e),o=0,s=i.length-1;o<=s;){var a=o+Math.floor((s-o)/2),c=i[a],l=c.getBoundingClientRect();l.top>t?(s=a-1,n=c):o=a+1}return n}function a(e,t){var r=e.getRootElt();if(r){var i=h(r);if(i){var s=i.getBoundingClientRect();if(t){var a=e.getItemRootNodeById(t);if(a){var c=a.getBoundingClientRect();if(c.height>0&&c.top<=s.top&&c.bottom>=s.top)return t}}var l=o(e,s.top);if(l)return n(l).attr("expr-id")}}}function c(e,t){var r=e.getRootElt();if(r){var s=h(r);if(s){var a=s.getBoundingClientRect(),c=i(e);if(c){if(t){var l=e.getItemRootNodeById(t);if(l){var u=l.getBoundingClientRect();if(u.height>0&&u.top<=a.bottom&&u.bottom>=a.bottom)return t;if(t===c&&u.bottom<=a.bottom)return t}}var d=o(e,a.bottom);return d&&n(d).attr("expr-id")||c}}}}function l(e){var t=e.getRootElt();if(t){var r=h(t);if(r){var i=r.getBoundingClientRect(),o=s(e,i.top-2);if(o)return n(o).attr("expr-id")}}}function u(e,t){var n=e.getRootElt();if(!n)return!1;var r=h(n);if(!r)return!1;var i=e.getItemRootNodeById(t);if(!i)return!1;var o=r.getBoundingClientRect(),s=i.getBoundingClientRect();return s.bottom>o.top&&s.top<o.bottom}function h(e){return n(e).find(".dcg-exppanel")[0]}function d(e){var t=h(e);if(t)return n(t)}function p(e){var t=e.getRootElt();if(t){var r=n(t).find(".dcg-exppanel-outer")[0];if(r)return r.getBoundingClientRect()}}function f(e){var t=e.getRootElt();if(t){var n=h(t);if(n)return n.getBoundingClientRect()}}function m(e){var t=e.getRootElt();if(t){var n=h(t);if(n){var r=n.getBoundingClientRect(),i=n.scrollTop;return r.top-i}}}function g(e){var t=e.getRootElt();if(t)return n(t).find(".dcg-expressionlist").height()}function y(e){var t=e.getRootElt();if(!t)return 0;var n=d(t);return n?n.find(".dcg-drag-container").height():0}Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstPartiallyVisibleItemId=a,t.getLastPartiallyVisibleItemId=c,t.getFirstFullyVisibleItemId=l,t.isItemPartiallyVisible=u,t.getExppanelElt=h,t.getExppanelSelector=d,t.getOuterExppanelRect=p,t.getExppanelRect=f,t.getExppanelScrolledTop=m,t.getExpListHeight=g,t.getDragContainerHeight=y}),define("expressions/dragdrop_expressions",["require","exports","tipsy","tslib","jquery","expressions/measure-expressions","lib/animation-frame","jquery.handleevent"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.active=!1,this.controller=e;var t=e.getRootElt();if(t){var n=o.getExppanelSelector(t);n&&(this.$exppanel=n)}}return e.prototype.startDragging=function(e){this.active=!0,this.mouseY=e,this.setupEventListeners(),n.addDisableLock()},e.prototype.applyDrag=function(){var e=this.controller.getListModel(),t=e.dragState;if(t){this.scheduleUpdateScroll();var n=this.measureDOM(t);if(n){var i=n.floatingPreviewRect,o=this.controller.getItemModel(t.firstItemId);if(o){for(var s=o.index,a=0,c=n.visibleRects;a<c.length;a++){var l=c[a],u=l.id,h=l.rect;if(u!==o.id){var d=this.controller.getItemModel(u);if(!d)return;var p=d.index<o.index;if(p){if(i.top<h.top+h.height/2){s=d.index;break}}else i.bottom>h.top+h.height/2&&(s=d.index,"folder"===d.type&&d.collapsed&&(s+=this.controller.getNumberOfItemsInFolder(d.id)))}}var f,m;s>o.index?(f=s,m=s+1):s<o.index?(f=s-1,m=s):(f=s-1,m=s+1);var g=this.controller.getItemModelByIndex(f),y=this.controller.getItemModelByIndex(m),v="",b="";g&&(v="folder"===g.type?g.id:g.folderId),y&&(b="folder"===y.type?y.id:y.folderId);var x="";return v&&(b===v?"folder"===o.type?s=o.index:x=v:"folder"!==o.type&&this.isPreviewTopContainedInFolder(n,v)&&(x=v)),{dragState:r.__assign({},n.dragState),newIndex:s,folderId:x}}}}},e.prototype.measureDOM=function(e){var t=o.getExppanelScrolledTop(this.controller),n=o.getExpListHeight(this.controller);if(void 0!==t&&void 0!==n){var i=o.getDragContainerHeight(this.controller),s=e.mouseY-e.grabOffset+2,a=s-t;a=Math.max(a,-i/2),a=Math.min(a,n-i);var c={top:s,bottom:s+i,height:i},l=this.controller.findFirstPartiallyVisibleItem(),u=this.controller.findLastPartiallyVisibleItem();if(l&&u){for(var h=[],d=l.index;d<=u.index;d++){var p=this.controller.getItemModelByIndex(d);if(p){var f=this.controller.getItemRootNodeById(p.id);if(f&&p.id!==e.firstItemId){var m=f.getBoundingClientRect();h.push({id:p.id,rect:m})}}}if(0!==h.length)return{dragState:r.__assign({},e,{itemTop:a}),floatingPreviewRect:c,visibleRects:h}}}},e.prototype.isPreviewTopContainedInFolder=function(e,t){for(var n=e.visibleRects,r=e.floatingPreviewRect,i=0,o=n;i<o.length;i++){var s=o[i],a=s.id,c=s.rect;if(c.top<=r.top&&c.bottom>=r.top){var l=this.controller.getItemModel(a);if(!l)return!1;if("folder"===l.type&&l.id===t)return!0;if(l.folderId===t)return!0}}return!1},e.prototype.scheduleUpdateScroll=function(){var e=this;this.updateScrollScheduled||(this.updateScrollScheduled=!0,s.requestAnimationFrame(function(){e.updateScroll(),e.updateScrollScheduled=!1}))},e.prototype.stop=function(){this.active=!1,this.tearDownEventListeners(),n.removeDisableLock(),this.controller.dispatch({type:"stop-dragdrop"})},e.prototype.setupEventListeners=function(){var e=this;i(document).on("dcg-tapmove.dragdrop",function(t){e.mouseY=t.changedTouches[0].clientY,e.controller.dispatch({type:"update-dragdrop",mouseY:e.mouseY})}),i(document).on("dcg-tapend.dragdrop",function(t){e.stop(),t.handle("dragdrop")})},e.prototype.tearDownEventListeners=function(){i(document).off(".dragdrop")},e.prototype.updateScroll=function(){if(this.active){var e=this.$exppanel[0].getBoundingClientRect(),t=0;t=Math.min(t,this.mouseY-e.top),t=Math.max(t,this.mouseY-e.bottom+30),t=t*e.height/900,t&&this.$exppanel.scrollTop(this.$exppanel.scrollTop()+t)}},e}();t.default=a}),define("main/controller",["require","exports","browser","graphing/viewport","main/migrate_state","main/data_helpers","scroll_helpers","main/propagate_selection","tslib","graphing/label","underscore","i18n","flux","graphing/dragmode","expressions/styles","expressions/opacity","lib/conditional_blur","lib/deepCopy","lib/number-to-latex","lib/state-stack","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/image","graphing-calc/models/folder","graphing-calc/models/text","graphing-calc/models/list","graphing-calc/models/abstract-item","graphing-calc/models/focus","graphing-calc/actions/keyboard","migrations/6to5","lib/evaluate-single-expression","./layout-model","./settings-view-model","jquery","bugsnag","expressions/list_move_controller","./blank_state","dcgview-helpers/mathquill-view","expressions/measure-expressions","expressions/dragdrop_expressions"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b,x,_,w,E,S,M,I,k,T,C,A,P,O,L,D,N,F,q,R,j){"use strict";function V(e){return e?c.__assign({},e,{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0}):e}function B(e,t){return u.isEqual(V(e),V(t))}Object.defineProperty(t,"__esModule",{value:!0});var U=function(){function e(e){var t=this;this.__nextItemId=0,this.__pendingImageUploads={},this.nextSubscription=0,this.subscriptions={},this._queuedCallbacks=[],this._hasUnsavedChanges=!1,this.shouldScrollSelectedItemIntoViewAfterDispatch=!1,this.lastParsableObjects={},this.toastData={},this.t=function(e,n){var r=t.graphSettings.language;return h.t(e,n,r)},this.unpack=function(e){var n=t.graphSettings.language;return h.unpack(e,n)},this.dispatch=function(e){if("blur-focus-location"===e.type&&t.dispatcher.isDispatching())return void t.runAfterDispatch(function(){t.dispatch(e)});D.leaveBreadcrumb("dispatch::"+t.bugsnagContext,{type:e.type}),t.dispatcher.dispatch(e),t.onEventsEmitted&&t.onEventsEmitted(t.enqueuedEvents);for(var n;n=t._queuedCallbacks.shift();)n()},this.emitUpdateRequests=function(){for(var e in t.subscriptions)t.subscriptions[e]();if(t.layoutController){var n=t.layoutController.$root,r=!n.hasClass("dcg-fullscreen"),i=t.layoutModel.expressionsVisible;r!==i&&n.toggleClass("dcg-fullscreen",!i)}},this.bugsnagContext="",this.inPrintMode=!1,this.stateStack=new b.default,this.isCurrentlyDoingSetState=!1,this.graphSettings=e,this.listModel=M.init(this),this.layoutModel=P.defaultLayoutModel(this.graphSettings.config),this.layoutMeasurements={isNarrow:!1,keypadHeight:void 0},this.settingsViewModel=O.defaultSettingsViewModel(),this.addExpressionViewModel={focusOnOpen:!1},this.imageRetryState={lastAttemptTime:0,attempts:0},this.setupDispatcher()}return e.prototype.hasUnsavedChanges=function(){return this._hasUnsavedChanges},e.prototype.hasVisibleAndUndoableToast=function(){return"function"==typeof this.toastData.undoCallback},e.prototype.getToastData=function(){return this.toastData},e.prototype.toastUndo=function(){"function"==typeof this.toastData.undoCallback&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))},e.prototype.runAfterDispatch=function(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()},e.prototype.enqueueEvent=function(e){this.enqueuedEvents[e]=!0},e.prototype.setupDispatcher=function(){var e=this;this.dispatcher=new d.Dispatcher,this.dispatcher.register(function(t){var n=e.getSelectedItem(),r=e.getFocusLocation();e.shouldScrollSelectedItemIntoViewAfterDispatch=!1,e.enqueuedEvents={change:!1,graphReset:!1,clearUnsavedChanges:!1,openDrawer:!1,userMovedPoint:!1},e.isCurrentlyDoingSetState=!1,e.handleDispatchedAction(t),e.updateTheComputedWorld(),e.updateRenderShellsBeforePaint(),e.retryLoadingFailedImage(),"undo"===t.type||"redo"===t.type||e.isDragDropActive()||e.commitUndoRedoSynchronously(t.type),e.requestParseForAllItems(),e.isCurrentlyDoingSetState=!1,e.emitUpdateRequests(),e.enqueuedEvents.change&&e.grapher&&e.grapher.markLabelsDirty(),e.enqueuedEvents.clearUnsavedChanges?e._hasUnsavedChanges=!1:e.enqueuedEvents.change&&(e._hasUnsavedChanges=!0);var i=e.getSelectedItem();i?n&&n.guid===i.guid||(e.shouldScrollSelectedItemIntoViewAfterDispatch=!0):e.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var o=e.getFocusLocation();if(o&&!u.isEqual(o,r)){var s=e.getFocusedItem();s==i&&(e.shouldScrollSelectedItemIntoViewAfterDispatch=!0)}e.shouldScrollSelectedItemIntoViewAfterDispatch&&e.scrollSelectedItemIntoView(),e.updateRenderShellsAfterPaint(),e.updateDragDrop()})},e.prototype.handleDispatchedAction=function(e){var t=this;switch(e.type){case"api-method-called":break;case"undo":this.undo();break;case"redo":this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":"Enter"===e.key?T.onEnterPressed(this):"Up"===e.key?T.onUpPressed(this):"Down"===e.key?T.onDownPressed(this):"Backspace"===e.key?T.onBackspacePressed(this):"Delete"===e.key&&T.onDeletePressed(this);break;case"select-previous-expression":M.selectPrevItem(this.listModel);break;case"select-next-expression":M.selectNextItem(this.listModel);break;case"upward-delete-selected-expression":T.upwardDeleteSelectedExpression(this);break;case"downward-delete-selected-expression":T.downwardDeleteSelectedExpression(this);break;case"navigate-table-by-key":T.navigateTableByKey(this,e.id,e.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(e.id);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(e.id);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(e.id,e.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(e.state));break;case"duplicate-expression":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;var r=x.getState(n,{stripDefaults:!1}),i=this.createItemModel(c.__assign({},r,{id:this.generateId()}));this._toplevelInsertItemAt(n.index+1,i,!1,n.folderId);break;case"insert-item-at-index":var o=this.createItemModel(e.state);this._toplevelInsertItemAt(e.index,o,e.focus,e.folderId);break;case"new-expression-at-end":var o=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});M.insertItemAtEnd(this.listModel,o),k.moveFocusToItem(this,o.id);break;case"new-expression":var o=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this._toplevelNewItemAtSelection(o,!0),this._closeAddExpression();break;case"new-text":var o=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(o,!0),this._closeAddExpression();break;case"new-folder":var o=this.createItemModel({type:"folder",id:this.generateId()});this._toplevelNewItemAtSelection(o,!0),this._closeAddExpression();break;case"new-images":this._uploadImagesAndWaitForThemToLoad(e.files),this._closeAddExpression();break;case"new-table":var s=M.findAvailableColumnSubscript(this.listModel),a=_.makeTableState(s,[[""],[""]],this),o=this.createItemModel(a);this._toplevelNewItemAtSelection(o,!0),this._closeAddExpression();break;case"paste-table":this._pasteTable(e.data);break;case"remove-item-by-id":M.removeItemById(this.listModel,e.id);break;case"replace-item-at-index":var o=this.createItemModel(e.state);this._toplevelReplaceItemAt(e.index,o,e.focus);break;case"create-sliders-for-item":this._createSlidersForItem(e.id,e.variables);break;case"start-dragdrop":var u=this.getItemModel(e.id);if(!u)return;var h=this.getItemRootNodeById(u.id);if(!h)return;var d=h.getBoundingClientRect();M.setSelected(this.listModel,void 0);var f=e.grabY-d.top,m=!1,g=1;"folder"===u.type&&(g+=this.getNumberOfItemsInFolder(u.id),u.collapsed||(m=!0,E.setCollapsed(u,!0))),M.setDragState(this.listModel,{firstItemId:u.id,numberOfItems:g,expandFolder:m,grabOffset:f,mouseY:e.mouseY,itemTop:0}),this.dragdrop_expressions.startDragging(e.mouseY);break;case"update-dragdrop":var y=this.listModel.dragState;if(!y)return;M.setDragState(this.listModel,c.__assign({},y,{mouseY:e.mouseY}));break;case"stop-dragdrop":var y=this.listModel.dragState;if(!y)return;var v=this.getItemModel(y.firstItemId);if(!v)return;M.setSelected(this.listModel,v),"folder"===v.type&&y.expandFolder&&E.setCollapsed(v,!1),M.setDragState(this.listModel,void 0);break;case"set-selected-id":var o=this.getItemModel(e.id);M.setSelected(this.listModel,o);break;case"set-selected-index":var o=this.getItemModelByIndex(e.index);M.setSelected(this.listModel,o);break;case"set-none-selected":M.setSelected(this.listModel,void 0);break;case"set-focus-location":var b=e.location?e.location.type:"";"expression"!==b&&"text"!==b&&"folder"!==b||(this.layoutModel=c.__assign({},this.layoutModel,{inEditListMode:!1})),k.setFocusLocation(this,e.location);break;case"move-focus-to-item":k.moveFocusToItem(this,e.id,e.where);break;case"blur-focus-location":this.isFocusLocationFocused(e.location)&&k.setFocusLocation(this,void 0);break;case"set-folder-collapsed":var u=this.getItemModel(e.id);if(!u||"folder"!==u.type)return;E.setCollapsed(u,e.isCollapsed);break;case"set-item-secret":var o=this.getItemModel(e.id);if(!o)return;I.setSecret(o,e.isSecret);break;case"set-tablecolumn-color":var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setColumnColor(u,e.columnId,e.color);break;case"toggle-item-hidden":this._toggleItemHidden(e.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(e.tableId,e.columnId);break;case"set-item-label":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setLabel(u,e.label);break;case"set-item-showlabel":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setShowLabel(u,e.showLabel);break;case"set-item-color":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setColor(u,e.color);break;case"set-item-fill":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setFill(u,e.fill),this._setItemHidden(u.id,x.shouldHide(u));break;case"set-image-opacity":var u=this.getItemModel(e.id);if(!u||"image"!==u.type)return;w.setOpacity(u,e.opacity),this._setItemHidden(u.id,!1);break;case"image-upload-error":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],this._showToast({message:this.t("Image upload failed.")}));break;case"image-upload-success":if(this.__pendingImageUploads[e.token]){delete this.__pendingImageUploads[e.token];var C=this.createItemModel({type:"image",id:this.generateId(),width:e.width,height:e.height,image_url:e.url,name:e.name});this._toplevelNewItemAtSelection(C,!1)}this.isUploadingImages()||(this.toastData={});break;case"image-load-success":var C=this.getItemModel(e.id);if(!C||"image"!==C.type)return;w.setLoadStatus(C,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0};break;case"image-load-error":var C=this.getItemModel(e.id);if(!C||"image"!==C.type)return;w.setLoadStatus(C,"failed");break;case"image-retry-loading":var C=this.getItemModel(e.id);if(!C||"image"!==C.type)return;w.retryLoading(C);break;case"set-item-dragmode":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setDragMode(u,e.dragMode),e.dragMode!==p.NONE&&this._setItemHidden(e.id,!1);break;case"set-tablecolumn-dragmode":var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setColumnDragMode(u,e.columnId,e.dragMode),e.dragMode!==p.NONE&&this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-points":var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setColumnPoints(u,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,_.shouldHideColumn(u,e.columnId));break;case"set-tablecolumn-lines":var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setColumnLines(u,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,_.shouldHideColumn(u,e.columnId));break;case"set-tablecolumn-linestyle":var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setColumnLineStyle(u,e.columnId,e.lineStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-pointstyle":var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setColumnPointStyle(u,e.columnId,e.pointStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-item-points":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setPoints(u,e.points),this._setItemHidden(e.id,x.shouldHide(u)),e.points||u.dragMode===p.NONE||x.setDragMode(u,p.NONE);break;case"set-item-pointstyle":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setPointStyle(u,e.pointStyle),this._setItemHidden(e.id,!1);break;case"set-item-lines":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setLines(u,e.lines),this._setItemHidden(e.id,x.shouldHide(u));break;case"set-item-linestyle":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setLineStyle(u,e.lineStyle),this._setItemHidden(e.id,!1);break;case"set-item-fillopacity":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setFillOpacity(u,e.fillOpacity),this._setItemHidden(e.id,!1);break;case"set-item-labelSize":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setLabelSize(u,e.labelSize);break;case"plot-residuals":var o=this.getItemModel(e.id);if(!o||"expression"!==o.type)return;var A=o.formula.regression,P=A.residualSuggestionId;if(!P)return;var O=this.getItemModel(P);if(!O)return;_.insertBlankColumn(O,O.columnModels.length-1,{id:this.generateId(),latex:l.identifierToLatex(A.residualVariable),color:this.getNextColor()});break;case"toggle-logmode":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;var L=u.isLogModeRegression;x.setLogMode(u,!L);break;case"set-item-latex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var o=this.getItemModel(e.id);if(!o||"expression"!==o.type)return;var D=e.latex;if('"'===D&&this.areNotesEnabled()){var q=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelReplaceItemAt(o.index,q,!0)}else""===D?x.blankOutExpressionAfterClearingLatex(o):"betchacant"===D?this.runAfterDispatch(function(){t.triggerBetchacant&&t.triggerBetchacant()}):x.setLatex(o,D);break;case"set-folder-title":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"folder"!==u.type)return;E.setTitle(u,e.title);break;case"set-image-mq-attribute":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"image"!==u.type)return;w.setMQAttribute(u,e.attribute,e.latex);break;case"set-image-name":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"image"!==u.type)return;w.setName(u,e.name);break;case"set-graph-settings":for(var R in e)"type"!==R&&this.graphSettings.setProperty(R,e[R]);break;case"set-domain-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setDomainMin(u,e.latex);break;case"set-domain-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setDomainMax(u,e.latex);break;case"set-last-valid-domain":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.revertToLastValidDomain(u);break;case"set-note-text":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"text"!==u.type)return;S.setText(u,e.text);break;case"set-edit-list-mode":this.layoutModel=c.__assign({},this.layoutModel,{inEditListMode:e.isEditListMode}),M.setSelected(this.listModel,void 0);break;case"set-tablecell-latex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.tableId);if(!u||"table"!==u.type)return;_.setCellLatex(u,e.cell,e.latex);break;case"set-state":this.externalSetState(e.state,e.opts);break;case"set-blank":this.externalSetState(F.default,e.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges");break;case"reset-graph":var j=this.getState();this.externalSetState(this.graphSettings.defaultState,{}),this._showToast({message:this.t("Graph reset."),undoCallback:function(){return t.dispatch({type:"set-state",state:j,opts:{}})}}),this.enqueueEvent("graphReset");break;case"clear-graph":if(this.triggerClearGraph)return void this.runAfterDispatch(function(){return t.triggerClearGraph()});var V=this.getState();this.externalSetState(F.default,{}),this._showToast({message:this.t("Graph cleared."),undoCallback:function(){return t.dispatch({type:"set-state",state:V,opts:{}})}}),this.enqueueEvent("graphReset");break;case"on-evaluator-changes":M.onEvaluatorFormulaUpdates(this.listModel,e.changes);break;case"process-graph-data":var B;for(B in e.graphData.addedGraphs){var U=e.graphData.addedGraphs[B];this.grapher&&this.grapher.updateSketch(B,U),M.onGraphComputed(this.listModel,B,U)}for(B in e.graphData.removedGraphs)this.grapher&&this.grapher.hide(B);for(B in e.graphData.intersections)this.grapher&&this.grapher.updateIntersections(B,e.graphData.intersections[B]);
this.grapher&&this.grapher.poiController.handleTraceUpdate();break;case"add-helper-expression":M.addHelperExpression(this.listModel,e.state);break;case"tick":this._tick(e.time);break;case"drag-slider-value":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderValue(u,e.value);break;case"set-slider-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderMin(u,e.isHard,e.latex);break;case"set-slider-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderMax(u,e.isHard,e.latex);break;case"set-slider-steplatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderStep(u,e.latex);break;case"set-slider-dragging":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderDragging(u,e.dragging);break;case"set-slider-isplaying":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderIsPlaying(u,e.isPlaying);break;case"set-slider-loopmode":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderLoopMode(u,e.loopMode);break;case"set-slider-animationperiod":var u=this.getItemModel(e.id);if(!u||"expression"!==u.type)return;x.setSliderAnimationPeriod(u,e.animationPeriod);break;case"show-expressions-list":this._showExpressions();break;case"hide-expressions-list":this._hideExpressions();break;case"show-keypad":this.focusLocation||k.addFocusForKeypad(this);break;case"open-drawer":this.enqueueEvent("openDrawer");break;case"resize-exp-list":this.layoutController.setExpListWidth(e.expListWidth),this.runAfterDispatch(function(){t.layoutController&&t.layoutController.resize()});break;case"toast/show":this._showToast(e.toast);break;case"toast/close":var z=this.toastData.onHide;z&&this.runAfterDispatch(z),this.toastData={};break;case"toast/undo":var G=this.toastData.undoCallback;G&&this.runAfterDispatch(G),this.toastData={};break;case"toast/learn-more":var $=this.toastData.undoCallback;$&&this.runAfterDispatch($),this.toastData={};break;case"start-moving-point":N.onStartMovingPoint(this,this.listModel,e.pointInfo);break;case"stop-moving-point":N.onStopMovingPoint(this,e.pointInfo);break;case"on-move-point":var H=N.onMovePoint(this,e.pointInfo,e.screenPt,e.projection,e.keyboardDirection);H&&this.enqueueEvent("userMovedPoint");break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(e.viewport);break;case"set-axis-limit-latex":this._setAxisLimitLatex(e.limit,e.latex);break;case"toggle-graph-settings":this.layoutModel=c.__assign({},this.layoutModel,{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),this.settingsViewModel=c.__assign({},this.settingsViewModel,{focusOnOpen:e.focusOnOpen}),e.focusOnOpen&&k.setFocusLocation(this,void 0);break;case"close-graph-settings":this.layoutModel=c.__assign({},this.layoutModel,{graphSettingsOpen:!1});break;case"toggle-add-expression":this.layoutModel=c.__assign({},this.layoutModel,{addExpressionOpen:!this.layoutModel.addExpressionOpen}),this.addExpressionViewModel=c.__assign({},this.addExpressionViewModel,{focusOnOpen:e.focusOnOpen}),e.focusOnOpen&&k.setFocusLocation(this,void 0);break;case"close-add-expression":this._closeAddExpression();break;case"computed-layout":this.layoutMeasurements=e.measurements,this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;default:var Y=e;return Y}},e.prototype._populateSettingsViewLimitLatex=function(){this.grapher&&(this.settingsViewModel=c.__assign({},this.settingsViewModel,{limitLatex:O.limitLatex(this.grapher.getCurrentViewport(),this.getGraphSettings().xAxisStep,this.getGraphSettings().yAxisStep)}))},e.prototype.getSettingsViewModel=function(){return this.settingsViewModel},e.prototype.getListModel=function(){return this.listModel},e.prototype.getAddExpressionViewModel=function(){return this.addExpressionViewModel},e.prototype.subToChanges=function(e){var t=this,n=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[n]=e,function(){delete t.subscriptions[n]}},e.prototype.updateTheComputedWorld=function(){var e=this;M.reindex(this.listModel),M.updateDrawOrder(this.listModel),this.grapher&&this.grapher.setSketchOrder(this.listModel.drawOrder);for(var t=0,n=this.getAllItemModels();t<n.length;t++){var r=n[t];switch(r.type){case"expression":x.onControllerUpdate(r);break;case"image":w.onControllerUpdate(r);break;case"table":_.onControllerUpdate(r);break;case"folder":E.onControllerUpdate(r);break;case"text":S.onControllerUpdate(r);break;default:var i=r;return i}}this.isCurrentFocusLocationValid()||k.setFocusLocation(this,void 0);var o=this.getSelectedItem();this.layoutModel.graphSettingsOpen||this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.runAfterDispatch(function(){e.grapher&&e.grapher.audioGraph.checkIfSelectedItemChanged(o?o.id:void 0),e.grapher&&e.focusLocation&&e.grapher.audioGraph.exitAudioTrace()})},e.prototype.propagateSelection=function(){this.grapher&&this.evaluator&&(this.__lastSelectedId=a(this,this.grapher,this.evaluator,this.__lastSelectedId))},e.prototype.areParsableObjectsEqual=function(e,t){return e===t||u.isEqual(c.__assign({},e,{regressionParameters:void 0}),c.__assign({},t,{regressionParameters:void 0}))},e.prototype.requestParseForAllItems=function(){this.isCurrentlyDoingSetState&&this.evaluator.clearStatementsAndStartCompleteState();for(var e={},t=this.lastParsableObjects,n=0,r=this.getAllItemModels();n<r.length;n++){var i=r[n];switch(i.type){case"expression":case"image":case"table":e[i.id]=i.cachedParsableState;break;case"folder":case"text":break;default:var o=i;return o}}for(var s=0,a=M.getAllHelperItemModels(this.listModel);s<a.length;s++){var i=a[s];e[i.id]=i.cachedParsableState}for(var c in e){var l=e[c],u=t[c];"image"!==l.type||u&&l.type===u.type&&l.guid===u.guid||this.grapher&&this.grapher.addGraphImage(this.getItemModel(c)),this.areParsableObjectsEqual(l,u)||(this.grapher&&"statement"===l.type&&""===l.latex&&this.grapher.removeGraphSketch(l.id),this.evaluator.addStatement(l))}for(var c in t){var u=t[c],l=e[c];if("image"!==u.type||l&&l.type===u.type&&l.guid===u.guid||this.grapher&&this.grapher.removeGraphImage(c),!l&&(this.evaluator.removeStatement(c),"table"===u.type))for(var h=0,d=u.columns;h<d.length;h++){var p=d[h];this.evaluator.removeStatement(p.id)}}this.evaluator.tick(),this.lastParsableObjects=e},e.prototype.setEvaluator=function(e){this.evaluator=e},e.prototype.setGrapher=function(e){this.grapher=e},e.prototype.setBugsnagContext=function(e){this.bugsnagContext=e},e.prototype.getItemRootNodeById=function(e){var t=this.getItemModel(e);return t&&t.dcgView?t.dcgView.findRootNode():void 0},e.prototype.getItemSelectorById=function(e){var t=this.getItemRootNodeById(e);return t?L(t):void 0},e.prototype.generateId=function(){var e=this.__nextItemId;return this.__nextItemId+=1,e+""},e.prototype.getNextColor=function(){return M.getNextColor(this.listModel)},e.prototype.getNextDisplayIndex=function(){return this.listModel.nextDisplayIndex},e.prototype._clearPendingImageUploads=function(){this.__pendingImageUploads={}},e.prototype.isUploadingImages=function(){return Object.keys(this.__pendingImageUploads).length>0},e.prototype.getExpressionAnalysis=function(){return this.listModel.expressionAnalysis},e.prototype.createItemModel=function(e){return M.modelFromSpec(this.listModel,e)},e.prototype.getItemModel=function(e){return M.getItemById(this.listModel,e)},e.prototype.getItemModelByIndex=function(e){return M.getItemByIndex(this.listModel,e)},e.prototype.getItemCount=function(){return M.getItemCount(this.listModel)},e.prototype.isItemSecret=function(e){var t=this.getItemModel(e);return!!t&&M.isItemSecret(t)},e.prototype.isItemSelected=function(e){var t=this.getItemModel(e);return!!t&&M.isItemSelected(t)},e.prototype.isItemSelectable=function(e){var t=this.getItemModel(e);return!!t&&M.isItemSelectable(t)},e.prototype.getAllItemModels=function(){return M.getAllItemModels(this.listModel)},e.prototype.getAllModelsWithSliders=function(){return M.getAllModelsWithSliders(this.listModel)},e.prototype.getGraphSettings=function(){return this.graphSettings},e.prototype.inAudioTraceMode=function(){return!(!this.grapher||!this.grapher.audioGraph.audioTraceActive)},e.prototype.getLayoutMeasurements=function(){return this.layoutMeasurements},e.prototype.expressionsAreFullWidth=function(){return this.layoutMeasurements.isNarrow||this.graphSettings.config.graphpaper===!1},e.prototype.getExpListWidthString=function(){return this.expressionsAreFullWidth()?"100%":this.layoutController?this.layoutController.getExpListWidth()+"px":"0"},e.prototype.getExpListWidth=function(){return this.layoutController?this.layoutController.getExpListWidth():0},e.prototype.findFirstPartiallyVisibleItem=function(){var e=R.getFirstPartiallyVisibleItemId(this,this._previousFirstPartiallyVisibleId);return this._previousFirstPartiallyVisibleId=e,e?this.getItemModel(e):void 0},e.prototype.findLastPartiallyVisibleItem=function(){var e=R.getLastPartiallyVisibleItemId(this,this._previousLastPartiallyVisibleId);return this._previousLastPartiallyVisibleId=e,e?this.getItemModel(e):void 0},e.prototype.updateRenderShellsBeforePaint=function(){if(this.inPrintMode)for(var e=0,t=this.getAllItemModels();e<t.length;e++){var n=t[e];n.renderShell=!1}else{for(var r=0,i=this.getAllItemModels();r<i.length;r++){var n=i[r];n.isHiddenFromUI&&(n.renderShell=!0)}var o=this.getSelectedItem();o&&(o.renderShell=!1)}},e.prototype.updateRenderShellsAfterPaint=function(){if(this.inPrintMode)for(var e=0,t=this.getAllItemModels();e<t.length;e++){var n=t[e];n.renderShell=!1}else if(this.layoutController&&this.isListVisible()){for(var r=void 0,i=void 0,o=0,s=this.getAllItemModels();o<s.length;o++){var n=s[o];n.renderShell||(r||(r=n),i=n)}var a=this.findFirstPartiallyVisibleItem(),c=this.findLastPartiallyVisibleItem();if(a&&c)for(var l=a.index;l<=c.index;l++){var u=this.getItemModelByIndex(l);u&&!u.isHiddenFromUI&&u.renderShell&&(u.renderShell=!1)}if(a&&c&&r&&i)for(var l=r.index;l<=i.index;l++)if(l<a.index||l>c.index){var u=this.getItemModelByIndex(l);if(u&&!u.isHiddenFromUI&&!u.renderShell){u.renderShell=!0;var h=this.getItemRootNodeById(u.id);if(h){var d=h.getBoundingClientRect().height;d>0&&(u.cachedRenderHeight=d)}}}var p=this.getSelectedItem();p&&(p.renderShell=!1)}},e.prototype.updateDragDrop=function(){var e=this.listModel.dragState;if(e){var t=this.getItemModel(e.firstItemId);if(t){var n=this.dragdrop_expressions.applyDrag();n&&(M.setDragState(this.listModel,n.dragState),I.setFolderId(t,n.folderId),t.index!==n.newIndex&&M.moveItemsTo(this.listModel,t.index,n.newIndex,e.numberOfItems),M.verifyFolderIntegrity(this.listModel))}}},e.prototype.isSelectedItemPartiallyVisible=function(){var e=this.getSelectedItem();return!(!e||!R.isItemPartiallyVisible(this,e.id))},e.prototype._tick=function(e){var t=this;if(void 0!==this._lastTickTime){var n=e-this._lastTickTime;this.getAllItemModels().forEach(function(e){"expression"===e.type&&e.sliderExists&&e.slider.isPlaying&&x.tickSliderStep(e,n)})}this.runAfterDispatch(function(){t.grapher&&t.grapher.tick(e)}),this._lastTickTime=e},e.prototype.areAnyImagesLoading=function(){return M.areAnyImagesLoading(this.listModel)},e.prototype._commitUserRequestedViewport=function(e){this.grapher&&this.grapher.setUserRequestedViewport(e)},e.prototype._setAxisLimitLatex=function(e,t){this.settingsViewModel=c.__assign({},this.settingsViewModel,{limitLatex:c.__assign({},this.settingsViewModel.limitLatex,(h={},h[e]=t,h))});var n=""===t&&("xstep"===e||"ystep"===e),i=n?0:A.default(t,this.graphSettings.degreeMode);switch(e){case"xstep":if(i<0||!isFinite(i))return;this.graphSettings.setProperty("xAxisStep",i);break;case"ystep":if(i<0||!isFinite(i))return;this.graphSettings.setProperty("yAxisStep",i);break;case"xmin":case"xmax":case"ymin":case"ymax":if(!this.grapher)return;var o=this.grapher.viewportController.getViewport(),s=r.fromObject(c.__assign({},o.toObject(),(d={},d[e]=i,d)));if(!s.isValid())return;this.grapher.viewportController.setViewport(s);var a="xmin"===e||"xmax"===e?"x":"y";this.graphSettings.setProperty("lastChangedAxis",a);var l=s.isSquare(this.grapher.getProjection().screen);this.graphSettings.setProperty("squareAxes",l)}var u=this.grapher.viewportController.getViewport().toObject();this._commitUserRequestedViewport(u);var h,d},e.prototype.canUserAddExpressions=function(){return!!this.graphSettings.config.expressions},e.prototype.areNotesEnabled=function(){return!!this.graphSettings.config.notes},e.prototype.areLinksEnabled=function(){return!!this.graphSettings.config.links},e.prototype.areImagesEnabled=function(){var e=window.FileReader,t=n.IS_IPAD&&n.IOS_VERSION&&8===n.IOS_VERSION[0]&&0===n.IOS_VERSION[1]&&0===n.IOS_VERSION[2];return!(!this.graphSettings.config.images||!e||t)},e.prototype.areFoldersEnabled=function(){return!!this.graphSettings.config.folders},e.prototype.areFunctionsRestricted=function(){return!!this.graphSettings.config.restrictedFunctions},e.prototype.isQwertyKeyboardEnabled=function(){return!!this.graphSettings.config.qwertyKeyboard},e.prototype.canEditOnWeb=function(){return!!this.graphSettings.config.editOnWeb},e.prototype.hasDefaultState=function(){return!!this.graphSettings.defaultState},e.prototype.getColors=function(){return this.graphSettings.config.colors},e.prototype.getImageOpacities=function(){return[.2,.4,.6,.8,1]},e.prototype.getUIDragModes=function(){return[p.X,p.Y,p.XY]},e.prototype.getUIDragModesForItem=function(e){var t=this.getItemModel(e);if(!t||"expression"!==t.type)return[];var n=t.formula;return n.move_strategy?[p.X,p.Y,p.XY]:[]},e.prototype.getNumberOfItemsInFolder=function(e){return M.getNumberOfItemsInFolder(this.listModel,e)},e.prototype.getEnabledDragModesForItem=function(e){var t=this.getItemModel(e);if(!t||"expression"!==t.type)return[];var n=t.formula,r=[];if(!n.move_strategy)return r;var i="none"!==n.move_strategy[0].type,o="none"!==n.move_strategy[1].type,s=i&&o;return i&&r.push(p.X),o&&r.push(p.Y),s&&r.push(p.XY),r},e.prototype.getPointStyles=function(){return[f.POINT,f.OPEN,f.CROSS]},e.prototype.getLineStyles=function(){return[f.SOLID,f.DASHED,f.DOTTED]},e.prototype.getValidPointStylesForItem=function(e){var t=this.getItemModel(e);return t&&"expression"===t.type&&x.isPointOrPointList(t)?[f.POINT,f.OPEN,f.CROSS]:[]},e.prototype.getValidLineStylesForItem=function(e){var t=this.getItemModel(e);if(!t||"expression"!==t.type)return[];var n=!t.formula.is_inequality;return n&&!x.isSinglePoint(t)?[f.SOLID,f.DASHED,f.DOTTED]:[]},e.prototype.getOpacities=function(){return[m.LOW,m.DEFAULT,m.HIGH]},e.prototype.isInEditListMode=function(){return this.layoutModel.inEditListMode},e.prototype.canAdministerSecretFolders=function(){return this.graphSettings.config.administerSecretFolders},e.prototype.isDegreeMode=function(){return this.graphSettings.degreeMode},e.prototype.isGraphSettingsOpen=function(){return this.layoutModel.graphSettingsOpen},e.prototype.isAddExpressionOpen=function(){return this.layoutModel.addExpressionOpen},e.prototype.isListVisible=function(){return this.layoutModel.expressionsVisible},e.prototype.needsFakeKeypad=function(){return!(!this.layoutController||!this.layoutController.$root)&&(!!this.layoutController.$root.find(document.activeElement).length&&!!q.default.getFocusedMathquill())},e.prototype.getBrandingMode=function(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"},e.prototype.getEditLink=function(){return window.iframeEmbedBrandingLink},e.prototype._deleteItemAndAnimateOut=function(e){var t=this,n=.2,r=this.getItemSelectorById(e);r&&(r.css({transition:n+"s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(function(){t.dispatch({type:"finish-deleting-item-after-animation",id:e})},1e3*n))},e.prototype._finishDeletingItemAfterAnimation=function(e){var t=this.getItemModel(e);if(t){var n=this.getItemSelectorById(e),r=n&&L(document.activeElement).closest(n).length>0,i=M.findPrevSelectableItem(this.listModel,t.index);if(this._removeExpressionSynchronously(t),r){if(!i){var o=M.getFirstSelectableItem(this.listModel);o&&(i=o)}i&&k.moveFocusToItem(this,i.id,"end")}}},e.prototype._removeExpressionSynchronously=function(e){if(M.removeItemAtIndex(this.listModel,e.index),M.hasNoVisibleExpressions(this.listModel)){var t=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});M.insertItemAtEnd(this.listModel,t)}},e.prototype.setLayoutController=function(e){this.layoutController=e,this.dragdrop_expressions=new j.default(this)},e.prototype._hideExpressions=function(){var e=this;this.graphSettings.config.expressions&&(M.setSelected(this.listModel,void 0),this.layoutModel=c.__assign({},this.layoutModel,{expressionsVisible:!1}),this.layoutController&&this.runAfterDispatch(function(){e.layoutController&&e.layoutController.resize()}),g.default())},e.prototype._showExpressions=function(){var e=this;this.graphSettings.config.expressions&&(this.layoutModel=c.__assign({},this.layoutModel,{expressionsVisible:!0}),this.layoutController&&this.runAfterDispatch(function(){e.layoutController&&e.layoutController.resize()}),g.default())},e.prototype._showToast=function(e){var t=this;if(this.toastData=e,this.toastData.hasOwnProperty("undoCallback")){var r=n.IS_APPLE?" Press CMD+Z to undo.":" Press CTRL+Z to undo.";this.toastData.message+=r}clearTimeout(this._hideToastTimeout);var i="number"==typeof e.hideAfter?e.hideAfter:6e3;i>0&&(this._hideToastTimeout=setTimeout(function(){t.dispatch({type:"toast/close",onHide:t.toastData.onHide})},i))},e.prototype._setExpressionPropertiesFromAPI=function(e,t){var n=this.getItemModel(e);if(n)if("table"===n.type&&t.columns){t=y.default(t);var r=_.cloneTableAndExtendWithProperties(n,t),i=M.modelFromSpec(this.listModel,r);this._toplevelReplaceItemAt(n.index,i,!1)}else{var o=this.getItemModel(e);if(!o)return;for(var s in t)if(t.hasOwnProperty(s))switch(s){case"slider":if("expression"!==o.type)continue;var a=t[s];a.hasOwnProperty("min")&&x.setSliderMin(o,!1,a.min),a.hasOwnProperty("max")&&x.setSliderMax(o,!1,a.max),a.hasOwnProperty("step")&&x.setSliderStep(o,a.step);break;case"domain":if("expression"!==o.type)continue;x.setDomainMin(o,v.default(t.domain.min)),x.setDomainMax(o,v.default(t.domain.max));break;case"hidden":this._setItemHidden(e,t.hidden);break;case"secret":I.setSecret(o,t.secret);break;case"color":if("expression"!==o.type)continue;x.setColor(o,t.color);break;case"dragMode":if("expression"!==o.type)continue;x.setDragMode(o,t.dragMode);break;case"label":if("expression"!==o.type)continue;x.setLabel(o,t.label);break;case"showLabel":if("expression"!==o.type)continue;x.setShowLabel(o,t.showLabel);break;case"latex":if("expression"!==o.type)continue;x.setLatex(o,t.latex);break;case"points":if("expression"!==o.type)continue;x.setPoints(o,!!t.points);break;case"lines":if("expression"!==o.type)continue;x.setLines(o,!!t.lines);break;case"pointStyle":if("expression"!==o.type)continue;x.setPointStyle(o,t.pointStyle);break;case"lineStyle":if("expression"!==o.type)continue;x.setLineStyle(o,t.lineStyle);break;case"fill":if("expression"!==o.type)continue;x.setFill(o,t.fill);break;case"fillOpacity":if("expression"!==o.type)continue;x.setFillOpacity(o,t.fillOpacity);break;case"id":case"type":break;default:throw new Error("trying to call setProperty for: "+s)}}},e.prototype._isParentFolderHidden=function(e){var t=this.getItemModel(e);if(!t)return!1;var n=M.getParentFolderModel(t);return!!n&&n.hidden},e.prototype._toggleItemHidden=function(e){if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{var t=this.getItemModel(e);if(!t)return;switch(t.type){case"expression":case"image":case"folder":this._setItemHidden(e,!t.hidden);break;case"table":case"text":break;default:var n=t;return n}}},e.prototype._toggleTableColumnHidden=function(e,t){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,t,!1);else{var n=this.getItemModel(e);if(!n||"table"!==n.type)return;var r=_.getColumnModel(n,t);this._setTableColumnHidden(e,t,!r.hidden)}},e.prototype._setTableColumnHidden=function(e,t,n){var r=this.getItemModel(e);if(r&&"table"===r.type){var i=_.shouldHideColumn(r,t);!n&&this._isParentFolderHidden(e)&&this._setItemHidden(r.folderId,!1),_.setColumnHidden(r,t,n),!n&&i&&_.setColumnPoints(r,t,!0)}},e.prototype._setItemHidden=function(e,t){var n=this.getItemModel(e);if(n)switch(!t&&this._isParentFolderHidden(n.id)&&this._setItemHidden(n.folderId,!1),n.type){case"expression":x.setHidden(n,t);break;case"folder":E.setHidden(n,t);break;case"image":w.setHidden(n,t);break;case"table":case"text":break;default:var r=n;return r}},e.prototype._addItemToEndFromAPI=function(e){var t=M.getLastSelectableItem(this.listModel);!e.secret&&t&&"expression"===t.type&&""===t.latex&&M.removeItemAtIndex(this.listModel,t.index),M.insertItemAtEnd(this.listModel,e)},e.prototype._toplevelInsertItemAt=function(e,t,n,r){var i=t;M.insertItemAtIndex(this.listModel,i,e),r&&I.setFolderId(i,r),n&&k.moveFocusToItem(this,i.id)},e.prototype._toplevelNewItemAtSelection=function(e,t){var n=this.getSelectedItem();if(n){var r="expression"===n.type&&!n.latex;if(r&&!n.folderId&&"expression"!==e.type)return this._toplevelReplaceItemAt(n.index,e,t);if(r&&n.folderId&&"expression"!==e.type&&"folder"!==e.type)return this._toplevelReplaceItemAt(n.index,e,t);if(!n.folderId&&"folder"!==n.type){var i=void 0;return this._toplevelInsertItemAt(n.index+1,e,t,i)}if(n.folderId&&"folder"!==e.type)return this._toplevelInsertItemAt(n.index+1,e,t,n.folderId);if("folder"===n.type&&!n.collapsed&&"folder"!==e.type)return this._toplevelInsertItemAt(n.index+1,e,t,n.id)}var o=this.getFirstFullyVisibleItem();for(o&&"folder"===o.type&&(o=this.getItemModelByIndex(o.index+1));o&&o.folderId;)o=this.getItemModelByIndex(o.index+1);var s=o?o.index:this.getItemCount(),a=void 0;return this._toplevelInsertItemAt(s,e,t,a)},e.prototype.getFirstFullyVisibleItem=function(){var e=R.getFirstFullyVisibleItemId(this);if(e)return M.getItemById(this.listModel,e)},e.prototype.getRootElt=function(){if(this.layoutController)return this.layoutController.$root[0]},e.prototype.getExppanelSelectorOrThrow=function(){var e=this.getRootElt();if(e){var t=R.getExppanelElt(e);if(t)return L(t)}throw new Error("expected to find $exppanel but could not")},e.prototype.scrollSelectedItemIntoView=function(){if(this.layoutController&&this.isListVisible()){var e=this.getSelectedItem();if(e){var t=this.layoutController.$root[0],n=this.getItemSelectorById(e.id),r=R.getExppanelSelector(t);if(n&&r){if("table"===e.type){var i=n.find(".dcg-row .dcg-selected");if(1===i.length)return void s.scrollVisible(i,r,60)}s.scrollVisible(n,r,90)}}}},e.prototype._pasteTable=function(e){var t=this,n=M.findAvailableColumnSubscript(this.listModel),i=_.makeTableState(n,e,this),s=this.createItemModel(i);this._toplevelNewItemAtSelection(s,!1),this._closeAddExpression();var a=this.grapher.viewportController.getViewport(),c=o.computeNewViewport(a,e);(c.xmax>a.xmax||c.xmin<a.xmin||c.ymax>a.ymax||c.ymin<a.ymin)&&(this.grapher.viewportController.setViewport(new r(c.xmin,c.xmax,c.ymin,c.ymax)),this._showToast({message:this.t("We zoomed to fit your data."),undoCallback:function(){t.dispatch({type:"undo"})}}))},e.prototype._toplevelReplaceItemAt=function(e,t,n){var r=t,i=this.getItemModelByIndex(e),o=i.folderId;M.removeItemAtIndex(this.listModel,e),M.insertItemAtIndex(this.listModel,r,e),o&&I.setFolderId(r,o),n&&k.moveFocusToItem(this,r.id)},e.prototype._createSlidersForItem=function(e,t){var n=this,r=this.getItemModel(e);if(r){for(var i=r.folderId,o=r.index+1,s=t.map(function(e){var t=e?l.identifierToLatex(e)+"=1":"",r={type:"expression",id:n.generateId(),latex:t,color:n.getNextColor(),hidden:!!t};return r}),a=s.length-1;a>=0;a--){var c=this.createItemModel(s[a]);M.insertItemAtIndex(this.listModel,c,o),i&&I.setFolderId(c,i)}var u=s[s.length-1];""===u.latex?k.moveFocusToItem(this,u.id):k.setFocusLocation(this,void 0)}},e.prototype._uploadImagesAndWaitForThemToLoad=function(e){var t=this;if(!e||0===e.length)return void this._showToast({message:this.t("You did not select a file")});var n=w.uploadImages(this,e),r=n.errors[0];r&&this._showToast({message:r});for(var i=0,o=n.tokens;i<o.length;i++){var s=o[i];this.__pendingImageUploads[s]=!0}this.isUploadingImages()&&this._showToast({message:this.t("Uploading images..."),onHide:function(){t._clearPendingImageUploads()}})},e.prototype.getImageToRetry=function(){for(var e,t=0,n=this.getAllItemModels();t<n.length;t++){var r=n[t];"image"===r.type&&"failed"===r.loadStatus&&(!e||e.failures>r.failures)&&(e=r)}return e},e.prototype.retryLoadingFailedImage=function(){var e=Date.now(),t=e-this.imageRetryState.lastAttemptTime,n=1e3*Math.pow(2,this.imageRetryState.attempts);if(!(this.imageRetryState.attempts>0&&t<n)){var r=this.getImageToRetry();r&&(w.retryLoading(r),this.imageRetryState={lastAttemptTime:e,attempts:this.imageRetryState.attempts+1})}},e.prototype.getSelectedItem=function(){return M.getSelected(this.listModel)},e.prototype.getFocusedItem=function(){return k.getFocusedItem(this)},e.prototype.getFocusLocation=function(){return this.focusLocation},e.prototype.isFocusLocationFocused=function(e){var t=this.focusLocation,n=e;return!(!t||!n)&&u.isEqual(t,n)},e.prototype.isCurrentFocusLocationValid=function(){var e=this.focusLocation;if(!e)return!0;if("settings"===e.type)return this.isGraphSettingsOpen();var t=this.getItemModel(e.id);if(!t)return!1;if(!this.isItemSelected(e.id))return!1;switch(e.type){case"domain-limit":return"expression"===t.type&&!!x.hasDomain(t);case"slider-limit":return"expression"===t.type&&!!x.hasSlider(t);case"image":return"image"===t.type;case"folder":return"folder"===t.type;case"text":return"text"===t.type;case"expression":return"expression"===t.type;case"table":return"table"===t.type&&!!_.doesCellExist(t,e.location);default:var n=e;return n}},e.prototype.isDragDropActive=function(){return!!this.listModel.dragState},e.prototype.isItemBeingDragged=function(e){var t=this.listModel.dragState;return!(!t||t.firstItemId!==e)},e.prototype.getDraggedItemId=function(){var e=this.listModel.dragState;return e&&e.firstItemId},e.prototype.getRawDragState=function(){return this.listModel.dragState},e.prototype.initStateStack=function(){this.stateStack=new b.default,this.stateStack.addState(this.getUndoRedoState())},e.prototype.getUndoRedoState=function(){return{layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:M.getUndoRedoState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},e.prototype.getState=function(e){var t={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(t.stripDefaults=!!e.stripDefaults);var n={version:i.currentVersion,graph:this.grapher.getState(t),expressions:M.getState(this.listModel,t)};return e&&e.keepV6?n:C.default(n)},e.prototype.externalSetState=function(e,t){this._clearPendingImageUploads(),t||(t={}),e||(e=F.default),"string"==typeof e&&(e=JSON.parse(e)),e&&(e=i.migrateToLatest(e)),this.setState(e,t),this.layoutModel=P.defaultLayoutModel(this.graphSettings.config),this.settingsViewModel=O.defaultSettingsViewModel(),k.setFocusLocation(this,void 0),this.enqueueEvent("clearUnsavedChanges")},e.prototype.setState=function(e,t){if(this.lastParsableObjects={},this.isCurrentlyDoingSetState=!0,"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph),"expressions"in e){M.setSelected(this.listModel,void 0);var n=M.getLargestIntegerId(e.expressions);n>=this.__nextItemId&&(this.__nextItemId=n+1),M.setListState(this.listModel,e.expressions,t)}e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),t&&t.allowUndo||this.clearUndoRedoHistory()},e.prototype.updateToState=function(e){"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph,{doNotClear:!0}),"expressions"in e&&M.restoreListState(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel)},e.prototype.commitUndoRedoSynchronously=function(e){var t=this.getUndoRedoState(),n=this.stateStack.getState();B(n,t)||(this.stateStack.addState(t),this.enqueueEvent("change"))},e.prototype.undo=function(){if(this.canUndo()){this.stateStack.undo();var e=this.stateStack.getState();e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change")}},e.prototype.redo=function(){if(this.canRedo()){this.stateStack.redo();var e=this.stateStack.getState();e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change")}},e.prototype.clearUndoRedoHistory=function(){this.stateStack.clear()},e.prototype.canUndo=function(){return this.stateStack.canUndo()},e.prototype.canRedo=function(){return this.stateStack.canRedo()},e.prototype._closeAddExpression=function(){this.layoutModel=c.__assign({},this.layoutModel,{addExpressionOpen:!1})},e}();t.default=U}),define("expressions/abstract-item-view",["require","exports","tslib","dcgview","jquery.handleevent"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()},t.prototype.onItemViewMounted=function(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1},t.prototype.onItemViewUnmounted=function(){this._isDragCopy||(this.model.dcgView=void 0)},t.prototype.isFirstRender=function(){return this._isFirstRender},t.prototype.onMouseSelect=function(e){"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},t.prototype.onDelete=function(){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.id})},t.prototype.onDragPending=function(e){this.props.onDragPending(e)},t}(r.Class);t.default=i}),define("expressions/abstract_icon_view",["require","exports","keys","tslib","jquery","dcgview"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=0,a=500,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastErrorState=!1,t._errorStateIsStable=!1,t}return r.__extends(t,e),t.prototype.init=function(){this.guid="options-menu-view"+ ++s,this.controller=this.props.controller()},t.prototype.positionOptionsMenu=function(){var e=this.controller.getExppanelSelectorOrThrow(),t=i(this.rootElt),n=t.offset(),r=i(this.optionsMenu.findRootNode()),o={top:n.top-e.closest(".dcg-container").offset().top,left:n.left-e.closest(".dcg-container").offset().left};r.css({position:"absolute",top:o.top+"px",left:o.left+"px",display:"block"})},t.prototype.toggleOptions=function(){var e=this;return this.hasError()?void this.hideOptions():this.optionsShown?void this.hideOptions():(this.optionsShown=!0,this.optionsMenu=this.createOptionsMenuView(),this.positionOptionsMenu(),setTimeout(function(){if(e.optionsShown){var t=e.controller.getExppanelSelectorOrThrow();t.on("scroll."+e.guid,function(){e.hideOptions()})}},0),i(document).on("keydown."+this.guid,function(t){n.lookup(t)===n.ESCAPE&&e.hideOptions()}),void i(document).on("dcg-tapstart."+this.guid,function(t){i(t.target).closest(".dcg-options-menu").length||i(t.target).closest(e.rootElt).length||e.hideOptions()}))},t.prototype.hideOptions=function(){if(this.optionsShown||this.optionsMenu){this.optionsShown=!1,i(document).off("dcg-tapstart."+this.guid),
i(document).off("keydown."+this.guid);var e=this.controller.getExppanelSelectorOrThrow();if(e.off("scroll."+this.guid),this.optionsMenu){try{o.unmountFromNode(this.getOptionsMenuContainerSelector()[0])}catch(e){}this.optionsMenu=null}}},t.prototype.getOptionsMenuContainerSelector=function(){var e=this.controller.getExppanelSelectorOrThrow();return e.closest(".dcg-container").find(".dcg-options-menu-container")},t.prototype.hasStableError=function(){return this.hasError()&&this.isErrorStateStable()},t.prototype.isErrorStateStable=function(){return this._errorStateIsStable},t.prototype.willUpdate=function(){var e=this,t=this.hasError();t!==this._lastErrorState?(this._lastErrorStateChangeTime=Date.now(),this._lastErrorState=t,this._errorStateIsStable=!1,clearTimeout(this.errTimeout),this.errTimeout=setTimeout(function(){e.update()},a)):!this._errorStateIsStable&&Date.now()-this._lastErrorStateChangeTime>=a&&(this._errorStateIsStable=!0)},t.prototype.didUnmount=function(){this.hideOptions(),clearTimeout(this.errTimeout),delete this.errTimeout},t.prototype.didUpdate=function(){this.optionsMenu&&this.optionsMenu.update()},t}(o.Class);t.default=c}),define("loadcss!color_menu",function(){}),define("expressions/color_menu_view",["require","exports","tslib","dcgview","underscore","loadcss!color_menu"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r.Components.For,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),r.createElement(o,{each:function(){return i.values(e.controller.getColors())}},r.createElement("div",{class:r.const("dcg-color-menu dcg-do-not-blur"),role:r.const("complementary"),"aria-label":function(){return e.controller.t("Color Menu")}},function(t){return r.createElement("span",{class:function(){return{"dcg-color-option":!0,"dcg-selected":e.props.selectedColor()===t}},color:e.const(t),style:function(){return{background:t,"border-color":t}},handleevent:r.const("true"),role:r.const("button"),tabindex:r.const(0),"aria-label":e.const(t),onTap:function(){return e.props.onColorSelected(t)}},r.createElement("i",{class:r.const("dcg-icon-check")}))}))},t}(r.Class);t.default=s}),define("loadcss!expressions/toggle-view",function(){}),define("expressions/toggle-view",["require","exports","tslib","dcgview","loadcss!./toggle-view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-toggle-view":!0,"dcg-toggled":e.props.toggled()}},role:r.const("checkbox"),tabindex:r.const("0"),toggled:function(){return e.props.toggled()},onTap:this.bindFn(this.props.onChange)},r.createElement("div",{class:r.const("dcg-toggle-switch")}))},t}(r.Class);t.default=i}),define("loadcss!dcgview-helpers/checkbox",function(){}),define("dcgview-helpers/checkbox",["require","exports","tslib","dcgview","loadcss!./checkbox"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-component-checkbox":!0,"dcg-checked":e.props.checked(),"dcg-disabled":e.props.disabled()}},onTap:function(){return e.onChange()}},r.createElement("span",{tabindex:r.const(0),class:r.const("dcg-checkbox"),role:r.const("checkbox"),"aria-label":this.props.ariaLabel,"aria-disabled":this.props.disabled,"aria-checked":this.props.checked},r.createElement("i",{class:r.const("dcg-icon-check"),"aria-hidden":r.const("true")})),r.createElement("span",{class:r.const("dcg-checkbox-children")},this.children))},t.prototype.onChange=function(){this.props.disabled()||this.props.onChange(!this.props.checked())},t}(r.Class);t.Checkbox=i}),define("expressions/expression_options_view",["require","exports","tslib","dcgview","underscore","graphing/dragmode","./color_menu_view","math/expression-types","graphing-calc/models/expression","expressions/toggle-view","dcgview-helpers/checkbox"],function(e,t,n,r,i,o,s,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=r.Components,d=h.For,p=h.If,f="#bbb",m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id;var t=this.controller.getValidPointStylesForItem(this.id),n=this.controller.getValidLineStylesForItem(this.id),i=c.isPolygon(this.model)||c.isParametric(this.model);return r.createElement("div",{class:function(){return{"dcg-exp-options-menu":!0,"dcg-options-menu":!0,"dcg-colors-only":0===t.length&&0===n.length,"dcg-with-drag":0!==e.controller.getUIDragModesForItem(e.id).length}}},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-options-menu-column-left")},r.createElement(p,{predicate:function(){return t.length>0}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-styles-menu dcg-dividing-line-after")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return c.isSinglePoint(e.model)?e.controller.t("Style"):e.controller.t("Points")}),r.createElement(p,{predicate:function(){return!c.isSinglePoint(e.model)}},function(){return r.createElement(l.default,{toggled:function(){return e.getDisplayProps().points},onChange:e.bindFn(e.onTogglePoints)})}),r.createElement(p,{predicate:function(){return e.getDisplayProps().points}},function(){return r.createElement(d,{each:function(){return t}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("span",{class:function(){return n={"dcg-style-option":!0,"dcg-variable-colorcss":!0,"dcg-graph-icon":!0},n[e.getStyleClass(t)]=!0,n["dcg-selected"]=e.model.pointStyle===t,n;var n},style:function(){return{background:e.model.color,"border-color":e.model.color}},"draw-style":e.const(t),handleevent:r.const("true"),onTap:function(){return e.onPointStyleSelected(t)}})}))})))}),r.createElement(p,{predicate:function(){return n.length>0&&!c.isSinglePoint(e.model)}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section dcg-lines-menu")},r.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":e.controller.getUIDragModesForItem(e.id).length||i}}},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.shouldShowLinesToggle()?e.controller.t("Lines"):e.controller.t("Style")}),r.createElement(p,{predicate:function(){return e.shouldShowLinesToggle()}},function(){return r.createElement(l.default,{toggled:function(){return e.getDisplayProps().lines},onChange:e.bindFn(e.onToggleLines)})}),r.createElement(p,{predicate:function(){return e.shouldShowLineStyles()}},function(){return r.createElement(d,{each:function(){return n}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("span",{class:function(){return n={"dcg-style-option":!0,"dcg-variable-colorcss":!0,"dcg-graph-icon":!0},n[e.getStyleClass(t)]=!0,n["dcg-selected"]=e.model.lineStyle===t,n;var n},style:function(){return{background:e.model.color,"border-color":e.model.color}},"draw-style":e.const(t),handleevent:r.const("true"),onTap:function(){return e.onLineStyleSelected(t)}})}))})))}),r.createElement(p,{predicate:function(){return e.controller.getUIDragModesForItem(e.id).length>0}},function(){return r.createElement("div",{class:r.const("dcg-drag-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-drag-menu")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Drag")}),r.createElement(l.default,{toggled:function(){return e.model.reconciledDragMode!==o.NONE},onChange:e.bindFn(e.onToggleDrag)}),r.createElement(p,{predicate:function(){return e.model.reconciledDragMode!==o.NONE}},function(){return r.createElement(d,{each:function(){return e.controller.getUIDragModesForItem(e.id)}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("span",{class:function(){return{"dcg-dragmode-option":!0,"dcg-graph-icon":!0,"dcg-variable-colorcss":!0,"dcg-disabled":e.isDisabled(t),"dcg-selected":e.getDragMode()===t}},style:function(){return{background:e.isDisabled(t)?f:e.model.color,"border-color":e.isDisabled(t)?f:e.model.color}},mode:e.const(t),onTap:function(){return e.onDragModeSelected(t)}})}))})))}),r.createElement(p,{predicate:function(){return i}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-styles-menu")},r.createElement(u.Checkbox,{checked:function(){return e.getDisplayProps().fill},onChange:e.bindFn(e.onToggleFill),disabled:e.const(!1),ariaLabel:function(){return e.controller.t("Fill")}},function(){return e.controller.t("Fill")})))})),r.createElement("div",{class:r.const("dcg-options-menu-column-right")},r.createElement("div",{class:r.const("dcg-colors-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-title")},function(){return e.controller.t("Color")}),r.createElement(s.default,{controller:function(){return e.props.controller()},selectedColor:function(){return e.model.color},onColorSelected:this.bindFn(this.onColorSelected)}))))},t.prototype.onToggleFill=function(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.getDisplayProps().fill})},t.prototype.getStyleClass=function(e){return"dcg-graph-"+e},t.prototype.onColorSelected=function(e){this.controller.dispatch({type:"set-item-color",id:this.id,color:e})},t.prototype.shouldShowLinesToggle=function(){return c.isPointOrPointList(this.model)||c.isParametric(this.model)||c.isPolygon(this.model)},t.prototype.shouldShowLineStyles=function(){return this.getDisplayProps().lines||!this.shouldShowLinesToggle()},t.prototype.onTogglePoints=function(){this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.getDisplayProps().points})},t.prototype.onPointStyleSelected=function(e){this.model.pointStyle!==e&&this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:e})},t.prototype.onToggleLines=function(){this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.getDisplayProps().lines})},t.prototype.onLineStyleSelected=function(e){this.model.lineStyle!==e&&this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:e})},t.prototype.isDisabled=function(e){var t=this.controller.getEnabledDragModesForItem(this.id);return!i.contains(t,e)},t.prototype.getDragMode=function(){return this.model.reconciledDragMode||this.model.dragMode},t.prototype.getDisplayProps=function(){return a.getReconciledExpressionProps(this.model.formula.expression_type,{points:this.model.points,lines:this.model.lines,fill:this.model.fill})},t.prototype.onToggleDrag=function(){var e=this.model.reconciledDragMode!==o.NONE?o.NONE:o.XY;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})},t.prototype.onDragModeSelected=function(e){this.isDisabled(e)||this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})},t}(r.Class);t.default=m}),define("expressions/expression_icon_view",["require","exports","lib/aria","tslib","dcgview","./abstract_icon_view","graphing/dragmode","expressions/styles","math/comparators","jquery","./expression_options_view","math/expression-types","graphing-calc/models/expression","jquery.handleevent"],function(e,t,n,r,i,o,s,a,c,l,u,h,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=i.Components.If,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.model=this.props.model()},t.prototype.template=function(){var e=this;return i.createElement("span",{class:function(){return t={"dcg-icon":!0,"dcg-graph-icon":!0,"tipsy-sticky":!0},t[e.getIconClass()]=!0,t;var t},role:i.const("button"),"aria-label":this.bindFn(this.getAriaLabel),tabindex:function(){return e.hasSlider()?0:-1},"aria-hidden":function(){return!e.hasSlider()},tooltip:function(){return e.model.error?e.controller.unpack(e.model.error):""},style:function(){return{"border-color":e.model.color,background:e.model.color}},mode:function(){return e.model.reconciledDragMode},didMount:this.bindFn(this.didMountRoot)},i.createElement(p,{predicate:function(){return e.hasLayeredIcons()&&e.model.shouldGraph}},function(){return i.createElement("div",{class:i.const("dcg-layered-icons-container")},i.createElement("i",{class:function(){return t={},t[e.getLayeredIconFillClass()]=!0,t;var t}}),i.createElement("i",{class:function(){return t={},t[e.getLayeredIconLineClass()]=!0,t;var t}}))}),i.createElement("i",{class:i.const("dcg-icon-play")}),i.createElement("i",{class:i.const("dcg-icon-pause")}),i.createElement("i",{class:i.const("dcg-icon-hidden")}))},t.prototype.didMountRoot=function(e){var t=this;this.rootElt=e,l(e).closest(".dcg-action-icon-mouse").on("dcg-tap",function(e){t.handleIconTapped(e,"mouse")}),l(e).closest(".dcg-action-icon-touch").on("dcg-tap",function(e){t.handleIconTapped(e,"touch")}),l(e).on("dcg-tap",function(e){t.handleIconTapped(e,"keyboard")}),l(e).closest(".dcg-action-icon-mouse").on("dcg-longhold",function(e){t.handleIconLongHold(e,"mouse")}),l(e).closest(".dcg-action-icon-touch").on("dcg-longhold",function(e){t.handleIconLongHold(e,"touch")})},t.prototype.createOptionsMenuView=function(){var e=this.getOptionsMenuContainerSelector(),t=i.mountToNode(u.default,e[0],{controller:this.props.controller,model:this.props.model});return t},t.prototype.handleIconTapped=function(e,t){if(e.device===t){if("keyboard"!==t){if(e.wasHandled("dragdrop"))return;if(e.wasLongheld())return}return this.optionsShown?(this.toggleOptions(),!1):(this.controller.isInEditListMode()?this.model.isGraphable&&this.toggleOptions():this.model.formula.is_animatable?this.toggleSliderIsPlaying():this.toggleGraphShown(),!0)}},t.prototype.handleIconLongHold=function(e,t){e.device===t&&this.model.isGraphable&&(e.handle("dcg-longhold"),this.toggleOptions())},t.prototype.toggleSliderIsPlaying=function(){if(this.model.sliderExists){this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!this.model.slider.isPlaying});var e="",t=this.model.dependent;e=this.model.slider.isPlaying?this.controller.t("__variable__ playing",{variable:t}):this.controller.t("__variable__ paused",{variable:t}),n.alert(e)}},t.prototype.toggleGraphShown=function(){this.model.isGraphable&&(this.hasError()||this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}))},t.prototype.getAriaLabel=function(){if(!this.model.sliderExists)return"";var e=this.model.dependent;return e?this.model.slider.isPlaying?this.controller.t("Pause __variable__ Animation",{variable:e}):this.controller.t("Play __variable__ Animation",{variable:e}):""},t.prototype.hasError=function(){return!!this.model.error&&!d.isEmpty(this.model)},t.prototype.hasSlider=function(){return!!this.model.sliderExists},t.prototype.getDisplayProps=function(){return h.getReconciledExpressionProps(this.model.formula.expression_type,{points:this.model.points,lines:this.model.lines,fill:this.model.fill})},t.prototype.getIconClass=function(){if(this.model.loading)return"dcg-loading";if(this.hasStableError())return"dcg-error";var e=this.model.formula;if(e.is_animatable&&this.model.sliderExists)return this.model.slider.isPlaying?"dcg-animate-pause":"dcg-animate-play";if(!e.is_graphable)return"dcg-ungraphable";if(!this.model.shouldGraph)return"dcg-graph-hidden";if(this.model.reconciledDragMode!==s.NONE)return"dcg-graph-movable-point";if(this.hasLayeredIcons())return"";var t=this.model.pointStyle,n=this.model.lineStyle,r=this.getDisplayProps();if(d.isPointOrPointList(this.model))return d.isSinglePoint(this.model)?t===a.OPEN?"dcg-graph-OPEN":t===a.CROSS?"dcg-graph-CROSS":"dcg-graph-POINT":r.lines&&r.points?"dcg-table-points-and-lines":r.lines?"dcg-table-lines":"dcg-table-points";if(e.is_shade_between)return"dcg-graph-shaded-inequality";var i=e.operator,o=0!==c.table[i].direction,l=c.table[i].inclusive===!1;return l||o?!l&&o?"dcg-graph-shaded-inequality":l&&!o?"graph-inequality":l&&o?"dcg-graph-shaded-inequality":"":n===a.DASHED?"dcg-graph-DASHED":n===a.DOTTED?"dcg-graph-DOTTED":"dcg-graph-SOLID"},t.prototype.hasLayeredIcons=function(){return d.isPolygon(this.model)||d.isParametric(this.model)},t.prototype.getLayeredIconLineClass=function(){var e=this.model.lineStyle,t=this.getDisplayProps();if(!t.lines)return"";var n;if(d.isPolygon(this.model))n="polygon";else{if(!d.isParametric(this.model))return"";n="parametric"}return e===a.DASHED?"dcg-icon-"+n+"-dashed":e===a.DOTTED?"dcg-icon-"+n+"-dotted":"dcg-icon-"+n+"-solid"},t.prototype.getLayeredIconFillClass=function(){return this.getDisplayProps().fill?d.isPolygon(this.model)?"dcg-icon-polygon-filled":d.isParametric(this.model)?"dcg-icon-parametric-filled":"":""},t}(o.default);t.default=f}),define("dcgview-helpers/number-view",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.Components.Switch,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(i,{key:function(){return e.props.numberLabel().type}},function(t){switch(t){case"undefined":return r.createElement("span",null,r.const("undefined"));case"decimal":return r.createElement("span",null,function(){return e.props.numberLabel().value});case"scientific":return r.createElement("span",null,function(){return e.props.numberLabel().mantissa},r.createElement("span",{class:r.const("dcg-cross")},r.const("×")),r.const("10"),r.createElement("sup",null,function(){return e.props.numberLabel().exponent}));default:var n=t;return n}})},t}(r.Class);t.default=o}),define("dcgview-helpers/static-mathquill-view",["require","exports","tslib","dcgview","vendor/mathquill"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return 1===this.children.length?this.children[0]:r.createElement("div",{didMount:function(t){return e.didMountMathquill(t)}})},t.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},t.prototype.didMountMathquill=function(e){this.staticMath=i.MQ.StaticMath(e),this.updateMathquill()},t.prototype.didUpdate=function(){this.updateMathquill()},t.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex()},t.prototype.updateMathquillLatex=function(){if(this.staticMath){var e=this.props.latex();this.lastLatex!==e&&(this.staticMath.latex(e),this.lastLatex=e,this.props.onReflow&&this.props.onReflow())}},t.prototype.updateMathquillAria=function(){if(this.staticMath&&this.props.getAriaLabel){var e=this.props.getAriaLabel();e!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(e)}},t}(r.Class);t.default=o}),define("expressions/evaluation_view",["require","exports","tslib","dcgview","graphing/label","dcgview-helpers/number-view","dcgview-helpers/static-mathquill-view"],function(e,t,n,r,i,o,s){"use strict";function a(e,t){return i.numericLabel(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.Switch,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",null,r.createElement("div",{class:r.const("dcg-evaluation dcg-do-blur"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-evaluation-label-container"),onTap:this.bindFn(this.onSelectEvaluation)},r.createElement(s.default,{latex:function(){return i.identifierToLatex(e.props.dependent())}},r.createElement("span",null)),r.createElement("span",{class:r.const("dcg-equals")},r.const("="))),r.createElement("span",{class:r.const("dcg-text-selectable dcg-evaluation-html"),didMount:this.bindFn(this.didMountEvaluation)},r.createElement(c,{key:function(){return Array.isArray(e.props.val())}},function(t){return t?r.createElement("span",null,function(){return e.props.val().length},r.const(" element list")):r.createElement(o.default,{numberLabel:function(){return a(e.props.val(),e.props.labelOptions())}})}))),r.createElement("div",{class:r.const("dcg-clear")}))},t.prototype.didMountEvaluation=function(e){this.evaluationNode=e},t.prototype.onSelectEvaluation=function(){var e=document.createRange();e.selectNodeContents(this.evaluationNode),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)},t}(r.Class);t.default=l}),define("expressions/unresolved_view",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),r.createElement("div",{class:r.const("dcg-unresolved")},r.createElement("i",{class:r.const("dcg-icon-error")}),r.const(" "),function(){return e.controller.t("This equation contains fine detail that has not been fully resolved.")},r.createElement("a",{href:r.const("http://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),target:r.const("_blank")},function(){return e.controller.t("Learn more.")}))},t}(r.Class);t.default=i}),define("loadcss!domain",function(){}),define("expressions/domain_view",["require","exports","tslib","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","loadcss!domain"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-domain dcg-do-blur"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-display-domain dcg-do-blur dcg-desmos-input-container"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-editable-mathquill-container")},r.createElement(o.default,{latex:function(){return e.getMinLatex()},isFocused:function(){return"min"===e.getFocusedInput()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("domain Minimum: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserChangedLatex:function(t){return e.dispatchMinLatexIfChanged(t)},onFocusedChanged:function(t){return e.handleFocusedChanged("min",t)}},r.createElement("span",{"data-dcg-limit":r.const("min"),class:function(){return{"dcg-math-field":!0,"dcg-focus":"min"===e.getFocusedInput(),"dcg-invalid":!e.model.isDomainMinValid}}})),r.createElement("span",{class:r.const("dcg-interval-interior")},r.createElement(i.default,{latex:this.const(" \\le t \\le ")},r.createElement("span",null))),r.createElement(o.default,{latex:function(){return e.getMaxLatex()},isFocused:function(){return"max"===e.getFocusedInput()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("domain Maximum: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserChangedLatex:function(t){return e.dispatchMaxLatexIfChanged(t)},onFocusedChanged:function(t){return e.handleFocusedChanged("max",t)}},r.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"max"===e.getFocusedInput(),"dcg-invalid":!e.model.isDomainMaxValid}},"data-dcg-limit":r.const("max")})))))},t.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}}),clearTimeout(this.focusedOutRecentlyTimeout);var n=this;this.focusedOutRecentlyTimeout=setTimeout(function(){void 0===n.getFocusedInput()&&n.controller.dispatch({type:"set-last-valid-domain",id:n.id})})},t.prototype.dispatchMinLatexIfChanged=function(e){this.getMinLatex()!==e&&this.controller.dispatch({type:"set-domain-minlatex",id:this.id,latex:e})},t.prototype.dispatchMaxLatexIfChanged=function(e){this.getMaxLatex()!==e&&this.controller.dispatch({type:"set-domain-maxlatex",id:this.id,latex:e})},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"domain-limit"===e.type&&e.id===this.id)return e.location},t.prototype.getMinLatex=function(){return this.model.domain.min},t.prototype.getMaxLatex=function(){return this.model.domain.max},t}(r.Class);t.default=s}),define("loadcss!regression",function(){}),define("expressions/regression_view",["require","exports","tslib","dcgview","graphing/label","dcgview-helpers/static-mathquill-view","loadcss!regression"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components,a=s.If,c=s.For,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement(a,{predicate:this.bindFn(this.getRegression)},function(){return r.createElement("div",{class:r.const("dcg-regression-container")},r.createElement("div",{class:r.const("dcg-handle-event"),handleEvent:r.const("true")},r.createElement(a,{predicate:e.bindFn(e.getShouldSuggestLogMode)},function(){return r.createElement("div",{class:r.const("dcg-log-mode-toggle")},r.createElement("div",{class:function(){return{"dcg-action-log-mode-toggle":!0,"dcg-toggled-on":e.getIsLogModeRegression()}},onTap:e.bindFn(e.onTapLogMode)},r.createElement("span",{class:r.const("dcg-log-mode-checkbox"),role:r.const("checkbox"),"aria-checked":function(){return e.getIsLogModeRegression()},tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Log Mode")}},r.createElement("i",{class:r.const("dcg-icon-check")})),function(){return e.controller.t("Log Mode")}),r.createElement("a",{"aria-label":function(){return e.controller.t("Log Mode Help")},class:r.const("dcg-log-mode-toggle-help"),target:r.const("_blank"),href:r.const("http://support.desmos.com/hc/en-us/articles/204349605")},r.createElement("i",{class:r.const("dcg-icon-question-sign")})))}),r.createElement("div",{class:r.const("dcg-statistics"),role:r.const("group"),"aria-label":function(){return e.controller.t("Statistics")}},r.createElement("div",{class:r.const("dcg-regression-title dcg-residuals-title")},function(){return e.controller.t("Statistics")},r.const(" "),r.createElement(a,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return r.createElement("a",{class:r.const("dcg-regression-about-link"),target:r.const("_blank"),href:r.const("http://support.desmos.com/entries/60176149-What-is-RMSE-"),"aria-label":function(){return e.controller.t("What is RMSE?")}},r.createElement("i",{class:r.const("dcg-icon-question-sign")}))}),r.createElement(a,{predicate:function(){return e.getRegression().statistics.Rsquared<0}},function(){return r.createElement("a",{"aria-label":function(){return e.controller.t("Why am I seeing a negative R Squared value?")},class:r.const("dcg-regression-about-link"),target:r.const("_blank"),href:r.const("http://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")},r.createElement("i",{class:r.const("dcg-icon-question-sign")}))})),r.createElement("div",{class:r.const("dcg-statistics-values")},r.createElement(a,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("Rsquared")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"R^2="+e.getRoundedStat("Rsquared")}},r.createElement("span",{tabindex:r.const("0")})))}),r.createElement(a,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("rsquared")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"r^2="+e.getRoundedStat("rsquared")}},r.createElement("span",{tabindex:r.const("0")})))}),r.createElement(a,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("r")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"r="+e.getRoundedStat("r")}},r.createElement("span",{class:r.const("dcg-r-value"),tabindex:r.const("0")})))}),r.createElement(a,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"\\operatorname{RMSE}="+e.getRoundedStat("RMSE")}},r.createElement("span",{tabindex:r.const("0")})))}))),r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Residuals")},class:r.const("dcg-residuals")},r.createElement("div",{class:r.const("dcg-regression-title dcg-residuals-title")},function(){return e.controller.t("Residuals")}),r.createElement(o.default,{latex:e.bindFn(e.getResidualVariable)},r.createElement("span",{class:r.const("dcg-residuals-variable"),tabindex:r.const("0")})),r.createElement("div",{class:function(){return{"dcg-residual-suggestion":!0,"dcg-action-plot-residual":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-visible":e.getResidualSuggestionVisible()}},"aria-hidden":function(){return!e.getResidualSuggestionVisible()},role:r.const("button"),tabindex:function(){return e.getResidualSuggestionVisible()?"0":void 0},onTap:e.bindFn(e.onTapResidualsSuggestion)},function(){return e.controller.t("plot")})),r.createElement(a,{predicate:function(){return Object.keys(e.getRegression().parameters).length>0}},function(){return r.createElement("div",{class:r.const("dcg-parameters-container")},r.createElement("div",{class:r.const("dcg-regression-title dcg-parameters-title")},function(){return e.controller.t("Parameters")}),r.createElement(c,{each:function(){return Object.keys(e.getRegression().parameters)}},r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Parameters")},class:r.const("dcg-parameters")},function(t){return r.createElement(o.default,{latex:function(){return t+"="+e.getRoundedParam(t)}},r.createElement("span",{class:r.const("dcg-parameter"),tabindex:r.const("0")}))})))}),r.createElement("div",{class:r.const("dcg-clear")})))})},t.prototype.onTapResidualsSuggestion=function(){this.controller.dispatch({type:"plot-residuals",id:this.id})},t.prototype.onTapLogMode=function(){this.controller.dispatch({type:"toggle-logmode",id:this.id})},t.prototype.getRegression=function(){return this.model.formula.regression},t.prototype.getResidualVariable=function(){return this.getRegression().residualVariable||""},t.prototype.getResidualSuggestionVisible=function(){return void 0!==this.getRegression().residualSuggestionId},t.prototype.getShouldSuggestLogMode=function(){return!!this.getRegression().shouldSuggestLogMode},t.prototype.getIsLogModeRegression=function(){return!!this.model.isLogModeRegression},t.prototype.getRoundedParam=function(e){return i.truncatedLatexLabel(this.getRegression().parameters[e],{zeroCutoff:1e-15,digits:6,smallCutoff:1e-6,bigCutoff:1e9})},t.prototype.getRoundedStat=function(e){return i.truncatedLatexLabel(this.getRegression().statistics[e],{zeroCutoff:1e-15,
digits:4,smallCutoff:1e-6,bigCutoff:1e9})},t}(r.Class);t.default=l}),function(){define("dcgview-helpers/dragdrop",["require","underscore","underscore_model","jquery","pjs","lib/animation-frame"],function(e){var t,n,r,i,o;return o=e("underscore"),i=e("underscore_model"),t=e("jquery"),r=e("pjs"),n=e("lib/animation-frame"),r(i,function(e,r){return{init:function(e){return this.options=null!=e?e:{},r.init.call(this),this.dragging=!1},_evt2pt:function(e){return{x:e.changedTouches[0].pageX-this._offsetPt.x,y:e.changedTouches[0].pageY-this._offsetPt.y}},_dispatch:function(e,t){var n;if(!this._destroyed)return n=this._evt2pt(t),this.triggerEvent(e,{x:n.x,y:n.y,dx:n.x-this._startPt.x,dy:n.y-this._startPt.y,evt:t})},destroy:function(){return t(document).off("."+this.guid),this._destroyed=!0},startDrag:function(e,r){if(null==r&&(r={}),!this.dragging)return t(document).on("dcg-tapmove."+this.guid,function(e){return function(t){return t.originalEvent.preventDefault(),e.options.doNotThrottle?void e.doDrag(t):(n.cancelAnimationFrame(e.frameThrottle),e.frameThrottle=n.requestAnimationFrame(function(){return e.doDrag(t)}))}}(this)),t(document).on("dcg-tapend."+this.guid+" dcg-tapcancel."+this.guid,function(e){return function(t){return e.endDrag(t)}}(this)),this._offsetPt={x:0,y:0},null!=r.origin&&(this._offsetPt={x:this._evt2pt(e).x-r.origin.x,y:this._evt2pt(e).y-r.origin.y}),this._startPt=this._evt2pt(e),this.setProperty("dragging",!0),this._dispatch("onGrab",e)},doDrag:function(e){if(this.dragging)return this._dispatch("onDrag",e)},endDrag:function(e){if(this.dragging)return t(document).off("."+this.guid),this.doDrag(e),this.setProperty("dragging",!1),this._dispatch("onDrop",e)}}})})}.call(this),define("dcgview-helpers/slider",["require","exports","./dragdrop","keys","lib/rounding","tslib","dcgview","jquery","lib/conditional_blur"],function(e,t,n,r,i,o,s,a,c){"use strict";function l(e,t,n){return Math.min(Math.max(e,t),n)}Object.defineProperty(t,"__esModule",{value:!0});var u=s.Components.If,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.template=function(){var e=this;return s.createElement("div",{class:s.const("dcg-slider-interior"),didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),style:s.const({"touch-action":"none"})},s.createElement("div",{class:s.const("dcg-track")},s.createElement("div",{class:s.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),s.createElement("div",{class:s.const("dcg-graphic")})),s.createElement(u,{predicate:this.bindFn(this.shouldShowZeroMarker)},function(){return s.createElement("div",{class:s.const("dcg-zeroMarker"),style:function(){return{left:e.getZeroMarkerPercent()+"%"}}})}),s.createElement("div",{class:function(){return{"dcg-thumb":!0,"dcg-down":e.isDragging}},role:s.const("slider"),tabindex:s.const("0"),disablescroll:s.const("true"),style:function(){return{left:e.getThumbPercent()+"%"}},onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-minvalue":this.props.min,"aria-maxvalue":this.props.max,"aria-valuenow":this.props.value},s.createElement("div",{class:s.const("dcg-graphic")}),s.createElement("div",{class:s.const("dcg-center")})))},t.prototype.willUnmount=function(){this.dragDrop.destroy()},t.prototype.didMountRoot=function(e){var t=this;this.rootNode=e,this.dragDrop=n(),this.isMounted=!0,this.dragDrop.observeEvent("onDrop",function(){t.isDragging=!1,t.props.onDrop()}),this.dragDrop.observeEvent("onGrab",function(){t.isDragging=!0,t.props.onGrab()}),this.dragDrop.observeEvent("onDrag",function(e,n){t.props.onDragUpdate(t.valueFromPixels(n.x))})},t.prototype.didMountTickMarks=function(e){this.tickMarksNode=e,this.renderTickMarks()},t.prototype.didUpdate=function(){this.renderTickMarks()},t.prototype.renderTickMarks=function(){if(this.tickMarksNode){var e,t=this.props.step(),n=this.props.min(),r=this.props.max();if(e=void 0===t?0:100*t/(r-n),e<3&&(e=0),e>100&&(e=0),isNaN(e)&&(e=0),this.lastTickMarksPercent!==e){this.lastTickMarksPercent=e;var i="";if(e>0&&e<100)for(var o=e;o<100;o+=e)i+='<div class="dcg-tick" style="left:'+o+'%"></div>';this.tickMarksNode.innerHTML=i}}},t.prototype.shouldShowZeroMarker=function(){return this.props.min()<=0&&this.props.max()>=0},t.prototype.getZeroMarkerPercent=function(){var e=this.props.min(),t=this.props.max();return 100*(0-e)/(t-e)},t.prototype.getThumbPercent=function(){return 100*this.percentFromValue(this.props.value())},t.prototype.valueFromPixels=function(e){if(!this.isMounted)return 0;var t=this.props.min(),n=this.props.max(),r=this.rootNode.getBoundingClientRect().width,o=l(e/r,0,1),s=t+(n-t)*o,a=(n-t)/r;return i.shortestDecimalBetween(s-a,s+a)},t.prototype.percentFromValue=function(e){var t=this.props.min(),n=this.props.max();return l((e-t)/(n-t),0,1)},t.prototype.pixelsFromValue=function(e){if(!this.isMounted)return 0;var t=this.percentFromValue(e);return this.rootNode.getBoundingClientRect().width*t},t.prototype.onKeyDown=function(e){switch(r.lookup(e)){case r.ENTER:case r.ESCAPE:c.default();break;case r.LEFT:case r.DOWN:this.props.onKeyboardUpdate("down"),e.preventDefault();break;case r.RIGHT:case r.UP:this.props.onKeyboardUpdate("up"),e.preventDefault();break;case r.PAGEDOWN:this.props.onKeyboardUpdate("bigdown"),e.preventDefault();break;case r.PAGEUP:this.props.onKeyboardUpdate("bigup"),e.preventDefault();break;case r.HOME:this.props.onKeyboardUpdate("min"),e.preventDefault();break;case r.END:this.props.onKeyboardUpdate("max"),e.preventDefault()}},t.prototype.onStartDrag=function(e){if("keyboard"!==e.device){e.preventDefault(),c.default();var t={x:0,y:0};1===a(e.target).closest(".dcg-thumb").length?t.x=this.pixelsFromValue(this.props.value()):t.x=e.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(e,{origin:t})}},t}(s.Class);t.default=h}),define("expressions/slider_limits_view",["require","exports","tslib","lib/conditional_blur","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","graphing/label"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this.proposedLatex={min:this.model.slider.hardMin?this.model.slider.min:"",max:this.model.slider.hardMax?this.model.slider.max:"",step:this.model.slider.step},i.createElement("div",{class:i.const("dcg-slider_menu dcg-do-blur dcg-desmos-input-container"),handleEvent:i.const("true")},i.createElement("div",{class:i.const("dcg-editable-mathquill-container")},i.createElement(s.default,{latex:function(){return e.proposedLatex.min},isFocused:function(){return"min"===e.getFocusedInput()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("Slider Minimum: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey("min",t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged("min",t)},onFocusedChanged:function(t){return e.handleFocusedChanged("min",t)}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"min"===e.getFocusedInput(),"dcg-invalid":!e.isLimitValid("min")}},"data-dcg-limit":i.const("slidermin")})),i.createElement("span",{class:i.const("dcg-interval-interior")},i.createElement(o.default,{latex:this.bindFn(this.getDependentLatex)},i.createElement("span",null))),i.createElement(s.default,{latex:function(){return e.proposedLatex.max},isFocused:function(){return"max"===e.getFocusedInput()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("Slider Maximum: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey("max",t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged("max",t)},onFocusedChanged:function(t){return e.handleFocusedChanged("max",t)}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"max"===e.getFocusedInput(),"dcg-invalid":!e.isLimitValid("max")}},"data-dcg-limit":i.const("slidermax")})),i.createElement("span",{class:i.const("dcg-slider-step-container")},i.createElement("span",{class:i.const("dcg-slider-step-label"),"aria-hidden":i.const("true")},function(){return e.controller.t("step:")}),i.createElement(s.default,{latex:function(){return e.proposedLatex.step},isFocused:function(){return"step"===e.getFocusedInput()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("Slider Step Size: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey("step",t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged("step",t)},onFocusedChanged:function(t){return e.handleFocusedChanged("step",t)}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"step"===e.getFocusedInput(),"dcg-invalid":!e.isLimitValid("step")}},"data-dcg-limit":i.const("sliderstep")})))))},t.prototype.handlePressedKey=function(e,t,n){if("Enter"===t)return void r.default();var i=s.default.getFocusedMathquill();i&&(i.keystroke(t,n),this.handleLatexChanged(e,i.latex()))},t.prototype.handleLatexChanged=function(e,t){this.proposedLatex[e]=t,this.update()},t.prototype.handleFocusedChanged=function(e,t){var n=this;t&&this.getFocusedInput()!==e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}}),t?clearTimeout(this.saveAfterBlurTimeout):(this.saveAfterBlurTimeout=setTimeout(function(){clearTimeout(n.saveAfterBlurTimeout),n.getFocusedInput()===e&&n.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:n.id,location:e}}),n.onClose()},1),setTimeout(function(){n.commitInput(e)},1))},t.prototype.commitInput=function(e){this.areAllLimitsValid()&&("min"===e?this.dispatchMinLatexIfChanged(this.proposedLatex.min):"max"===e?this.dispatchMaxLatexIfChanged(this.proposedLatex.max):"step"===e&&this.dispatchStepLatexIfChanged(this.proposedLatex.step))},t.prototype.onClose=function(){this.commitInput("min"),this.commitInput("max"),this.commitInput("step")},t.prototype.dispatchMinLatexIfChanged=function(e){var t=!0;""===e&&(t=!1,e=this.model.slider.min),this.model.slider.min===e&&this.model.slider.hardMin===t||this.controller.dispatch({type:"set-slider-minlatex",id:this.id,isHard:t,latex:e})},t.prototype.dispatchMaxLatexIfChanged=function(e){var t=!0;""===e&&(t=!1,e=this.model.slider.max),this.model.slider.max===e&&this.model.slider.hardMax===t||this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,isHard:t,latex:e})},t.prototype.dispatchStepLatexIfChanged=function(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})},t.prototype.getDependentLatex=function(){var e=this.model.dependent||"";return" \\le "+c.identifierToLatex(e)+" \\le "},t.prototype.areAllLimitsValid=function(){var e=a.checkSliderLimits(this.model,this.proposedLatex.min||this.model.slider.min,this.proposedLatex.max||this.model.slider.max,this.proposedLatex.step);return e.min&&e.max&&e.step},t.prototype.isLimitValid=function(e){var t=a.checkSliderLimits(this.model,this.proposedLatex.min||this.model.slider.min,this.proposedLatex.max||this.model.slider.max,this.proposedLatex.step);return t[e]},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"slider-limit"===e.type&&e.id===this.id)return e.location},t}(i.Class);t.default=l}),define("loadcss!slider",function(){}),define("expressions/slider_view",["require","exports","tslib","dcgview","dcgview-helpers/slider","./slider_limits_view","dcgview-helpers/static-mathquill-view","graphing-calc/models/expression","loadcss!slider"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("span",{class:function(){return{"dcg-slider-container":!0,"dcg-editing-limits":e.isEditingSliderLimit()}},tapboundary:r.const("true")},r.createElement("div",{class:r.const("dcg-do-blur dcg-slider"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-minLabel dcg-template-minlabelhtml"),role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Edit __variable__ Limits",{variable:e.model.dependent})},onTap:function(){return e.onEditLimit("min")}},r.createElement(s.default,{latex:function(){return e.model.slider.min}})),r.createElement(i.default,{min:function(){return e.model.sliderMinNumber},max:function(){return e.model.sliderMaxNumber},step:function(){return e.model.sliderStepNumber},value:function(){return e.model.sliderValue},ariaLabel:function(){return'"'+e.model.dependent+'"'},onGrab:this.bindFn(this.onGrab),onDrop:this.bindFn(this.onDrop),onDragUpdate:this.bindFn(this.onDragUpdate),onKeyboardUpdate:this.bindFn(this.onKeyboardUpdate)}),r.createElement("div",{class:r.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:function(){return e.onEditLimit("max")}},r.createElement(s.default,{latex:function(){return e.model.slider.max}}))),r.createElement(c,{predicate:function(){return e.isEditingSliderLimit()}},function(){return r.createElement(o.default,{model:e.props.model,controller:e.props.controller})}))},t.prototype.onGrab=function(){this.dispatchIsDraggingIfChanged(!0)},t.prototype.onDrop=function(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)},t.prototype.onKeyboardUpdate=function(e){this.controller.dispatch({type:"drag-slider-value",id:this.id,value:a.computeSliderAdjustment(this.model,e)})},t.prototype.onDragUpdate=function(e){e=a.computeSliderSnappedValue(this.model,e),e=Math.max(this.model.sliderMinNumber,Math.min(this.model.sliderMaxNumber,e)),e!==this.model.sliderValue&&this.controller.dispatch({type:"drag-slider-value",id:this.model.id,value:e})},t.prototype.onEditLimit=function(e){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}})},t.prototype.dispatchMinLatexIfChanged=function(e){var t=!0;""===e&&(t=!1,e=this.model.slider.min),this.model.slider.min===e&&this.model.slider.hardMin===t||this.controller.dispatch({type:"set-slider-minlatex",id:this.id,isHard:t,latex:e})},t.prototype.dispatchMaxLatexIfChanged=function(e){var t=!0;""===e&&(t=!1,e=this.model.slider.max),this.model.slider.max===e&&this.model.slider.hardMax===t||this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,isHard:t,latex:e})},t.prototype.dispatchStepLatexIfChanged=function(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})},t.prototype.dispatchIsPlayingIfChanged=function(e){this.model.slider.isPlaying!==e&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:e})},t.prototype.dispatchIsDraggingIfChanged=function(e){this.model.sliderDragging!==e&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:e})},t.prototype.isEditingSliderLimit=function(){if(this.controller.isInEditListMode())return!0;var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type||e.id!==this.id)},t}(r.Class);t.default=l}),define("expressions/slider_speed_view",["require","exports","lib/aria","expressions/slider_loop_modes","tslib","underscore","dcgview","graphing-calc/models/expression","loadcss!slider"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],l=o.min(c),u=o.max(c),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},t.prototype.template=function(){var e=this;return s.createElement("div",{class:s.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:s.const("true")},s.createElement("span",{class:s.const("dcg-action-toggle-slider-loop-mode"),onTap:function(){return e.toggleLoopMode()},role:s.const("button"),"aria-label":function(){return e.getLoopModeAriaLabel()},"aria-hidden":function(){return e.isHidden()},tabindex:function(){return e.isHidden()?-1:0},loopMode:function(){return e.model.slider.loopMode}},s.createElement("span",{class:s.const("dcg-toggle-loop-mode-top")},s.createElement("i",{class:s.const("dcg-icon-bottom-arrow")})),s.createElement("span",{class:s.const("dcg-toggle-loop-mode-bottom")},s.createElement("i",{class:s.const("dcg-icon-bottom-arrow")}))),s.createElement("span",{class:function(){return{"dcg-action-slower":!0,"dcg-disabled":e.isSlowerDisabled()}},onTap:function(){return e.animateSlower()},role:s.const("button"),"aria-label":function(){return e.getSlowerAriaLabel()},"aria-hidden":function(){return e.isHidden()},tabindex:function(){return e.isHidden()?-1:0},"aria-disabled":function(){return e.isSlowerDisabled()}},s.const("«")),s.createElement("span",{class:s.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),s.const("x")),s.createElement("span",{class:function(){return{"dcg-action-faster":!0,"dcg-disabled":e.isFasterDisabled()}},onTap:function(){return e.animateFaster()},role:s.const("button"),"aria-label":function(){return e.getFasterAriaLabel()},"aria-hidden":function(){return e.isHidden()},tabindex:function(){return e.isHidden()?-1:0},"aria-disabled":function(){return e.isFasterDisabled()}},s.const("»")))},t.prototype.computeSpeed=function(){var e=a.DEFAULT_SLIDER_PERIOD/this.model.slider.animationPeriod;return e=Number(e.toFixed(3))},t.prototype.isSlowerDisabled=function(){return l>=this.computeSpeed()},t.prototype.isFasterDisabled=function(){return u<=this.computeSpeed()},t.prototype.animateSlower=function(){var e=this.computeSpeed(),t=o.filter(c,function(t){return t<e});0!==t.length&&this.setPeriodFromSpeed(o.max(t))},t.prototype.animateFaster=function(){var e=this.computeSpeed(),t=o.filter(c,function(t){return t>e});0!==t.length&&this.setPeriodFromSpeed(o.min(t))},t.prototype.toggleLoopMode=function(){var e;e=this.model.slider.loopMode===r.LOOP_FORWARD_REVERSE?r.LOOP_FORWARD:r.LOOP_FORWARD_REVERSE,this.controller.dispatch({type:"set-slider-loopmode",id:this.model.id,loopMode:e})},t.prototype.setPeriodFromSpeed=function(e){var t=a.DEFAULT_SLIDER_PERIOD/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:t}),n.alert(this.controller.t("Animating at __speed__x",{speed:e+""}))},t.prototype.isHidden=function(){return!this.model.slider.isPlaying},t.prototype.getSlowerAriaLabel=function(){this.controller.t("Animate __variable__ Slower",{variable:this.model.dependent})},t.prototype.getFasterAriaLabel=function(){this.controller.t("Animate __variable__ Faster",{variable:this.model.dependent})},t.prototype.getLoopModeAriaLabel=function(){return this.model.slider.loopMode===r.LOOP_FORWARD_REVERSE?this.controller.t("Loop __variable__ Forward and Reverse",{variable:this.model.dependent}):this.controller.t("Loop __variable__ Forward",{variable:this.model.dependent})},t}(s.Class);t.default=h}),define("loadcss!prompt-sliders",function(){}),define("expressions/promptslider_view",["require","exports","lib/aria","tslib","graphing/label","jquery","dcgview","loadcss!prompt-sliders"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s.Components,c=a.For,l=a.If,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},t.prototype.template=function(){var e=this;return s.createElement("div",{class:s.const("dcg-create-sliders dcg-action-createslider"),handleEvent:s.const("true"),onTap:this.bindFn(this.onCreateSlider)},s.createElement("span",{class:s.const("dcg-msg")},function(){return e.controller.t("add slider:")}),s.createElement("span",{class:s.const("btns")},s.createElement(c,{each:this.props.variables},s.createElement("span",null,function(t){return s.createElement("div",{class:s.const("dcg-slider-btn-container"),var_name:e.const(t)},s.createElement("div",{role:s.const("button"),tabindex:s.const("0"),class:function(){return{"dcg-btn-slider":!0,"dcg-btn-blue":1===e.props.variables().length,"dcg-btn-light-gray":1!==e.props.variables().length}},didMount:function(e){e.innerHTML=i.identifierToHTML(t)}}))})),s.createElement(l,{predicate:function(){return e.props.variables().length>1}},function(){return s.createElement("div",{class:s.const("dcg-slider-btn-container dcg-all")},s.createElement("div",{role:s.const("button"),tabindex:s.const("0"),class:s.const("dcg-btn-slider dcg-btn-blue")},function(){return e.controller.t("all")}))})))},t.prototype.onCreateSlider=function(e){this.controller.dispatch({type:"set-none-selected"});var t=o(e.target).closest(".dcg-slider-btn-container");if(t.length){var n=!1;if(t.hasClass("dcg-all"))this.props.onCreateSliders(this.props.variables()),n=!0;else{var r=[t.attr("var_name")];this.props.onCreateSliders(r),n=1==this.props.variables().length}if("keyboard"===e.device){var i=this.model.id,s=this.props.controller().getItemSelectorById(i);if(!s)return;n?this.controller.dispatch({type:"move-focus-to-item",id:i}):s.find(".dcg-btn-blue").focus()}}},t.prototype.didMount=function(){var e=this;this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(function(){for(var t=[],r=e.props.variables(),i=0;i<r.length;i++)t.push('"'+r[i]+'"');n.alert(e.controller.t("Add slider for __vars__",{vars:t.join(",")})),e.promptAlertTimeout=0},2e3)},t.prototype.didUnmount=function(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)},t}(s.Class);t.default=u}),define("loadcss!expressions/label_view",function(){}),define("expressions/label_view",["require","exports","tslib","dcgview","loadcss!./label_view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.Components,o=i.Input,s=i.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:function(){return{"dcg-label-visible":e.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}},tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement("span",{role:r.const("checkbox"),"aria-checked":this.bindFn(this.getShowLabel),tabindex:r.const("0"),class:function(){return{"dcg-checkbox":!0,"dcg-checkbox-checked":e.getShowLabel()}},"aria-label":function(){return e.controller.t("Label")},onTap:this.bindFn(this.onCheckboxInput)},r.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getShowLabel()}}},r.createElement("i",{class:r.const("dcg-icon-check")})),r.const(" "),r.createElement("span",{class:r.const("dcg-checkbox-label"),"aria-hidden":r.const("true")},function(){return e.controller.t("Label")})),r.createElement(o,{class:function(){return{"dcg-label-input":!0,"dcg-disabled-input":e.getIsDisabled()}},"aria-label":function(){return e.controller.t("Label Text")},"aria-disabled":this.bindFn(this.getIsDisabled),value:this.bindFn(this.getLabel),onInput:this.bindFn(this.onLabelInput)}),r.createElement(s,{predicate:function(){return e.oldInterpolation().length>0}},function(){return r.createElement("div",{class:r.const("dcg-warning-wrapper tipsy-sticky"),tooltip:function(){return"Interpolate now requires $. For example, try $"+e.oldInterpolation()}},r.createElement("i",{class:r.const("dcg-icon-error")}))}),r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Font Size")},class:function(){return{"dcg-label-font-size-options":!0,"dcg-no-label":!e.getShowLabel()}}},r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return e.controller.t("Small Font Size")},"aria-pressed":function(){return e.isSmallFontSelected()},class:function(){return{"dcg-label-size-option":!0,"dcg-label-size-selected":e.isSmallFontSelected(),"dcg-small-label":!0}},onTap:function(){return e.setLabelSize("small")}},r.const("A")),r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return e.controller.t("Medium Font Size")},"aria-pressed":function(){return e.isMediumFontSelected()},class:function(){return{"dcg-label-size-option":!0,"dcg-label-size-selected":e.isMediumFontSelected(),"dcg-medium-label":!0}},onTap:function(){return e.setLabelSize("medium")}},r.const("A")),r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return e.controller.t("Large Font Size")},"aria-pressed":function(){return e.isLargeFontSelected()},class:function(){return{"dcg-label-size-option":!0,"dcg-label-size-selected":e.isLargeFontSelected(),"dcg-large-label":!0}},onTap:function(){return e.setLabelSize("large")}},r.const("A"))))},t.prototype.setLabelSize=function(e){this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:e})},t.prototype.isSmallFontSelected=function(){return"small"===this.getLabelSize()},t.prototype.isMediumFontSelected=function(){return"medium"===this.getLabelSize()},t.prototype.isLargeFontSelected=function(){return"large"===this.getLabelSize()},t.prototype.getLabelSize=function(){return this.model.labelSize},t.prototype.getLabel=function(){return this.model.label||""},t.prototype.getShowLabel=function(){return!!this.model.showLabel},t.prototype.getIsDisabled=function(){return 0===this.getLabel().length&&!this.getShowLabel()},t.prototype.onLabelInput=function(e){var t=e;this.controller.dispatch({type:"set-item-label",id:this.id,label:t}),this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!!t})},t.prototype.oldInterpolation=function(){var e=this.getLabel(),t=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],n="({"+t.join("})|({")+"})",r="\\$({"+t.join("})|\\$({")+"})",i=e.replace(new RegExp(r,"g"),""),o=i.match(new RegExp(n,""));return o?o[0]:""},t.prototype.onCheckboxInput=function(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.getShowLabel()})},t}(r.Class);t.default=a}),define("loadcss!expressions.image",function(){}),define("expressions/expression_view",["require","exports","config","browser","tslib","./abstract-item-view","dcgview-helpers/mathquill-view","lib/conditional_blur","./expression_icon_view","expressions/evaluation_view","expressions/unresolved_view","expressions/domain_view","expressions/regression_view","expressions/slider_view","expressions/slider_speed_view","expressions/promptslider_view","expressions/label_view","graphing-calc/models/expression","graphing/label","graphing/dragmode","expressions/styles","dcgview","jquery.handleevent","loadcss!expressions.image"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b,x,_){"use strict";function w(e){return e&&e.is_evaluable&&e.zero_values&&e.zero_values.length>0&&"boolean"!=typeof e.zero_values[0].val}Object.defineProperty(t,"__esModule",{value:!0});var E=_.Components,S=E.If,M=E.Switch,I={zeroCutoff:1e-15,smallCutoff:1e-6,bigCutoff:1e9,digits:12},k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return _.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-isPlaying":e.isSliderPlaying(),"dcg-hasSlider":e.hasSlider(),"dcg-hasEvaluation":e.hasEvaluation(),"dcg-hasRegression":e.hasRegression(),"dcg-hasDomain":e.hasDomain()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},_.createElement("div",{class:_.const("dcg-fade-container")},_.createElement("div",{class:_.const("dcg-main")},_.createElement(s.default,{latex:function(){return e.model.latex},getAriaLabel:this.bindFn(this.getAriaLabel),getAriaPostLabel:this.bindFn(this.getFormulaAria),isFocused:function(){return e.isFocused()},config:this.const({}),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onFocusedChanged:function(t){return e.handleMQFocusedChanged(t)}},_.createElement("div",{class:_.const("dcg-expression-mathquill")}))),_.createElement("i",{class:_.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:_.const("true"),onTap:this.bindFn(this.onDelete)}),_.createElement(S,{predicate:this.bindFn(this.hasSlider)},function(){return _.createElement(f.default,{model:e.props.model,controller:e.props.controller})}),_.createElement(S,{predicate:function(){return void 0!==e.getFooterType()}},function(){return _.createElement("div",{class:e.getFooterClass()},_.createElement(M,{key:e.bindFn(e.getFooterType)},function(t){switch(t){case"slider":return _.createElement(p.default,{model:e.props.model,controller:e.props.controller});case"regression":return _.createElement(d.default,{model:e.props.model,controller:e.props.controller});case"label":return _.createElement(g.default,{model:e.props.model,controller:e.props.controller});case"domain":return _.createElement(h.default,{model:e.props.model,controller:e.props.controller});case"promptSlider":return _.createElement(m.default,{model:e.props.model,controller:e.props.controller,variables:e.bindFn(e.getVariables),onCreateSliders:e.bindFn(e.onCreateSliders)});case"evaluation":return _.createElement(l.default,{labelOptions:e.const(I),dependent:function(){return e.model.dependent||""},val:e.bindFn(e.getEvaluationValue)});case"unresolved":return _.createElement(u.default,{controller:e.props.controller});default:return _.createElement("span",null)}}))})),_.createElement("span",{class:_.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:_.const("true"),tapboundary:_.const("true"),disablescroll:_.const("true"),style:_.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},_.createElement("span",{class:_.const("dcg-num")},function(){return e.model.displayIndex}),_.createElement("div",{class:_.const("dcg-tab-interior dcg-action-icon-mouse")},_.createElement(c.default,{model:this.props.model,controller:this.props.controller}))),_.createElement("span",{class:_.const("dcg-exp-actions")},_.createElement("span",{class:_.const("dcg-graphic"),handleEvent:_.const("true ")}),_.createElement("span",{class:_.const("dcg-delete-btn dcg-tooltip"),handleEvent:_.const("true"),tooltip:function(){return e.controller.t("Delete")},onTap:this.bindFn(this.onDelete)},_.createElement("i",{class:_.const("dcg-icon-remove")})),_.createElement("span",{class:_.const("dcg-action-duplicate dcg-duplicate-btn dcg-tooltip"),handleEvent:_.const("true"),tooltip:function(){return e.controller.t("Duplicate")},onTap:this.bindFn(this.onDuplicateWithoutFocus)},_.createElement("i",{class:_.const("dcg-icon-duplicate")})),_.createElement("span",{class:function(){return{"dcg-action-createtable":!0,"dcg-tooltip":!0,"dcg-disabled":!e.model.isTableable}},tooltip:function(){return e.controller.t("Convert to Table")},handleEvent:_.const("true"),onTap:this.bindFn(this.onCreateTable)},_.createElement("i",{
class:_.const("dcg-icon-table")}))))},t.prototype.getFooterType=function(){return this.hasSlider()?"slider":this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasDomain()?"domain":this.shouldShowSliderPrompt()?"promptSlider":this.hasEvaluation()?"evaluation":this.model.unresolved?"unresolved":void 0},t.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom"):this.const("dcg-expression-bottom dcg-fadein-bottom")},t.prototype.onDuplicateWithoutFocus=function(){this.controller.dispatch({type:"duplicate-expression",id:this.model.id})},t.prototype.onCreateSliders=function(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})},t.prototype.onCreateTable=function(){var e=this.model.formula;if(this.model.isTableable){var t,n=e.table_info,r=this.model.index,i=[],o=[];if(n.values)for(t=0;t<n.values.length;t++){var s=n.values[t][0];i.push(s?s+"":"");var a=n.values[t][1];o.push(a?a+"":"")}else for(t=-2;t<=2;t++)i.push(t+""),o.push("");var c={id:this.controller.generateId(),type:"table",columns:[{id:this.controller.generateId(),latex:n.independent_variable,color:this.controller.getNextColor(),hidden:!1,values:i,points:!0,lines:!1,dragMode:b.NONE,pointStyle:x.POINT,lineStyle:x.SOLID},{id:this.controller.generateId(),latex:n.dependent_column,color:this.model.color,hidden:!1,values:o,points:!0,lines:!(y.isPointOrPointList(this.model)||this.model.hidden),dragMode:b.NONE,pointStyle:x.POINT,lineStyle:x.SOLID}]},l=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1}),n.by_reference?this.controller.dispatch({type:"insert-item-at-index",index:r+1,state:c,folderId:this.model.folderId,focus:!0}):this.controller.dispatch({type:"replace-item-at-index",index:r,state:c,focus:!0});var u=function(){l.dispatch({type:"undo"}),l.dispatch({type:"set-edit-list-mode",isEditListMode:!0})};this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Table created."),undoCallback:u}})}},t.prototype.shouldShowLabelView=function(){return n.get("labels")&&y.isPointOrPointList(this.model)},t.prototype.shouldShowSliderPrompt=function(){return this.getVariables().length>0},t.prototype.getVariables=function(){return this.model.formula?this.model.formula.is_single_identifier?[]:this.model.formula.variables||[]:[]},t.prototype.hasEvaluation=function(){return w(this.model.formula)},t.prototype.getEvaluationValue=function(){return this.hasEvaluation()?this.model.formula.zero_values[0].val:NaN},t.prototype.hasRegression=function(){return!(!this.model.formula||!this.model.formula.is_regression)},t.prototype.hasDomain=function(){return!(!this.model.formula||!y.isParametric(this.model))},t.prototype.hasSlider=function(){return!!this.model.sliderExists},t.prototype.isSliderPlaying=function(){return!(!this.model.sliderExists||!this.model.slider.isPlaying)},t.prototype.getAriaLabel=function(){if(this.shouldShowLabelView()){var e;e=this.model.label&&""!==this.model.label?this.model.label:this.controller.t("Label");var t;return t=this.model.showLabel?e:this.controller.t("Hidden __label__",{label:e})}return this.controller.t("Expression __index__",{index:this.model.displayIndex})},t.prototype.getFormulaAria=function(){var e=this.model.formula,t="";if(!e)return t;if(y.isEmpty(this.model))return t;if(w(e)){t="equals ";var n=e.zero_values[0].val;t+=Array.isArray(n)?n.length+" element list.":v.truncatedAriaLabel(n,I)}else e.error&&!this.shouldShowSliderPrompt()?t=this.controller.unpack(e.error):(e.is_graphable||e.is_regression)&&(t=e.is_graphable&&e.is_regression?this.controller.t("Has graph and regression. To access statistics, press Tab."):e.is_regression?this.controller.t("Has regression. To access statistics, press Tab."):this.controller.t("Has graph."),e.is_graphable&&(t+=r.IS_APPLE?this.controller.t(" For a summary, press OPTION+S. To audio trace, press OPTION+T."):this.controller.t(" For a summary, press ALT+S. To audio trace, press ALT+T.")));return t},t.prototype.handlePressedKey=function(e,t){var n=s.default.getFocusedMathquill();if(n){if("Esc"===e)return a.default();if("Up"===e||"Down"===e){var r=s.default.applyArrowKeyAndReturnIfWasAtBounds(n,e,t);if(r)return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if("Delete"===e||"Backspace"===e){if(y.isEmpty(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if("Enter"===e){var i=this.getVariables();return i.length?void this.onCreateSliders(i.concat("")):this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}n.keystroke(e,t),this.handleLatexChanged(n.latex())}},t.prototype.handleLatexChanged=function(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e})},t.prototype.handleMQFocusedChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})},t.prototype.onMouseSelect=function(e){"keyboard"!==e.device&&("dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||this.controller.isInEditListMode()||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&("expression"===e.type&&e.id===this.id)},t}(o.default);t.default=k}),define("loadcss!smart_textarea",function(){}),define("expressions/smart_textarea",["require","exports","browser","keys","tslib","dcgview","jquery","lib/conditional_blur","loadcss!smart_textarea","jquery.handleevent"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=o.Components.Textarea,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-smart-textarea-container")},o.createElement("div",{class:o.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),o.createElement(c,{class:function(){return{"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!e.props.text()}},"aria-label":function(){return e.props.ariaLabel?e.props.ariaLabel():void 0},placeholder:this.props.placeholder,value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))},t.prototype.getDisplayTextHTML=function(){var e=this.props.text()||"";if(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),!this.props.showLinks())return e;var t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e=e.replace(t,"<a href='$1' target ='_blank'>$1</a>")},t.prototype.willUnmount=function(){this.textareaNode=void 0},t.prototype.didMountDisplay=function(e){this.displayNode=e,s(e).on("touchend",function(e){e.preventDefault()}),s(e).on("dcg-tap dcg-tapstart","a",function(e){e.handle()}),this.renderDisplayText()},t.prototype.didMountTextarea=function(e){var t=this;this.textareaNode=e,s(e).on("dcg-tapstart",function(e){e.handle()}),s(e).on("focusin focusout",function(){return t.onFocusEvent()}),this.updateFocused()},t.prototype.didUpdate=function(){this.updateFocused(),this.renderDisplayText()},t.prototype.onFocusEvent=function(){if(this.textareaNode){var e=document.activeElement===this.textareaNode;this.shouldBeFocused()!==e&&this.props.onFocusChange(e)}},t.prototype.renderDisplayText=function(){if(this.displayNode){var e=this.getDisplayTextHTML();this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e)}},t.prototype.isFocused=function(){return document.activeElement===this.textareaNode},t.prototype.shouldBeFocused=function(){return this.props.shouldFocus()},t.prototype.updateFocused=function(){if(this.textareaNode){var e=this.isFocused(),t=this.shouldBeFocused();if(e!==t)if(t){if(n.IS_IPAD&&n.IS_IN_IFRAME)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}else this.textareaNode.blur()}},t.prototype.onKeydownEvent=function(e){var t=this.textareaNode;if(t){var n=r.lookup(e);n!==r.ENTER||e.metaKey?n===r.ESCAPE?a.default():n===r.UP?0===t.selectionStart&&0===t.selectionEnd&&(e.preventDefault(),this.props.onSpecialKey("Up")):n===r.DOWN?t.selectionStart===t.value.length&&t.selectionEnd===t.value.length&&(e.preventDefault(),this.props.onSpecialKey("Down")):n===r.BACKSPACE?0===t.value.length&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):n===r.DELETE&&0===t.value.length&&(e.preventDefault(),this.props.onSpecialKey("Delete")):(e.preventDefault(),this.props.onSpecialKey("Enter")),this.props.onKeydown&&this.props.onKeydown(e)}},t}(o.Class);t.default=l}),define("expressions/text_view",["require","exports","tslib","./abstract-item-view","./smart_textarea","dcgview","jquery.handleevent"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressiontext":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id)}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},o.createElement("div",{class:o.const("dcg-fade-container")},o.createElement("div",{class:o.const("dcg-main")},o.createElement(i.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.text},placeholder:function(){return e.controller.t("Enter a note...")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey)})),o.createElement("i",{class:o.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:o.const("true"),onTap:this.bindFn(this.onDelete)})),o.createElement("span",{class:o.const("dcg-tab dcg-action-drag"),handleevent:o.const("true"),tapboundary:o.const("true"),disablescroll:o.const("true"),style:o.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},o.createElement("span",{class:o.const("dcg-num")},function(){return e.model.displayIndex}),o.createElement("div",{class:o.const("dcg-tab-interior")}),o.createElement("i",{class:o.const("dcg-icon-text")})),o.createElement("span",{class:o.const("dcg-exp-actions")},o.createElement("span",{class:o.const("dcg-graphic"),handleEvent:o.const("true ")}),o.createElement("span",{class:o.const("dcg-delete-btn dcg-tooltip"),handleEvent:o.const("true"),tooltip:function(){return e.controller.t("Delete")},onTap:this.bindFn(this.onDelete)},o.createElement("i",{class:o.const("dcg-icon-remove")}))))},t.prototype.onInput=function(e){this.controller.dispatch({type:"set-note-text",id:this.id,text:e})},t.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})},t.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"text"!==e.type||e.id!==this.id)},t}(r.default);t.default=s}),define("expressions/tables/table_column_menu_view",["require","exports","tslib","dcgview","expressions/color_menu_view","graphing/dragmode","expressions/styles","expressions/toggle-view"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components,l=c.For,u=c.If,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.columnId=this.model.id,this.tableModel=this.model.table,this.tableId=this.tableModel.id,r.createElement("div",{class:r.const("dcg-table-column-menu dcg-options-menu")},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-options-menu-column-left")},r.createElement("div",{class:r.const("dcg-options-menu-section")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Points")}),r.createElement(a.default,{toggled:function(){return e.model.points},onChange:function(){return e.onTogglePoints(!e.model.points)}}),r.createElement(u,{predicate:function(){return e.model.points}},function(){return r.createElement(l,{each:function(){return e.controller.getPointStyles()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("span",{class:function(){return n={},n[e.getPointStyleClass(t)]=!0,n["dcg-table-option"]=!0,n["dcg-graph-icon"]=!0,n["dcg-variable-colorcss"]=!0,n["dcg-selected"]=e.model.pointStyle===t,n;var n},style:function(){return{background:e.model.color,"border-color":e.model.color}},onTap:function(){return e.onPointStyleSelected(t)}})}))})),r.createElement("div",{class:r.const("dcg-options-menu-section")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Lines")}),r.createElement(a.default,{toggled:function(){return e.model.lines},onChange:function(){return e.onToggleLines(!e.model.lines)}}),r.createElement(u,{predicate:function(){return e.model.lines}},function(){return r.createElement("div",{class:r.const("dcg-line-options")},r.createElement(l,{each:function(){return e.controller.getLineStyles()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("span",{class:function(){return n={},n[e.getLineStyleClass(t)]=!0,n["dcg-table-option"]=!0,n["dcg-graph-icon"]=!0,n["dcg-variable-colorcss"]=!0,n["dcg-selected"]=e.model.lineStyle===t,n;var n},style:function(){return{background:e.model.color,"border-color":e.model.color}},onTap:function(){return e.onLineStyleSelected(t)}})})))})),r.createElement(u,{predicate:function(){return e.model.draggable}},function(){return r.createElement("div",{class:r.const("dcg-drag-div dcg-options-menu-section")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Drag")}),r.createElement(a.default,{toggled:function(){return e.model.dragMode!==o.NONE},onChange:function(){return e.onToggleDrag()}}),r.createElement(u,{predicate:function(){return e.model.dragMode!==o.NONE}},function(){return r.createElement(l,{each:function(){return e.controller.getUIDragModes()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("span",{class:function(){return{"dcg-dragmode-option":!0,"dcg-graph-icon":!0,"dcg-variable-colorcss":!0,"dcg-selected":e.model.dragMode===t}},style:function(){return{background:e.model.color,"border-color":e.model.color}},mode:e.const(t),onTap:function(){return e.onDragModeSelected(t)}})}))}))})),r.createElement("div",{class:r.const("dcg-options-menu-column-right")},r.createElement("div",{class:r.const("dcg-colors-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Color")}),r.createElement(i.default,{controller:function(){return e.props.controller()},selectedColor:function(){return e.model.color},onColorSelected:this.bindFn(this.onColorSelected)}))))},t.prototype.getPointStyleClass=function(e){switch(e){case s.CROSS:return"dcg-graph-CROSS";case s.OPEN:return"dcg-graph-OPEN";default:return"dcg-graph-POINT"}},t.prototype.getLineStyleClass=function(e){switch(e){case s.DASHED:return"dcg-graph-DASHED";case s.DOTTED:return"dcg-graph-DOTTED";default:return"dcg-graph-SOLID"}},t.prototype.onColorSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-color",tableId:this.tableId,columnId:this.columnId,color:e})},t.prototype.onTogglePoints=function(e){this.controller.dispatch({type:"set-tablecolumn-points",tableId:this.tableId,columnId:this.columnId,bool:e})},t.prototype.onPointStyleSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-pointstyle",tableId:this.tableId,columnId:this.columnId,pointStyle:e})},t.prototype.onToggleLines=function(e){this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.tableId,columnId:this.columnId,bool:e})},t.prototype.onLineStyleSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.tableId,columnId:this.columnId,lineStyle:e})},t.prototype.onToggleDrag=function(){var e=this.columnId,t=this.tableId,n=this.model.dragMode===o.NONE?o.XY:o.NONE;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:t,columnId:e,dragMode:n})},t.prototype.onDragModeSelected=function(e){var t=this.columnId,n=this.tableId;this.model.dragMode!==e&&this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:n,columnId:t,dragMode:e})},t}(r.Class);t.default=h}),define("expressions/tables/table_icon_view",["require","exports","tslib","dcgview","expressions/abstract_icon_view","./table_column_menu_view","lib/conditional_blur","jquery","jquery.handleevent"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.model=this.props.model()},t.prototype.template=function(){var e=this;return r.createElement("span",{class:r.const("dcg-icon-box tipsy-sticky dcg-do-not-blur"),handleevent:r.const("true"),disablescroll:r.const("true"),tooltip:function(){return e.model.error?e.controller.unpack(e.model.error):""},onTapStart:this.bindFn(this.handleIconTapStart),onTap:this.bindFn(this.handleIconTap),onLongHold:this.bindFn(this.handleIconLongHold),didMount:this.bindFn(this.didMountRoot)},r.createElement("span",{class:function(){return t={"dcg-icon":!0,"dcg-graph-icon":!0},t[e.getIconClass()]=!0,t;var t},style:function(){return{"border-color":e.model.color,background:e.model.color}}},r.createElement("i",{class:r.const("dcg-icon-hidden")})))},t.prototype.didUpdate=function(){this.__renderCellError(),this.optionsMenu&&this.optionsMenu.update()},t.prototype.didMountRoot=function(e){this.rootElt=e,this.__renderCellError()},t.prototype.__renderCellError=function(){this.rootElt&&a(this.rootElt).closest(".dcg-cell").toggleClass("dcg-error",this.hasStableError())},t.prototype.createOptionsMenuView=function(){var e=this.getOptionsMenuContainerSelector(),t=r.mountToNode(o.default,e[0],{controller:this.props.controller,model:this.props.model});return t},t.prototype.handleIconTap=function(e){if(!e.wasLongheld())return this.optionsShown?void this.hideOptions():void(this.controller.isInEditListMode()?this.toggleOptions():this.toggleGraphShown())},t.prototype.handleIconLongHold=function(){this.optionsShown||this.toggleOptions()},t.prototype.handleIconTapStart=function(e){this.optionsShown||1===e.touches.length&&s.default()},t.prototype.toggleGraphShown=function(){this.hasError()||this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})},t.prototype.hasError=function(){return!!this.model.error},t.prototype.getIconClass=function(){return this.hasStableError()?"dcg-error":this.model.error?"":this.model.shouldGraph?this.model.points&&this.model.lines?"dcg-table-points-and-lines":this.model.points?"dcg-table-points":this.model.lines?"dcg-table-lines":"":"dcg-graph-hidden"},t}(i.default);t.default=c}),define("expressions/tables/header-view",["require","exports","tslib","dcgview","./table_icon_view","dcgview-helpers/mathquill-view","underscore","graphing-calc/models/table"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table},t.prototype.isRightSide=function(){var e=this.lookupCellPosition();return e.column>=this.table.columnModels.length-1},t.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("columnheader"),class:function(){return{"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":0===e.model.index,"dcg-right":e.isRightSide(),"dcg-selected":e.shouldFocus()}},index:function(){return e.model.index},onTapStart:this.bindFn(this.focusThisCell)},r.createElement("div",{class:r.const("dcg-inner-border")}),r.createElement(i.default,{model:this.props.model,controller:this.props.controller}),r.createElement(o.default,{latex:function(){return e.model.latex||""},isFocused:this.bindFn(this.shouldFocus),config:this.const({}),getAriaLabel:this.bindFn(this.getAriaLabel),getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onFocusedChanged:function(t){return e.handleMQFocusedChanged(t)},selectOnFocus:this.const(!0)},r.createElement("span",{class:r.const("dcg-math-field dcg-cell-math-content")})),r.createElement("span",{class:r.const("dcg-drag-icon"),"dcg-drag-mode":function(){return e.model.dragMode},style:function(){return{color:e.model.color}}},r.createElement("i",{class:r.const("dcg-icon-move")}),r.createElement("i",{class:r.const("dcg-icon-move-horizontal")}),r.createElement("i",{class:r.const("dcg-icon-move-vertical")})),r.createElement("div",{class:r.const("dcg-empty-line")}),r.createElement(c,{predicate:function(){return e.isRightSide()}},function(){return r.createElement("span",{class:r.const("dcg-fade-right")})}))},t.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},t.prototype.lookupCellPosition=function(){return{row:0,column:this.model.index}},t.prototype.getAriaLabel=function(){var e=this.lookupCellPosition();return this.controller.t("Column header __column__",{column:e.column+1})},t.prototype.handlePressedKey=function(e,t){var n=o.default.getFocusedMathquill();if(n){var r=o.default.handleKeystrokeAndDecideIfSpecialEvent(n,e,t);r?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(n.latex())}},t.prototype.handleLatexChanged=function(e){var t=this.model.latex;t!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},t.prototype.shouldFocus=function(){return s.isEqual(this.lookupCellPosition(),a.getSelectedCell(this.table))},t.prototype.handleMQFocusedChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},t}(r.Class);t.default=l}),define("expressions/tables/cell-view",["require","exports","keys","tslib","dcgview","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i.Components.If,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.column.table},t.prototype.template=function(){var e=this;return i.createElement("div",{role:i.const("gridcell"),class:function(){return{"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":e.isEmpty(),"dcg-non-editable":!!e.model.column.disabled,"dcg-error":!!e.hasError(),"dcg-selected":e.shouldFocus()}},onTapStart:this.bindFn(this.focusThisCell)},i.createElement("div",{class:i.const("dcg-inner-border")}),i.createElement("span",{class:i.const("dcg-error-indicator dcg-do-not-blur tipsy-sticky"),handleevent:i.const("true"),tooltip:this.bindFn(this.getErrorMessage)}),i.createElement(l,{predicate:function(){return!!e.model.column.disabled}},function(){return i.createElement(s.default,{getAriaLabel:e.bindFn(e.getAriaLabel),latex:function(){return e.getValue()}},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),tabindex:function(){return e.isEmpty()?-1:0},onKeyDown:e.bindFn(e.handleKeydownOnReadonlyCell),manageFocus:e.const({shouldBeFocused:e.bindFn(e.shouldFocusReadonlyCell),onFocusedChanged:e.bindFn(e.handleFocusedChanged)})}))}),i.createElement(l,{predicate:function(){return!e.model.column.disabled}},function(){return i.createElement(o.default,{latex:function(){return e.getValue()},isFocused:e.bindFn(e.shouldFocusEditableCell),config:e.const({}),getAriaLabel:e.bindFn(e.getAriaLabel),getAriaPostLabel:e.bindFn(e.getErrorMessage),hasError:e.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onFocusedChanged:function(t){return e.handleFocusedChanged(t)},selectOnFocus:e.const(!0)},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content")}))}),i.createElement("div",{class:i.const("dcg-empty-line")}))},t.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},t.prototype.handlePressedKey=function(e,t){var n=o.default.getFocusedMathquill();if(n){var r=o.default.handleKeystrokeAndDecideIfSpecialEvent(n,e,t);r?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(n.latex())}},t.prototype.handleKeydownOnReadonlyCell=function(e){var t=n.lookup(e);"Tab"!==t&&(e.preventDefault(),t&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:t}))},t.prototype.handleLatexChanged=function(e){var t=this.getValue();t!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},t.prototype.shouldFocus=function(){return a.isEqual(this.lookupCellPosition(),c.getSelectedCell(this.table))},t.prototype.shouldFocusReadonlyCell=function(){return!!this.model.column.disabled&&this.shouldFocus()},t.prototype.shouldFocusEditableCell=function(){return!this.model.column.disabled&&this.shouldFocus()},t.prototype.handleFocusedChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},t.prototype.lookupCellPosition=function(){return{row:this.model.row.index,column:this.model.column.index}},t.prototype.getPackedError=function(){return this.model.column.packedErrors[this.model.row.index-1]},t.prototype.hasError=function(){return!!this.getPackedError()},t.prototype.getErrorMessage=function(){var e=this.getPackedError();return e?this.controller.unpack(e):""},t.prototype.getValue=function(){var e=this.model.column.index,t=this.model.row.index-1,n=this.model.column.disabled;return n?this.model.column.computedValues[t]||"":this.table.columns[e].values[t]||""},t.prototype.isEmpty=function(){return""===this.getValue()},t.prototype.getAriaLabel=function(){var e=this.lookupCellPosition(),t=e.row,n=e.column+1;return this.controller.t("Row __row__ Col __column__",{row:t.toString(),column:n.toString()})},t}(i.Class);t.default=u}),define("loadcss!expressions.table",function(){}),define("expressions/table_view",["require","exports","lib/aria","keys","tslib","./abstract-item-view","dcgview","./tables/header-view","./tables/cell-view","lib/conditional_blur","graphing-calc/models/table","vendor/mathquill","jquery","loadcss!expressions.table","jquery.handleevent"],function(e,t,n,r,i,o,s,a,c,l,u,h,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=s.Components.For,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return s.createElement("div",{class:function(){return{"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-no-faded-h":e.isRightFocused(),"dcg-no-faded-v":e.isBottomFocused()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},s.createElement("div",{class:s.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},s.createElement("div",{class:s.const("dcg-main")},s.createElement("div",{class:s.const("dcg-table-container"),didMount:this.bindFn(this.didMountContainer)},s.createElement("div",{class:s.const("dcg-table-sliding-container"),style:function(){return{transform:"translateX("+e.computeScrolledX()+"px)"}}},s.createElement(p,{each:function(){return e.model.rowModels},key:function(e){return e.guid}},s.createElement("div",{role:s.const("grid"),class:function(){return{"dcg-tabledata":!0,"dcg-focus-in-bottom-row":e.isBottomFocused(),"dcg-focus-in-right-column":e.isRightFocused()}}},function(t){return s.createElement(p,{each:function(){return t.cells},key:function(e){return e.guid}},s.createElement("tr",{role:s.const("row"),"aria-rowindex":function(){return t.index},class:s.const("dcg-row")},function(t){return"header"===t.type?s.createElement(a.default,{controller:e.props.controller,model:e.const(t)}):s.createElement(c.default,{controller:e.props.controller,model:e.const(t)})}))}))))),s.createElement("i",{class:s.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:s.const("true"),onTap:this.bindFn(this.onDelete)})),s.createElement("span",{class:s.const("dcg-tab dcg-action-drag"),handleevent:s.const("true"),tapboundary:s.const("true"),disablescroll:s.const("true"),style:s.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},s.createElement("span",{class:s.const("dcg-num")},function(){return e.model.displayIndex}),s.createElement("div",{class:s.const("dcg-tab-interior")})),s.createElement("span",{class:s.const("dcg-exp-actions")},s.createElement("span",{class:s.const("dcg-delete-btn dcg-tooltip"),handleEvent:s.const("true"),tooltip:function(){return e.controller.t("Delete")},onTap:this.bindFn(this.onDelete)},s.createElement("i",{class:s.const("dcg-icon-remove")}))))},t.prototype.didMountContainer=function(e){this.node=e,d(e).on("scroll",function(){return e.scrollLeft=0})},t.prototype.getSelectedCell=function(){return u.getSelectedCell(this.model)},t.prototype.computeScrolledX=function(){if(!this.getSelectedCell()||!this.node)return 0;var e=this.node.children[0],t=this.node.querySelector(".dcg-selected");if(null===e||null===t)return 0;var n=this.node.getBoundingClientRect(),r=t.getBoundingClientRect(),i=r.left-e.getBoundingClientRect().left,o=n.width-i-r.width-80,s=Math.min(0,n.width-e.scrollWidth-30);return o=Math.max(o,s),Math.min(0,o)},t.prototype.onMouseSelect=function(e){"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),l.default(),this.controller.dispatch({type:"set-selected-id",
id:this.id}))},t.prototype.isBottomFocused=function(){var e=this.getSelectedCell();return!!e&&e.row===this.model.columnModels[0].cells.length},t.prototype.isRightFocused=function(){var e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1},t.prototype.isFocused=function(){return!!this.getSelectedCell()},t.prototype.onKeydown=function(e){!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||("Up"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInColumn()):"Down"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInColumn()):"Left"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInRow()):"Right"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInRow()):"H"===r.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),this.speakColumnHeader()))},t.prototype.moveToFirstCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:e.column}}})},t.prototype.moveToLastCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:this.model.rowModels.length-1,column:e.column}}})},t.prototype.moveToFirstCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:0}}})},t.prototype.moveToLastCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:this.model.columnModels[0].cells.length-1}}})},t.prototype.speakColumnHeader=function(){var e=this.controller.t("No column header"),t=this.getSelectedCell();if(t){var r=this.model.rowModels[0].cells[t.column];if(r&&"header"===r.type&&r.latex&&""!==r.latex){var i=h.MQ.StaticMath(d("<span>"+r.latex+"</span>")[0]);e=i.mathspeak()}}n.alert(e)},t}(o.default);t.default=f}),define("loadcss!folder",function(){}),define("expressions/folder_view",["require","exports","lib/aria","keys","browser","tslib","./abstract-item-view","./smart_textarea","dcgview","jquery.handleevent","loadcss!folder"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return c.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionfolder":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-collapsed":!!e.model.collapsed,"dcg-hidden":!!e.model.hidden,"dcg-has-items":e.controller.getNumberOfItemsInFolder(e.id)>0,"dcg-secretFolder":e.model.secret&&!e.controller.canAdministerSecretFolders()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},c.createElement("div",{class:c.const("dcg-fade-container")},c.createElement("div",{class:c.const("dcg-main")},c.createElement("div",{role:c.const("button"),tabindex:c.const("0"),"aria-pressed":function(){return e.model.collapsed},"aria-label":function(){return e.controller.t("Collapse Folder")},class:c.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:c.const("true"),onTap:this.bindFn(this.toggleCollapsed)},c.createElement("i",{class:c.const("dcg-icon-caret-down")})),c.createElement(a.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.title},placeholder:function(){return e.controller.t("Enter a note...")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel)}),c.createElement("div",{role:c.const("checkbox"),"aria-checked":function(){return e.model.secret},"aria-label":function(){return e.controller.t("Hide this folder from students")},class:function(){return{"dcg-action-toggle-secret-folder":!0,"dcg-do-not-blur":!0,"dcg-checked":e.model.secret}},style:function(){return{display:e.controller.canAdministerSecretFolders()?void 0:"none"}},handleEvent:c.const("true"),onTap:this.bindFn(this.toggleSecret)},c.createElement("span",{class:c.const("dcg-checkbox-box")},c.createElement("i",{class:c.const("dcg-icon-check")})),c.createElement("span",{class:c.const("dcg-checkbox-label")},function(){return e.controller.t("Hide this folder from students.")}))),c.createElement("i",{class:c.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:c.const("true"),onTap:this.bindFn(this.onDelete)})),c.createElement("span",{class:c.const("dcg-tab dcg-action-drag"),handleevent:c.const("true"),tapboundary:c.const("true"),disablescroll:c.const("true"),style:c.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},c.createElement("span",{class:c.const("dcg-num")},function(){return e.model.displayIndex}),c.createElement("div",{class:c.const("dcg-tab-interior")}),c.createElement("div",{class:c.const("dcg-tab-interior")},c.createElement("span",{role:c.const("button"),tabindex:c.const("0"),"aria-pressed":function(){return!!e.model.hidden},"aria-label":function(){return e.controller.t("Hide Folder")},class:c.const("dcg-action-toggle-folder-hidden dcg-graph-icon dcg-folder dcg-icon"),onTap:this.bindFn(this.toggleHidden)},c.createElement("i",{class:c.const("dcg-icon-hidden")}),c.createElement("i",{class:c.const("dcg-icon-folder")})))),c.createElement("span",{class:c.const("dcg-exp-actions")},c.createElement("span",{class:c.const("dcg-graphic"),handleEvent:c.const("true ")}),c.createElement("span",{class:c.const("dcg-delete-btn dcg-tooltip"),onTap:this.bindFn(this.onDelete),handleEvent:c.const("true"),tooltip:function(){return e.controller.t("Delete")}},c.createElement("i",{class:c.const("dcg-icon-remove")}))))},t.prototype.toggleHidden=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})},t.prototype.toggleSecret=function(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})},t.prototype.toggleCollapsed=function(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})},t.prototype.onInput=function(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})},t.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})},t.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},t.prototype.onKeydown=function(e){var t=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,o=e.metaKey&&!e.altKey&&!e.shiftKey&&!e.ctrlKey,s=i.IS_APPLE?o:t;s&&r.lookup(e)===r.UP&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed}),this.model.collapsed?n.alert(this.controller.t("folder collapsed")):n.alert(this.controller.t("folder expanded")))},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"folder"!==e.type||e.id!==this.id)},t.prototype.getAriaLabel=function(){var e="",t="";this.model.hidden||this.model.collapsed||this.model.secret?!this.model.hidden||this.model.collapsed||this.model.secret?this.model.hidden||!this.model.collapsed||this.model.secret?this.model.hidden||this.model.collapsed||!this.model.secret?this.model.hidden&&this.model.collapsed&&!this.model.secret?t=this.controller.t("Hidden Collapsed Folder"):this.model.hidden&&!this.model.collapsed&&this.model.secret?t=this.controller.t("Hidden Secret Folder"):!this.model.hidden&&this.model.collapsed&&this.model.secret?t=this.controller.t("Collapsed Secret Folder"):this.model.hidden&&this.model.collapsed&&this.model.secret&&(t=this.controller.t("Hidden Collapsed Secret Folder")):t=this.controller.t("Secret Folder"):t=this.controller.t("Collapsed Folder"):t=this.controller.t("Hidden Folder"):t=this.controller.t("Folder");var n=this.controller.getNumberOfItemsInFolder(this.id);return e=n>0?this.controller.t("__folder__ has __count__ items",{folder:t,count:n}):t},t}(s.default);t.default=l}),define("loadcss!image_opacity_menu",function(){}),define("expressions/image_options_view",["require","exports","tslib","dcgview","loadcss!image_opacity_menu"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.Components.For,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-exp-options-menu dcg-image-options-menu dcg-options-menu")},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-opacities-div")},r.createElement("div",{class:r.const("dcg-opacities-menu")},r.createElement("div",{class:r.const("dcg-title")},function(){return e.controller.t("opacity:")}),r.createElement(i,{each:function(){return e.controller.getImageOpacities()}},r.createElement("div",{class:r.const("dcg-opacities-menu")},function(t){return r.createElement("span",{class:function(){return{"dcg-opacity-option":!0,"dcg-graph-icon":!0,"dcg-selected":e.model.opacity===t}},"image-opacity":e.const(t),handleevent:r.const("true")},r.createElement("span",{class:r.const("dcg-image-thumb"),style:function(){return{"background-image":"url("+encodeURI(e.model.image_url)+")",opacity:t}},onTap:function(){return e.onSelectOpacity(t)}}),r.createElement("i",{class:r.const("dcg-icon-check")}))})))))},t.prototype.onSelectOpacity=function(e){this.controller.dispatch({type:"set-image-opacity",id:this.id,opacity:e})},t}(r.Class);t.default=o}),define("expressions/image_icon_view",["require","exports","tslib","dcgview","./abstract_icon_view","./image_options_view","jquery","jquery.handleevent"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.model=this.props.model()},t.prototype.template=function(){var e=this;return r.createElement("span",{class:function(){return t={"dcg-icon":!0,"dcg-graph-icon":!0,"tipsy-sticky":!0},t[e.getIconClass()]=!0,t;var t},tooltip:function(){return e.model.error?e.controller.unpack(e.model.error):""},didMount:this.bindFn(this.didMountRoot)},r.createElement("span",{class:r.const("dcg-image-thumb"),style:function(){return{"background-image":e.getBackgroundImage(),opacity:e.model.opacity}}}),r.createElement("i",{class:r.const("dcg-icon-hidden")}))},t.prototype.didMountRoot=function(e){var t=this;this.rootElt=e,s(e).closest(".dcg-action-icon-mouse").on("dcg-tap",function(e){t.handleIconTapped(e,"mouse")}),s(e).closest(".dcg-action-icon-touch").on("dcg-tap",function(e){t.handleIconTapped(e,"touch")}),s(e).closest(".dcg-action-icon-mouse").on("dcg-longhold",function(e){t.handleIconLongHold(e,"mouse")}),s(e).closest(".dcg-action-icon-touch").on("dcg-longhold",function(e){t.handleIconLongHold(e,"touch")})},t.prototype.createOptionsMenuView=function(){var e=this.getOptionsMenuContainerSelector(),t=r.mountToNode(o.default,e[0],{controller:this.props.controller,model:this.props.model});return t},t.prototype.hasError=function(){return!!this.model.error},t.prototype.getBackgroundImage=function(){return"failed"===this.model.loadStatus?"none":this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL="url("+encodeURI(this.model.image_url)+")",this.lastEncodedURL)},t.prototype.handleIconLongHold=function(e,t){e.device===t&&(e.handle("dcg-longhold"),this.toggleOptions())},t.prototype.handleIconTapped=function(e,t){if(!e.wasHandled("dragdrop")&&!e.wasLongheld()&&e.device===t){if(this.optionsShown)return this.toggleOptions(),!1;if(this.controller.isInEditListMode())this.toggleOptions();else{if(this.hasStableError())return;this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})}return!0}},t.prototype.getIconClass=function(){return"loading"===this.model.loadStatus?"dcg-loading-image":"failed"===this.model.loadStatus?"dcg-failed-image":this.hasStableError()?"dcg-error":this.model.shouldGraph?"":"dcg-hidden"},t}(i.default);t.default=a}),define("expressions/image_view",["require","exports","tslib","./abstract-item-view","./smart_textarea","dcgview","dcgview-helpers/mathquill-view","lib/conditional_blur","expressions/promptslider_view","./image_icon_view","graphing-calc/models/image","jquery.handleevent","loadcss!expressions.image"],function(e,t,n,r,i,o,s,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=o.Components,d=h.If,p=h.Switch,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-image-input-mathquill")},o.createElement(s.default,{latex:function(){return e.props.model()[e.props.name()]},isFocused:function(){return e.props.focusedInput()===e.props.name()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.props.controller().t(e.props.name())},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:this.bindFn(this.handleLatexChanged),onFocusedChanged:this.bindFn(this.handleMQFocusedChanged)},o.createElement("span",{class:function(){return{"dcg-focus":e.props.focusedInput()===e.props.name(),"dcg-invalid":u.hasInputError(e.props.model(),e.props.name())}}})))},t.prototype.handlePressedKey=function(e,t){var n=this.props.name(),r=s.default.getFocusedMathquill(),i=["center","angle","width","height"],o=i.indexOf(n);if(r){if("Esc"===e)return void a.default();var c=-1;"Up"===e&&(c=o-1),"Down"===e&&(c=o+1),"Left"===e&&(c=o-2),"Right"===e&&(c=o+2);var l=e;if(c>=0&&c<i.length)return void(s.default.applyArrowKeyAndReturnIfWasAtBounds(r,l,t)&&this.focusInput(i[c]));r.keystroke(e,t),this.handleLatexChanged(r.latex())}},t.prototype.focusInput=function(e){this.props.controller().dispatch({type:"set-focus-location",location:{type:"image",id:this.props.model().id,location:e}})},t.prototype.handleLatexChanged=function(e){var t=this.props.name();this.props.model().draggingOnGraphpaper||u.getMQAttribute(this.props.model(),t)!==e&&this.props.controller().dispatch({type:"set-image-mq-attribute",id:this.props.model().id,attribute:t,latex:e})},t.prototype.handleMQFocusedChanged=function(e){var t=this.props.name();e?this.props.focusedInput()!==t&&this.props.controller().dispatch({type:"set-focus-location",location:{type:"image",id:this.props.model().id,location:t}}):this.props.controller().dispatch({type:"blur-focus-location",location:{type:"image",id:this.props.model().id,location:t}})},t}(o.Class),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionimage":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-input-focused":e.getFocusedInput()&&"name"!==e.getFocusedInput()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},o.createElement("div",{class:o.const("dcg-fade-container")},o.createElement("div",{class:o.const("dcg-main")},o.createElement(p,{key:function(){return e.model.loadStatus}},function(t){switch(t){case"failed":return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-image-failed")},function(){return e.controller.t("Failed to load image.")}),o.createElement("div",{role:o.const("button"),tabindex:o.const(0),class:o.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},function(){return e.controller.t("Retry.")}));case"loading":return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-image-loading")},function(){return e.controller.t("Loading image...")}),o.createElement("div",{role:o.const("button"),tabindex:o.const(0),class:o.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},function(){return e.controller.t("Retry.")}));case"loaded":return o.createElement("div",{class:o.const("dcg-image-loaded")},o.createElement(i.default,{shouldFocus:function(){return"name"===e.getFocusedInput()},text:function(){return e.model.name},placeholder:function(){return e.controller.t("Enter a note...")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:e.bindFn(e.onNameInput),onFocusChange:e.bindFn(e.onNameFocusChange),onSpecialKey:e.bindFn(e.onNameSpecialKey)}),o.createElement("div",{class:o.const("dcg-do-blur dcg-image-input-grid"),handleEvent:o.const("true")},o.createElement("div",{class:o.const("dcg-image-input-name")},function(){return e.controller.t("Center:")}),o.createElement(f,{name:e.const("center"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),o.createElement("div",{class:o.const("dcg-image-input-name")},function(){return e.controller.t("Width:")}),o.createElement(f,{name:e.const("width"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),o.createElement("div",{class:o.const("dcg-image-input-name")},function(){return e.controller.t("Angle:")}),o.createElement(f,{name:e.const("angle"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),o.createElement("div",{class:o.const("dcg-image-input-name")},function(){return e.controller.t("Height:")}),o.createElement(f,{name:e.const("height"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)})));default:var n=t;return n}})),o.createElement("span",{class:o.const("dcg-fadeout")}),o.createElement("i",{class:o.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:o.const("true"),onTap:this.bindFn(this.onDelete)}),o.createElement(d,{predicate:function(){return e.getVariables().length>0}},function(){return o.createElement("div",{class:e.getFooterClass()},o.createElement(c.default,{model:e.props.model,controller:e.props.controller,variables:e.bindFn(e.getVariables),onCreateSliders:e.bindFn(e.onCreateSliders)}))})),o.createElement("span",{class:o.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:o.const("true"),tapboundary:o.const("true"),disablescroll:o.const("true"),style:o.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},o.createElement("span",{class:o.const("dcg-num")},function(){return e.model.displayIndex}),o.createElement("div",{class:o.const("dcg-tab-interior dcg-action-icon-mouse")},o.createElement(l.default,{model:this.props.model,controller:this.props.controller}))),o.createElement("span",{class:o.const("dcg-exp-actions")},o.createElement("span",{class:o.const("dcg-graphic"),handleEvent:o.const("true ")}),o.createElement("span",{role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Delete")},class:o.const("dcg-delete-btn dcg-tooltip"),handleEvent:o.const("true"),tooltip:function(){return e.controller.t("Delete")},onTap:this.bindFn(this.onDelete)},o.createElement("i",{class:o.const("dcg-icon-remove")}))))},t.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom"):this.const("dcg-expression-bottom dcg-fadein-bottom")},t.prototype.getVariables=function(){return this.model.formula&&this.model.formula.variables||[]},t.prototype.onCreateSliders=function(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})},t.prototype.onNameInput=function(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})},t.prototype.onNameFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):"name"===this.getFocusedInput()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})},t.prototype.onNameSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"image"===e.type&&e.id===this.model.id)return e.location},t.prototype.onRetryLoad=function(){this.controller.dispatch({type:"image-retry-loading",id:this.id})},t}(r.default);t.default=m}),define("expressions/shell_view",["require","exports","tslib","dcgview","./abstract-item-view"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),r.createElement("div",{class:r.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:r.const(e)})},t}(i.default);t.default=o}),define("expressions/drag_container_view",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-drag-container"),style:function(){return{top:e.getTopPx()}}},this.children)},t.prototype.getTopPx=function(){var e=this.controller.getRawDragState();if(e)return e.itemTop+"px"},t}(r.Class);t.default=i}),define("loadcss!new_expression",function(){}),define("expressions/new_expression_view",["require","exports","tslib","dcgview","loadcss!new_expression"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return this.controller=this.props.controller(),r.createElement("div",{class:r.const("dcg-expressionitem dcg-new-expression dcg-opened")},r.createElement("div",{class:r.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},r.createElement("div",{class:r.const("dcg-new-expression-fade")})),r.createElement("span",{class:r.const("dcg-tab")},r.createElement("span",{class:r.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),r.createElement("div",{class:r.const("dcg-tab-interior")})))},t.prototype.getIndex=function(){return this.controller.getNextDisplayIndex()},t.prototype.newMath=function(){this.controller.dispatch({type:"new-expression-at-end"})},t}(r.Class);t.default=i}),define("loadcss!add_expression",function(){}),define("expressions/add_expression_view",["require","exports","keys","browser","tslib","dcgview","jquery","loadcss!add_expression"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),o.createElement("div",{class:o.const("dcg-add-expression-container dcg-pull-left")},o.createElement("span",{class:function(){return{"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-hide-in-edit":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-tooltip":!0,"dcg-do-blur":!0,"dcg-active":e.controller.isAddExpressionOpen(),"dcg-uploading-images":e.controller.isUploadingImages()}},handleEvent:o.const("true"),tooltip:function(){return e.controller.t("Add Item")},role:o.const("button"),tabindex:o.const("0"),"aria-haspopup":o.const("true"),"aria-expanded":function(){return e.controller.isAddExpressionOpen()},"aria-label":function(){return e.controller.t("Add Item")},onTap:this.bindFn(this.toggleAddExpression),didMount:this.bindFn(this.didMountToggleButton)},o.createElement("i",{class:o.const("dcg-icon-plus")}),o.createElement("i",{class:o.const("dcg-icon-caret-down")})),o.createElement(a,{predicate:function(){return e.controller.isAddExpressionOpen()}},function(){return o.createElement("div",{class:function(){return{"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!e.controller.getLayoutMeasurements().isNarrow,"dcg-right":e.controller.getLayoutMeasurements().isNarrow}},role:o.const("complementary"),"aria-label":o.const("Add Item Menu"),didMount:e.bindFn(e.didMountPopover),didUnmount:e.bindFn(e.didUnmountPopover)},o.createElement("div",{class:o.const("dcg-popover-interior")},o.createElement("div",{class:o.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Add Expression")},didMount:e.bindFn(e.didMountNewExpression),onTap:e.bindFn(e.newExpression),handleEvent:o.const("true")},o.createElement("i",{class:o.const("dcg-icon-new-expression dcg-expression-icon")}),function(){return e.controller.t("expression")}),o.createElement(a,{predicate:function(){return e.controller.areNotesEnabled()}},function(){return o.createElement("div",{class:o.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Add Note")},onTap:e.bindFn(e.newText),handleEvent:o.const("true")},o.createElement("i",{class:o.const("dcg-icon-new-text dcg-expression-icon")}),function(){return e.controller.t("note")})}),o.createElement("div",{class:o.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Add Table")},onTap:e.bindFn(e.newTable),handleEvent:o.const("true")},o.createElement("i",{class:o.const("dcg-icon-new-table dcg-expression-icon")}),function(){return e.controller.t("table")}),o.createElement(a,{predicate:function(){return e.controller.areFoldersEnabled()}},function(){return o.createElement("div",{class:o.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Add Folder")},onTap:e.bindFn(e.newFolder),handleEvent:o.const("true")},o.createElement("i",{class:o.const("dcg-icon-new-folder dcg-expression-icon")}),function(){return e.controller.t("folder")})}),o.createElement(a,{predicate:function(){return e.controller.areImagesEnabled()}},function(){return o.createElement("div",{class:o.const("dcg-new-item dcg-do-not-blur dcg-action-newimage"),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Add Image")},onTap:e.bindFn(e.newImage),handleEvent:o.const("true")},o.createElement("i",{class:o.const("dcg-icon-new-image dcg-expression-icon")}),function(){return e.controller.t("image")},o.createElement("input",{type:o.const("file"),accept:o.const("image/*"),style:o.const("display: none"),didMount:e.bindFn(e.didMountFileInput)}))})),o.createElement("span",{class:o.const("dcg-arrow")}))}))},t.prototype.didMountPopover=function(e){var t=this;this.popoverNode=e,s(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",function(e){t.eventShouldClosePopover(e)&&t.controller.dispatch({type:"close-add-expression"})}),s(document).on("keydown.add-expression-view",function(e){if("Esc"===n.lookup(e)&&t.controller.dispatch({type:"close-add-expression"}),"Tab"===n.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var r=document.activeElement,i=s(t.toggleButtonNode),o=s(t.popoverNode).find(".dcg-new-item:last");e.shiftKey||r!==o[0]?e.shiftKey&&r===i[0]&&(o.focus(),e.preventDefault(),e.stopPropagation()):(i.focus(),e.preventDefault(),e.stopPropagation())}}),r.IS_IPAD&&r.IS_IN_IFRAME&&s(e).on("dcg-tapstart",function(e){return e.preventDefault()}),s(e).find(".dcg-new-item").on("touchstart",function(e){return e.preventDefault()})},t.prototype.didMountFileInput=function(e){var t=this;this.fileInputNode=e,s(e).on("change",function(){t.insertFiles(e.files),s(e).val("")})},t.prototype.didMountToggleButton=function(e){this.toggleButtonNode=e},t.prototype.didMountNewExpression=function(e){this.controller.getAddExpressionViewModel().focusOnOpen&&s(e).focus()},t.prototype.didUnmountPopover=function(){s(document).off(".add-expression-view")},t.prototype.toggleAddExpression=function(e){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:"keyboard"===e.device})},t.prototype.newExpression=function(){this.controller.dispatch({type:"new-expression"})},t.prototype.newText=function(){this.controller.dispatch({type:"new-text"})},t.prototype.newFolder=function(){this.controller.dispatch({type:"new-folder"})},t.prototype.newTable=function(){this.controller.dispatch({type:"new-table"})},t.prototype.newImage=function(){this.fileInputNode.click()},t.prototype.insertFiles=function(e){this.controller.dispatch({type:"new-images",files:e})},t.prototype.eventShouldClosePopover=function(e){var t=!!s(e.target).closest(this.popoverNode).length,n=!!s(e.target).closest(this.toggleButtonNode).length;return!(t||n)},t}(o.Class);t.default=c}),define("main/load-graph-from-link",["require","exports","jquery"],function(e,t,n){"use strict";function r(e,t,r){var i=!1;e.dispatch({type:"toast/show",toast:{message:e.t("Importing graph..."),hideAfter:0,toastStyle:"cover",onHide:function(){i=!0}}});var o=e.getState(),s=function(){i||e.dispatch({type:"toast/show",toast:{message:e.t("Error importing graph. Check the URL?"),toastStyle:"error",hideAfter:12e3}})},a=function(t){i||(e.dispatch({type:"set-state",state:t}),e.dispatch({type:"toast/show",toast:{message:e.t("Graph imported!"),undoCallback:function(){e.dispatch({type:"set-state",state:o})}}}))};n.getJSON(t).done(function(e){r(e.state,function(e,t){e||!t?s():a(t)})}).fail(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("lib/get-clipboard-data",["require","exports"],function(e,t){"use strict";function n(e){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?e.clipboardData.getData("text/plain"):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("loadcss!expressions/exp-list-resizer",function(){}),define("expressions/exp-list-resizer",["require","exports","tslib","dcgview","jquery","underscore","loadcss!./exp-list-resizer"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.guid=o.uniqueId("dcg-exp-list-resize")},t.prototype.template=function(){var e=this;return r.createElement(s,{predicate:this.bindFn(this.isVisible)},function(){return r.createElement("div",{class:r.const("dcg-exp-list-resizer"),onTapStart:e.bindFn(e.onTapStart)})})},t.prototype.isVisible=function(){return!this.props.controller().expressionsAreFullWidth()&&this.props.controller().isListVisible();
},t.prototype.onTapStart=function(e){var t=this;this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=e.changedTouches[0].clientX,i(document).on("dcg-tapmove."+this.guid,function(e){if(void 0!==t.initialLeft&&void 0!==t.initialWidth){var n=e.changedTouches[0].clientX-t.initialLeft+t.initialWidth;t.props.controller().dispatch({type:"resize-exp-list",expListWidth:n})}}),i(document).on("dcg-tapend."+this.guid,this.bindFn(this.onTapEnd)),i(document).on("dcg-tapcancel."+this.guid,this.bindFn(this.onTapEnd))},t.prototype.onTapEnd=function(){i(document).off("."+this.guid),this.initialLeft=void 0,this.initialWidth=void 0},t}(r.Class);t.ExpListResizer=a}),define("loadcss!expression_top_bar",function(){}),define("loadcss!expressions",function(){}),define("loadcss!expressions.icon",function(){}),define("loadcss!expressions.dropdown",function(){}),define("expressions/list_view",["require","exports","touchtracking","keys","main/data_helpers","tslib","dcgview","jquery","underscore","lib/conditional_blur","./expression_view","./text_view","./table_view","./folder_view","./image_view","./shell_view","./drag_container_view","./new_expression_view","./add_expression_view","main/load-graph-from-link","lib/get-clipboard-data","graphing-calc/models/abstract-item","lib/animation-frame","./exp-list-resizer","loadcss!expression_top_bar","loadcss!expressions","loadcss!expressions.icon","loadcss!expressions.dropdown","tipsy","jquery.handleevent"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b,x,_,w,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var S=s.Components,M=S.If,I=S.For,k=S.Switch,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guid=c.uniqueId("listView"),t.__onScrollScheduled=!1,t}return o.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.$root=this.props.$root()},t.prototype.template=function(){var e=this;return s.createElement("div",{didMount:this.bindFn(this.didMountContainer)},s.createElement("div",{class:s.const("dcg-exppanel-outer"),didMount:this.bindFn(this.didMountExppanelOuter),onDrop:this.bindFn(this.onDrop),style:function(){return{bottom:e.getListBottomAndUpdateLastExpressionPadding()+"px"}}},s.createElement("div",{class:s.const("dcg-exppanel-container dcg-do-animate"),style:function(){return{width:e.controller.getExpListWidthString()}}},s.createElement("div",{class:s.const("dcg-drop-image")},s.createElement("span",null,function(){return e.controller.t("Drop Image Here")})),s.createElement("div",{class:function(){return{"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":e.controller.isDragDropActive()}},onScroll:this.bindFn(this.onScroll),onPaste:this.bindFn(this.onPaste),onTapStart:this.bindFn(this.onExppanelTapstart),didMount:this.bindFn(this.didMountExppanel)},s.createElement(E.ExpListResizer,{controller:this.props.controller}),s.createElement("div",{class:s.const("dcg-expressionlist"),role:s.const("complementary"),"aria-label":s.const("Expression List")},s.createElement("span",{class:s.const("dcg-audio-trace-placeholder dcg-offscreen-element"),"aria-hidden":s.const("true"),role:s.const("button"),tabindex:s.const("-1")}),s.createElement(I,{each:function(){return e.controller.getAllItemModels()},key:function(e){return e.guid}},s.createElement("span",{class:s.const("dcg-template-expressioneach")},function(t){return s.createElement(k,{key:function(){return _.getDisplayState(t)}},function(n){switch(n){case"shell":return e.makeShellViewForModel(t);case"render":return e.makeViewForModel(t);default:return}})})),s.createElement(y.default,{controller:function(){return e.props.controller()}}),s.createElement(k,{key:function(){return e.controller.getDraggedItemId()}},function(t){if(t){var n=e.controller.getItemModel(t);return s.createElement(g.default,{controller:e.props.controller},e.makeDragCopyViewForModel(n))}}),s.createElement(M,{predicate:function(){return e.controller.canEditOnWeb()}},function(){return s.createElement("div",{class:s.const("dcg-expressions-branding")},s.createElement("span",{class:s.const("dcg-edit-branding")},s.createElement("div",{class:s.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Edit graph on Desmos")}},function(){return e.controller.t("edit graph on")}),s.createElement("i",{class:s.const("dcg-icon-desmos")})))}),s.createElement(M,{predicate:function(){return!e.controller.canEditOnWeb()}},function(){return s.createElement("div",{class:s.const("dcg-expressions-branding")},s.createElement("div",{class:s.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("powered by Desmos")}},function(){return e.controller.t("powered by")}),s.createElement("i",{class:s.const("dcg-icon-desmos")}))}))),s.createElement("div",{class:function(){return{"dcg-expression-top-bar":!0,"dcg-has-reset-state":e.controller.hasDefaultState()}},role:s.const("toolbar"),"aria-label":function(){return e.controller.t("Expression Bar")},onTapStart:this.bindFn(this.clearSelectionOnMobile),didMount:this.bindFn(this.didMountExpressionTopBar)},s.createElement("span",{class:s.const("dcg-action-opendrawer dcg-hide-in-edit dcg-tooltip"),handleEvent:s.const("true"),tooltip:function(){return e.controller.t("Open Graph (ctrl+o)")},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Open Graph")},onTap:function(){return e.controller.dispatch({type:"open-drawer"})}},s.createElement("i",{class:s.const("dcg-icon-hamburger")})),s.createElement(v.default,{controller:function(){return e.props.controller()}}),s.createElement("span",{class:s.const("dcg-btn dcg-btn-red dcg-pull-left dcg-show-in-edit dcg-action-clearall"),role:s.const("button"),onTap:function(){return e.controller.dispatch({type:"clear-graph"})}},function(){return e.controller.t("Delete All")}),s.createElement("span",{class:s.const("dcg-btn dcg-btn-red dcg-pull-left dcg-show-in-edit dcg-action-reset"),role:s.const("button"),onTap:function(){return e.controller.dispatch({type:"reset-graph"})}},function(){return e.controller.t("Reset")}),s.createElement("span",{class:s.const("dcg-center-aligned dcg-show-in-edit")},s.createElement("span",{class:function(){return{"dcg-action-undo":!0,"dcg-tooltip":e.controller.canUndo(),"dcg-enabled":e.controller.canUndo()}},tooltip:function(){return e.controller.t("Undo (ctrl+z)")},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Undo")},onTap:function(){return e.controller.dispatch({type:"undo"})},"aria-disabled":function(){return!e.controller.canUndo()}},s.createElement("i",{class:s.const("dcg-icon-undo")})),s.createElement("span",{class:function(){return{"dcg-action-redo":!0,"dcg-tooltip":e.controller.canRedo(),"dcg-enabled":e.controller.canRedo()}},role:s.const("button"),tabindex:s.const("0"),tooltip:function(){return e.controller.t("Redo (ctrl+y)")},"aria-label":function(){return e.controller.t("Redo")},onTap:function(){return e.controller.dispatch({type:"redo"})},"aria-disabled":function(){return!e.controller.canRedo()}},s.createElement("i",{class:s.const("dcg-icon-redo")}))),s.createElement("span",{class:s.const("dcg-offcenter-aligned dcg-hide-in-edit dcg-hide-in-edit")},s.createElement("span",{class:function(){return{"dcg-action-undo":!0,"dcg-tooltip":e.controller.canUndo(),"dcg-enabled":e.controller.canUndo()}},tooltip:function(){return e.controller.t("Undo (ctrl+z)")},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Undo")},onTap:function(){return e.controller.dispatch({type:"undo"})},"aria-disabled":function(){return!e.controller.canUndo()}},s.createElement("i",{class:s.const("dcg-icon-undo")})),s.createElement("span",{class:function(){return{"dcg-action-redo":!0,"dcg-tooltip":e.controller.canRedo(),"dcg-enabled":e.controller.canRedo()}},tooltip:function(){return e.controller.t("Redo (ctrl+y)")},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Redo")},onTap:function(){return e.controller.dispatch({type:"redo"})},"aria-disabled":function(){return!e.controller.canRedo()}},s.createElement("i",{class:s.const("dcg-icon-redo")}))),s.createElement("span",{class:s.const("dcg-resize-list-btn dcg-hide-in-edit dcg-action-hideexpressions dcg-tooltip"),tooltip:function(){return e.controller.t("Hide List")},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Hide Expression List")},onTap:function(){return e.controller.dispatch({type:"hide-expressions-list"})}},s.createElement("i",{class:s.const("dcg-icon-hide")})),s.createElement("span",{class:function(){return{"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-pull-right":!0,"dcg-action-toggle-edit":!0,"dcg-hide-in-edit":!0,"dcg-tooltip":!0,"dcg-do-not-blur":!0}},handleEvent:s.const("true"),tooltip:function(){return e.controller.t("Edit List")},role:s.const("button"),"aria-label":function(){return e.controller.t("Edit Expression List")},onTap:function(){return e.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!0})}},s.createElement("i",{class:s.const("dcg-icon-settings")})),s.createElement("span",{class:s.const("dcg-btn dcg-btn-blue dcg-pull-right dcg-action-toggle-edit dcg-show-in-edit dcg-do-not-blur"),handleEvent:s.const("true"),role:s.const("button"),onTap:function(){return e.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1})}},function(){return e.controller.t("Done")})))),s.createElement("div",{class:s.const("dcg-show-expressions-tab"),role:s.const("complementary"),"aria-label":s.const("Show Expressions Tab"),"aria-hidden":s.const("true")},s.createElement("span",{class:s.const("dcg-resize-list-btn dcg-action-showexpressions dcg-tooltip"),tooltip:function(){return e.controller.t("Show List")},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Show List")},onTap:function(){return e.controller.dispatch({type:"show-expressions-list"})}},s.createElement("i",{class:s.const("dcg-icon-show")}))),s.createElement("div",{role:s.const("button"),"aria-label":function(){return e.controller.t("Open Graph")},class:s.const("dcg-graphpaper-opendrawer dcg-action-opendrawer"),onTap:function(){return e.controller.dispatch({type:"open-drawer"})}},s.createElement("i",{class:s.const("dcg-icon-hamburger")})),s.createElement("div",{class:s.const("dcg-options-menu-container")}))},t.prototype.makeShellViewForModel=function(e){return s.createElement(m.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(){},isDragCopy:function(){return!1}})},t.prototype.makeDragCopyViewForModel=function(e){return this.makeViewForModel(e,!0)},t.prototype.makeViewForModel=function(e,t){var n=this;void 0===t&&(t=!1);var r;if("table"===e.type)r=s.createElement(d.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("folder"===e.type)r=s.createElement(p.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("text"===e.type)r=s.createElement(h.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("image"===e.type)r=s.createElement(f.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else{if("expression"!==e.type)return;r=s.createElement(u.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}})}return r},t.prototype.didUpdate=function(){this.renderEditListMode()},t.prototype.didUnmount=function(){this.$root.off("."+this.guid),a(document.documentElement).off("."+this.guid)},t.prototype._onScroll=function(){var e=a(this.exppanel).scrollTop()>0;a(this.expressionTopBar).toggleClass("dcg-expressions-scrolled",e)},t.prototype.onScroll=function(){var e=this;this.__onScrollScheduled||(this.__onScrollScheduled=!0,w.requestAnimationFrame(function(){e._onScroll(),e.__onScrollScheduled=!1}))},t.prototype.didMountContainer=function(e){this.node=e,a(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown)),this.setupDragDrop()},t.prototype.didMountExppanelOuter=function(e){a(e).tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip"})},t.prototype.didMountExppanel=function(e){this.exppanel=e},t.prototype.didMountExpressionTopBar=function(e){this.expressionTopBar=e},t.prototype.setupDragDrop=function(){function e(){r.removeClass("dcg-filedraggedover"),i=a(),r.off(".filedraggedover")}var t=this,n="drag dragend dragenter dragover dragleave drop".split(" ").map(function(e){return e+"."+t.guid}).join(" ");a(document).on(n,function(e){e.preventDefault(),e.stopPropagation()});var r=this.$root,i=a();r.on("dragenter."+this.guid,function(n){t.controller.areImagesEnabled()&&(0===i.length&&(r.addClass("dcg-filedraggedover"),r.on("dcg-tapstart.filedraggedover",e)),i=i.add(n.target))}).on("dragleave."+this.guid,function(t){i=i.not(t.target),0===i.length&&e()}).on("drop."+this.guid,e)},t.prototype.clearSelectionOnMobile=function(e){e.wasHandled()||this.controller.dispatch({type:"set-none-selected"})},t.prototype.getListBottomAndUpdateLastExpressionPadding=function(){var e=this.controller.getLayoutMeasurements().keypadHeight||0,t=this.__listBottom||0;return this.__listBottom=e,0===e&&0!==t&&n.isTapActive()&&this.padLastExpressionUntilTapEnd(t),e},t.prototype.padLastExpression=function(e){var t=a(this.node).find(".dcg-expressionitem.dcg-new-expression");t.css("margin-bottom",e+"px")},t.prototype.unpadLastExpression=function(){var e=a(this.node).find(".dcg-expressionitem.dcg-new-expression");e.css("margin-bottom","0")},t.prototype.padLastExpressionUntilTapEnd=function(e){var t=this;this.padLastExpression(e),a(document).on("dcg-tap.animating-bottom",function(){t.unpadLastExpression(),a(document).off("dcg-tap.animating-bottom")})},t.prototype.handleKeyDown=function(e){if(!this.controller.inAudioTraceMode()&&!a.contains(document.body,document.activeElement)&&!a(e.target).closest(this.exppanel).length&&a.contains(document.documentElement,e.target)){var t=this.controller.getSelectedItem();if(t){var n=r.lookup(e);switch(n){case r.UP:e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case r.DOWN:e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case r.ESCAPE:e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case r.RIGHT:case r.TAB:e.preventDefault(),t&&this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"start"});break;case r.LEFT:e.preventDefault(),t&&this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"end"});break;case r.BACKSPACE:e.preventDefault(),t&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case r.DELETE:e.preventDefault(),t&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case r.ENTER:e.preventDefault(),t&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});break;default:if(e.metaKey||e.ctrlKey||n===r.SHIFT||n===r.SPACEBAR)return;t&&("table"===t.type||this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"end"}))}}}},t.prototype.renderEditListMode=function(){var e=this,t=this.$root,n=this;t.hasClass("dcg-EDIT-LIST-MODE")!==this.controller.isInEditListMode()&&(this.controller.isInEditListMode()?(t.addClass("dcg-EDIT-LIST-MODE"),a(document).on("dcg-tapstart.edit-list-mode",function(t){0===a(t.target).closest(e.exppanel).length&&0===a(t.target).closest(".dcg-options-menu").length&&0===a(t.target).closest(e.expressionTopBar).length&&0===a(t.target).closest(".dcg-keypad").length&&n.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1})})):(t.removeClass("dcg-EDIT-LIST-MODE"),a(document).off(".edit-list-mode")))},t.prototype.onDragPending=function(e,t){var n=this;e.preventDefault(),l.default();var r=e.touches[0].clientY,i=r,o=setTimeout(function(){a(document).off(".dragpending"),n.onDragStart(e,t,r,i)},500);a(document).on("dcg-tapmove.dragpending",function(s){i=s.touches[0].clientY,Math.abs(i-r)>3&&(clearTimeout(o),a(document).off(".dragpending"),n.onDragStart(e,t,r,i))}),a(document).on("dcg-tapend.dragpending",function(){clearTimeout(o),a(document).off(".dragpending")})},t.prototype.onDragStart=function(e,t,n,r){1===e.touches.length&&(e.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",id:t,grabY:n,mouseY:r}))},t.prototype.onExppanelTapstart=function(e){"mouse"!==e.device&&0===a(e.target).closest(".dcg-expressionitem").length&&l.default()},t.prototype.onPaste=function(e){var t=this.controller.getGraphSettings().config;if(t.pasteGraphLink||t.pasteTableData){var n=this.controller.getSelectedItem();if(!n||"text"!==n.type&&"folder"!==n.type){var r=x.default(e);if(r){var o=/^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(r);if(t.pasteGraphLink&&o){e.stopPropagation(),e.preventDefault();var s=t.pasteGraphLinkCallback?t.pasteGraphLinkCallback:function(e,t){return t(null,e)};b.default(this.controller,r,s)}else if(t.pasteTableData){var a=i.parse(r);a&&(e.stopPropagation(),e.preventDefault(),a.error?this.controller.dispatch({type:"toast/show",toast:{message:a.error,toastStyle:"error",hideAfter:12e3}}):this.controller.dispatch({type:"paste-table",data:a.data}))}}}}},t.prototype.onDrop=function(e){if(this.controller.areImagesEnabled()){var t=e.dataTransfer&&e.dataTransfer.files;t&&this.controller.dispatch({type:"new-images",files:t})}},t}(s.Class);t.default=T}),define("loadcss!main/toast-view",function(){}),define("main/toast-view",["require","exports","tslib","dcgview","loadcss!./toast-view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("span",{class:r.const("dcg-toast")},r.createElement("i",{class:r.const("dcg-icon-error")}),r.createElement(i,{predicate:function(){return!e.props.showUndo()&&(!e.props.showClose||e.props.showClose())}},function(){return r.createElement("i",{class:r.const("dcg-icon-remove"),onTap:function(){return e.props.onClose&&e.props.onClose()},role:r.const("link"),tabindex:r.const(0),"aria-label":r.const("Dismiss Notice")})}),r.createElement("span",{class:r.const("dcg-msg"),"aria-atomic":function(){return!e.props.noAria()},"aria-live":function(){return e.props.noAria()?"":"assertive"}},function(){return e.props.t(e.props.message())}),r.createElement(i,{predicate:this.props.showUndo},function(){return r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-undo"),onTap:function(){return e.props.onUndo&&e.props.onUndo()}},function(){return e.props.t("Undo")})}),r.createElement(i,{predicate:this.props.showLearnMore},function(){return r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-learn-more-link"),target:r.const("_blank"),onTap:function(){return e.props.onLearnMore&&e.props.onLearnMore()}},function(){return e.props.t("Learn more")})}))},t.prototype.shouldUpdate=function(){return!!this.props.message()},t}(r.Class),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-toast-view":!0,"dcg-visible":!!e.props.message()}},"toast-style":function(){return e.props.toastStyle&&e.props.toastStyle()}},r.createElement(i,{predicate:function(){return!!e.props.message()}},function(){return r.createElement("div",null,r.createElement("div",{class:r.const("dcg-toast-cover")}),r.createElement(o,n.__assign({},e.props)))}))},t}(r.Class);t.ToastView=s}),define("main/instancehotkeys",["require","exports","lib/aria","keys","jquery"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=0,s=function(){function e(e,t){this.__id=o++,this.$root=e||i("body"),this.controller=t,this.startListening()}return e.prototype.remove=function(){this.stopListening()},e.prototype.startListening=function(){var e=this;this.isListening||(this.$root.on("keydown.dcg-instance-keyboard-listener-"+this.__id,function(t){return e.handleInstanceKeydown(t)}),this.isListening=!0)},e.prototype.stopListening=function(){this.isListening&&(this.$root.off("keydown.dcg-instance-keyboard-listener-"+this.__id),this.isListening=!1)},e.prototype.handleInstanceKeydown=function(e){if(r.isUndo(e))e.stopPropagation(),e.preventDefault(),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(r.isRedo(e))e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"redo"});else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey)if("E"===r.lookupChar(e)){e.preventDefault(),e.stopPropagation(),this.controller.getSelectedItem()||this.controller.dispatch({type:"set-selected-index",index:0});var t=this.controller.getSelectedItem();t?(n.alert(this.controller.t("Expression list")),this.controller.dispatch({type:"move-focus-to-item",id:t.id})):n.alert(this.controller.t("Unable to focus expression list"))}else"X"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(n.alert(this.controller.t("Add expression")),this.controller.dispatch({type:"new-expression"})):n.alert(this.controller.t("Unable to add expression"))):"O"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(n.alert(this.controller.t("Add note")),this.controller.dispatch({type:"new-text"})):n.alert(this.controller.t("Unable to add note"))):"F"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled()?(n.alert(this.controller.t("Add folder")),this.controller.dispatch({type:"new-folder"})):n.alert(this.controller.t("Unable to add folder"))):"I"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled()?(n.alert(this.controller.t("Add image")),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.$root.find(".dcg-action-newimage input[type=file]").click()):n.alert(this.controller.t("Unable to add image"))):"T"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(n.alert(this.controller.t("Add table")),this.controller.dispatch({type:"new-table"})):n.alert(this.controller.t("Unable to add table"))):"G"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0})):"P"===r.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),this.focusElement(this.$root.find(".dcg-movable-point:first:visible"),this.controller.t("No movable points on screen")));else e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||r.lookup(e)!==r.BACKSPACE||i(document.activeElement).is('input, textarea, [role="textbox"]')||e.preventDefault()},e.prototype.focusElement=function(e,t){e.length?e.focus():t&&n.alert(t)},e}();t.default=s}),define("loadcss!pillboxes",function(){}),define("main/graphpaper-branding-view",["require","exports","tslib","dcgview","loadcss!pillboxes"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.Components.Switch,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),r.createElement(i,{key:function(){return e.controller.getBrandingMode()}},function(t){switch(t){case"static-edit-link":return r.createElement("div",{class:r.const("dcg-graphpaper-branding")},r.createElement("a",{href:function(){return e.controller.getEditLink()},target:r.const("_blank")},r.createElement("span",{class:r.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Edit graph on Desmos")}},function(){return e.controller.t("edit graph on")}),r.createElement("i",{class:r.const("dcg-icon-desmos")})));case"edit-link":return r.createElement("div",{class:r.const("dcg-graphpaper-branding")},r.createElement("span",{class:r.const("dcg-edit-branding")},r.createElement("span",{class:r.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Edit graph on Desmos")}},function(){return e.controller.t("edit graph on")}),r.createElement("i",{class:r.const("dcg-icon-desmos")})));case"powered-by":return r.createElement("div",{class:r.const("dcg-graphpaper-branding dcg-unclickable")},r.createElement("span",{class:r.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Powered by Desmos")}},function(){return e.controller.t("powered by")}),r.createElement("i",{class:r.const("dcg-icon-desmos")}));default:var n=t;return n}})},t}(r.Class);t.default=o}),define("loadcss!settings",function(){}),define("main/settings-view",["require","exports","keys","graphing/viewport","scroll_helpers","tslib","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","jquery","graphing/axisarrowmode","lib/evaluate-single-expression","loadcss!settings"],function(e,t,n,r,i,o,s,a,c,l,u,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=s.Components,p=d.Input,f=d.If,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.template=function(){var e=this;return s.createElement(c.default,{isFocused:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},config:this.const({}),getAriaLabel:function(){return e.props.ariaLabel()},getAriaPostLabel:this.const(""),onUserChangedLatex:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},hasError:this.const(!1),selectOnFocus:this.const(!0)},s.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-math-input":!0,"dcg-invalid":e.props.parent().isLimitInvalid(e.props.limit()),"dcg-focus":e.props.parent().getFocusedLimit()===e.props.limit()}},"data-dcg-limit":function(){return e.props.limit()}}))},t}(s.Class),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),s.createElement("div",null,s.createElement("div",{class:s.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-tooltip-e dcg-action-settings"),tooltip:function(){return e.controller.t("Graph Settings")},role:s.const("button"),tabindex:s.const("0"),"aria-haspopup":s.const("true"),"aria-expanded":function(){return e.controller.isGraphSettingsOpen()},"aria-label":function(){return e.controller.t("Graph Settings")},didMount:this.bindFn(this.didMountSettingsButton),onTap:this.bindFn(this.onTapSettingsButton)},s.createElement("i",{class:s.const("dcg-icon-wrench"),"aria-hidden":s.const("true")})),s.createElement(f,{predicate:function(){return e.controller.isGraphSettingsOpen()}},function(){return s.createElement("div",{class:s.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:e.bindFn(e.getContainerStyle),didMount:e.bindFn(e.didMountContainer)},s.createElement("div",{class:s.const("dcg-popover-interior"),role:s.const("complementary"),"aria-label":s.const("Graph Settings")},s.createElement("div",{class:function(){return{"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":e.getProjectorMode()}},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Projector Mode")},"aria-pressed":e.bindFn(e.getProjectorMode),onTap:e.bindFn(e.toggleProjectorMode),didMount:e.bindFn(e.didMountProjectorMode)},function(){return e.controller.t("Projector Mode")}),s.createElement("div",{class:s.const("dcg-top-checkboxes-container")},s.createElement("span",{role:s.const("checkbox"),"aria-checked":e.bindFn(e.getAxisNumbers),tabindex:s.const("0"),class:s.const("dcg-checkbox dcg-minor-checkbox dcg-action-toggle-axis-numbers"),"aria-label":function(){return e.controller.t("Axis Numbers")},onTap:e.bindFn(e.toggleAxisNumbers)},s.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getAxisNumbers()}}},s.createElement("i",{class:s.const("dcg-icon-check")})),s.const(" "),s.createElement("span",{class:s.const("dcg-checkbox-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("Axis Numbers")})),s.createElement(f,{predicate:function(){return e.getShowGrid()&&!e.getPolarMode()}},function(){return s.createElement("span",{role:s.const("checkbox"),"aria-checked":e.bindFn(e.getMinorGridlines),tabindex:s.const("0"),class:s.const("dcg-checkbox dcg-minor-checkbox dcg-action-toggle-minor-gridlines"),"aria-label":function(){return e.controller.t("Minor Gridlines")},onTap:e.bindFn(e.toggleMinorGridlines)},s.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getMinorGridlines()}}},s.createElement("i",{class:s.const("dcg-icon-check")})),s.const(" "),s.createElement("span",{class:s.const("dcg-checkbox-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("Minor Gridlines")}))}),s.createElement(f,{predicate:function(){return!e.getSquareAxes()}},function(){return s.createElement("div",{role:s.const("button"),tabindex:s.const("0"),class:s.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:e.bindFn(e.zoomSquare)},function(){return e.controller.t("Zoom Square")})})),s.createElement("div",{class:s.const("dcg-checkbox-title")},s.createElement("span",{role:s.const("checkbox"),"aria-checked":e.bindFn(e.getShowGrid),tabindex:s.const("0"),class:s.const("dcg-checkbox dcg-action-toggle-grid"),"aria-label":function(){return e.controller.t("Grid")},onTap:e.bindFn(e.toggleGrid)},s.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getShowGrid()}}},s.createElement("i",{class:s.const("dcg-icon-check")})),s.const(" "),s.createElement("span",{class:s.const("dcg-checkbox-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("Grid")}))),s.createElement(f,{predicate:e.bindFn(e.getShowGrid)},function(){return s.createElement("div",{class:s.const("dcg-icon-group dcg-grid-group")},s.createElement("div",{class:function(){return{"dcg-icon":!0,"dcg-action-cartesian":!0,"dcg-active":!e.getPolarMode()}},role:s.const("button"),tabindex:s.const("0"),ariaPressed:function(){return!e.getPolarMode()},"aria-label":function(){return e.controller.t("Cartesian Grid")},onTap:e.bindFn(e.setCartesianMode)}),s.const(" "),s.createElement("div",{class:function(){return{"dcg-icon":!0,"dcg-action-polar":!0,"dcg-active":e.getPolarMode()}},role:s.const("button"),tabindex:s.const("0"),ariaPressed:function(){return e.getPolarMode()},"aria-label":function(){return e.controller.t("Polar Grid")},onTap:e.bindFn(e.setPolarMode)}))}),s.createElement("div",{class:s.const("dcg-checkbox-title")},s.createElement("span",{role:s.const("checkbox"),"aria-checked":function(){return e.getAxisArrowMode()!==u.NONE},tabindex:s.const("0"),class:s.const("dcg-checkbox dcg-action-toggle-arrows"),"aria-label":function(){return e.controller.t("Arrows")},onTap:e.bindFn(e.toggleArrows)},s.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getAxisArrowMode()!==u.NONE}}},s.createElement("i",{class:s.const("dcg-icon-check")})),s.const(" "),s.createElement("span",{class:s.const("dcg-checkbox-label"),"aria-hidden":s.const("true")
},function(){return e.controller.t("Arrows")}))),s.createElement(f,{predicate:function(){return e.getAxisArrowMode()!==u.NONE}},function(){return s.createElement("div",{class:s.const("dcg-icon-group dcg-arrow-group")},s.createElement("div",{role:s.const("button"),tabindex:s.const("0"),class:function(){return{"dcg-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===u.BOTH}},"dcg-arrows":s.const("BOTH"),"aria-label":function(){return e.controller.t("Show Both")},"aria-pressed":function(){return e.getAxisArrowMode()===u.BOTH},onTap:function(){return e.setAxisArrowMode(u.BOTH)}},s.createElement("i",{class:s.const("dcg-icon-arrows-two")})),s.const(" "),s.createElement("div",{role:s.const("button"),tabindex:s.const("0"),class:function(){return{"dcg-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===u.POSITIVE}},"dcg-arrows":s.const("POSITIVE"),"aria-label":function(){return e.controller.t("Show Positive")},"aria-pressed":function(){return e.getAxisArrowMode()===u.POSITIVE},onTap:function(){return e.setAxisArrowMode(u.POSITIVE)}},s.createElement("i",{class:s.const("dcg-icon-arrows-one")})))}),s.createElement("div",{class:s.const("dcg-section-divider"),"aria-hidden":s.const("true")}),s.createElement("div",{class:s.const("dcg-checkbox-title dcg-x-axis-title")},s.createElement("span",{role:s.const("checkbox"),"aria-checked":e.bindFn(e.getShowXAxis),tabindex:s.const("0"),class:s.const("dcg-checkbox dcg-action-toggle-x-axis"),"aria-label":function(){return e.controller.t("X-Axis")},onTap:e.bindFn(e.toggleXAxis)},s.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getShowXAxis()}}},s.createElement("i",{class:s.const("dcg-icon-check")})),s.const(" "),s.createElement("span",{class:s.const("dcg-checkbox-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("X-Axis")})),s.createElement(p,{class:e.const("dcg-axis-label dcg-x-axis-label"),placeholder:function(){return e.controller.t("add a label")},"aria-label":function(){return e.controller.t("add x-axis label")},disabled:function(){return!e.getShowXAxis()||void 0},"aria-disabled":function(){return!e.getShowXAxis()||void 0},onInput:e.bindFn(e.onXAxisLabelInput),value:e.bindFn(e.getXAxisLabel)})),s.createElement("div",{class:s.const("dcg-editable-mathquill-container dcg-x-axis-options")},s.createElement(m,{limit:e.const("xmin"),ariaLabel:function(){return e.controller.t("X Axis Minimum: ")},parent:e.const(e)}),s.createElement(a.default,{latex:e.const("\\le x\\le")},s.createElement("span",{class:s.const("dcg-interval-interior")})),s.createElement(m,{limit:e.const("xmax"),ariaLabel:function(){return e.controller.t("X Axis Maximum: ")},parent:e.const(e)}),s.createElement("span",{class:function(){return{"dcg-step-container":!0,"dcg-disabled-input":e.getPolarMode()}}},s.createElement("span",{class:s.const("dcg-step-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("Step:")}),s.createElement(m,{limit:e.const("xstep"),ariaLabel:function(){return e.controller.t("X Axis Step Size: ")},parent:e.const(e)}))),s.createElement("div",{class:s.const("dcg-checkbox-title dcg-y-axis-title")},s.createElement("span",{role:s.const("checkbox"),"aria-checked":e.bindFn(e.getShowYAxis),tabindex:s.const("0"),class:s.const("dcg-checkbox dcg-action-toggle-y-axis"),"aria-label":function(){return e.controller.t("Y-Axis")},onTap:e.bindFn(e.toggleYAxis)},s.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getShowYAxis()}}},s.createElement("i",{class:s.const("dcg-icon-check")})),s.const(" "),s.createElement("span",{class:s.const("dcg-checkbox-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("Y-Axis")})),s.createElement(p,{class:e.const("dcg-axis-label dcg-y-axis-label"),placeholder:function(){return e.controller.t("add a label")},"aria-label":function(){return e.controller.t("add y-axis label")},disabled:function(){return!e.getShowYAxis()||void 0},"aria-disabled":function(){return!e.getShowYAxis()||void 0},onInput:e.bindFn(e.onYAxisLabelInput),value:e.bindFn(e.getYAxisLabel)})),s.createElement("div",{class:s.const("dcg-editable-mathquill-container dcg-y-axis-options")},s.createElement(m,{limit:e.const("ymin"),ariaLabel:function(){return e.controller.t("Y Axis Minimum: ")},parent:e.const(e)}),s.createElement(a.default,{latex:e.const("\\le y\\le")},s.createElement("span",{class:s.const("dcg-interval-interior")})),s.createElement(m,{limit:e.const("ymax"),ariaLabel:function(){return e.controller.t("Y Axis Maximum: ")},parent:e.const(e)}),s.createElement("span",{class:function(){return{"dcg-step-container":!0,"dcg-disabled-input":e.getPolarMode()}}},s.createElement("span",{class:s.const("dcg-step-label"),"aria-hidden":s.const("true")},function(){return e.controller.t("Step:")}),s.createElement(m,{limit:e.const("ystep"),ariaLabel:function(){return e.controller.t("Y Axis Step Size: ")},parent:e.const(e)}))),s.createElement("div",{class:s.const("dcg-section-divider"),"aria-hidden":s.const("true")}),s.createElement("div",{class:s.const("dcg-radiangroup"),role:s.const("group"),"aria-label":function(){return e.controller.t("Angle Settings")}},s.createElement("div",{class:function(){return{"dcg-action-radianmode":!0,"dcg-modern-btn":!0,"dcg-active":!e.getDegreeMode()}},"aria-pressed":function(){return!e.getDegreeMode()},role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Radians")},onTap:e.bindFn(e.setRadianMode)},function(){return e.controller.t("Radians")}),s.createElement("div",{class:function(){return{"dcg-action-degreemode":!0,"dcg-modern-btn":!0,"dcg-active":e.getDegreeMode()}},"aria-pressed":e.bindFn(e.getDegreeMode),role:s.const("button"),tabindex:s.const("0"),"aria-label":function(){return e.controller.t("Degrees")},onTap:e.bindFn(e.setDegreeMode)},function(){return e.controller.t("Degrees")})),s.createElement("div",{class:s.const("dcg-arrow")})))}))},t.prototype.didMountSettingsButton=function(e){this.settingsButtonNode=e},t.prototype.didMountContainer=function(e){var t=this;this.node=e,l(document).on("dcg-tapstart.settings-view wheel.settings-view",function(e){t.eventShouldClosePopover(e)&&t.controller.dispatch({type:"close-graph-settings"})}),l(document).on("keydown.settings-view",function(e){if("Esc"===n.lookup(e)&&t.controller.dispatch({type:"close-graph-settings"}),"Tab"===n.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var r=document.activeElement,i=l(t.settingsButtonNode),o=l(t.node).find(".dcg-action-degreemode");e.shiftKey||r!==o[0]?e.shiftKey&&r===i[0]&&(o.focus(),e.preventDefault(),e.stopPropagation()):(i.focus(),e.preventDefault(),e.stopPropagation())}})},t.prototype.didMountProjectorMode=function(e){this.controller.getSettingsViewModel().focusOnOpen&&l(e).focus()},t.prototype.didUnmount=function(){l(document).off(".settings-view")},t.prototype.didUpdate=function(){if(this.controller.isGraphSettingsOpen()){var e=this.controller.getLayoutMeasurements().keypadHeight;e!==this.cachedKeypadHeight&&l(document.activeElement).closest(this.node).length&&i.scrollVisible(l(document.activeElement),l(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}},t.prototype.eventShouldClosePopover=function(e){var t=!!l(e.target).closest(this.node).length,n=!!l(e.target).closest(".dcg-action-settings").length,r=this.isMathquillFocused()&&l(e.target).closest(".dcg-keypad").length;return!(t||n||r)},t.prototype.onTapSettingsButton=function(e){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:"keyboard"===e.device})},t.prototype.isMathquillFocused=function(){return void 0!==this.getFocusedLimit()},t.prototype.getLimitLatex=function(e){return this.controller.getSettingsViewModel().limitLatex[e]},t.prototype.setLimitLatex=function(e,t){t!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:t})},t.prototype.getFocusedLimit=function(){var e=this.controller.getFocusLocation();if(e&&"settings"===e.type)return e.location},t.prototype.getInvalidLimits=function(){var e=!!this.controller.getGraphSettings().degreeMode,t=h.default(this.getLimitLatex("xmin"),e),n=h.default(this.getLimitLatex("xmax"),e),i=h.default(this.getLimitLatex("ymin"),e),o=h.default(this.getLimitLatex("ymax"),e),s=""===this.getLimitLatex("xstep")?0:h.default(this.getLimitLatex("xstep"),e),a=""===this.getLimitLatex("ystep")?0:h.default(this.getLimitLatex("ystep"),e),c={},l=new r(t,n,i,o);return isFinite(t)&&isFinite(n)?(c.xmin=!l.isXValid(),c.xmax=c.xmin):(c.xmin=!isFinite(t),c.xmax=!isFinite(n)),isFinite(i)&&isFinite(o)?(c.ymin=!l.isYValid(),c.ymax=c.ymin):(c.ymin=!isFinite(i),c.ymax=!isFinite(o)),c.xstep=!isFinite(s)||s<0,c.ystep=!isFinite(a)||a<0,c},t.prototype.isLimitInvalid=function(e){return this.getInvalidLimits()[e]},t.prototype.onFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})},t.prototype.onXAxisLabelInput=function(e){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:e})},t.prototype.onYAxisLabelInput=function(e){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:e})},t.prototype.getXAxisLabel=function(){return this.controller.getGraphSettings().xAxisLabel},t.prototype.getYAxisLabel=function(){return this.controller.getGraphSettings().yAxisLabel},t.prototype.getShowXAxis=function(){return!!this.controller.getGraphSettings().showXAxis},t.prototype.toggleXAxis=function(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})},t.prototype.getShowYAxis=function(){return!!this.controller.getGraphSettings().showYAxis},t.prototype.toggleYAxis=function(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})},t.prototype.getAxisNumbers=function(){return!!this.controller.getGraphSettings().xAxisNumbers},t.prototype.toggleAxisNumbers=function(){var e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})},t.prototype.getMinorGridlines=function(){return 0===this.controller.getGraphSettings().xAxisMinorSubdivisions},t.prototype.toggleMinorGridlines=function(){var e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})},t.prototype.getPolarMode=function(){return!!this.controller.getGraphSettings().polarMode},t.prototype.setPolarMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!0})},t.prototype.setCartesianMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!1})},t.prototype.getDegreeMode=function(){return!!this.controller.getGraphSettings().degreeMode},t.prototype.setRadianMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!1})},t.prototype.setDegreeMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!0})},t.prototype.getProjectorMode=function(){return!!this.controller.getGraphSettings().projectorMode},t.prototype.toggleProjectorMode=function(){this.controller.dispatch({type:"set-graph-settings",projectorMode:!this.getProjectorMode()})},t.prototype.getAxisArrowMode=function(){return this.controller.getGraphSettings().xAxisArrowMode},t.prototype.setAxisArrowMode=function(e){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})},t.prototype.getShowGrid=function(){return this.controller.getGraphSettings().showGrid},t.prototype.toggleGrid=function(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})},t.prototype.toggleArrows=function(){var e=this.getAxisArrowMode()===u.NONE?u.BOTH:u.NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})},t.prototype.getSquareAxes=function(){return!!this.controller.getGraphSettings().squareAxes},t.prototype.getContainerStyle=function(){var e=this.controller.getLayoutMeasurements().keypadHeight;return e?"bottom: 0":""},t.prototype.zoomSquare=function(){this.controller.dispatch({type:"set-graph-settings",squareAxes:!0})},t}(s.Class);t.default=g}),define("main/pillbox-view",["require","exports","tslib","dcgview","./graphpaper-branding-view","jquery","./settings-view","loadcss!pillboxes","tipsy"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.viewportController=this.props.viewportController(),r.createElement("div",{class:r.const("dcg-pillbox-container"),role:r.const("group"),"aria-label":function(){return e.controller.t("Graph Settings Controls")},didMount:this.bindFn(this.didMountPillbox)},r.createElement("div",{class:r.const("dcg-overgraph-pillbox-elements"),style:this.bindFn(this.getContainerStyle)},r.createElement(s.default,{controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-zoom-container")},r.createElement("div",{class:r.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group")},r.createElement("div",{class:r.const("dcg-action-zoomin dcg-tooltip-e"),tooltip:function(){return e.controller.t("Zoom In")},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Zoom In")},onTap:this.bindFn(this.zoomIn)},r.createElement("i",{class:r.const("dcg-icon dcg-icon-plus"),"aria-hidden":r.const("true")})),r.createElement("div",{class:r.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),tooltip:function(){return e.controller.t("Zoom Out")},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Zoom Out")},onTap:this.bindFn(this.zoomOut)},r.createElement("i",{class:r.const("dcg-icon dcg-icon-minus"),"aria-hidden":r.const("true")}))),r.createElement("div",{class:function(){return{"dcg-btn-flat-gray":!0,"dcg-option":!0,"dcg-action-zoomrestore":!0,"dcg-tooltip-e":!0,"dcg-disabled":e.getZoomedDefault()}},"aria-disabled":this.bindFn(this.getZoomedDefault),tooltip:function(){return e.controller.t("Default Zoom")},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Restore Default Zoom")},onTap:this.bindFn(this.zoomRestore)},r.createElement("i",{class:r.const("dcg-icon dcg-icon-home"),"aria-hidden":r.const("true")})))),r.createElement(i.default,{controller:function(){return e.props.controller()}}))},t.prototype.didMountPillbox=function(e){this.node=e;var t=o(e);t.tipsy({fade:"fast",title:"tooltip",wait:500,delegate:".dcg-tooltip-e",gravity:"e"})},t.prototype.zoomIn=function(){this.viewportController.zoom("in")},t.prototype.zoomOut=function(){this.viewportController.zoom("out")},t.prototype.zoomRestore=function(){this.viewportController.zoom("default")},t.prototype.getZoomedDefault=function(){return this.controller.getGraphSettings().zoomedDefault},t.prototype.getContainerStyle=function(){var e=this.controller.getLayoutMeasurements().keypadHeight,t=this.controller.isGraphSettingsOpen();return t&&e?"bottom: "+e+"px;":""},t}(r.Class);t.default=a}),define("loadcss!tour",function(){}),define("loadcss!calculator_embed",function(){}),define("loadcss!inputs",function(){}),define("loadcss!dcg-normalize",function(){}),define("loadcss!projector_mode",function(){}),define("loadcss!smallscreen",function(){}),define("loadcss!desmos-icons",function(){}),define("loadcss!popovers",function(){}),define("main/calc_embed",["require","exports","touchtracking","main/evaluator","graphing/grapher","main/graph_settings","graphing/viewport","main/keypad_view","main/layout_controller","tours/mathart","tours/tour_manager","underscore_model","ipad.scrollfix","i18n","jquery","main/controller","dcgview","expressions/list_view","main/toast-view","main/instancehotkeys","main/pillbox-view","lib/console","loadcss!tour","loadcss!calculator_embed","loadcss!inputs","loadcss!dcg-normalize","loadcss!projector_mode","loadcss!smallscreen","loadcss!desmos-icons","loadcss!popovers"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g,y,v,b,x,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var w=0,E=function(){function e(e,t,s){function _(e,t){return p.t(e,t,S.language)}var E=this;this.__id=w++;var S=new o;for(var M in s)S.config.setProperty(M,s[M]);var I=new m.default(S);this.controller=I,S.config.keypad&&S.config.expressions&&!S.config.nativeOnscreenKeypad&&(window.overrideNativeOnscreenKeypad=!0);var k=["dcg-container"];S.config.settingsMenu||k.push("dcg-no-settings-menu"),S.config.expressionsTopbar||k.push("dcg-no-expression-topbar"),S.config.zoomButtons||k.push("dcg-no-zoom"),S.config.branding||k.push("dcg-no-branding"),S.config.links||k.push("dcg-no-hyperlinks"),S.config.border&&k.push("dcg-default-border"),S.config.invertedColors&&k.push("dcg-inverted-colors");var T=f('<div class="'+k.join(" ")+'" role="application" x-ms-format-detection="none">');this.embedElt=T[0],this.rootElt=e,n.monitor(T[0]);var C=f('<div class="dcg-grapher">');S.config.disableScrollFix||d.limitScrollOnElement(T);var A=r(t);this.controller.setEvaluator(A);var P;S.config.expressions&&!S.config.expressionsCollapsed||T.addClass("dcg-fullscreen"),S.config.expressions&&(this.expressionsContainer=document.createElement("div"),T[0].appendChild(this.expressionsContainer),this.expressionsView=g.mountToNode(y.default,this.expressionsContainer,{controller:function(){return E.controller},$root:function(){return T}}),T.find(".dcg-expressions-branding .dcg-edit-branding").on("dcg-tap",function(){return E._openOnWeb()})),C.appendTo(T),S.config.keypad&&(this.keypadView=P=a(this.controller),P.appendTo(T)),S.config.graphpaper||T.addClass("dcg-no-graphpaper"),T.appendTo(e);var O=new i(C,S,T,this.controller,A);this.controller.setGrapher(O),S.registerCallbacks(O,T,A),this.controller.initStateStack(),S.config.redrawSlowly||(O.redrawSlowly=O.redrawAllLayers),A.triggerStatusChange=function(e){E.controller.dispatch({type:"on-evaluator-changes",changes:e})},A.triggerGraphData=function(e){I.dispatch({type:"process-graph-data",graphData:e})},A.triggerRender=function(){O.redrawAllLayers()},A.triggerRenderSlowly=function(){O.redrawSlowly()};var L=document.createElement("div");T[0].appendChild(L);var D=g.mountToNode(x.default,L,{controller:g.const(this.controller),viewportController:g.const(O.viewportController)}),N=document.createElement("div");T[0].appendChild(N);var F=g.mountToNode(v.ToastView,N,{message:function(){var e=E.controller.getToastData().message;return e?e:""},showUndo:function(){return!!E.controller.getToastData().undoCallback},showLearnMore:function(){return!!E.controller.getToastData().learnMoreCallback},noAria:function(){return!!E.controller.getToastData().noAria},toastStyle:function(){return E.controller.getToastData().toastStyle},t:this.controller.t,onUndo:function(){return E.controller.dispatch({type:"toast/undo"})},onLearnMore:function(){return E.controller.dispatch({type:"toast/learn-more"})},onClose:function(){return E.controller.dispatch({type:"toast/close"})}});this.unsubFunc=this.controller.subToChanges(function(){var e=E.layoutController.currentScreen.width>0&&E.layoutController.currentScreen.height>0;e&&(D.update(),F.update(),E.expressionsView&&E.expressionsView.update())}),O.addDomObstruction(T.find(".dcg-overgraph-pillbox-elements")[0]),O.addDomObstruction(T.find(".dcg-graphpaper-branding")[0]),T.find(".dcg-graphpaper-branding .dcg-edit-branding").on("dcg-tap",function(){return E._openOnWeb()}),this.pillboxContainer=L,this.pillboxView=D,this.toastContainer=N,this.toastView=F;var q=c({keypadView:P,grapher:O},T,this.controller);this.layoutController=q,this.controller.setLayoutController(q);var R=h();R.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=R,q.triggerGraphpaperRectChanged=function(e){R.setProperty("pixelCoordinates",{top:e.top,bottom:e.bottom,left:e.left,right:e.right,width:e.width,height:e.height}),O.triggerProjectionChanged()},O.triggerProjectionChanged=function(){var e=O.getProjection();O.settings.setProperty("zoomedDefault",O.viewportController.isZoomRestored()),O.syncSquareAxes(),A.setViewState({viewport:e.viewport.toObject(),screen:e.screen}),R.setProperty("mathCoordinates",{top:e.viewport.ymax,bottom:e.viewport.ymin,left:e.viewport.xmin,right:e.viewport.xmax,width:e.viewport.xmax-e.viewport.xmin,height:e.viewport.ymax-e.viewport.ymin})},O.triggerProjectionChanged(),f(window).on("dcg-tapstart.calculator-"+this.__id,function(e){var t=f(e.target);t.closest(T).length||t.hasClass("dcg-shell")||I.dispatch({type:"set-none-selected"}),e.wasHandled("do-not-clear-poi-labels")||O.poiController.clearOpenedPOI()}),this.grapher=O,this.evaluator=A,this.tourManager=u({evaluator:A}),this.tourManager.TOURS=l,q.resize(),this.controller.dispatch({type:"set-blank"});var j=["degreeMode","invertedColors"],V={};j.forEach(function(e){void 0!==s[e]&&(V[e]=s[e])}),S.setGraphSettings(V),S.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),S.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:S.config.pointsOfInterest}),S.observe("language",function(){var e=E.controller.getState();P&&P.onLanguageChange(),E.controller.dispatch({type:"set-state",state:e}),E.tourManager&&(E.tourManager.closingMsg=["<b>__endingMessage__</b><br>",_("This message will self-destruct in __seconds__...")].join(""))}),this.instanceHotkeys=new b.default(T,I)}return e.prototype.getState=function(e){return this.controller.getState(e)},e.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t})},e.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e})},e.prototype.setOptions=function(e){var t=f(this.embedElt),n=!1;e.hasOwnProperty("solutions")&&(_.warn("Deprecated option: solutions. Use pointsOfInterest instead."),e.pointsOfInterest=e.solutions),e.hasOwnProperty("pointsOfInterest")&&this.controller.getGraphSettings().config.setProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("settingsMenu")&&t.toggleClass("dcg-no-settings-menu",!e.settingsMenu),e.hasOwnProperty("border")&&t.toggleClass("dcg-default-border",!!e.border),e.hasOwnProperty("branding")&&t.toggleClass("dcg-no-branding",!e.branding),e.hasOwnProperty("expressionsTopbar")&&(t.toggleClass("dcg-no-expression-topbar",!e.expressionsTopbar),n=!0),e.hasOwnProperty("graphpaper")&&(t.toggleClass("dcg-no-graphpaper",!e.graphpaper),n=!0),e.hasOwnProperty("zoomButtons")&&t.toggleClass("dcg-no-zoom",!e.zoomButtons),e.hasOwnProperty("expressionsCollapsed")&&(e.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list"}):this.controller.dispatch({type:"show-expressions-list"})),e.hasOwnProperty("keypad")&&_.warn("Bad option {keypad: "+e.keypad+"}. The keypad can only be added or removed at load time, not at runtime."),e.hasOwnProperty("expressions")&&_.warn("Bad option {expressions: "+e.expressions+"}. The expressions can only be added or removed at load time, not at runtime."),e.hasOwnProperty("lockViewport")&&this.controller.getGraphSettings().config.setProperty("lockViewport",e.lockViewport),n&&this.layoutController.resize()},e.prototype.setViewport=function(e){this.grapher.viewportController.setViewport(new s(e[0],e[1],e[2],e[3]))},e.prototype.resize=function(){this.layoutController.resize()},e.prototype.interceptTouch=function(){var e=this,t=this.grapher.$,n=f(this.embedElt);t=t.add(n.find(".dcg-expression-top-bar")),this.keypadView&&(t=t.add(this.keypadView.$())),t.on("touchstart",function(e){e.preventDefault()}),t.on("touchend",function(t){f(t.target).closest(".dcg-do-not-blur")||e.layoutController.defocusMobile()})},e.prototype._openOnWeb=function(){var e=JSON.stringify(this.getState()),t=this.grapher.screenshot({width:100,height:100}),n=this.controller.getGraphSettings().config.crossOriginSaveTest,r=n?"/":"https://www.desmos.com/",i=r+"api/v1/calculator/cross_origin_save",o=f('<input type="text" name="calc_state" />').val(e),s=f('<input type="text" name="thumb_data" />').val(t),a=f('<form target="_blank" method="POST" style="display:none;"></form>').attr("action",i).append(f('<input type="text" name="is_open_on_web" value="true" />')).append(f('<input type="text" name="my_graphs" value="false" />')).append(f('<input type="text" name="is_update" value="false" />')).append(o).append(s);f(this.embedElt).append(a),a.submit().remove()},e.prototype.destroy=function(){f(window).off(".calculator-"+this.__id),this.unsubFunc(),this.grapher.settings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),this.pillboxView&&g.unmountFromNode(this.pillboxContainer),this.toastView&&g.unmountFromNode(this.toastContainer),this.expressionsView&&g.unmountFromNode(this.expressionsContainer),this.keypadView&&this.keypadView.remove(),this.instanceHotkeys&&this.instanceHotkeys.remove(),this.rootElt.contains(this.embedElt)&&this.rootElt.removeChild(this.embedElt)},e.prototype.tick=function(e){this.controller.dispatch({type:"tick",time:e})},e}();t.default=E}),define("main/calc_headless",["require","pjs","main/evaluator","main/graph_settings","underscore_model","main/controller"],function(e){var t=e("pjs"),n=e("main/evaluator"),r=e("main/graph_settings"),i=e("underscore_model"),o=e("main/controller").default,s=t(function(e){e.init=function(e,t){var s=new r;for(var a in t)s.config.setProperty(a,t[a]);this.controller=new o(s);var c=n(e);this.controller.setEvaluator(c),c.triggerStatusChange=function(e){this.controller.dispatch({type:"on-evaluator-changes",changes:e})}.bind(this);var l=i();l.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=l,this.evaluator=c,this.getState=this.controller.getState.bind(this.controller),this.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t})},this.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e})},this.setViewport=function(e){},this.resize=function(){},this.setOptions=function(e){},this.setBlank()},e.tick=function(e){this.evaluator.tick(e)}});return s}),define("main/raf-loop",["require","lib/animation-frame"],function(e){function t(e){function t(r){n.requestAnimationFrame(t),e(r)}n.requestAnimationFrame(t)}var n=e("lib/animation-frame");return t}),define("main/shared-clock-bus",["require","exports","main/raf-loop","underscore_model"],function(e,t,n,r){"use strict";function i(e){return a+=1,s.observeEvent("tick."+a,function(t,n){e(n)}),a}function o(e){s.unobserveEvent("tick."+e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r();n(function(e){s.triggerEvent("tick",e)});var a=0;t.subscribe=i,t.unsubscribe=o}),define("main/shared-worker-pool",["require","exports","worker/workerpool","lib/urlparser"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.getParameter("nworkers"),o=4;i&&(o=parseInt(i,10)),t.default=new n(o)}),function(e){"use strict";var t=function(e,n,r){var i,o,s=document.createElement("img");if(s.onerror=n,s.onload=function(){!o||r&&r.noRevoke||t.revokeObjectURL(o),n&&n(t.scale(s,r))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))i=o=t.createObjectURL(e),s._type=e.type;else{if("string"!=typeof e)return!1;i=e,r&&r.crossOrigin&&(s.crossOrigin=r.crossOrigin)}return i?(s.src=i,s):t.readFile(e,function(e){var t=e.target;t&&t.result?s.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,n,r,i,o,s,a,c,l){return e.getContext("2d").drawImage(t,n,r,i,o,s,a,c,l),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,n){n=n||{};var r,i,o,s,a,c,l,u,h,d=document.createElement("canvas"),p=e.getContext||t.hasCanvasOption(n)&&d.getContext,f=e.naturalWidth||e.width,m=e.naturalHeight||e.height,g=f,y=m,v=function(){var e=Math.max((o||g)/g,(s||y)/y);e>1&&(g=Math.ceil(g*e),y=Math.ceil(y*e))},b=function(){var e=Math.min((r||g)/g,(i||y)/y);e<1&&(g=Math.ceil(g*e),y=Math.ceil(y*e))};return p&&(n=t.getTransformedOptions(n),l=n.left||0,u=n.top||0,n.sourceWidth?(a=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(l=f-a-n.right)):a=f-l-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(u=m-c-n.bottom)):c=m-u-(n.bottom||0),g=a,y=c),r=n.maxWidth,i=n.maxHeight,o=n.minWidth,s=n.minHeight,p&&r&&i&&n.crop?(g=r,y=i,h=a/c-r/i,h<0?(c=i*a/r,void 0===n.top&&void 0===n.bottom&&(u=(m-c)/2)):h>0&&(a=r*c/i,void 0===n.left&&void 0===n.right&&(l=(f-a)/2))):((n.contain||n.cover)&&(o=r=r||o,s=i=i||s),n.cover?(b(),v()):(v(),b())),p?(d.width=g,d.height=y,t.transformCoordinates(d,n),t.renderImageToCanvas(d,e,l,u,a,c,0,0,g,y)):(e.width=g,e.height=y,e)},t.createObjectURL=function(e){return!!n&&n.createObjectURL(e)},t.revokeObjectURL=function(e){return!!n&&n.revokeObjectURL(e)},t.readFile=function(e,t,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=t,n=n||"readAsDataURL",r[n])return r[n](e),r}return!1},"function"==typeof define&&define.amd?define("vendor/load-image/load-image",[],function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-orientation",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var n=e.getContext("2d"),r=e.width,i=e.height,o=t.orientation;if(o)switch(o>4&&(e.width=i,e.height=r),o){case 2:n.translate(r,0),n.scale(-1,1);break;case 3:n.translate(r,i),n.rotate(Math.PI);break;case 4:n.translate(0,i),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-i);break;case 7:n.rotate(.5*Math.PI),n.translate(r,-i),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-r,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);switch(e.orientation){case 2:n.left=e.right,n.right=e.left;break;case 3:n.left=e.right,n.top=e.bottom,n.right=e.left,n.bottom=e.top;break;case 4:n.top=e.bottom,n.bottom=e.top;break;case 5:n.left=e.top,n.top=e.left,n.right=e.bottom,n.bottom=e.right;break;case 6:n.left=e.top,n.top=e.right,n.right=e.bottom,n.bottom=e.left;break;case 7:n.left=e.bottom,n.top=e.right,n.right=e.top,n.bottom=e.left;break;case 8:n.left=e.bottom,n.top=e.left,n.right=e.top,n.bottom=e.right}return e.orientation>4&&(n.maxWidth=e.maxHeight,n.maxHeight=e.maxWidth,n.minWidth=e.minHeight,n.minHeight=e.minWidth,n.sourceWidth=e.sourceHeight,n.sourceHeight=e.sourceWidth),n}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-meta",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,r){r=r||{};var i=this,o=r.maxMetaDataSize||262144,s={},a=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);!a&&e.readFile(e.blobSlice.call(t,0,o),function(t){var o,a,c,l,u=t.target.result,h=new DataView(u),d=2,p=h.byteLength-4,f=d;if(65496===h.getUint16(0)){for(;d<p&&(o=h.getUint16(d),o>=65504&&o<=65519||65534===o);){if(a=h.getUint16(d+2)+2,d+a>h.byteLength){console.log("Invalid meta data: Invalid segment size.");
break}if(c=e.metaDataParsers.jpeg[o])for(l=0;l<c.length;l+=1)c[l].call(i,h,d,a,s,r);d+=a,f=d}!r.disableImageHead&&f>6&&(u.slice?s.imageHead=u.slice(0,f):s.imageHead=new Uint8Array(u).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(s)},"readAsArrayBuffer")||n(s)}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-ios",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var n,r,i,o,s,a=e.naturalHeight||e.height,c=document.createElement("canvas"),l=c.getContext("2d");for(t&&(a/=2),c.width=1,c.height=a,l.drawImage(e,0,0),n=l.getImageData(0,0,1,a).data,r=0,i=a,o=a;o>r;)s=n[4*(o-1)+3],0===s?i=o:r=o,o=i+r>>1;return o/a||1},e.renderImageToCanvas=function(n,r,i,o,s,a,c,l,u,h){if("image/jpeg"===r._type){var d,p,f,m,g=n.getContext("2d"),y=document.createElement("canvas"),v=1024,b=y.getContext("2d");if(y.width=v,y.height=v,g.save(),d=e.detectSubsampling(r),d&&(i/=2,o/=2,s/=2,a/=2),p=e.detectVerticalSquash(r,d),d||1!==p){for(o*=p,u=Math.ceil(v*u/s),h=Math.ceil(v*h/a/p),l=0,m=0;m<a;){for(c=0,f=0;f<s;)b.clearRect(0,0,v,v),b.drawImage(r,i,o,s,a,-f,-m,s,a),g.drawImage(y,0,0,v,v,c,l,u,h),f+=v,c+=u;m+=v,l+=h}return g.restore(),n}}return t(n,r,i,o,s,a,c,l,u,h)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-exif",["./load-image","./load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var r,i,o;if(!n||t+n>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(r=[],i=0;i<n;i+=1)o=e.getUint8(t+i),r.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+r.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,r,i,o,s){var a,c,l,u,h,d,p=e.exifTagTypes[i];if(!p)return void console.log("Invalid Exif data: Invalid tag type.");if(a=p.size*o,c=a>4?n+t.getUint32(r+8,s):r+8,c+a>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===o)return p.getValue(t,c,s);for(l=[],u=0;u<o;u+=1)l[u]=p.getValue(t,c+u*p.size,s);if(p.ascii){for(h="",u=0;u<l.length&&(d=l[u],"\0"!==d);u+=1)h+=d;return h}return l},e.parseExifTag=function(t,n,r,i,o){var s=t.getUint16(r,i);o.exif[s]=e.getExifValue(t,n,r,t.getUint16(r+2,i),t.getUint32(r+4,i),i)},e.parseExifTags=function(e,t,n,r,i){var o,s,a;if(n+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(o=e.getUint16(n,r),s=n+2+12*o,s+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(a=0;a<o;a+=1)this.parseExifTag(e,t,n+2+12*a,r,i);return e.getUint32(s,r)},e.parseExifData=function(t,n,r,i,o){if(!o.disableExif){var s,a,c,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:s=!0;break;case 19789:s=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,s))return void console.log("Invalid Exif data: Missing TIFF marker.");a=t.getUint32(l+4,s),i.exif=new e.ExifMap,a=e.parseExifTags(t,l,l+a,s,i),a&&!o.disableExifThumbnail&&(c={exif:{}},a=e.parseExifTags(t,l,l+a,s,c),c.exif[513]&&(i.exif.Thumbnail=e.getExifThumbnail(t,l+c.exif[513],c.exif[514]))),i.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,l,l+i.exif[34665],s,i),i.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,l,l+i.exif[34853],s,i)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-exif-map",["./load-image","./load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,r=e.map;for(t in n)n.hasOwnProperty(t)&&(r[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(n[t]=this.getText(t)));return n}}),define("loadImage",["require","vendor/load-image/load-image-orientation","vendor/load-image/load-image-meta","vendor/load-image/load-image-ios","vendor/load-image/load-image-exif","vendor/load-image/load-image-exif-map","vendor/load-image/load-image"],function(e){e("vendor/load-image/load-image-orientation"),e("vendor/load-image/load-image-meta"),e("vendor/load-image/load-image-ios"),e("vendor/load-image/load-image-exif"),e("vendor/load-image/load-image-exif-map");var t=e("vendor/load-image/load-image");return t}),define("expressions/image_file_to_data_url",["require","loadImage"],function(e){function t(e,t){for(var n,r=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],i=0;i<r.length;i++)if(n=e.toDataURL("image/jpeg",r[i]),n.length<t)return n;return n}function n(e,t){for(var n,r=e.toDataURL().length,i=e.width,o=e.height,s=document.createElement("canvas"),a=0;a<2;a++){var c=Math.sqrt(t/r);i=Math.round(c*i),o=Math.round(c*o),s.height=o,s.width=i;var l=s.getContext("2d");if(l.drawImage(e,0,0,i,o),n=s.toDataURL(),r=n.length,r<t)return n}return n}function r(e,r){var o={orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600};i(e,function(i){if(!i.toDataURL)return void r(!0);var o,s=2e5;"image/jpeg"===e.type?o=t(i,s):(o=i.toDataURL(),o.length>s&&(o=o.length>.75*i.width*i.height?t(i,s):n(i,s))),r(null,o)},o)}var i=e("loadImage");return r}),define("lib/dom-change-detector",["require","exports","tslib","lib/animation-frame","jquery"],function(e,t,n,r,i){"use strict";function o(){l=!0,r.requestAnimationFrame(s)}function s(){t.testFixture.rafSPY&&t.testFixture.rafSPY(),l=!1;for(var e in c)c[e].detectAndEnqueueEvent(),l=!0;if(l){o();for(var e in c)c[e].dispatchQueuedEvent()}}Object.defineProperty(t,"__esModule",{value:!0});var a=1,c={},l=!1;t.testFixture={},t.checkAllWatchingDetectors=s;var u=function(){function e(e,t){this.elt=e,this.cb=t,this.destroyed=!1,this.id=a.toString(),this.appliedScale={x:1,y:1},a++}return e.prototype.stopWatching=function(){delete c[this.id]},e.prototype.startWatching=function(){this.checkForChanges(),c[this.id]=this,l||o()},e.prototype.resetAppliedScalingAndGetBoundingClientRect=function(){var e=this.elt.getBoundingClientRect(),t={x:e.width/this.elt.offsetWidth,y:e.height/this.elt.offsetHeight};if(t.x===this.appliedScale.x&&t.y===this.appliedScale.y)return e;this.appliedScale=t;var n={transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%"};return i(this.elt).children(".dcg-container:eq(0)").css(n),this.elt.getBoundingClientRect()},e.prototype.detectAndEnqueueEvent=function(){if(!this.destroyed){var e=document.body.contains(this.elt);if(e){var t=this.resetAppliedScalingAndGetBoundingClientRect();this.lastSize?t.width===this.lastSize.width&&t.height===this.lastSize.height||(this.lastSize.width=t.width,this.lastSize.height=t.height,this.queuedEvent={type:"resized",target:this.elt,size:n.__assign({},this.lastSize)}):(this.lastSize={width:t.width,height:t.height},this.queuedEvent={type:"added",target:this.elt,size:n.__assign({},this.lastSize)})}else this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt})}},e.prototype.dispatchQueuedEvent=function(){var e=this.queuedEvent;e&&(this.queuedEvent=void 0,this.cb(e))},e.prototype.checkForChanges=function(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()},e.prototype.destroy=function(){this.stopWatching();for(var e in this)this.hasOwnProperty(e)&&delete this[e];this.destroyed=!0},e}();t.default=u}),define("graphing/compute-async-screenshot-bounds",["require","console"],function(e){function t(e){var t=e.mode,r=e.width,i=e.height,o=e.currentBounds,s=e.graphpaperAspectRatio,a=e.mathAspectRatio,c=e.mathBounds,l=r/i,u={x:o.left+o.width/2,y:o.bottom+o.height/2};if(void 0===c.left!=(void 0===c.right)||void 0===c.bottom!=(void 0===c.top))return n.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+c),o;var h,d,p,f,m,g,y,v,b,x,_=void 0!==c.left&&void 0!==c.right,w=void 0!==c.bottom&&void 0!==c.top,E=_&&w;switch(t){case"stretch":return E?c:_?{left:c.left,right:c.right,bottom:o.bottom,top:o.top}:w?{left:o.left,right:o.right,bottom:c.bottom,top:c.top}:o;case"contain":return E?(f=c.right-c.left,m=c.top-c.bottom,g={x:c.left+f/2,y:c.bottom+m/2},p=f/m,l>p?(d=m/i,h=d*a,{left:g.x-h*r/2,right:g.x+h*r/2,bottom:c.bottom,top:c.top}):(h=f/r,d=h/a,{left:c.left,right:c.right,bottom:g.y-d*i/2,top:g.y+d*i/2})):_?(y=c.right-c.left,v=c.left+y/2,p=y/o.height,l>p?(d=o.height/i,h=d*a,{left:v-h*r/2,right:v+h*r/2,bottom:o.bottom,top:o.top}):(h=y/r,d=h/a,{left:c.left,right:c.right,bottom:u.y-d*i/2,top:u.y+d*i/2})):w?(b=c.top-c.bottom,x=c.bottom+b/2,p=o.width/b,l>p?(d=b/i,h=d*a,{left:u.x-h*r/2,right:u.x+h*r/2,bottom:c.bottom,top:c.top}):(h=o.width/r,d=h/a,{left:o.left,right:o.right,bottom:x-d*i/2,top:x+d*i/2})):l>s?(d=o.height/i,h=d*a,{left:u.x-h*r/2,right:u.x+h*r/2,bottom:o.bottom,top:o.top}):(h=o.width/r,d=h/a,{left:o.left,right:o.right,bottom:u.y-d*i/2,top:u.y+d*i/2});case"preserveX":return E?(f=c.right-c.left,m=c.top-c.bottom,g={x:c.left+f/2,y:c.bottom+m/2},p=f/m,h=f/r,d=h/a,{left:c.left,right:c.right,bottom:g.y-d*i/2,top:g.y+d*i/2}):w?(b=c.top-c.bottom,x=c.bottom+b/2,p=o.width/b,h=o.width/r,d=h/a,{left:o.left,right:o.right,bottom:x-d*i/2,top:x+d*i/2}):_?(y=c.right-c.left,h=y/r,d=h/a,{left:c.left,right:c.right,bottom:u.y-d*i/2,top:u.y+d*i/2}):(y=o.right-o.left,h=y/r,d=h/a,{left:o.left,right:o.right,bottom:u.y-d*i/2,top:u.y+d*i/2});case"preserveY":return E?(f=c.right-c.left,m=c.top-c.bottom,g={x:c.left+f/2,y:c.bottom+m/2},p=f/m,d=m/i,h=d*a,{left:g.x-h*r/2,right:g.x+h*r/2,bottom:c.bottom,top:c.top}):_?(y=c.right-c.left,v=c.left+y/2,p=y/o.height,d=o.height/i,h=d*a,{left:v-h*r/2,right:v+h*r/2,bottom:o.bottom,top:o.top}):w?(b=c.top-c.bottom,d=b/i,h=d*a,{left:u.x-h*r/2,right:u.x+h*r/2,bottom:c.bottom,top:c.top}):(b=o.top-o.bottom,d=b/i,h=d*a,{left:u.x-h*r/2,right:u.x+h*r/2,bottom:o.bottom,top:o.top});default:return o}}var n=e("console");return t}),define("expressions/sanitize_expression",["require"],function(e){function t(e,t){var n={};return e.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}function n(e){return{min:e.domain.min,max:e.domain.max}}function r(e){return{min:e.sliderMin,max:e.sliderMax,step:e.sliderInterval}}function i(e){var n=t(c,e);return n.columns=e.columns.map(o),n}function o(e){var n=t(l,e);return e.values&&"function"==typeof e.values.slice&&(n.values=e.values.slice()),n}function s(e){if("table"===e.type)return i(e);var o=t(a,e);return e.hasOwnProperty("domain")&&(o.domain=n(e)),e.hasOwnProperty("sliderMin")&&(o.sliderBounds=r(e)),o}var a=["type","latex","color","style","hidden","secret","id","dragMode","label","showLabel"],c=["type","id"],l=["id","latex","color","hidden","columnMode","dragMode"];return s}),define("api/abstract",["require","exports","underscore_model","ipad.scrollfix","touchtracking","lib/console","lib/dom-change-detector"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){if(this.rootElt=e,this.eventModel=new n,!e)throw new Error("must pass an HTMLElement to the API")}return e.prototype.setupDomChangeDetector=function(e){var t=this;this.autoSize=e,i.monitor(this.rootElt),r.limitScrollOnElement(this.rootElt),this.domChangeDetector=new s.default(this.rootElt,function(e){switch(e.type){case"added":t.view=t.onCreateView(),t.onResizeView(e.size);break;case"removed":t.onDestroyView(),t.view=void 0;break;case"resized":t.onResizeView(e.size)}}),this.autoSize!==!1?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()},e.prototype.detach=function(){o.warn(".detach() is deprecated. It should no longer be necessary")},e.prototype.destroy=function(){function e(e){o.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}this.view&&this.onDestroyView(),this.domChangeDetector.destroy();for(var t in this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},e.prototype.resize=function(){this.domChangeDetector.checkForChanges()},e.prototype.updateView=function(){this.view&&document.body.contains(this.rootElt)&&this.view.update()},e.prototype.triggerEvent=function(e){this.eventModel.triggerEvent(e)},e.prototype.observeEvent=function(e,t){this.eventModel.observeEvent(e,t)},e.prototype.unobserveEvent=function(e){this.eventModel.unobserveEvent(e)},e}();t.default=a}),define("immutable-store",["require","underscore","lib/deepCopy"],function(e){function t(e){return r.clone(e)}function n(e){this.setState(e)}var r=e("underscore"),i=e("lib/deepCopy").default;return n.prototype.setState=function(e){this.state=e},n.prototype.getState=function(){return this.state},n.prototype.set=function(e,n){if(1===arguments.length)return void(this.state=e);if("string"==typeof e)return this.state=t(this.state),void(this.state[e]=n);var r,i=e.length-2,o=e[i+1];this.state=r=t(this.state);for(var s=0;s<=i;s++){var a=e[s];r=r[a]=t(r[a])}r[o]=n},n.prototype.deepMutate=function(e,n){if(1===arguments.length)return n=e,this.state=i(this.state),void n(this.state);if("string"==typeof e)return this.state=t(this.state),this.state[e]=i(this.state[e]),void n(this.state[e]);for(var r=e.length-2,o=e[r+1],s=this.state=t(this.state),a=0;a<=r;a++){var c=e[a];s=s[c]=t(s[c])}s=s[o]=i(s[o]),n(s)},n.prototype.shallowMutate=function(e,n){if(1===arguments.length)return n=e,this.state=t(this.state),void n(this.state);if("string"==typeof e)return this.state=t(this.state),this.state[e]=t(this.state[e]),void n(this.state[e]);for(var r=e.length-1,i=this.state=t(this.state),o=0;o<=r;o++){var s=e[o];i=i[s]=t(i[s])}n(i)},n.areShallowEqual=function(e,t){},n.areDeepEqual=function(e,t){},{default:n}}),define("basic/model",["require","exports","main/evaluator","tslib","immutable-store","main/shared-clock-bus","graphing/label"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){var t=e.evaluationMode,n=e.additionalFunctions,r=e.functionDefinition,s=e.workerPool,a=this;this._evaluations={},this._nextObjectId=0,this.store=new i.default({expressions:{1:{id:"1",latex:"",braille:"",type:"latex"}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}}),this.evaluationMode=t,this.additionalFunctions=n,this.functionDefinition=r,this.workerPool=s,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=o.subscribe(function(e){a._evaluator.tick(e)})}return e.prototype.isSingleExpression=function(){return"singleExpressionScientific"===this.evaluationMode},e.prototype.destroy=function(){o.unsubscribe(this._sharedClockBusToken)},e.prototype.generateObjectId=function(){return(this._nextObjectId++).toString()},e.prototype.updateNextObjectId=function(){var e=this.store.getState().order;this._nextObjectId=0;for(var t=/^[0-9]+$/,n=0,r=e;n<r.length;n++){var i=r[n];if(t.test(i)){var o=parseInt(i,10);o>=this._nextObjectId&&(this._nextObjectId=o+1)}}},e.prototype.clearShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!1},e.prototype.markShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!0},e.prototype.getShouldDebounceUndoRedo=function(){return this._shouldDebounceUndoRedo},e.prototype.clearCachedBrailleValues=function(){for(var e=0,t=this.getExpressionOrder();e<t.length;e++){var n=t[e];this.store.set(["expressions",n,"braille"],"")}},e.prototype.getState=function(){return this.store.getState()},e.prototype.getPersistedState=function(){var e=this.getState(),t=e.expressions,n=e.order,r=e.settings;return{expressions:{list:n.map(function(e){var n=t[e];return{id:n.id,latex:n.latex}})},settings:r}},e.prototype.setState=function(e){this.store.set(e),this._updateIndexes(),this.updateNextObjectId()},e.prototype.setStateFromAPI=function(e){var t=[],n={};e.expressions.list.forEach(function(e){t.push(e.id),n[e.id]={id:e.id,latex:e.latex,braille:"",type:"latex"}}),this.setState({expressions:n,order:t,settings:e.settings,ui:{focus:void 0}})},e.prototype.canClear=function(){if(this.getNumberOfExpressions()>1)return!0;var e=this.getExpressionOrder()[0];return""!==this.getExpressionLatex(e)},e.prototype.clear=function(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:""}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})},e.prototype.getExpressionOrder=function(){return this.store.getState().order},e.prototype.getNumberOfExpressions=function(){return this.getExpressionOrder().length},e.prototype.getExpressionById=function(e){return this.getState().expressions[e]},e.prototype.getExpressionIndex=function(e){return this._indexes[e]},e.prototype._getExpressionByIndex=function(e){var t=this.getExpressionOrder()[e];return this.getExpressionById(t)},e.prototype._updateIndexes=function(){this._indexes={};for(var e=0,t=0,n=this.getExpressionOrder();t<n.length;t++){var r=n[t];this._indexes[r]=e,e+=1}this._evaluate()},e.prototype._usesAnsById=function(e){return this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")!==-1},e.prototype._getPreviousExpById=function(e){var t=this.getExpressionIndex(e);return this._getExpressionByIndex(t-1)},e.prototype.createBlankAfterId=function(e){if(this.getExpressionById(e).latex){var t=this.getExpressionIndex(e),n=this.generateObjectId();this.store.shallowMutate("order",function(e){e.splice(t+1,0,n)}),this.store.shallowMutate("expressions",function(e){e[n]={id:n,latex:"",braille:"",type:"latex"}}),this._updateIndexes(),this.setFocusedById(n,!0)}},e.prototype.conditionallyCopyPrevious=function(e){var t=this._getPreviousExpById(e),n=this.getExpressionById(e);null!=t&&""===n.latex&&this._usesAnsById(t.id)&&this.setLatexById(e,t.latex)},e.prototype.backspaceAtFrontOfId=function(e){var t=this.getExpressionById(e);if(""===t.latex&&1!==this.getNumberOfExpressions()){var n=this.getExpressionIndex(e);this.store.shallowMutate("order",function(e){e.splice(n,1)}),this.store.shallowMutate("expressions",function(t){delete t[e]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(n-1,0),!0)}},e.prototype.setLatexById=function(e,t){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],""),this._evaluate()},e.prototype.setLatexAndBrailleById=function(e,t,n){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],n),this._evaluate()},e.prototype.setLatexOfFocusedExpression=function(e){var t=this.getFocusedExpressionId();t&&this.setLatexById(t,e)},e.prototype.isExpressionFocused=function(e){return this.getFocusedExpressionId()===e},e.prototype.getExpressionLatex=function(e){return this.getExpressionById(e).latex},e.prototype.getExpressionError=function(e){var t=this._evaluations[e];return t?t.error:""},e.prototype.getExpressionValue=function(e){var t=this._evaluations[e];if(t)return t.value},e.prototype.getExpressionAns=function(e){var t=this._evaluations[e];if(t)return t.ans},e.prototype.shouldShowEvaluationForExpression=function(e){var t=this._evaluations[e];return!!t&&t.showEvaluation},e.prototype._setFocusedByIndex=function(e,t){var n,i=this._getExpressionByIndex(e),o=r.__assign({},this.store.getState()),s=!1;t?(n={type:"latex-expression",id:i.id},s=!0):this.getFocusedExpressionId()===i.id?(n=void 0,s=!0):o.expressions[i.id]=r.__assign({},i,{braille:""}),s&&(o.ui={focus:n}),this.store.set(o)},e.prototype.setFocusedById=function(e,t){var n=this.getExpressionIndex(e);this._setFocusedByIndex(n,t)},e.prototype.focusPrevById=function(e){var t=this.getExpressionIndex(e)-1;t>=0&&this._setFocusedByIndex(t,!0)},e.prototype.focusNextById=function(e){var t=this.getExpressionIndex(e)+1;t<this.getNumberOfExpressions()?this._setFocusedByIndex(t,!0):this.createAtEnd()},e.prototype.getFocusedExpression=function(){var e=this.getFocusedExpressionId();return e?this.getExpressionById(e):void 0},e.prototype.getFocusedExpressionId=function(){var e=this.getState().ui.focus;return e&&e.id},e.prototype.clearFocusedExpression=function(){var e=this.getFocusedExpression();e&&this.setLatexById(e.id,"")},e.prototype.shouldShowClear=function(){if(1===this.getNumberOfExpressions())return!1;var e=this.getFocusedExpression();return!!e&&!!e.latex},e.prototype.getLastExpression=function(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)},e.prototype.isLastExpressionEmpty=function(){return!!this.getLastExpression().latex},e.prototype.createAtEnd=function(){this.createBlankAfterId(this.getLastExpression().id)},e.prototype.focusLastExpression=function(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)},e.prototype.focusFirstExpression=function(){this._setFocusedByIndex(0,!0)},e.prototype.getDegreeMode=function(){return this.getState().settings.degreeMode},e.prototype.setDegreeMode=function(e){this.store.set(["settings","degreeMode"],!!e),this._evaluate()},e.prototype._cleanupLatex=function(e){return e=s.trimLatex(e),"="===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),e},e.prototype._evaluate=function(){var e=this;this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(function(t){return e._evaluator.addStatement({id:t,index:e.getExpressionIndex(t),latex:e._cleanupLatex(e.getExpressionLatex(t)),shouldGraph:!1,type:"statement"})}),this._evaluator.setDegreeMode(this.getDegreeMode())},e.prototype._setupEvaluator=function(){var e=this;this._evaluator=n(this.workerPool),this._evaluator.setEvaluationMode(this.evaluationMode),this._evaluator.setAdditionalFunctions(this.additionalFunctions),this._evaluator.setFunctionDefinition(this.functionDefinition),this._evaluator.triggerStatusChange=function(t){e._evaluations={};for(var n in t){var r=t[n],i=e.getExpressionById(n);i&&(e._evaluations[n]={value:r.constant_value,showEvaluation:!!r.is_evaluable,error:r.error,ans:void 0})}for(var o=void 0,s=0,a=e.getExpressionOrder();s<a.length;s++){var n=a[s],c=e._evaluations[n];o&&c&&(c.ans=o.value),o=c}"function"==typeof e.onEvaluationUpdate&&e.onEvaluationUpdate()}},e}();t.default=a}),define("keypad/mq-commands",["require","exports"],function(e,t){"use strict";function n(e,t){r[t](e)}Object.defineProperty(t,"__esModule",{value:!0});var r={loga:function(e){e.write("\\log_{}"),e.typedText("("),e.keystroke("Left"),e.keystroke("Down")},nthroot:function(e){e.write("\\sqrt[]{}"),e.keystroke("Left"),e.keystroke("Left")},ddx:function(e){e.write("\\frac{d}{dx}")},arcsin:function(e){e.write("sin^{-1}"),e.typedText("(")},arccos:function(e){e.write("cos^{-1}"),e.typedText("(")},arctan:function(e){e.write("tan^{-1}"),e.typedText("(")},"A^T":function(e){e.typedText("^T"),e.keystroke("Right")},"A^-1":function(e){e.typedText("^-1"),e.keystroke("Right")},"A^2":function(e){e.typedText("^2"),e.keystroke("Right")},"a^2":function(e){e.typedText("^2"),e.keystroke("Right")},"a^3":function(e){e.typedText("^3"),e.keystroke("Right")}};t.execute=n}),define("basic/controller",["require","exports","underscore_model","tslib","flux","jquery","underscore","./model","lib/state-stack","keypad/mq-commands","i18n","dcgview-helpers/mathquill-view","lib/console","bugsnag"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e){var t=this;this.keyboardMode="main",this.fontSize=16,this.listFontSize=16,this.invertedColors=!1,this.projectorMode=!1,this.settingsMenu=!0,this.settingsMenuOpen=!1,this.language="en",this.brailleMode="none",this.stateStack=new c.default,this.dispatcher=new i.Dispatcher,this.t=function(e,n){return u.t(e,n,t.language)},this.dispatch=function(e){p.leaveBreadcrumb("dispatch",{type:e.type}),t.dispatcher.dispatch(e);for(var n;n=t._queuedCallbacks.shift();)n()},this._queuedCallbacks=[],this.stateStack=new c.default,this.dispatcher=new i.Dispatcher,this.options=e,this.model=new a.default({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,workerPool:this.options.workerPool}),this.model=this.model,this.model.setDegreeMode(e.degreeMode),this.setBrailleMode(e.brailleMode),this.setProjectorMode(e.projectorMode),this.invertedColors=e.invertedColors,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=function(){return t.dispatch({type:"render"})},this.settings=n(),this.settings.setProperty("language",this.language),
this.settings.setProperty("fontSize",this.fontSize),this.settings.setProperty("degreeMode",!!e.degreeMode),this.settings.setProperty("invertedColors",!!e.invertedColors),this.settings.setProperty("brailleMode",e.brailleMode),this.settings.setProperty("projectorMode",!!e.projectorMode),this.hookUpDispatcher(),this.dispatch({type:"render"})}return e.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},e.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch(function(){t.onEventEmitted&&t.onEventEmitted(e)})},e.prototype.getFunctionDefinition=function(){return this.options.functionDefinition},e.prototype.getSettingsMenu=function(){return this.settingsMenu},e.prototype.getBrailleMode=function(){return this.brailleMode},e.prototype.renderAsBraille=function(){return"none"!==this.brailleMode},e.prototype.setBrailleMode=function(e){this.brailleMode=e},e.prototype.getRestrictedEditing=function(){return this.options.restrictedEditing},e.prototype.getKeyboardMode=function(){return this.keyboardMode},e.prototype.getFontSize=function(){return this.fontSize},e.prototype.getListFontSize=function(){return this.listFontSize},e.prototype.getInvertedColors=function(){return this.invertedColors},e.prototype.getAdditionalFunctions=function(){return this.options.additionalFunctions},e.prototype.getTypingSlashWritesDivisionSymbol=function(){return this.options.typingSlashWritesDivisionSymbol},e.prototype.getTypingAsteriskWritesTimesSymbol=function(){return this.options.typingAsteriskWritesTimesSymbol},e.prototype.setProjectorMode=function(e){this.projectorMode=e,this.listFontSize=this.projectorMode?1.5*this.fontSize:this.fontSize},e.prototype.isProjectorMode=function(){return this.projectorMode},e.prototype.isScientificCalc=function(){var e=this.options.evaluationMode;return"scientific"===e||"singleExpressionScientific"===e},e.prototype.isFourFunctionCalc=function(){return"fourFunction"===this.options.evaluationMode},e.prototype.canUndo=function(){return this.stateStack.canUndo()},e.prototype.canRedo=function(){return this.stateStack.canRedo()},e.prototype.undo=function(e){if(this.canUndo()){this.stateStack.undo();var t=this.stateStack.getState();if(!e.restoreFocus){var n={focus:void 0};t=r.__assign({},t,{ui:n})}this.model.setState(t),this.enqueueEvent("change")}},e.prototype.redo=function(e){if(this.canRedo()){this.stateStack.redo();var t=this.stateStack.getState();if(!e.restoreFocus){var n={focus:void 0};t=r.__assign({},t,{ui:n})}this.model.setState(t),this.enqueueEvent("change")}},e.prototype.clearHistory=function(){this.stateStack.clear()},e.prototype.canBackspace=function(){var e=this.model.getFocusedExpression();return e&&(e.latex.length>0||this.model.getNumberOfExpressions()>1)},e.prototype.focusLastExpression=function(){this.model.focusLastExpression()},e.prototype.canClear=function(){return this.model.canClear()},e.prototype.shouldShowClear=function(){return this.model.shouldShowClear()},e.prototype.closeSettingsMenu=function(){this.settingsMenuOpen=!1},e.prototype.toggleSettingsMenu=function(){this.settingsMenuOpen=!this.settingsMenuOpen},e.prototype.isSettingsMenuOpen=function(){return this.settingsMenuOpen},e.prototype.isLastExpressionEmpty=function(){return this.model.isLastExpressionEmpty()},e.prototype.createAtEnd=function(){this.model.createAtEnd()},e.prototype.clearFocusedExpression=function(){this.model.clearFocusedExpression()},e.prototype.setLatexById=function(e,t){this.model.setLatexById(e,t)},e.prototype.setLatexAndBrailleById=function(e,t,n){this.model.setLatexAndBrailleById(e,t,n)},e.prototype.setLatexOfFocusedExpression=function(e){this.model.setLatexOfFocusedExpression(e)},e.prototype.conditionallyCopyPrevious=function(e){this.model.conditionallyCopyPrevious(e)},e.prototype.createBlankAfterId=function(e){this.model.createBlankAfterId(e)},e.prototype.backspaceAtFrontOfId=function(e){this.model.backspaceAtFrontOfId(e)},e.prototype.areStatesDifferentEnoughForUndoRedo=function(e,t){var n={focus:void 0};return s.isEqual(r.__assign({},e,{ui:n}),r.__assign({},t,{ui:n}))},e.prototype.commitUndoRedoDebounced=function(){var e=this.model.getState(),t=this.stateStack.getState();if(!this.areStatesDifferentEnoughForUndoRedo(e,t)){var n=(new Date).getTime();n-this._lastDebouncedTime<1e3?this.stateStack.replaceState(e):this.stateStack.addState(e),this._lastDebouncedTime=n,this.enqueueEvent("change")}},e.prototype.commitUndoRedoSynchronously=function(){var e=this.model.getState(),t=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,t)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))},e.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},e.prototype.getFocusedMathquill=function(){if(this.model.getFocusedExpressionId())return h.default.getFocusedMathquill()},e.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill=function(){var e=this.getFocusedMathquill();return e?e:(this.isLastExpressionEmpty()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())},e.prototype.typeIntoFocusedMathquill=function(e){var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&(t.typedText(e),this.setLatexOfFocusedExpression(t.latex()),this.model.markShouldDebounceUndoRedo())},e.prototype.pressKeyInFocusedMathquill=function(e,t){var n=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();if(n)if("Up"===e||"Down"===e||"Left"===e||"Right"===e){var r=o(n.el()),i=r.find(".dcg-mq-selection"),s=1===i.length&&i.parent().parent()[0]===r[0]&&1===i.parent().children().length;if(("Up"===e||"Down"===e)&&s)return n.keystroke(e,t),void this.moveFocusInDirection(e);var a=r.find(".dcg-mq-cursor")[0];if(!a)return void n.keystroke(e,t);var c=a.previousSibling||a.parentElement;n.keystroke(e,t);var l=a.previousSibling||a.parentElement;c===l&&this.moveFocusInDirection(e)}else"Enter"===e?this.handleEnter():"Backspace"===e?this.attemptToMoveFocusWithBackspace()||(n.keystroke(e,t),this.setLatexOfFocusedExpression(n.latex())):"Delete"===e?(n.keystroke(e,t),this.setLatexOfFocusedExpression(n.latex())):(n.keystroke(e,t),this.setLatexOfFocusedExpression(n.latex()))},e.prototype.moveFocusInDirection=function(e){var t=this.model.getFocusedExpressionId();t&&("Up"===e?this.model.focusPrevById(t):"Down"===e&&this.model.focusNextById(t))},e.prototype.handleEnter=function(){if(!this.model.isSingleExpression()){var e=this.model.getFocusedExpressionId();e&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))}},e.prototype.attemptToMoveFocusWithBackspace=function(){var e=this.model.getFocusedExpression();if(!e)return!1;var t=e.latex,n=e.id;return""===t&&(this.backspaceAtFrontOfId(n),!0)},e.prototype.executeCommandInFocusedMathquill=function(e){var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&(l.execute(t,e),this.setLatexOfFocusedExpression(t.latex()))},e.prototype.syncPublicSettings=function(){this.settings.setProperty("language",this.language),this.settings.setProperty("fontSize",this.fontSize),this.settings.setProperty("degreeMode",this.model.getDegreeMode()),this.settings.setProperty("invertedColors",this.invertedColors),this.settings.setProperty("brailleMode",this.brailleMode),this.settings.setProperty("projectorMode",this.projectorMode)},e.prototype.hookUpDispatcher=function(){var e=this;this.dispatcher.register(function(t){e.enqueueEvent("render");var n=!1,r=e.getRestrictedEditing();switch(t.type){case"keypad/shift":e.updateKeyboardMode("capitalQwerty"===e.keyboardMode?"qwerty":"capitalQwerty");break;case"undo":r||(e.undo({restoreFocus:"keyboard-shortcut"===t.source}),n=!0);break;case"redo":r||(e.redo({restoreFocus:"keyboard-shortcut"===t.source}),n=!0);break;case"clear-history":e.clearHistory();break;case"set-state-from-api":t.opts.allowUndo||e.clearHistory(),e.model.setStateFromAPI(t.state);break;case"main":e.updateKeyboardMode("main");break;case"ABC":e.options.qwertyKeyboard?e.updateKeyboardMode("qwerty"):e.updateKeyboardMode("letters");break;case"functions":e.updateKeyboardMode("functions");break;case"degrees":e.model.setDegreeMode(!e.model.getDegreeMode());break;case"update-degree-mode":e.model.setDegreeMode(!!t.mode);break;case"update-font-size":var i=t.size;if("number"!=typeof i&&(i=parseInt(i,10)),isNaN(i))return;e.fontSize=i;break;case"update-inverted-colors":e.invertedColors=!!t.mode;break;case"update-projector-mode":e.setProjectorMode(!!t.mode);break;case"update-language":var o=t.language;"en"!==o&&Desmos.supportedLanguages.indexOf(o)===-1?d.warn("Translation for '"+o+"' isn't currently available. Using '"+e.language+"' instead."):e.language=o;break;case"set-blank":t.opts.allowUndo||e.clearHistory(),e.model.clear(),e.focusLastExpression();break;case"clear":e.model.clearFocusedExpression();break;case"set-braille-mode":var s=t.mode;"nemeth"!==s&&"ueb"!==s&&"none"!==s?d.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '"+s+"'."):(e.model.clearCachedBrailleValues(),e.setBrailleMode(t.mode));break;case"update-latex":e.model.markShouldDebounceUndoRedo(),e.setLatexById(t.id,t.latex);break;case"update-latex-from-braille":e.model.markShouldDebounceUndoRedo(),e.setLatexAndBrailleById(t.id,t.latex,t.braille);break;case"focusin":e.model.setFocusedById(t.id,!0);break;case"focusout":e.model.setFocusedById(t.id,!1);break;case"focus-first-expression":e.model.focusFirstExpression();break;case"focus-prev-expression":e.moveFocusInDirection("Up");break;case"focus-next-expression":e.moveFocusInDirection("Down");break;case"insert-blank-expression":e.handleEnter();break;case"backspace-from-braille":e.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":e.typeIntoFocusedMathquill(t.text);break;case"keypad/press-key":e.pressKeyInFocusedMathquill(t.key,t.evt);break;case"keypad/custom-command":e.executeCommandInFocusedMathquill(t.command);break;case"toggle-settings-menu":e.toggleSettingsMenu();break;case"close-settings-menu":e.closeSettingsMenu();break;case"render":break;default:var a=t;return a}e.runAfterDispatch(function(){return e.syncPublicSettings()}),n||(e.model.getShouldDebounceUndoRedo()?(e.commitUndoRedoDebounced(),e.model.clearShouldDebounceUndoRedo()):e.commitUndoRedoSynchronously())})},e}();t.default=f}),define("basic/dcgview-basic",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.t=this.controller.t},t}(r.Class);t.DCGViewBasic=i}),define("keypad/dcgview-keypad",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t}(r.Class);t.default=i}),define("loadcss!keypad/control-bar",function(){}),define("keypad/control-bar",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./control-bar"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-keypad-control-bar dcg-do-not-blur"),role:r.const("group"),"aria-label":function(){return e.controller.t("Control Bar")}},this.children)},t}(i.default);t.default=o}),define("loadcss!keypad/control-btn",function(){}),define("keypad/control-btn",["require","exports","tslib","dcgview","loadcss!./control-btn"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-keypad-control-btn":!0,"dcg-disabled":e.isDisabled(),"dcg-selected":!e.isDisabled()&&e.isSelected(),"dcg-selectable-btn":!e.isDisabled()&&e.isSelectable(),"dcg-narrow-control-btn":e.props.narrowButton&&e.props.narrowButton()}},didMount:this.bindFn(this.didMount),role:r.const("button"),"aria-disabled":function(){return e.isDisabled()||void 0},"aria-label":function(){return e.getAriaLabel()},"aria-haspopup":function(){return e.hasPopup()||void 0},"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":function(){return e.hasPopup()?void 0:e.isDisabled()&&e.isSelected()},"aria-expanded":function(){return e.hasPopup()?!e.isDisabled()&&e.isSelected():void 0},tabindex:this.bindFn(this.getTabIndex)},this.children)},t.prototype.getTabIndex=function(){return this.isDisabled()?void 0:this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0},t.prototype.handleTap=function(e){this.isDisabled()||this.props.onTap(e)},t.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},t.prototype.hasPopup=function(){return this.props.ariaPopup?this.props.ariaPopup():this.props.command()},t.prototype.isDisabled=function(){return!!this.props.disabled&&this.props.disabled()},t.prototype.isSelected=function(){return!!this.props.selected&&this.props.selected()},t.prototype.isSelectable=function(){return!!this.props.selectable&&this.props.selectable()},t.prototype.didMount=function(e){this.props.didMount&&this.props.didMount(e)},t}(r.Class);t.default=i}),define("loadcss!basic/settings-menu",function(){}),define("basic/settings-menu",["require","exports","keys","tslib","dcgview","./dcgview-basic","jquery","loadcss!./settings-menu"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){return{"dcg-settings-dropdown":!0,"dcg-popover":!0}},role:i.const("complementary"),"aria-label":i.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},i.createElement("div",{class:i.const("dcg-popover-interior")},i.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":e.controller.isProjectorMode()}},role:i.const("button"),onTap:this.bindFn(this.onToggleProjectorMode),tabindex:i.const(0),"aria-label":function(){return e.controller.t("Projector Mode")},"aria-pressed":function(){return e.controller.isProjectorMode()}},function(){return e.controller.t("Projector Mode")}),i.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-braille-container":!0}}},i.createElement("div",{class:i.const("dcg-group-title")},i.const("Braille Mode")),i.createElement("div",{role:i.const("group"),"aria-label":function(){return e.controller.t("Braille Mode")},class:i.const("dcg-braille-options-buttons")},i.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":e.isLatex()}},role:i.const("button"),onTap:function(){return e.setBrailleMode("none")},tabindex:i.const(0),"aria-label":function(){return e.controller.t("Off")},"aria-pressed":function(){return e.isLatex()}},function(){return e.controller.t("Off")}),i.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":e.isNemeth()}},role:i.const("button"),onTap:function(){return e.setBrailleMode("nemeth")},tabindex:i.const(0),"aria-label":function(){return e.controller.t("Nemeth")},"aria-pressed":function(){return e.isNemeth()}},function(){return e.controller.t("Nemeth")}),i.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":e.isUEB()}},role:i.const("button"),onTap:function(){return e.setBrailleMode("ueb")},tabindex:i.const(0),"aria-label":function(){return e.controller.t("UEB")},"aria-pressed":function(){return e.isUEB()}},function(){return e.controller.t("UEB")}))),i.createElement("div",{role:i.const("checkbox"),tabindex:i.const(0),onTap:this.bindFn(this.onToggleInvertedColors),"aria-checked":function(){return e.controller.getInvertedColors()},"aria-label":function(){return e.controller.t("Reverse Contrast")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-checked":e.controller.getInvertedColors(),"dcg-checkbox-container":!0}},handleEvent:i.const(!0)},i.createElement("span",{class:i.const("dcg-checkbox-box")},i.createElement("i",{class:i.const("dcg-icon-check")})),i.createElement("span",{class:i.const("dcg-checkbox-label")},function(){return e.controller.t("Reverse Contrast")}))))},t.prototype.didUnmountSettingsDropdown=function(){s(document).off(".dcg-settings-view")},t.prototype.didMountSettingsDropdown=function(e){var t=this;this.settingsGroupNode=e,s(document).on("dcg-tapstart.dcg-settings-view",function(e){0===s(e.target).closest(".dcg-basic-settings-container").length&&t.controller.dispatch({type:"close-settings-menu"})}),s(document).on("keydown.dcg-settings-view",function(e){if("Esc"===n.lookup(e)&&(t.controller.dispatch({type:"close-settings-menu"}),t.props.settingsButtonNode().focus()),"Tab"===n.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var r=document.activeElement,i=s(t.props.settingsButtonNode()),o=s(t.settingsGroupNode).find(".dcg-settings-menu-option:last");e.shiftKey||r!==o[0]?e.shiftKey&&r===i[0]&&(o.focus(),e.preventDefault(),e.stopPropagation()):(i.focus(),e.preventDefault(),e.stopPropagation())}})},t.prototype.setBrailleMode=function(e){this.controller.dispatch({type:"set-braille-mode",mode:e})},t.prototype.isNemeth=function(){return"nemeth"===this.controller.getBrailleMode()},t.prototype.isUEB=function(){return"ueb"===this.controller.getBrailleMode()},t.prototype.isLatex=function(){return"none"===this.controller.getBrailleMode()},t.prototype.onToggleInvertedColors=function(){var e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})},t.prototype.onToggleProjectorMode=function(){this.controller.dispatch({type:"update-projector-mode",mode:!this.controller.isProjectorMode()})},t}(o.DCGViewBasic);t.SettingsMenu=a}),define("loadcss!basic/keypad/settings-control-button",function(){}),define("basic/keypad/settings-control-button",["require","exports","tslib","dcgview","keypad/control-btn","basic/dcgview-basic","basic/settings-menu","loadcss!./settings-control-button"],function(e,t,n,r,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement("div",{class:r.const("dcg-basic-settings-container")},r.createElement(i.default,{didMount:function(t){return e.settingsButtonNode=t},command:this.const("settings"),ariaLabel:function(){return t.t("settings")},onTap:this.bindFn(this.onToggleSettingsMenu),selected:function(){return e.controller.isSettingsMenuOpen()},ariaPopup:this.const(!0)},r.createElement("i",{class:r.const("dcg-icon-wrench")})),r.createElement(a,{predicate:function(){return e.controller.isSettingsMenuOpen()}},function(){return r.createElement(s.SettingsMenu,{controller:e.props.controller,settingsButtonNode:function(){return e.settingsButtonNode}})}))},t.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},t}(o.DCGViewBasic);t.default=c}),define("basic/keypad/fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./settings-control-button","basic/dcgview-basic"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(o.default,{command:this.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")})),r.createElement(o.default,{command:this.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")})),r.createElement(c,{predicate:function(){return t.shouldShowClear()}},function(){return r.createElement(o.default,{command:e.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")})}),r.createElement(c,{predicate:function(){return!t.shouldShowClear()}},function(){return r.createElement(o.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.t("clear all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return t.t("clear all")})}),r.createElement(o.default,{command:this.const("backspace"),ariaLabel:function(){return t.t("backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},r.createElement("i",{class:r.const("dcg-icon-delete")})),r.createElement(c,{predicate:function(){return e.props.controller().getSettingsMenu()}},function(){return r.createElement(s.default,{controller:e.props.controller})}))},t.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},t}(a.DCGViewBasic);t.default=l}),define("loadcss!keypad/control-toggle",function(){}),define("keypad/control-toggle",["require","exports","lib/aria","tslib","dcgview","./dcgview-keypad","loadcss!./control-toggle"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){return{"dcg-keypad-control-toggle":!0,"dcg-toggled":e.props.toggled()}},role:i.const("button"),tabindex:i.const("0"),"aria-label":this.bindFn(this.getAriaLabel),"aria-pressed":this.props.toggled,onTap:this.bindFn(this.handleTap)},i.createElement("div",{class:i.const("dcg-ctrl-toggle-option")},this.props.defaultOption),i.createElement("div",{class:i.const("dcg-ctrl-toggle-option")},this.props.toggledOption),i.createElement("div",{class:i.const("dcg-ctrl-toggle-cover")}))},t.prototype.getAriaLabel=function(){var e={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.t("__toggled__ selected. Press Enter to switch to __default__.",e):this.controller.t("__default__ selected. Press Enter to switch to __toggled__.",e)},t.prototype.handleTap=function(){this.props.toggled()?n.alert(this.props.defaultAriaLabel()):n.alert(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())},t}(o.default);t.default=s}),define("basic/keypad/scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle","./settings-control-button"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r.Components.If,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(o.default,{command:this.const("main"),selected:function(){return"main"===t.getKeyboardMode()},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"main"})}},function(){return t.t("main")}),r.createElement(o.default,{command:this.const("ABC"),selected:function(){return["qwerty","capitalQwerty","letters"].indexOf(t.getKeyboardMode())!==-1},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return t.t("A B C")},onTap:function(){return t.dispatch({type:"ABC"})}},function(){return t.t("abc")}),r.createElement(o.default,{command:this.const("functions"),selected:function(){return["functions","restrictedFunctions"].indexOf(t.getKeyboardMode())!==-1},ariaLabel:function(){return t.t("Functions")},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"functions"})}},function(){return t.t("func")}),r.createElement(a.default,{command:this.const("degrees"),toggled:function(){return e.model.getDegreeMode()},defaultOption:function(){return t.t("rad")},toggledOption:function(){return t.t("deg")},defaultAriaLabel:function(){return t.t("Radians")},toggledAriaLabel:function(){return t.t("Degrees")},onTap:function(){return t.dispatch({type:"degrees"})},controller:this.props.controller}),r.createElement(l,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("Undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")}))}),r.createElement(l,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("Redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")}))}),r.createElement(l,{predicate:function(){return t.shouldShowClear()}},function(){return r.createElement(o.default,{command:e.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")})}),r.createElement(l,{predicate:function(){return!t.shouldShowClear()}},function(){return r.createElement(o.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.t("clear all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return t.t("clear all")})}),r.createElement(l,{predicate:function(){return e.props.controller().getSettingsMenu()}},function(){return r.createElement(c.default,{controller:e.props.controller})}))},t}(s.DCGViewBasic);t.default=u}),define("basic/keypad/single-expression-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(a.default,{command:this.const("degrees"),toggled:function(){return e.model.getDegreeMode()},defaultOption:function(){return t.t("rad")},toggledOption:function(){return t.t("deg")},defaultAriaLabel:function(){return t.t("Radians")},toggledAriaLabel:function(){return t.t("Degrees")},onTap:function(){return t.dispatch({type:"degrees"})},controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-spacer")}),r.createElement(c,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("Undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")}))}),r.createElement(c,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("Redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")}))}),r.createElement("div",{class:r.const("dcg-spacer")}),r.createElement(o.default,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")}),r.createElement(o.default,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:function(){return t.t("backspace")},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},r.createElement("i",{class:r.const("dcg-icon-delete")})))},t}(s.DCGViewBasic);t.default=l}),define("loadcss!keypad/btn",function(){}),define("keypad/btn",["require","exports","tslib","dcgview","loadcss!./btn"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-keypad-btn-container"),style:function(){return{"flex-grow":e.getColSpan()}}},r.createElement("a",{role:r.const("button"),class:function(){return{"dcg-keypad-btn":!0,"dcg-keypad-btn-dark":e.isDark(),"dcg-active":e.isActive()}},"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),onTap:this.props.onTap},r.createElement("span",{class:r.const("dcg-keypad-btn-content")},this.children)))},t.prototype.isDark=function(){return!!this.props.dark&&this.props.dark()},t.prototype.isActive=function(){return!!this.props.active&&this.props.active()},t.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},t.prototype.getColSpan=function(){return this.props.colspan?this.props.colspan():void 0},t}(r.Class);t.default=i}),define("keypad/keys",["require","exports","./btn","dcgview-helpers/static-mathquill-view","dcgview","i18n"],function(e,t,n,r,i,o){"use strict";function s(e){return function(t,o,s){return void 0===s&&(s=1),i.createElement(n.default,{command:i.const(e.command||t),ariaLabel:i.const(e.ariaLabel||t),colspan:i.const(s),onTap:function(){return o({type:"keypad/type-text",text:e.typedText||t})}},i.createElement(r.default,{latex:i.const(e.content||t)}))}}function a(e){return function(t,o,s){return void 0===s&&(s=1),i.createElement(n.default,{command:i.const(t),ariaLabel:i.const(e.ariaLabel||t),colspan:i.const(s),onTap:function(){return o({type:"keypad/type-text",text:t+"("})}},i.createElement(r.default,{latex:i.const(t)}))}}function c(e){return function(t,o,s){return void 0===s&&(s=1),i.createElement(n.default,{command:i.const(e.command),ariaLabel:i.const(e.ariaLabel||e.command),colspan:i.const(s),onTap:function(){o({type:"keypad/custom-command",command:e.command})}},i.createElement(r.default,{latex:i.const(e.content)}))}}function l(e,t,n){void 0===n&&(n=1);var r=e.dispatch;return u[t](t,r,n)}Object.defineProperty(t,"__esModule",{value:!0});var u={"(":s({content:"(",command:"leftparen",ariaLabel:o.t("Left Parenthesis")}),")":s({content:")",command:"rightparen",ariaLabel:o.t("Right Parenthesis")}),sqrt:s({content:"√",ariaLabel:o.t("Square Root")
}),"/":s({content:"÷",typedText:"/",ariaLabel:o.t("Divide")}),"*":s({content:"×",typedText:"*",ariaLabel:o.t("Times")}),"-":s({content:"-",typedText:"-",ariaLabel:o.t("Minus")}),"+":s({content:"+",typedText:"+",ariaLabel:o.t("Plus")}),".":s({content:".",command:"decimal",ariaLabel:o.t("Decimal")}),ans:function(e,t,r){return void 0===r&&(r=1),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Answer")},colspan:i.const(r),onTap:function(){return t({type:"keypad/type-text",text:e})}},i.const("ans"))},enter:function(e,t,r){return void 0===r&&(r=1),i.createElement(n.default,{command:i.const(e),dark:i.const(!0),ariaLabel:function(){return o.t("Enter")},colspan:i.const(r),onTap:function(){return t({type:"keypad/press-key",key:"Enter"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-enter")}))},shift:function(e,t,r){return void 0===r&&(r=1),i.createElement(n.default,{command:i.const(e),active:i.const(!0),ariaLabel:function(){return o.t("Shift")},colspan:i.const(r),onTap:function(){return t({type:"keypad/shift"})}},i.createElement("i",{class:i.const("dcg-icon-shift")}))},backspace:function(e,t,r){return void 0===r&&(r=1),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Backspace")},colspan:i.const(r),onTap:function(){return t({type:"keypad/press-key",key:"Backspace"})}},i.createElement("i",{class:i.const("dcg-icon-delete")}))},pi:s({content:"\\pi",ariaLabel:o.t("Pi")}),alpha:s({content:"\\alpha",ariaLabel:o.t("Alpha")}),beta:s({content:"\\beta",ariaLabel:o.t("Beta")}),"a^2":c({command:"a^2",content:"a^2",ariaLabel:o.t("Squared")}),"a^3":c({command:"a^3",content:"a^3",ariaLabel:o.t("Cubed")}),"x^3":c({command:"a^3",content:"x^3",ariaLabel:o.t("Cubed")}),"a^b":s({content:"a^b",typedText:"^",ariaLabel:o.t("Superscript")}),"a/b":s({content:"\\frac{a}{b}",typedText:"/",ariaLabel:o.t("A over B")}),"x^2":c({command:"a^2",content:"x^2",ariaLabel:o.t("Squared")}),"x^y":s({content:"x^y",typedText:"^",ariaLabel:o.t("Superscript")}),"x/y":s({content:"\\frac{x}{y}",typedText:"/",ariaLabel:o.t("A over B")}),nthroot:c({command:"nthroot",content:"\\sqrt[n]{}",ariaLabel:o.t("Nth Root")}),ythroot:c({command:"nthroot",content:"\\sqrt[y]{}",ariaLabel:o.t("Yth Root")}),sin:a({ariaLabel:o.t("Sine")}),cos:a({ariaLabel:o.t("Cosine")}),tan:a({ariaLabel:o.t("Tangent")}),"|a|":s({typedText:"|",ariaLabel:o.t("Absolute Value")}),"|x|":s({typedText:"|",ariaLabel:o.t("Absolute Value")}),ln:a({ariaLabel:o.t("Natural Log")}),log:a({ariaLabel:o.t("Log")}),quantile:a({ariaLabel:o.t("Quantile")}),quartile:a({ariaLabel:o.t("Quartile")}),var:a({}),nCr:a({}),sec:a({ariaLabel:o.t("Secant")}),csc:a({ariaLabel:o.t("Cosecant")}),cot:a({ariaLabel:o.t("Cotangent")}),loga:c({command:"loga",content:"log_a",ariaLabel:o.t("Log A")}),stdev:a({ariaLabel:o.t("Standard Deviation")}),mad:a({}),nPr:a({}),arcsin:c({command:"arcsin",content:"sin^{-1}",ariaLabel:o.t("Inverse Sine")}),arccos:c({command:"arccos",content:"cos^{-1}",ariaLabel:o.t("Inverse Cosine")}),arctan:c({command:"arctan",content:"tan^{-1}",ariaLabel:o.t("Inverse Tangent")}),mean:a({ariaLabel:o.t("Mean")}),stdevp:a({ariaLabel:o.t("Standard Deviation of Population")}),mod:a({}),"e^x":s({typedText:"e^",ariaLabel:o.t("Exponent")}),sum:s({content:"\\sum",ariaLabel:o.t("Sum")}),prod:s({content:"\\prod",ariaLabel:o.t("Product")}),floor:a({ariaLabel:o.t("Floor")}),round:a({ariaLabel:o.t("Round")}),abs:a({ariaLabel:o.t("Absolute Value")}),"!":s({content:"!",ariaLabel:o.t("Factorial")}),median:a({ariaLabel:o.t("Median")}),lcm:a({}),gcf:a({}),ddx:c({command:"ddx",content:"\\frac{d}{dx}"}),int:s({content:"\\int",ariaLabel:o.t("Integral")}),"%":s({content:"\\%",ariaLabel:o.t("Percent Of")}),exp:s({}),"A^-1":c({command:"A^-1",content:"A^{-1}",ariaLabel:o.t("Inverse")}),"A^T":c({command:"A^T",content:"A^T",ariaLabel:o.t("Transpose")}),"A^2":c({command:"A^2",content:"A^2",ariaLabel:o.t("Squared")}),det:a({ariaLabel:"Determinant"}),"A^n":s({content:"A^n",typedText:"^",ariaLabel:o.t("Exponent")}),a:s({}),b:s({}),c:s({}),d:s({}),e:s({}),f:s({}),g:s({}),h:s({}),i:s({}),j:s({}),k:s({}),l:s({}),m:s({}),n:s({}),o:s({}),p:s({}),q:s({}),r:s({}),s:s({}),t:s({}),u:s({}),v:s({}),w:s({}),x:s({}),y:s({}),z:s({}),A:s({}),B:s({}),C:s({}),D:s({}),E:s({}),F:s({}),G:s({}),H:s({}),I:s({}),J:s({}),K:s({}),L:s({}),M:s({}),N:s({}),O:s({}),P:s({}),Q:s({}),R:s({}),S:s({}),T:s({}),U:s({}),V:s({}),W:s({}),X:s({}),Y:s({}),Z:s({}),0:s({}),1:s({}),2:s({}),3:s({}),4:s({}),5:s({}),6:s({}),7:s({}),8:s({}),9:s({}),",":s({}),"=":s({}),"[":s({}),"]":s({}),'"':s({}),"'":s({})};t.view=l}),define("loadcss!keypad/keypad",function(){}),define("keypad/keypad",["require","exports","tslib","dcgview","loadcss!./keypad"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this.props.controller();return r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.t("keypad")},class:r.const("dcg-basic-keypad dcg-do-not-blur")},this.children)},t}(r.Class);t.default=i}),define("loadcss!keypad/row",function(){}),define("keypad/row",["require","exports","tslib","dcgview","loadcss!./row"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement("div",{class:r.const("dcg-keypad-row")},this.children)},t}(r.Class);t.default=i}),define("basic/keypad/fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"(",this.parenColspan()),o.view(this,")",this.parenColspan()),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),o.view(this,"/")),r.createElement(a.default,null,o.view(this,"7"),o.view(this,"8"),o.view(this,"9"),o.view(this,"*")),r.createElement(a.default,null,o.view(this,"4"),o.view(this,"5"),o.view(this,"6"),o.view(this,"-")),r.createElement(a.default,null,o.view(this,"1"),o.view(this,"2"),o.view(this,"3"),o.view(this,"+")),r.createElement(a.default,null,o.view(this,"0"),o.view(this,"."),o.view(this,"ans"),o.view(this,"enter")))},t.prototype.parenColspan=function(){return this.controller.getAdditionalFunctions().length>1?.5:1},t.prototype.makeAdditionalFunctionKey=function(e){var t=this.controller.getAdditionalFunctions()[e];return"exponent"===t?o.view(this,"a^b"):"percent"===t?o.view(this,"%"):"sqrt"===t?o.view(this,"sqrt"):void 0},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/single-expression-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"("),o.view(this,")"),o.view(this,"x^2"),o.view(this,"sqrt"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"x^3"),o.view(this,"x^y"),o.view(this,"ythroot")),r.createElement(a.default,null,o.view(this,"7"),o.view(this,"8"),o.view(this,"9"),o.view(this,"/"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"pi"),o.view(this,"e^x"),o.view(this,"!")),r.createElement(a.default,null,o.view(this,"4"),o.view(this,"5"),o.view(this,"6"),o.view(this,"*"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"log"),o.view(this,"ln"),o.view(this,"|x|")),r.createElement(a.default,null,o.view(this,"1"),o.view(this,"2"),o.view(this,"3"),o.view(this,"-"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan")),r.createElement(a.default,null,o.view(this,"0"),o.view(this,"."),o.view(this,"x/y"),o.view(this,"+"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"arcsin"),o.view(this,"arccos"),o.view(this,"arctan")))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"7"),o.view(this,"8"),o.view(this,"9"),o.view(this,"/"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"a^2"),o.view(this,"a^b"),o.view(this,"a/b"),o.view(this,"backspace")),r.createElement(a.default,null,o.view(this,"4"),o.view(this,"5"),o.view(this,"6"),o.view(this,"*"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"sqrt"),o.view(this,"nthroot"),o.view(this,"("),o.view(this,")")),r.createElement(a.default,null,o.view(this,"1"),o.view(this,"2"),o.view(this,"3"),o.view(this,"-"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan"),o.view(this,"pi")),r.createElement(a.default,null,o.view(this,"0"),o.view(this,"."),o.view(this,"ans"),o.view(this,"+"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"|a|"),o.view(this,"ln"),o.view(this,"%"),o.view(this,"enter")))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"q"),o.view(this,"w"),o.view(this,"e"),o.view(this,"r"),o.view(this,"t"),o.view(this,"y"),o.view(this,"u"),o.view(this,"i"),o.view(this,"o"),o.view(this,"p")),r.createElement(a.default,null,r.createElement("div",{class:r.const("dcg-half-width-placeholder")}),o.view(this,"a"),o.view(this,"s"),o.view(this,"d"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"j"),o.view(this,"k"),o.view(this,"l"),r.createElement("div",{class:r.const("dcg-half-width-placeholder")})),r.createElement(a.default,null,o.view(this,"shift"),o.view(this,"z"),o.view(this,"x"),o.view(this,"c"),o.view(this,"v"),o.view(this,"b"),o.view(this,"n"),o.view(this,"m"),o.view(this,","),o.view(this,"backspace")),r.createElement(a.default,null,o.view(this,"="),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter")))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"a"),o.view(this,"b"),o.view(this,"c"),o.view(this,"d"),o.view(this,"e"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"backspace")),r.createElement(a.default,null,o.view(this,"i"),o.view(this,"j"),o.view(this,"k"),o.view(this,"l"),o.view(this,"m"),o.view(this,"n"),o.view(this,"o"),o.view(this,"p"),o.view(this,"q")),r.createElement(a.default,null,o.view(this,"r"),o.view(this,"s"),o.view(this,"t"),o.view(this,"u"),o.view(this,"v"),o.view(this,"w"),o.view(this,"x"),o.view(this,"y"),o.view(this,"z")),r.createElement(a.default,null,o.view(this,"="),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,","),o.view(this,"enter")))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-capital-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),r.createElement(a.default,null,r.createElement("div",{class:r.const("dcg-half-width-placeholder")}),o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),r.createElement("div",{class:r.const("dcg-half-width-placeholder")})),r.createElement(a.default,null,o.view(this,"shift"),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.view(this,","),o.view(this,"backspace")),r.createElement(a.default,null,o.view(this,"="),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter")))},t}(i.DCGViewBasic);t.default=c});define("basic/keypad/sci-functions-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(s.default,{controller:this.props.controller},r.createElement(a.default,null,o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"ln"),o.view(this,"log"),o.view(this,"backspace")),r.createElement(a.default,null,o.view(this,"arcsin"),o.view(this,"arccos"),o.view(this,"arctan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"e^x"),o.view(this,"abs"),o.view(this,"round")),r.createElement(a.default,null,o.view(this,"mean"),o.view(this,"stdev"),o.view(this,"stdevp"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"a^b"),o.view(this,"sqrt"),o.view(this,"nthroot")),r.createElement(a.default,null,o.view(this,"nPr"),o.view(this,"nCr"),o.view(this,"!"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"e"),o.view(this,"pi"),o.view(this,"enter")))},t}(i.DCGViewBasic);t.default=c});define("basic/keypad/scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./sci-keypad","./sci-qwerty-keypad","./sci-letters-keypad","./sci-capital-qwerty-keypad","./sci-functions-keypad"],function(e,t,n,r,i,o,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=r.Components.Switch,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(u,{key:function(){return e.controller.getKeyboardMode()}},function(t){switch(t){case"qwerty":return r.createElement(s.default,{controller:e.props.controller});case"letters":return r.createElement(a.default,{controller:e.props.controller});case"capitalQwerty":return r.createElement(c.default,{controller:e.props.controller});case"functions":return r.createElement(l.default,{controller:e.props.controller});default:return r.createElement(o.default,{controller:e.props.controller})}})},t}(i.DCGViewBasic);t.default=h}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("abraham",[],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=26)}([function(e,t,n){function r(e,t){var n=i.map(e,t);return e.warnings&&(n.warnings=e.warnings),n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22);t.map=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,h,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var p,f=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){function r(e){for(var t=!1,n=0,r="",i="",o=0,s=e;o<s.length;o++){var a=s[o];if("terminal"!==a.type||!/[A-Za-z]/.test(a.value))break;r+=a.value,n++}return i=r.replace(l,"\\operatorname{$1}"),t=n>0&&i!==r,{modified:t,terminalCount:n,value:i}}function i(e){return h.indexOf(e.toLowerCase())!==-1}function o(e){if(!Array.isArray(e))throw new Error("Operator names must be an array, got "+typeof e);for(var t=0,n=e;t<n.length;t++){var r=n[t];if("string"!=typeof r)throw new Error("Operator names must be strings, found "+typeof r)}h=e,a()}function s(){h=u,l=d}function a(){l=c(h)}function c(e){var t=e.sort(function(e,t){return e.length-t.length||e.localeCompare(t)}).join("|");return new RegExp("("+t+")","g")}Object.defineProperty(t,"__esModule",{value:!0});var l,u=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","ceil","corr","cov","csch","distance","floor","gcf","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","nPr","quantile","quartile","round","sech","sign","signum","stddev","stddevp","stdDev","stdDevP","stdev","stdevp","total","var","variance","varp"],h=u,d=c(u);t.getAutoOperator=r,t.containsValue=i,t.setOperatorNames=o,t.resetOperatorNames=s},function(e,t,n){function r(e){if(!f.isSixDotCells(e))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}function i(e,n){return r(e),h.default(t.UnicodeBraille.toBrailleAscii(e),n)}function o(e,n){return n&&n.operatorNames?c.setOperatorNames(n.operatorNames):c.resetOperatorNames(),d.map(l.default(e),t.UnicodeBraille.coerceToSixDotCells)}function s(e,n){return r(e),p.default(t.UnicodeBraille.toBrailleAscii(e),n)}function a(e,n){return n&&n.operatorNames?c.setOperatorNames(n.operatorNames):c.resetOperatorNames(),d.map(u.default(e),t.UnicodeBraille.coerceToSixDotCells)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),l=n(14),u=n(15),h=n(16),d=n(0),p=n(23),f=n(25);t.nemethToLatex=i,t.latexToNemeth=o,t.uebToLatex=s,t.latexToUeb=a,t.UnicodeBraille={coerceToSixDotCells:f.coerceToSixDotCells,toBrailleAscii:f.toBrailleAscii,toExpandedBrailleAscii:f.toExpandedBrailleAscii},t.version="1.0.2"},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===s(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}for(var l=[],c=a;c<i.length;c++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(1))},function(e,t,n){function r(e){if(!e.hash)throw e;return{_diagnostic:{expected:e.hash.expected,message:e.message,text:e.hash.text,token:e.hash.token},location:e.hash.loc}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){function r(e){return{type:"terminal",value:e}}function i(e){return{type:"command",value:e}}function o(e){return{type:"greek",value:e}}function s(e){return{subscript:e._,superscript:e["^"],type:"level"}}function a(e,t){var n=[],r=e.match(/'+/);if(null!==r)for(var o=r[0].length,s=0;s<o;s++)n.push(i("\\prime"));return h(n,t)}function c(e,t){return{type:"fraction",numerator:e,denominator:t}}function l(e,t){return{name:e,type:"typeform",value:t}}function u(e,t){return{type:"radical",index:t,radicand:e}}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=r,t.command=i,t.greek=o,t.level=s,t.processPrimes=a,t.fraction=c,t.typeform=l,t.radical=u,t.group=h},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e,r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,11],r=[1,12],i=[1,13],o=[1,69],s=[1,70],a=[1,68],c=[1,38],l=[1,39],u=[1,58],h=[1,59],d=[1,60],p=[1,61],f=[1,62],m=[1,63],g=[1,64],y=[1,65],v=[1,66],b=[1,67],x=[1,40],_=[1,34],w=[1,35],E=[1,36],S=[1,37],M=[1,41],I=[1,42],k=[1,43],T=[1,44],C=[1,45],A=[1,46],P=[1,47],O=[1,48],L=[1,49],D=[1,50],N=[1,51],F=[1,52],q=[1,17],R=[1,53],j=[1,54],V=[1,55],B=[1,56],U=[1,57],z=[5,11,12,13,17,23,24],G=[5,10,11,12,13,14,16,17,19,20,22,23,24,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,81],$=[5,10,11,12,13,14,16,17,19,20,22,23,24,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,81],H=[1,75],Y=[5,10,11,12,13,14,16,17,19,20,22,23,24,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],X={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,OPEN_MODEXP:10,MODEXP_UNDER:11,MODEXP_OVER:12,CLOSE_MODEXP:13,RADICAL_INDEX:14,index_group:15,OPEN_RADICAL:16,CLOSE_RADICAL:17,level:18,LEVEL:19,BASELINE:20,frac:21,OPEN_FRAC:22,SLASH:23,CLOSE_FRAC:24,subscript_head:25,primes:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT:70,COMPARISON:71,LEVEL_WITH_COMPARISON:72,ELLIPSIS:73,COLON:74,NUMBER:75,INFINITY:76,INTEGRAL:77,FACTORIAL:78,"&":79,PRIMES:80,"?":81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"OPEN_MODEXP",11:"MODEXP_UNDER",12:"MODEXP_OVER",13:"CLOSE_MODEXP",14:"RADICAL_INDEX",16:"OPEN_RADICAL",17:"CLOSE_RADICAL",19:"LEVEL",20:"BASELINE",22:"OPEN_FRAC",23:"SLASH",24:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT",71:"COMPARISON",72:"LEVEL_WITH_COMPARISON",73:"ELLIPSIS",74:"COLON",75:"NUMBER",76:"INFINITY",77:"INTEGRAL",78:"FACTORIAL",79:"&",80:"PRIMES",81:"?"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[18,1],[18,1],[21,5],[21,4],[21,4],[21,3],[15,2],[15,1],[7,3],[7,2],[7,2],[7,2],[7,2],[7,1],[7,1],[7,1],[25,1],[25,1],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[26,1],[44,1]],performAction:function(e,t,n,r,i,o,s){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return r.group();case 3:case 29:case 33:case 34:case 35:this.$=r.group(o[a-1],o[a]);break;case 4:case 30:this.$=r.group(o[a]);break;case 8:this.$=r.modified_expression(o[a-5],o[a-3],o[a-1]);break;case 9:this.$=r.modified_expression(o[a-4],o[a-2]);break;case 10:this.$=r.modified_expression(o[a-3],o[a-1]);break;case 11:this.$=r.modified_expression(o[a-4],r.group(),o[a-1]);break;case 12:this.$=r.modified_expression(o[a-3],r.group(),o[a-1]);break;case 13:this.$=r.modified_expression(o[a-3],r.group(),r.group());break;case 14:this.$=r.modified_expression(o[a-2],r.group());break;case 15:this.$=r.modified_expression(o[a-1]);break;case 16:this.$=r.modified_expression(r.group());break;case 17:this.$=r.radical(o[a-1],o[a-3]);break;case 18:this.$=r.radical(o[a-1],r.group());break;case 19:this.$=r.radical(r.group(),o[a-2]);break;case 20:this.$=r.radical(r.group(),r.group());break;case 21:this.$=r.radical(o[a-1]);break;case 22:this.$=r.radical(r.group());break;case 23:this.$=r.level(o[a]);break;case 24:this.$=r.baseline();break;case 25:this.$=r.fraction(o[a-3],o[a-1]);break;case 26:this.$=r.fraction(o[a-2],r.group());break;case 27:this.$=r.fraction(r.group(),o[a-1]);break;case 28:this.$=r.fraction(r.group(),r.group());break;case 31:this.$=r.group(r.simple_subscript(o[a-2],o[a]),o[a-1]);break;case 32:this.$=r.simple_subscript(o[a-1],o[a]);break;case 58:this.$=r.terminal(",");break;case 59:this.$=r.terminal(".");break;case 60:this.$=r.terminal("[");break;case 61:this.$=r.terminal("\\{");break;case 62:this.$=r.terminal("(");break;case 63:this.$=r.terminal("]");break;case 64:this.$=r.terminal("\\}");break;case 65:this.$=r.terminal(")");break;case 66:this.$=r.terminal("\\langle ");break;case 67:this.$=r.terminal("\\rangle ");break;case 68:this.$=r.terminal("|");break;case 69:this.$=r.terminal("\\|");break;case 70:this.$=r.terminal(" ");break;case 71:this.$=r.command(o[a].toLowerCase());break;case 72:this.$=r.terminal(r.greek(o[a]));break;case 73:this.$=r.terminal(o[a].toLowerCase());break;case 74:this.$=r.terminal(o[a].toUpperCase());break;case 75:this.$=r.terminal("+");break;case 76:this.$=r.terminal("-");break;case 77:this.$=r.terminal("\\cdot ");break;case 78:this.$=r.terminal("\\times ");break;case 79:this.$=r.terminal("*");break;case 80:this.$=r.terminal("/");break;case 81:this.$=r.terminal("\\div ");break;case 82:this.$=r.terminal("\\%");break;case 83:this.$=r.comparison(o[a].trim());break;case 84:this.$=r.level_with_comparison(o[a].trim());break;case 85:this.$=r.terminal("\\ldots ");break;case 86:this.$=r.terminal(":");break;case 87:this.$=r.terminal(o[a]);break;case 88:this.$=r.terminal("\\infty ");break;case 89:this.$=r.terminal("\\int ");break;case 90:this.$=r.terminal("!");break;case 91:this.$=r.terminal("\\&");break;case 92:this.$=r.primes(o[a]);break;case 93:this.$=r.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:n,14:r,16:i,18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{1:[3]},{5:[1,71]},{1:[2,2]},t(z,[2,4],{6:4,7:5,8:6,9:7,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,21:32,18:33,4:72,10:n,14:r,16:i,19:o,20:s,22:a,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U}),t(G,[2,5]),t(G,[2,6]),t(G,[2,7]),t($,[2,36],{26:73,27:74,75:q,80:H}),t(G,[2,37],{26:76,80:H}),t(G,[2,38],{26:77,80:H}),{4:78,6:4,7:5,8:6,9:7,10:n,13:[1,79],14:r,16:i,18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{7:82,15:80,16:[1,81],18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,
31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{4:83,6:4,7:5,8:6,9:7,10:n,14:r,16:i,17:[1,84],18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},t(Y,[2,39]),t(Y,[2,40]),t(Y,[2,41]),t(Y,[2,87]),t(Y,[2,42]),t(Y,[2,43]),t(Y,[2,44]),t(Y,[2,45]),t(Y,[2,46]),t(Y,[2,47]),t(Y,[2,48]),t(Y,[2,49]),t(Y,[2,50]),t(Y,[2,51]),t(Y,[2,52]),t(Y,[2,53]),t(Y,[2,54]),t(Y,[2,55]),t(Y,[2,56]),t(Y,[2,57]),t(Y,[2,71]),t(Y,[2,72]),t(Y,[2,73]),t(Y,[2,74]),t(Y,[2,58]),t(Y,[2,59]),t(Y,[2,70]),t(Y,[2,75]),t(Y,[2,76]),t(Y,[2,77]),t(Y,[2,78]),t(Y,[2,79]),t(Y,[2,80]),t(Y,[2,81]),t(Y,[2,82]),t(Y,[2,83]),t(Y,[2,84]),t(Y,[2,85]),t(Y,[2,86]),t(Y,[2,88]),t(Y,[2,89]),t(Y,[2,90]),t(Y,[2,91]),t(Y,[2,93]),t(Y,[2,60]),t(Y,[2,61]),t(Y,[2,62]),t(Y,[2,63]),t(Y,[2,64]),t(Y,[2,65]),t(Y,[2,66]),t(Y,[2,67]),t(Y,[2,68]),t(Y,[2,69]),{4:85,6:4,7:5,8:6,9:7,10:n,14:r,16:i,18:33,19:o,20:s,21:32,22:a,23:[1,86],25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},t(Y,[2,23]),t(Y,[2,24]),{1:[2,1]},t(z,[2,3]),t($,[2,33],{27:87,75:q}),t(G,[2,32]),t(G,[2,92]),t(G,[2,34]),t(G,[2,35]),{11:[1,88],12:[1,89],13:[1,90]},t(G,[2,16]),{16:[1,91]},{4:92,6:4,7:5,8:6,9:7,10:n,14:r,16:i,17:[1,93],18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{7:82,15:94,16:[2,30],18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{17:[1,95]},t(G,[2,22]),{23:[1,96]},{4:97,6:4,7:5,8:6,9:7,10:n,14:r,16:i,18:33,19:o,20:s,21:32,22:a,24:[1,98],25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},t(G,[2,31]),{4:99,6:4,7:5,8:6,9:7,10:n,12:[1,100],13:[1,101],14:r,16:i,18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{4:102,6:4,7:5,8:6,9:7,10:n,14:r,16:i,18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},t(G,[2,15]),{4:103,6:4,7:5,8:6,9:7,10:n,14:r,16:i,17:[1,104],18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{17:[1,105]},t(G,[2,20]),{16:[2,29]},t(G,[2,21]),{4:106,6:4,7:5,8:6,9:7,10:n,14:r,16:i,18:33,19:o,20:s,21:32,22:a,24:[1,107],25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},{24:[1,108]},t(Y,[2,28]),{12:[1,109],13:[1,110]},{4:111,6:4,7:5,8:6,9:7,10:n,13:[1,112],14:r,16:i,18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},t(G,[2,14]),{13:[1,113]},{17:[1,114]},t(G,[2,19]),t(G,[2,18]),{24:[1,115]},t(Y,[2,26]),t(Y,[2,27]),{4:116,6:4,7:5,8:6,9:7,10:n,13:[1,117],14:r,16:i,18:33,19:o,20:s,21:32,22:a,25:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:d,51:p,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:_,60:w,61:E,62:S,63:M,64:I,65:k,66:T,67:C,68:A,69:P,70:O,71:L,72:D,73:N,74:F,75:q,76:R,77:j,78:V,79:B,81:U},t(G,[2,10]),{13:[1,118]},t(G,[2,13]),t(G,[2,12]),t(G,[2,17]),t(Y,[2,25]),{13:[1,119]},t(G,[2,9]),t(G,[2,11]),t(G,[2,8])],defaultActions:{3:[2,2],71:[2,1],94:[2,29]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,c=0,l=0,u=2,h=1,d=i.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(f.yy[m]=this.yy[m]);p.setInput(e,f.yy),f.yy.lexer=p,f.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var g=p.yylloc;i.push(g);var y=p.options&&p.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,x,_,w,E,S,M,I,k=function(){var e;return e=p.lex()||h,"number"!=typeof e&&(e=t.symbols_[e]||e),e},T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:(null!==v&&"undefined"!=typeof v||(v=k()),_=o[x]&&o[x][v]),"undefined"==typeof _||!_.length||!_[0]){var C="";I=[];for(E in o[x])this.terminals_[E]&&E>u&&I.push("'"+this.terminals_[E]+"'");C=p.showPosition?"Parse error on line "+(a+1)+":\n"+p.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(C,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:g,expected:I})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+v);switch(_[0]){case 1:n.push(v),r.push(p.yytext),i.push(p.yylloc),n.push(_[1]),v=null,b?(v=b,b=null):(c=p.yyleng,s=p.yytext,a=p.yylineno,g=p.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[_[1]][1],T.$=r[r.length-S],T._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},y&&(T._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),w=this.performAction.apply(T,[s,c,a,f.yy,_[1],r,i].concat(d)),"undefined"!=typeof w)return w;S&&(n=n.slice(0,-1*S*2),r=r.slice(0,-1*S),i=i.slice(0,-1*S)),n.push(this.productions_[_[1]][0]),r.push(T.$),i.push(T._$),M=o[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},W=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if(n=this._input.match(this.rules[i[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(e=this.test_match(n,i[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,i[r]),e!==!1&&e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:return this.begin("modexp"),10;case 1:return 20;case 2:return this.begin("modexp"),10;case 3:return 11;case 4:return 12;case 5:return this.popState(),13;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 74;case 24:return 70;case 25:return 72;case 26:return 72;case 27:return 72;case 28:return 72;case 29:return 72;case 30:return 72;case 31:return 72;case 32:return 72;case 33:return 71;case 34:return 72;case 35:return 72;case 36:return 71;case 37:return 71;case 38:return 71;case 39:return 71;case 40:return 71;case 41:return 71;case 42:return 71;case 43:return 71;case 44:return 71;case 45:return 73;case 46:return 19;case 47:return 47;case 48:return 20;case 49:return 80;case 50:return 60;case 51:return 14;case 52:return this.begin("radical"),16;case 53:return this.popState(),17;case 54:return 17;case 55:return 77;case 56:return 79;case 57:return 78;case 58:return 59;case 59:return 59;case 60:return t.yytext=this.matches[1],75;case 61:return 22;case 62:return 23;case 63:return 24;case 64:return t.yytext=this.matches[1],62;case 65:return 61;case 66:return 76;case 67:return 81;case 68:return 46;case 69:return 47;case 70:return 58;case 71:return 5}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][\/])/,/^(?:[.][\/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[\/][.]K[ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[\/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[\/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][\/][.]K[ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][\/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]?['][']['][ ]?)/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[\/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71],inclusive:!0}}};return e}();return X.lexer=W,e.prototype=X,X.Parser=e,new e}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(4).readFileSync(n(5).normalize(r[1]),"utf8");return t.parser.parse(i)},"undefined"!=typeof r&&n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(t,n(1),n(8)(e))},function(e,t,n){(function(e,r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,15],r=[1,16],i=[1,17],o=[1,36],s=[1,18],a=[1,37],c=[1,38],l=[1,14],u=[1,46],h=[1,47],d=[1,39],p=[1,40],f=[1,41],m=[1,56],g=[1,42],y=[1,43],v=[1,44],b=[1,45],x=[1,54],_=[1,55],w=[1,57],E=[1,58],S=[1,59],M=[1,60],I=[1,61],k=[1,62],T=[1,63],C=[1,64],A=[1,65],P=[1,66],O=[1,67],L=[1,68],D=[1,69],N=[1,70],F=[1,71],q=[1,72],R=[1,73],j=[1,74],V=[1,48],B=[1,49],U=[1,50],z=[1,51],G=[1,52],$=[1,75],H=[1,53],Y=[5,14,18,19,29,52,53,54],X=[5,10,13,14,15,18,19,29,52,53,54],W=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86],K=[1,83],Q=[1,84],Z=[1,85],J=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86],ee={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT:69,"=":70,NEQ:71,"<":72,">":73,LEQ:74,GEQ:75,TILDE:76,PARALLEL:77,PERPENDICULAR:78,ELLIPSIS:79,COLON:80,INFINITY:81,INTEGRAL:82,FACTORIAL:83,"&":84,PRIMES:85,"?":86,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT",70:"=",71:"NEQ",72:"<",73:">",74:"LEQ",75:"GEQ",76:"TILDE",77:"PARALLEL",78:"PERPENDICULAR",79:"ELLIPSIS",80:"COLON",81:"INFINITY",82:"INTEGRAL",83:"FACTORIAL",84:"&",85:"PRIMES",86:"?"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1]],performAction:function(e,t,n,r,i,o,s){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return r.group();case 3:case 35:this.$=r.group(o[a-2],o[a-1],o[a]);break;case 4:case 6:case 31:case 32:case 36:this.$=r.group(o[a-1],o[a]);break;case 5:case 7:case 33:case 34:this.$=r.group(o[a]);break;case 10:case 11:case 12:this.$=r.basic_level(o[a-1],r.group(o[a]));break;case 13:case 17:this.$=r.radical(o[a-1],r.group(o[a-2]));break;case 14:case 15:this.$=r.radical(r.group(),r.group(o[a-1]));break;case 16:this.$=r.radical(r.group(),r.group());break;case 18:this.$=r.radical(o[a-1]);break;case 19:this.$=r.radical(r.group());break;case 20:this.$=r.fraction(o[a-3],o[a-1]);break;case 21:this.$=r.fraction(o[a-2],r.group());break;case 22:this.$=r.fraction(r.group(),o[a-1]);break;case 23:case 24:this.$=r.fraction(r.group(),r.group());break;case 25:this.$=r.fraction(r.group(r.terminal(r.to_number(o[a-1]))),r.group(r.terminal(r.to_number(o[a]))));break;case 26:this.$=r.fraction(r.group(r.terminal(r.to_number(o[a]))),r.group());break;case 27:this.$=r.fraction(r.group(),r.group(r.terminal(r.to_number(o[$01]))));break;case 37:this.$=r.group(o[a-1]);break;case 38:this.$=r.group();break;case 39:this.$=r.terminal(r.to_number(o[a]));break;case 57:this.$=r.terminal(",");break;case 58:this.$=r.terminal(".");break;case 59:this.$=r.terminal("[");break;case 60:this.$=r.terminal("\\{");break;case 61:this.$=r.terminal("(");break;case 62:this.$=r.terminal("]");break;case 63:this.$=r.terminal("\\}");break;case 64:this.$=r.terminal(")");break;case 65:this.$=r.terminal(" ");break;case 66:this.$=r.command("\\"+o[a].trim().toLowerCase());break;case 67:this.$=r.terminal(r.greek(o[a]));break;case 68:this.$=r.terminal(o[a].toUpperCase());break;case 69:this.$=r.terminal(o[a].toLowerCase());break;case 70:this.$=r.terminal("|");break;case 71:this.$=r.terminal("\\|");break;case 72:this.$=r.terminal("+");break;case 73:this.$=r.terminal("-");break;case 74:this.$=r.terminal("\\cdot ");break;case 75:this.$=r.terminal("\\times ");break;case 76:this.$=r.terminal("*");break;case 77:this.$=r.terminal("\\div ");break;case 78:this.$=r.terminal("/");break;case 79:this.$=r.terminal("\\%");break;case 80:this.$=r.terminal("=");break;case 81:this.$=r.terminal("\\neq ");break;case 82:this.$=r.terminal("<");break;case 83:this.$=r.terminal(">");break;case 84:this.$=r.terminal("\\leq ");break;case 85:this.$=r.terminal("\\geq ");break;case 86:this.$=r.terminal("\\sim ");break;case 87:this.$=r.terminal("\\parallel ");break;case 88:this.$=r.terminal("\\perp ");break;case 89:this.$=r.terminal("\\ldots ");break;case 90:this.$=r.terminal(":");break;case 91:this.$=r.terminal("\\infty ");break;case 92:this.$=r.terminal("\\int ");break;case 93:this.$=r.terminal("!");break;case 94:this.$=r.terminal("\\&");break;case 95:this.$=r.primes(o[a]);break;case 96:this.$=r.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{1:[3]},{5:[1,76]},{1:[2,2]},t(Y,[2,5],{8:8,9:9,7:77,10:n,13:r,15:i}),t(Y,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:78,10:n,13:r,15:i,17:o,21:s,23:a,24:c,28:l,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H}),t(X,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:79,17:o,21:s,23:a,24:c,28:l,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H}),t(X,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:80,17:o,21:s,23:a,24:c,28:l,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H}),t(W,[2,8]),t(W,[2,9]),t(W,[2,28]),t(W,[2,29]),t(W,[2,30]),{4:81,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,27:82,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,52:K,53:Q,54:Z,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{4:86,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,29:[1,87],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{9:90,11:88,12:89,13:r,15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{11:91,12:92,14:[1,93],16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{4:94,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,14:[1,95],15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},t(W,[2,39],{22:[1,96]}),t(W,[2,40]),t(W,[2,41]),t(W,[2,42]),t(W,[2,43]),t(W,[2,44]),t(W,[2,45]),t(W,[2,46]),t(W,[2,47]),t(W,[2,48]),t(W,[2,49]),t(W,[2,50]),t(W,[2,51]),t(W,[2,52]),t(W,[2,53]),t(W,[2,54]),t(W,[2,55]),t(W,[2,56]),{4:97,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,18:[1,98],19:[1,99],20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},t(W,[2,26]),t(W,[2,27]),t(J,[2,59]),t(J,[2,60]),t(J,[2,61]),t(W,[2,66]),t(W,[2,67]),t(W,[2,68]),t(W,[2,69]),t(W,[2,57]),t(W,[2,58]),t(W,[2,90]),t(W,[2,91]),t(W,[2,92]),t(W,[2,93]),t(W,[2,94]),t(W,[2,96]),t(W,[2,70]),t(W,[2,71]),t(W,[2,65]),t(W,[2,72]),t(W,[2,73]),t(W,[2,74]),t(W,[2,75]),t(W,[2,76]),t(W,[2,77]),t(W,[2,78]),t(W,[2,79]),t(W,[2,80]),t(W,[2,81]),t(W,[2,82]),t(W,[2,83]),t(W,[2,84]),t(W,[2,85]),t(W,[2,86]),t(W,[2,87]),t(W,[2,88]),t(W,[2,89]),t(W,[2,95]),{1:[2,1]},t(Y,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:100,10:n,13:r,15:i,17:o,21:s,23:a,24:c,28:l,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H}),t(Y,[2,6]),t(X,[2,31]),t(X,[2,32]),{27:101,52:K,53:Q,54:Z},t(W,[2,36]),t(W,[2,62]),t(W,[2,63]),t(W,[2,64]),{29:[1,102]},t(W,[2,38]),t(W,[2,10]),t(W,[2,11]),t(W,[2,12]),{4:103,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,14:[1,104],15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{4:106,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,14:[1,105],15:i,16:11,17:o,20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},t(W,[2,16]),{14:[1,107]},t(W,[2,19]),t(W,[2,25]),{18:[1,108]},{4:109,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,19:[1,110],20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},t(W,[2,24]),t(Y,[2,3]),t(W,[2,35]),t(W,[2,37]),{14:[1,111]},t(W,[2,15]),t(W,[2,14]),{14:[1,112]},t(W,[2,18]),{4:113,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,19:[1,114],20:12,21:s,23:a,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:d,50:p,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:_,62:w,63:E,64:S,65:M,66:I,67:k,68:T,69:C,70:A,71:P,72:O,73:L,74:D,75:N,76:F,77:q,78:R,79:j,80:V,81:B,82:U,83:z,84:G,85:$,86:H},{19:[1,115]},t(W,[2,23]),t(W,[2,13]),t(W,[2,17]),{19:[1,116]},t(W,[2,21]),t(W,[2,22]),t(W,[2,20])],defaultActions:{3:[2,2],76:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,c=0,l=0,u=2,h=1,d=i.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(f.yy[m]=this.yy[m]);p.setInput(e,f.yy),f.yy.lexer=p,f.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var g=p.yylloc;i.push(g);var y=p.options&&p.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,x,_,w,E,S,M,I,k=function(){var e;return e=p.lex()||h,"number"!=typeof e&&(e=t.symbols_[e]||e),e},T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:(null!==v&&"undefined"!=typeof v||(v=k()),_=o[x]&&o[x][v]),"undefined"==typeof _||!_.length||!_[0]){var C="";I=[];for(E in o[x])this.terminals_[E]&&E>u&&I.push("'"+this.terminals_[E]+"'");C=p.showPosition?"Parse error on line "+(a+1)+":\n"+p.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(C,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:g,expected:I})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+v);switch(_[0]){case 1:n.push(v),r.push(p.yytext),i.push(p.yylloc),n.push(_[1]),v=null,b?(v=b,b=null):(c=p.yyleng,s=p.yytext,a=p.yylineno,g=p.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[_[1]][1],T.$=r[r.length-S],T._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},y&&(T._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),w=this.performAction.apply(T,[s,c,a,f.yy,_[1],r,i].concat(d)),"undefined"!=typeof w)return w;S&&(n=n.slice(0,-1*S*2),r=r.slice(0,-1*S),i=i.slice(0,-1*S)),n.push(this.productions_[_[1]][0]),r.push(T.$),i.push(T._$),M=o[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},te=function(){var e={EOF:1,parseError:function(e,t){
if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if(n=this._input.match(this.rules[i[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(e=this.test_match(n,i[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,i[r]),e!==!1&&e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:return void this.begin("captext");case 1:return 58;case 2:return this.popState(),58;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 71;case 16:return 74;case 17:return 75;case 18:return 70;case 19:return 72;case 20:return 73;case 21:return 76;case 22:return 69;case 23:return 79;case 24:return 13;case 25:return 15;case 26:return 14;case 27:return 10;case 28:return 28;case 29:return 29;case 30:return 82;case 31:return 83;case 32:return 84;case 33:return 17;case 34:return 18;case 35:return 19;case 36:return 77;case 37:return 78;case 38:return 81;case 39:return t.yytext=this.matches[1],21;case 40:return t.yytext=this.matches[1],22;case 41:return t.yytext=this.matches[1],24;case 42:return 68;case 43:return 47;case 44:return 48;case 45:return 85;case 46:return 61;case 47:return 60;case 48:return 80;case 49:return 56;case 50:return 56;case 51:return 57;case 52:return t.yytext=this.matches[1],58;case 53:return 59;case 54:return;case 55:return 86;case 56:return;case 57:return 55;case 58:return 5}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][\/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+)/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][\/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[\/]([A-J4]+))/,/^(?:[#][\/]([A-J4]+))/,/^(?:[_]?[\/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return e}();return ee.lexer=te,e.prototype=ee,ee.Parser=e,new e}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(4).readFileSync(n(5).normalize(r[1]),"utf8");return t.parser.parse(i)},"undefined"!=typeof r&&n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(t,n(1),n(8)(e))},function(e,t,n){function r(e){for(var t=[],n=0;n<e.length;n++){var h=e[n];switch(h.type){case"command":var d=h.value.slice(1).trim();l.hasOwnProperty(h.value)?t.push(a.command(l[h.value])):s.containsValue(d)?t.push(a.typeform("operator_name",i(d))):u[h.value]||t.push(h);break;case"level":var p={subscript:h.subscript&&h.subscript.length>0?r(h.subscript):void 0,superscript:h.superscript&&h.superscript.length>0?r(h.superscript):void 0,type:h.type};(p.subscript||p.superscript)&&t.push(p);break;case"fraction":t.push({denominator:r(h.denominator),numerator:r(h.numerator),type:h.type});break;case"radical":t.push({index:h.index?r(h.index):void 0,radicand:r(h.radicand),type:h.type});break;case"terminal":o(e.slice(n))?(t.push({type:"command",value:"\\ldots"}),n+=2):t.push({type:h.type,value:c.hasOwnProperty(h.value)?c[h.value]:h.value});break;case"typeform":t.push(h);break;case"greek":t.push({type:h.type,value:c.hasOwnProperty(h.value)?c[h.value]:h.value});break;default:throw new Error("Unexpected item:\n"+JSON.stringify({group:e,item:h}))}}return t}function i(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push(a.terminal(i))}return t}function o(e){for(var t=0,n=0;n<Math.min(3,e.length);n++){var r=e[n];"terminal"===r.type&&"."===r.value&&t++}return 3===t}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=n(7),c={"~":"\\ "},l={"\\,":"\\ ","\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},u={"\\space":!0};t.default=r},function(e,t,n){function r(e){try{return{isError:!1,value:o.parser.parse(e)}}catch(e){return{isError:!0,error:i.default(e)}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(13),s=n(7);o.parser.yy=s,t.default=r},function(e,t,n){(function(e,r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,13],r=[1,14],i=[1,15],o=[1,16],s=[1,17],a=[1,19],c=[1,18],l=[1,20],u=[1,21],h=[1,26],d=[1,28],p=[1,29],f=[1,30],m=[1,31],g=[1,27],y=[5,21,25,36],v=[5,19,21,22,23,24,25,26,30,31,32,33,34,35,36],b=[5,10,12,13,14,19,21,22,23,24,25,26,30,31,32,33,34,35,36],x=[5,10,19,21,22,23,24,25,26,30,31,32,33,34,35,36],_={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,operator_name:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,RADICAL_OPTARG:24,CLOSE_OPTARG:25,RADICAL:26,curly_group:27,greek:28,command:29,SYMBOL:30,DELIMITER:31,DELIMITER_COMMAND:32,GREEK:33,COMMAND:34,"{":35,"}":36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"RADICAL_OPTARG",25:"CLOSE_OPTARG",26:"RADICAL",30:"SYMBOL",31:"DELIMITER",32:"DELIMITER_COMMAND",33:"GREEK",34:"COMMAND",35:"{",36:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[28,1],[29,1],[27,3],[27,2]],performAction:function(e,t,n,r,i,o,s){var a=o.length-1;switch(i){case 1:return o[a-1];case 2:return r.group();case 3:this.$=r.group(o[a-2],o[a-1],o[a]);break;case 4:case 6:this.$=r.group(o[a-1],o[a]);break;case 5:case 7:this.$=r.group(o[a]);break;case 8:this.$=r.level({_:r.group(o[a-1]),"^":r.group(o[a])});break;case 9:this.$=r.level({_:r.group(o[a]),"^":r.group(o[a-1])});break;case 10:this.$=r.level({"^":r.group(o[a])});break;case 11:this.$=r.level({_:r.group(o[a])});break;case 12:case 13:this.$=o[a];break;case 14:this.$=r.processPrimes(o[a-1],o[a]);break;case 15:this.$=r.processPrimes(o[a],r.group());break;case 21:this.$=r.group(o[a-3],o[a-2],o[a]);break;case 22:this.$=r.group(o[a-2],o[a]);break;case 23:this.$=r.fraction(r.group(o[a-1]),r.group(o[a]));break;case 24:this.$=r.typeform("operator_name",r.group(o[a]));break;case 25:this.$=r.radical(o[a],r.group(o[a-2]));break;case 26:this.$=r.radical(r.group(o[a]),r.group());break;case 27:case 28:this.$=r.radical(r.group(o[a]));break;case 33:case 34:this.$=r.terminal(o[a]);break;case 35:case 37:this.$=r.command(o[a]);break;case 36:this.$=r.greek(o[a]);break;case 38:this.$=o[a-1];break;case 39:this.$=r.group()}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:s,20:23,22:a,23:c,24:l,26:u,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{1:[3]},{5:[1,32]},{1:[2,2]},t(y,[2,5],{15:8,16:9,17:10,18:11,11:12,27:22,20:23,28:24,29:25,7:33,19:s,22:a,23:c,24:l,26:u,30:h,31:d,32:p,33:f,34:m,35:g}),t(y,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,27:22,20:23,28:24,29:25,4:34,10:n,12:r,13:i,14:o,19:s,22:a,23:c,24:l,26:u,30:h,31:d,32:p,33:f,34:m,35:g}),t(v,[2,11],{9:35,12:r,13:i,14:o}),t(v,[2,10],{8:36,10:n}),t(b,[2,16]),t(b,[2,17]),t(b,[2,18]),t(b,[2,19]),t(b,[2,20]),{11:37,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{11:38,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{11:39,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},t(x,[2,15]),{20:40,31:d,32:p},{11:41,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{11:42,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{4:43,6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:s,20:23,22:a,23:c,24:l,25:[1,44],26:u,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{11:45,17:46,20:23,22:a,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},t(b,[2,29]),t(b,[2,30]),t(b,[2,31]),t(b,[2,32]),t(b,[2,33]),{4:47,6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:s,20:23,22:a,23:c,24:l,26:u,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g,36:[1,48]},t(b,[2,34]),t(b,[2,35]),t(b,[2,36]),t(b,[2,37]),{1:[2,1]},t(y,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,27:22,20:23,28:24,29:25,4:49,10:n,12:r,13:i,14:o,19:s,22:a,23:c,24:l,26:u,30:h,31:d,32:p,33:f,34:m,35:g}),t(y,[2,6]),t(v,[2,8]),t(v,[2,9]),t([5,12,13,14,19,21,22,23,24,25,26,30,31,32,33,34,35,36],[2,12]),t(x,[2,13]),t(x,[2,14]),{4:50,6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:s,20:23,21:[1,51],22:a,23:c,24:l,26:u,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},t(b,[2,24]),{11:52,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},{25:[1,53]},{11:54,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},t(b,[2,27]),t(b,[2,28]),{36:[1,55]},t(b,[2,39]),t(y,[2,3]),{21:[1,56]},{20:57,31:d,32:p},t(b,[2,23]),{11:58,20:23,27:22,28:24,29:25,30:h,31:d,32:p,33:f,34:m,35:g},t(b,[2,26]),t(b,[2,38]),{20:59,31:d,32:p},t(b,[2,22]),t(b,[2,25]),t(b,[2,21])],defaultActions:{3:[2,2],32:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,s="",a=0,c=0,l=0,u=2,h=1,d=i.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(f.yy[m]=this.yy[m]);p.setInput(e,f.yy),f.yy.lexer=p,f.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var g=p.yylloc;i.push(g);var y=p.options&&p.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,x,_,w,E,S,M,I,k=function(){var e;return e=p.lex()||h,"number"!=typeof e&&(e=t.symbols_[e]||e),e},T={};;){if(x=n[n.length-1],this.defaultActions[x]?_=this.defaultActions[x]:(null!==v&&"undefined"!=typeof v||(v=k()),_=o[x]&&o[x][v]),"undefined"==typeof _||!_.length||!_[0]){var C="";I=[];for(E in o[x])this.terminals_[E]&&E>u&&I.push("'"+this.terminals_[E]+"'");C=p.showPosition?"Parse error on line "+(a+1)+":\n"+p.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==h?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(C,{text:p.match,token:this.terminals_[v]||v,line:p.yylineno,loc:g,expected:I})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+v);switch(_[0]){case 1:n.push(v),r.push(p.yytext),i.push(p.yylloc),n.push(_[1]),v=null,b?(v=b,b=null):(c=p.yyleng,s=p.yytext,a=p.yylineno,g=p.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[_[1]][1],T.$=r[r.length-S],T._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},y&&(T._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),w=this.performAction.apply(T,[s,c,a,f.yy,_[1],r,i].concat(d)),"undefined"!=typeof w)return w;S&&(n=n.slice(0,-1*S*2),r=r.slice(0,-1*S),i=i.slice(0,-1*S)),n.push(this.productions_[_[1]][0]),r.push(T.$),i.push(T._$),M=o[n[n.length-2]][n[n.length-1]],n.push(M);break;case 3:return!0}}return!0}},w=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if(n=this._input.match(this.rules[i[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(e=this.test_match(n,i[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,i[r]),e!==!1&&e):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return this.begin("optarg"),24;case 2:return this.popState(),25;case 3:return 23;case 4:return 26;case 5:return 22;case 6:return 13;case 7:return 14;case 8:return 12;case 9:return 10;case 10:return 19;case 11:return 21;case 12:return 32;case 13:return 31;case 14:return 35;case 15:return 36;case 16:return 30;case 17:return 30;case 18:return 30;case 19:return 33;case 20:return 33;case 21:return 34;case 22:return 30;case 23:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],inclusive:!0}}};return e}();return _.lexer=w,e.prototype=_,_.Parser=e,new e}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(4).readFileSync(n(5).normalize(r[1]),"utf8");return t.parser.parse(i)},"undefined"!=typeof r&&n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(t,n(1),n(8)(e))},function(e,t,n){function r(e){return S.map(E.default(e),function(e){return x(w.default(e))})}function i(e){return/^[a-z]$/.test(e.value)?e.value.toUpperCase():/^[A-Z]$/.test(e.value)?","+e.value:/^[0-9.]$/.test(e.value)?e.value:/^[+\-()]$/.test(e.value)?e.value:M.hasOwnProperty(e.value)?M[e.value]:"[terminal: "+e.value+"]"}function o(e){return I.hasOwnProperty(e.value)?I[e.value]:e.value.slice(1).toUpperCase()+" "}function s(e){return k.hasOwnProperty(e.value)?k[e.value]:e.value.slice(1).toUpperCase()+" "}function a(e){return"\\space"===e.value}function c(e,t){return e.isStartOfLine&&/^-?$/.test(t)||/\s-?$/.test(t)||e.wasFraction}function l(e){return"\\sum"===e.value||"\\prod"===e.value}function u(e,t){if(t>=e.length)return!1;var n=e[t];if("terminal"===n.type){if(/^[0-9]$/.test(n.value))return!0;if("."!==n.value)return!1;if(t+1>=e.length)return!1;if(n=e[t+1],"terminal"===n.type)return/^[0-9]$/.test(n.value)}return!1}function h(e,t){for(var n="",r=e.levelIndicator,m=0,y=!1,x=0;x<t.length;x++){u(t,x)&&(""===r&&/[A-Z]$/.test(n)?n+=g(r):c(e,n)&&(n+="#"));var _=t[x],w=x<t.length-1?t[x+1]:null;switch("level"!==_.type&&r!==e.levelIndicator&&(b(_)?r="":(e.wasModifiedExpression&&""===e.levelIndicator?e=v(e,{wasModifiedExpression:!1}):n+=g(e.levelIndicator),r=e.levelIndicator)),_.type){case"terminal":n+=!e.wasModifiedExpression&&""!==r&&b(_)?" "+g(r)+i(_).trim()+" ":i(_),"."===_.value&&w&&("terminal"===w.type&&/^[^_\d,]/.test(i(w))||"greek"===w.type)&&(n+='"'),e=v(e,{wasFraction:!1,wasRomanCommand:!1});break;case"command":if(!a(_)){var E=l(_);E&&(n+='"'),n+=!E&&""!==r&&b(_)?" "+g(r)+o(_).trim()+" ":o(_),e=v(e,{wasFraction:!1,wasModifiedExpression:E,wasRomanCommand:!0})}break;case"greek":n+=s(_),e=v(e,{wasFraction:!1});break;case"fraction":var S=d(e,_);n+=S.value,m=Math.max(m,S.fractionLevel),e=v(e,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":var M=p(e,_);n+=M.value,m=Math.max(m,M.fractionLevel),e=v(e,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!e.wasModifiedExpression&&e.wasRomanCommand?(y=/\s$/.test(n),y&&(n=n.replace(/\s$/,""))):y=!1;var I=n.length>0&&/[A-Za-z]/.test(n[n.length-1])===!0,k=f(e,I,y,_);n+=k.value,r=k.levelIndicator,e=v(e,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":n+=h(e,_.value).value+" ",e=v(e,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1})}}return{fractionLevel:m,levelIndicator:r,value:n}}function d(e,t){e=v(e,{isStartOfLine:!1});for(var n=h(e,t.numerator),r=h(e,t.denominator),i=Math.max(n.fractionLevel,r.fractionLevel),o="",s=0;s<i;s++)o+=",";var a=o+"?"+n.value;return n.levelIndicator!==e.levelIndicator&&(a+=g(e.levelIndicator)),/\.$/.test(n.value)&&(a+='"'),a+=o+"/"+r.value,r.levelIndicator!==e.levelIndicator&&(a+=g(e.levelIndicator)),/\.$/.test(r.value)&&(a+='"'),a+=o+"#",{fractionLevel:i+1,value:a}}function p(e,t){for(var n=e.radicalLevel,r="",i="",o=0;o<n;o++)i+=".";if(t.index){r+=i+"<";var s=h(v(e,{isStartOfLine:!1}),t.index);r+=s.value,/\.$/.test(s.value)&&(r+='"'),s.levelIndicator!==e.levelIndicator&&(r+=g(e.levelIndicator)),r+=">"}else r+=i+">";var a=h(v(e,{isStartOfLine:!1,radicalLevel:n+1}),t.radicand);return r+=a.value,/\.$/.test(a.value)&&(r+='"'),a.levelIndicator!==e.levelIndicator&&(r+=g(e.levelIndicator)),r+=i+"]",{fractionLevel:a.fractionLevel,value:r}}function f(e,t,n,r){var i=e.levelIndicator,o="",s=m(r.superscript);if(o+=s,r.subscript){e.wasModifiedExpression&&(o+="%"),i=e.levelIndicator+";";var a=h(v(e,{isStartOfLine:!1,levelIndicator:i}),r.subscript);t&&/^[0-9]*(\.|\,)?[0-9]+$/.test(a.value)&&i.length<=1?i=e.levelIndicator:!e.wasModifiedExpression&&r.subscript[0]&&"level"!==r.subscript[0].type&&(o+=g(i)),o+=a.value,/\.$/.test(a.value)&&(o+='"')}if(r.superscript){e.wasModifiedExpression&&(o+="<"),i=e.levelIndicator+"^";var c=h(v(e,{isStartOfLine:!1,levelIndicator:i}),r.superscript.slice(s.length));!e.wasModifiedExpression&&r.superscript[0]&&"level"!==r.superscript[0].type&&""!==c.value&&(o+=g(i)),o+=c.value,/\.$/.test(c.value)&&(o+='"')}return e.wasModifiedExpression?o+="]":e.wasRomanCommand&&n&&(o+=" ",i=i.slice(0,i.length-1)),{levelIndicator:i,value:o}}function m(e){var t="";if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];if("command"!==i.type||"\\prime"!==i.value)break;t+="'"}return t}function g(e){return e?e:'"'}function y(){return{isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1}}function v(e,t){return _({},e,t)}function b(e){return("terminal"===e.type||"command"===e.type)&&/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(e.value)}function x(e){var t=y();return h(t,e).value}var _=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var w=n(11),E=n(12),S=n(0);t.default=r;var M={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"},I={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\vert":"\\"},k={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"}},function(e,t,n){function r(e){return I.map(M.default(e),function(e){return _(S.default(e))})}function i(e,t,n){var r="",i=t.value,o=n&&"terminal"===n.type?n.value:"";return h(i,e)&&(r+=";"),/^[\D]/.test(i)&&(e=x(e,{wasNumber:!1})),/^[a-z]$/.test(i)?e.capsLock?(e=x(e,{capsLock:!1}),r+=",'"+i.toUpperCase()):r+=i.toUpperCase():/^[A-Z]$/.test(i)?e.capsLock?r+=i:/[A-Z]/.test(o)?(e=x(e,{capsLock:!0}),r+=",,"+i):r+=","+i:(e=x(e,{capsLock:!1}),r+=/^[0-9.]$/.test(i)?l(i):k.hasOwnProperty(i)?k[i]:"[terminal: "+i+"]"),{value:r,ctx:e}}function o(e,t){var n;return n=T.hasOwnProperty(e.value)?T[e.value]:e.value.slice(1).toUpperCase()+" ",h(n,t)&&(n=";"+n),/^[\D]/.test(n)&&(t=x(t,{wasNumber:!1})),{value:n,ctx:t}}function s(e){return C.hasOwnProperty(e.value)?C[e.value]:e.value.slice(1).toUpperCase()+" "}function a(e){return"\\space"===e.value}function c(e,t){if(t<e.length){var n=e[t];if("terminal"===n.type){if(/^\d$/.test(n.value))return!0;if("."!==n.value)return!1;if(t+1>=e.length)return!1;if(n=e[t+1],"terminal"===n.type)return/^\d$/.test(n.value)}}return!1}function l(e){for(var t="",n="A".charCodeAt(0)-1,r=0,i=e;r<i.length;r++){var o=i[r];t+=","===o?"1":"."===o?"4":"0"===o?"J":String.fromCharCode(n+Number(o))}return t}function u(e,t){for(var n,r,l="",h=!0,p=0;p<t.length;p++){c(t,p)?(e=x(e,{wasNumber:!0}),h&&(l+="#",h=!1)):h=!0;var g=t[p];switch(g.type){case"terminal":var y=p<t.length-1?t[p+1]:void 0;n=i(e,g,y),e=n.ctx,l+=n.value," "===l[l.length-1]&&(h=!0);break;case"command":a(g)||(r=o(g,e),e=r.ctx,l+=r.value," "===l[l.length-1]&&(h=!0));break;case"greek":l+=s(g)," "===l[l.length-1]&&(h=!0);break;case"fraction":var v=d(e,g);l+=v.value,e=v.ctx,h=!1;break;case"radical":var b=f(e,g);l+=b.value,h=!0;break;case"level":var _=m(e,g);l+=_.value,e=_.ctx,h=!0;break;case"typeform":var w=u(e,g.value).value;l+=w,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(w)&&(l+=" ")}}return{ctx:e,value:l}}function h(e,t){return t.wasNumber&&/^[A-Ja-j]/.test(e)}function d(e,t){var n,r=u(e,t.numerator),i=u(e,t.denominator);return p(r.value)&&p(i.value)?(e=x(e,{wasNumber:!0}),n=r.value+"/"+i.value.slice(1)):(e=x(e,{wasNumber:!1}),n="("+r.value+"./"+i.value+")"),{ctx:e,value:n}}function p(e){return/^\#[A-J41]+$/.test(e)}function f(e,t){var n="%";if(t.index){var r=u(e,E.group(E.level({"^":t.index})));n+=r.value}var i=u(e,t.radicand);return n+=i.value+"+",{ctx:e,value:n}}function m(e,t){var n="",r=y(t.superscript);n+=r;var i;if(t.subscript){var o=u(e,t.subscript);i=v(t.subscript,o.value,0)?"<"+g(o.value)+">":o.value,e=x(e,{wasNumber:o.ctx.wasNumber}),""!==i&&(n+="5"+i)}if(t.superscript){var s=u(e,t.superscript.slice(r.length));i=v(t.superscript,s.value,r.length)?"<"+g(s.value)+">":s.value,
e=x(e,{wasNumber:s.ctx.wasNumber}),""!==r&&""===i||(n+="9"+i)}return{ctx:e,value:n}}function g(e){return/^;/.test(e)?e.slice(1):e}function y(e){var t="";if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];if("command"!==i.type||"\\prime"!==i.value)break;t+="7"}return t}function v(e,t,n){var r=e[0],i=(t.match(/\</g)||[]).length,o=/^["|\.|_]?\</.test(t),s=(t.match(/\>/g)||[]).length,a=/["|\.|_]?\>$/.test(t);return!p(t)&&e.length-n>1&&0===i&&0===s||i>0&&s>0&&(!o||!a)||i>1||s>1||r&&"typeform"===r.type}function b(){return{capsLock:!1,wasNumber:!1}}function x(e,t){return w({},e,t)}function _(e){var t=b();return u(t,e).value}var w=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var E=n(7),S=n(11),M=n(12),I=n(0);t.default=r;var k={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"},T={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\vert":"_\\"},C={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"}},function(e,t,n){function r(e,t){for(var n="",o=t,s="",a=!1,u="",h="",p=i(e),f=0;f<e.length;f++){var y=e[f],v=f+1<e.length?e[f+1]:null;switch(y.type){case"terminal":var b=d.getAutoOperator(e.slice(f));""!==b.value?(n+=b.value,f+=b.terminalCount-1,a=a||b.modified):" "===y.value?(a?(s=u,n+=l(o,s),o=s):n+="\\ ",a=!1):(p[f]===m?n+="\\left":p[f]===g&&(n+="\\right"),n+=y.value);break;case"comparison":s="",n+=l(o,s),o=s,a=!1,n+=y.value;break;case"level_with_comparison":n+=l(o,y.level),o=y.level,a=!1,n+=y.value;break;case"command":var x=y.value.slice(1).trim();v&&"terminal"===v.type&&/[a-z]/.test(v.value)?(n+=x,a=!1):d.containsValue(x)?(n+="\\operatorname{"+x+"}",a=!0):(n+=y.value,a=!0),u=o;break;case"expression":n+=y.value;break;case"fraction":n+=c(y.numerator,y.denominator,o);break;case"modified_expression":n+=r(y.expression,o)+" ",y.under&&(n+="_{"+r(y.under,o)+"}"),y.over&&(n+="^{"+r(y.over,o)+"}");break;case"radical":n+="\\sqrt",y.index&&(n+="["+r(y.index,o)+"]"),n+="{"+r(y.value,o)+"}";break;case"simple_subscript":""===o?(n+=y.base.value+"_{"+y.subscript.value+"}","command"===y.base.type&&(a=!0,u=o)):n+=y.base.value+y.subscript.value;break;case"level":n+=l(o,y.value,h),o=y.value,"^"===y.value&&""!==h&&(h="");break;case"primes":v&&"level"===v.type&&";"===v.value?h=y.value:""!==o?(n+=Array(y.value.length+1).join("\\prime "),h=""):(n+=y.value,h="")}}return n+=l(o,t)+h,n.replace(/([^\\])( )$/,"$1")}function i(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];if(o(i))t.push({direction:m,index:r}),n.push(y);else if(s(i)){for(;t.length&&t[t.length-1].direction===v;)t.pop();if(t.length){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else n.push(y)}else if(a(i))if(t.length&&t[t.length-1].direction===v){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else t.push({direction:v,index:r}),n.push(y);else n.push(y)}return n}function o(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}function s(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}function a(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}function c(e,t,n){return"\\frac{"+r(e,n)+"}{"+r(t,n)+"}"}function l(e,t,n){var r,i,o,s="",a=Math.max(e.length,t.length);for(r=0;r<a&&e[r]===t[r];r++);for(i=e.length-1;i>=r;i--)s+="}";for(o=r;o<t.length;o++)"^"===t[o]&&(n&&(s+=n),s+="^{"),";"===t[o]&&(s+="_{");return s}function u(e){return r(e,"")}function h(e,t){return t&&t.operatorNames?d.setOperatorNames(t.operatorNames):d.resetOperatorNames(),f.map(p.default(e,t),u)}Object.defineProperty(t,"__esModule",{value:!0});var d=n(2),p=n(18),f=n(0),m=1,g=-1,y=0,v=2;t.default=h},function(e,t,n){function r(e){return{type:"terminal",value:e}}function i(e){return{type:"command",value:"\\"+e.trim()+" "}}function o(e){var t=/[\^;]+/.exec(e),n=t?t.toString():"",r=e.slice(a.length);return{type:"level_with_comparison",level:n,value:y[r]}}function s(e){return{type:"comparison",value:y[e]}}function a(e){return{type:"level",value:e}}function c(){return a("")}function l(e){return{type:"primes",value:e}}function u(e,t){return{type:"fraction",numerator:e,denominator:t}}function h(e,t,n){return{type:"modified_expression",expression:e,under:t,over:n}}function d(e,t){return{type:"radical",value:e,index:t}}function p(e){return{type:"expression",value:e}}function f(e,t){return{type:"simple_subscript",base:e,subscript:t}}function m(e){if(v.hasOwnProperty(e))return v[e]+" ";throw new Error("Unknown Greek letter")}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=r,t.command=i;var y={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};t.level_with_comparison=o,t.comparison=s,t.level=a,t.baseline=c,t.primes=l,t.fraction=u,t.modified_expression=h,t.radical=d,t.expression=p,t.simple_subscript=f;var v={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=m,t.group=g},function(e,t,n){function r(e,t){t||(t={});var n=s.parser;t.strict?n.yy=a:(n.yy=i({warnings:[]},a),n.lexer=c.default);try{return{isError:!1,value:n.parse(e),warnings:n.yy.warnings||[]}}catch(e){return{error:o.default(e),isError:!0}}}var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(9),a=n(17),c=n(20);t.default=r},function(e,t,n){function r(e,t){t||(t={});var n=a.parser;t.strict?n.yy=c:(n.yy=i({warnings:[]},c),n.lexer=s.default);try{return{isError:!1,value:n.parse(e),warnings:n.yy.warnings||[]}}catch(e){return{error:o.default(e),isError:!0}}}var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(21),a=n(10),c=n(24);t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=r.parser.lexer,o=Object.create(i);t.default=o;var s=r.parser.terminals_,a=r.parser.symbols_;o.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],i.setInput.call(this,e,t)},o.lex=function(){var e=-1;if(!this)return e;if(this.outputQueue.length)return this.outputQueue.shift();var t,n,r=i.lex.call(this),o=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(s[r]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(r);break;case"RADICAL_INDEX":o===a.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(o)),this.delimiterStack.push(r);break;case"OPEN_RADICAL":o===a.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(r);break;case"SLASH":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.OPEN_FRAC){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r),this.delimiterStack.push(r);break;case"CLOSE_FRAC":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.SLASH){t=!0;break}if(n===a.OPEN_FRAC){this.addMissingToken(a.SLASH),t=!0;break}this.pushCloseTokens(n)}if(!t)return this.warn(),this.lex();break;case"CLOSE_RADICAL":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.OPEN_RADICAL){t=!0;break}if(n===a.RADICAL_INDEX){t=!0,this.addMissingToken(a.OPEN_RADICAL);break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r);break;case"CLOSE_MODEXP":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.OPEN_MODEXP){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r);break;case"EOF":for(;this.delimiterStack.length;)n=this.delimiterStack.pop()||-1,this.pushCloseTokens(n)}return this.outputQueue.push(r),e=this.outputQueue.shift()||-1},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},o.pushCloseTokens=function(e){switch(s[e]){case"OPEN_FRAC":this.addMissingToken(a.SLASH),this.addMissingToken(a.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(a.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(a.OPEN_RADICAL),this.addMissingToken(a.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(a.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(a.CLOSE_MODEXP)}},o.pushOpenTokens=function(e){switch(s[e]){case"SLASH":this.addMissingToken(a.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(a.OPEN_FRAC),this.addMissingToken(a.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(a.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(a.OPEN_MODEXP)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=r.parser.lexer,o=Object.create(i);t.default=o;var s=r.parser.terminals_,a=r.parser.symbols_;o.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],i.setInput.call(this,e,t)},o.lex=function(){var e=-1;if(this.outputQueue.length)return this.outputQueue.shift();var t,n,r=i.lex.call(this),o=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(s[r]){case"OPEN_FRAC":this.delimiterStack.push(r);break;case"OPEN_GROUP":this.delimiterStack.push(r);break;case"RADICAL_WITH_INDEX":o===a.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(o)),this.delimiterStack.push(r);break;case"RADICAL":o===a.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(r);break;case"OVER":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.OPEN_FRAC){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r),this.delimiterStack.push(r);break;case"CLOSE_FRAC":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.OVER){t=!0;break}if(n===a.OPEN_FRAC){this.outputQueue.push(a.OVER),t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r);break;case"CLOSE_GROUP":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.OPEN_GROUP){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r);break;case"CLOSE_RADICAL":for(t=!1;this.delimiterStack.length;){if(n=this.delimiterStack.pop()||-1,n===a.RADICAL||n===a.RADICAL_WITH_INDEX){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(r);break;case"EOF":for(;this.delimiterStack.length;)n=this.delimiterStack.pop()||-1,this.pushCloseTokens(n)}return this.outputQueue.push(r),e=this.outputQueue.shift()||-1},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},o.pushCloseTokens=function(e){switch(s[e]){case"OPEN_FRAC":this.addMissingToken(a.OVER),this.addMissingToken(a.CLOSE_FRAC);break;case"OVER":this.addMissingToken(a.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(a.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(a.CLOSE_RADICAL)}},o.pushOpenTokens=function(e){switch(s[e]){case"OVER":this.addMissingToken(a.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(a.OPEN_FRAC),this.addMissingToken(a.OVER);break;case"CLOSE_GROUP":this.addMissingToken(a.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(a.RADICAL)}}},function(e,t,n){function r(e){return e.isError}function i(e){return!e.isError}function o(e,t){return r(e)?e:{isError:!1,value:t(e.value)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isErr=r,t.isOk=i,t.map=o},function(e,t,n){function r(e,t){for(var n="",o=!1,s="",a=i(e),h=0;h<e.length;h++){var p=e[h],f=h+1<e.length?e[h+1]:null;switch(p.type){case"terminal":var y=d.getAutoOperator(e.slice(h));""!==y.value?(n+=y.value,h+=y.terminalCount-1):" "!==p.value||o?(a[h]===m?n+="\\left":a[h]===g&&(n+="\\right"),n+=p.value):n+="\\ ",o=!1;break;case"command":var v=p.value.slice(1).trim();f&&"terminal"===f.type&&/[a-z]/.test(f.value)?(n+=v,o=!1):d.containsValue(v)?(n+="\\operatorname{"+v+"}",o=!0):(n+=p.value,o=!0);break;case"expression":n+=p.value;break;case"fraction":n+=c(p.numerator,p.denominator);break;case"radical":n+="\\sqrt",p.index&&(n+="["+r(p.index)+"]"),n+="{"+r(p.value)+"}";break;case"basic_level":n+=l(p.level,p.value,s),"9"===p.level&&(s="");break;case"bracketed_level":n+=u(p.level,p.lbrack,p.value,p.rbrack,s),"9"===p.level&&(s="");break;case"primes":!f||"basic_level"!==f.type&&"bracketed_level"!==f.type||"5"!==f.level?t&&""!==t?(n+=Array(p.value.length+1).join("\\prime "),s=""):(n+=p.value,s=""):s=p.value}}return n+=s,n.replace(/([^\\])( )$/,"$1")}function i(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];if(o(i))t.push({direction:m,index:r}),n.push(y);else if(s(i)){for(;t.length&&t[t.length-1].direction===v;)t.pop();if(t.length){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else n.push(y)}else if(a(i))if(t.length&&t[t.length-1].direction===v){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else t.push({direction:v,index:r}),n.push(y);else n.push(y)}return n}function o(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}function s(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}function a(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}function c(e,t){return"\\frac{"+r(e)+"}{"+r(t)+"}"}function l(e,t,n){var i="",o="{"+r(t,e)+"}";return"9"===e?i+=n+"^"+o:"5"===e&&(i+="_"+o),i}function u(e,t,n,i,o){var s="",a="{"+t+r(n,e)+i+"}";return"9"===e?s+=o+"^"+a:"5"===e&&(s+="_"+a),s}function h(e,t){return t&&t.operatorNames?d.setOperatorNames(t.operatorNames):d.resetOperatorNames(),f.map(p.default(e,t),function(e){return b(e,"")})}Object.defineProperty(t,"__esModule",{value:!0});var d=n(2),p=n(19),f=n(0),m=1,g=-1,y=0,v=2,b=r;t.default=h},function(e,t,n){function r(e){return{type:"terminal",value:e}}function i(e){return{type:"command",value:e}}function o(e,t){return{type:"basic_level",level:e,value:t}}function s(e,t,n,r){return{type:"bracketed_level",level:e,lbrack:t,value:n,rbrack:r}}function a(e){var t=e.length>0?Array(e.length+1).join("'"):"";return{type:"primes",value:t}}function c(e,t){return{type:"fraction",numerator:e,denominator:t}}function l(e,t){return{type:"radical",value:e,index:t}}function u(e){return{type:"expression",value:e}}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}function d(e){if(f.hasOwnProperty(e))return f[e]+" ";throw new Error("Unknown Greek letter")}function p(e){for(var t="",n="A".charCodeAt(0)-1,r=0,i=e;r<i.length;r++){var o=i[r];t+="4"===o?".":"J"===o?"0":o.charCodeAt(0)-n}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=r,t.command=i,t.basic_level=o,t.bracketed_level=s,t.primes=a,t.fraction=c,t.radical=l,t.expression=u,t.group=h;var f={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=d,t.to_number=p},function(e,t,n){function r(e){return String.fromCharCode(p+e)}function i(e){return e.charCodeAt(0)-p}function o(e){return d[e]}function s(e){return d.indexOf(e)}function a(e){for(var t="",n=0,i=e;n<i.length;n++){var o=i[n];t+=r(s(o))}return t}function c(e){for(var t="",n=0,r=e;n<r.length;n++){var s=r[n];t+=o(i(s))}return t}function l(e){return c(e).replace(/[@-^]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})}function u(e){var t="";if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i.charCodeAt(0);96<=o&&o<=127&&(o-=32,i=String.fromCharCode(o)),32<=o&&o<=95&&(i=a(i),o=i.charCodeAt(0)),10305<=o&&o<=10495&&(o=10240+(o-1024)%64,i=String.fromCharCode(o)),t+=10240<=o&&o<=10304?i:String.fromCharCode(10240)}return t}function h(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<10240||n>10304)return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0});var d=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",p=10240;t.toBrailleAscii=c,t.toExpandedBrailleAscii=l,t.coerceToSixDotCells=u,t.isSixDotCells=h},function(e,t,n){n(3),e.exports=n(3)}])}),define("loadcss!basic/keypad/braille-example-row",function(){}),define("basic/keypad/braille-example-row",["require","exports","tslib","dcgview","dcgview-helpers/static-mathquill-view","abraham","loadcss!./braille-example-row"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.For,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("tr",null,r.createElement(s,{each:function(){return e.getBrailleAscii(e.props.latex())},key:function(e){return e.key}},r.createElement("td",null,function(e){return r.createElement("span",{class:r.const("dcg-key-press")},function(){return e.char})})),r.createElement("td",{class:r.const("dcg-braille-font")},function(){return e.getBrailleUnicode(e.props.latex())}),r.createElement("td",null,r.createElement(i.default,{latex:function(){return e.props.latex()}})))},t.prototype.getBrailleAscii=function(e){for(var t=o.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)),n=[],r=0;r<t.length;r++)n.push({char:t[r],key:r+")"+t[r]});return n},t.prototype.getBrailleUnicode=function(e){var t;return"nemeth"===this.props.brailleMode()?t=o.latexToNemeth(e):"ueb"===this.props.brailleMode()&&(t=o.latexToUeb(e)),t&&t.value?t.value:""},t}(r.Class);t.BrailleExampleRow=a}),define("loadcss!basic/keypad/braille-keypad",function(){}),define("basic/keypad/braille-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./braille-example-row","loadcss!./braille-keypad"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-braille-io-keypad-container")},r.createElement("div",{class:r.const("dcg-braille-io-keypad")},r.createElement("div",{class:r.const("dcg-braille-description")},r.createElement("div",{class:r.const("dcg-braille-title")},function(){return e.controller.t("__mode__ is on!",{mode:e.brailleType()})}),r.createElement("div",{class:r.const("dcg-braille-info-text")},function(){return e.controller.t("Use a Refreshable Braille display, or just type Braille with a keyboard.")}),r.createElement("div",{class:r.const("dcg-blue-btn"),role:r.const("button"),tabindex:r.const(0),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"none"})}},function(){return e.controller.t("Turn __mode__ off",{mode:e.brailleType()})})),r.createElement("div",{class:r.const("dcg-braille-examples-table-container")},r.createElement("table",{class:r.const("dcg-braille-examples-table")},r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Type this")}),r.createElement("th",null,function(){return e.brailleType()}),r.createElement("th",null,function(){return e.controller.t("Typeset")})),r.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("2+2")}),r.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\frac{1}{2}")}),r.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\sqrt{4}")})),r.createElement("div",{class:r.const("dcg-more-examples-link")},r.createElement("a",{href:function(){return"https://www.desmos.com/braille-examples?"+e.controller.getBrailleMode()},target:r.const("_blank")},function(){return e.controller.t("View more examples")})))))},t.prototype.brailleType=function(){return"nemeth"===this.controller.getBrailleMode()?"Nemeth":"ueb"===this.controller.getBrailleMode()?"UEB":""},t}(i.DCGViewBasic);t.default=s}),define("expressions/braille-input",["require","exports","tslib","dcgview","jquery"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r.Components.Input,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(o,{class:this.const("dcg-braille-input"),onKeydown:this.props.onKeydown,onInput:this.bindFn(this.props.onInput),value:function(){return e.props.value()},"aria-label":function(){return e.props.ariaLabel()||""},didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount)})},t.prototype.didMount=function(e){var t=this;this.rootNode=e,i(this.rootNode).on("focus",function(){t.props.onFocusedChanged(!0)}).on("blur",function(){t.props.onFocusedChanged(!1)}),this.props.didMount(e)},t}(r.Class);t.default=s}),define("loadcss!Abraham",function(){}),define("loadcss!basic/expression-view",function(){}),define("basic/expression-view",["require","exports","keys","tslib","graphing/label","dcgview","i18n","jquery","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","./dcgview-basic","abraham","expressions/braille-input","loadcss!Abraham","loadcss!./expression-view"],function(e,t,n,r,i,o,s,a,c,l,u,h,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=o.Components,f=p.If,m=p.Input,g=p.Textarea,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getAriaLabel=function(){var e=this.getIndex()+1+"";return this.t("Expression __index__",{index:e})},t.prototype.didUpdate=function(){this.renderAnsValue(),this.controller.renderAsBraille()&&this.getIsFocused()&&this.focusBrailleInput()},t.prototype.didMountMQ=function(e){this.$mq=a(e)},t.prototype.getExp=function(){return this.model.getExpressionById(this.props.id())},t.prototype.getAns=function(){return this.model.getExpressionAns(this.props.id())},t.prototype.getLatex=function(){return this.getExp().latex},t.prototype.getValue=function(){return this.model.getExpressionValue(this.props.id())},t.prototype.getBraille=function(){var e=this.getExp().braille;if(""!==e)return e;var t=this.getBrailleValue(this.getLatex());return t.isError?"":h.UnicodeBraille.toExpandedBrailleAscii(t.value)},t.prototype.getBrailleValue=function(e){return"nemeth"===this.controller.getBrailleMode()?h.latexToNemeth(e):h.latexToUeb(e)},t.prototype.getLatexValue=function(e){return"nemeth"===this.controller.getBrailleMode()?h.nemethToLatex(e):h.uebToLatex(e)},t.prototype.getIndex=function(){return this.model.getExpressionIndex(this.props.id())},t.prototype.getShowEvaluation=function(){return this.model.shouldShowEvaluationForExpression(this.props.id())},t.prototype.getError=function(){var e=this.model.getExpressionError(this.props.id());return e&&this.getLatex().length>0?this.t(s.unpack(e)):""},t.prototype.showError=function(){return!!this.getError()},t.prototype.getIsFocused=function(){return this.model.isExpressionFocused(this.props.id())},t.prototype.onFocusedChanged=function(e){this.getExp()&&(e?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))},t.prototype.onMQReflow=function(){this.renderedAnsData=void 0,this.renderAnsValue()},t.prototype.renderAnsValue=function(){if(this.$mq){var e=this.getAns();this.renderedAnsData&&this.renderedAnsData.value==e||(this.renderedAnsData={value:e},this.$mq.find(".dcg-mq-ans").each(function(t,n){var r=a(n);if(null!=e){var o=i.truncatedHTMLLabel(e,{digits:6,addEllipses:!0,bigCutoff:1e4});r.removeClass("dcg-invalid").html(o)}else r.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')}))}},t.prototype.getEvaluationLatex=function(){var e=this.getValue();void 0===e&&(e=NaN);var t="="+i.truncatedLatexLabel(e,{digits:this.getEvaluationDigits(),bigCutoff:1e9});return t},t.prototype.getEvaluationBraille=function(){var e=this.getEvaluationLatex(),t=this.getBrailleValue(e);return t.isError?"":h.UnicodeBraille.toExpandedBrailleAscii(t.value)},t.prototype.didMountBrailleInput=function(e){this.brailleInputNode=e,this.focusBrailleInput()},t.prototype.didUnmountBrailleInput=function(){this.brailleInputNode=void 0},t.prototype.handleBrailleFocus=function(e){var t=e.target;t&&setTimeout(function(){t.setSelectionRange(0,0)})},t.prototype.handleBrailleKeydown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){if(n.lookup(e)===n.UP)return this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),!1;if(n.lookup(e)===n.DOWN)return this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),!1;if(n.lookup(e)===n.ENTER)return this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),!1;if(n.lookup(e)===n.BACKSPACE&&document.activeElement===this.brailleInputNode&&""===this.getBraille())return this.dispatch({type:"backspace-from-braille"}),!1}return!0},t.prototype.forceModelFocus=function(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)},t.prototype.focusBrailleInput=function(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()},t.prototype.getPostLabel=function(){if(this.showError())return this.getError();if(this.getShowEvaluation()){var e=this.getValue();return void 0===e&&(e=NaN),"equals "+i.value(e).ariaString}return""},t.prototype.onBrailleInput=function(e){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});var t=this.getLatexValue(h.UnicodeBraille.coerceToSixDotCells(e));this.dispatch({type:"update-latex-from-braille",latex:t.isError?"":t.value,braille:e,id:this.props.id()})},t.prototype.getIndexSubscript=function(){return"_{"+(this.getIndex()+1)+"}"},t.prototype.getEvaluationDigits=function(){return this.controller.isScientificCalc()?14:8},t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-basic-expression":!0,"dcg-focused":e.getIsFocused(),"dcg-braille-io":e.controller.renderAsBraille()}}},o.createElement(f,{predicate:function(){return e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-braille-input")},o.createElement(d.default,{ariaLabel:function(){var t=e.getBrailleValue("eq"+e.getIndexSubscript());return t.isError?"":h.UnicodeBraille.toExpandedBrailleAscii(t.value)},didMount:e.bindFn(e.didMountBrailleInput),didUnmount:e.bindFn(e.didUnmountBrailleInput),onFocusedChanged:e.bindFn(e.onFocusedChanged),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:e.bindFn(e.onBrailleInput),value:function(){return e.getBraille()}}))}),o.createElement(f,{predicate:function(){return e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-braille-evaluation-container")},o.createElement(f,{predicate:function(){return e.getShowEvaluation()}},function(){return o.createElement("div",{class:o.const("dcg-braille-evaluation")},o.createElement(m,{readonly:e.const("true"),class:e.const("dcg-braille-evaluation-inner"),value:function(){return e.getEvaluationBraille()},onFocus:e.bindFn(e.handleBrailleFocus),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:function(){}}))}),o.createElement(f,{predicate:function(){return e.showError()}},function(){return o.createElement("div",{class:o.const("dcg-braille-error")},o.createElement("div",{class:o.const("dcg-basic-expression-error")},o.createElement("i",{class:o.const("dcg-icon-error")})),o.createElement(g,{readonly:e.const("true"),class:e.const("dcg-braille-error-inner"),value:function(){return e.getError()},onFocus:e.bindFn(e.handleBrailleFocus),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:function(){}}))}))}),o.createElement(f,{predicate:function(){return e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-exp-mathquill-container"),didMount:e.bindFn(e.didMountMQ),onTap:e.bindFn(e.forceModelFocus)},o.createElement(c.default,{latex:function(){return e.getLatex()},onReflow:e.bindFn(e.onMQReflow)}))}),o.createElement(f,{predicate:function(){return!e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-exp-mathquill-container"),didMount:e.bindFn(e.didMountMQ)},o.createElement(l.default,{latex:function(){return e.getLatex()},onReflow:e.bindFn(e.onMQReflow),isFocused:function(){return!e.controller.renderAsBraille()&&e.getIsFocused()},config:e.const({typingAsteriskWritesTimesSymbol:e.controller.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:e.controller.getTypingSlashWritesDivisionSymbol()}),getAriaLabel:function(){return e.getAriaLabel()},getAriaPostLabel:function(){return e.getPostLabel()},hasError:function(){return!1},onUserPressedKey:function(t,n){e.controller.isSettingsMenuOpen()&&e.controller.dispatch({type:"close-settings-menu"}),e.dispatch({type:"keypad/press-key",key:t,evt:n})},onUserTypedText:function(t){return e.dispatch({type:"keypad/type-text",text:t})},onUserChangedLatex:function(t){e.dispatch({type:"update-latex",id:e.props.id(),latex:t})},onFocusedChanged:e.bindFn(e.onFocusedChanged),disableSpace:function(){return e.controller.getRestrictedEditing()}}))}),o.createElement("div",{class:o.const("dcg-exp-output-container")},o.createElement(f,{predicate:function(){return e.showError()&&!e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-basic-expression-error dcg-tooltip tipsy-sticky"),"tipsy-dir":o.const("ne"),tooltip:e.bindFn(e.getError)},o.createElement("i",{class:o.const("dcg-icon-error")}))}),o.createElement(f,{predicate:function(){return e.getShowEvaluation()}},function(){return o.createElement("div",{class:o.const("dcg-basic-expression-value")},o.createElement(c.default,{latex:function(){return e.getEvaluationLatex()}}))})))},
t}(u.DCGViewBasic);t.default=y}),define("loadcss!basic/basic-list-view",function(){}),define("basic/basic-list-view",["require","exports","scroll_helpers","tslib","dcgview","./dcgview-basic","./expression-view","jquery","lib/conditional_blur","loadcss!./basic-list-view","tipsy"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i.Components,u=l.For,h=l.If,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.didShowAnswerHint=!1,t.didHideAnswerHint=!1,t}return r.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-basic-list-container"),role:i.const("complementary"),"aria-label":function(){return e.controller.t("Expression List")},didMount:this.bindFn(this.didMountContainer)},i.createElement("div",{class:i.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},i.createElement(h,{predicate:this.bindFn(this.showAnswerHint)},function(){return i.createElement("div",{class:i.const("dcg-answer-hint")},function(){return e.controller.t("Your answers show up on this side.")})})),i.createElement(u,{each:function(){return e.model.getExpressionOrder()}},i.createElement("div",{class:i.const("dcg-basic-list"),style:function(){return{"font-size":e.controller.getListFontSize()+"px"}}},function(t){return i.createElement(s.default,{controller:e.props.controller,id:e.const(t)})})))},t.prototype.didMountPlaceholder=function(e){a(e).on("dcg-tap",c.default)},t.prototype.showAnswerHint=function(){if(this.didHideAnswerHint)return!1;var e=this.model.getExpressionOrder()[0];return!(!this.model.shouldShowEvaluationForExpression(e)&&!this.didShowAnswerHint)&&(this.didShowAnswerHint=!0,!(this.model.getNumberOfExpressions()>1||""===this.model.getExpressionLatex(e))||(this.didHideAnswerHint=!0,!1))},t.prototype.didUpdate=function(){if(this.$container){var e=this.$container.find(".dcg-focused");e.length>0&&n.scrollVisible(e,this.$container,50)}},t.prototype.didMountContainer=function(e){this.$container=a(e),this.$container.tipsy({fade:"fast",title:"tooltip",wait:500,gravity:"ne",delegate:".dcg-tooltip",sticky:!0})},t}(o.DCGViewBasic);t.default=d}),define("loadcss!basic/main",function(){}),define("basic/main",["require","exports","lib/aria","keys","browser","tslib","dcgview","./dcgview-basic","jquery","./keypad/fourfunction-control-bar","./keypad/scientific-control-bar","./keypad/single-expression-control-bar","./keypad/fourfunction-keypad","./keypad/single-expression-keypad","./keypad/scientific-keypad","./keypad/braille-keypad","./basic-list-view","loadcss!desmos-icons","loadcss!./main"],function(e,t,n,r,i,o,s,a,c,l,u,h,d,p,f,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y=s.Components.If,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.template=function(){var e=this;return s.createElement("div",{class:s.const("dcg-calc-basic-main-wrapper"),onKeydown:this.bindFn(this.handleRootKeydown),"x-ms-format-detection":s.const("none")},s.createElement("div",{role:s.const("application"),class:function(){return{"dcg-calc-basic-main":!0,"dcg-inverted-colors":e.controller.getInvertedColors(),"dcg-projector-mode":e.controller.isProjectorMode(),"dcg-ipad":i.IS_IPAD}},style:function(){return{"font-size":e.controller.getFontSize()+"px",filter:e.controller.getInvertedColors()?"invert(100%)":"none"}}},s.createElement(g.default,{controller:this.props.controller}),s.createElement(y,{predicate:function(){return e.controller.isScientificCalc()&&e.model.isSingleExpression()}},function(){return s.createElement("div",null,s.createElement(h.default,{controller:e.props.controller}),s.createElement(y,{predicate:function(){return!e.controller.renderAsBraille()}},function(){return s.createElement(p.default,{controller:e.props.controller})}),s.createElement(y,{predicate:function(){return e.controller.renderAsBraille()}},function(){return s.createElement(m.default,{controller:e.props.controller})}))}),s.createElement(y,{predicate:function(){return e.controller.isScientificCalc()&&!e.model.isSingleExpression()}},function(){return s.createElement("div",null,s.createElement(u.default,{controller:e.props.controller}),s.createElement(y,{predicate:function(){return!e.controller.renderAsBraille()}},function(){return s.createElement(f.default,{controller:e.props.controller})}),s.createElement(y,{predicate:function(){return e.controller.renderAsBraille()}},function(){return s.createElement(m.default,{controller:e.props.controller})}))}),s.createElement(y,{predicate:function(){return e.controller.isFourFunctionCalc()}},function(){return s.createElement("div",null,s.createElement(l.default,{controller:e.props.controller}),s.createElement(y,{predicate:function(){return!e.controller.renderAsBraille()}},function(){return s.createElement(d.default,{controller:e.props.controller})}),s.createElement(y,{predicate:function(){return e.controller.renderAsBraille()}},function(){return s.createElement(m.default,{controller:e.props.controller})}))})))},t.prototype.handleRootKeydown=function(e){if(r.isUndo(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(r.isRedo(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(!e.metaKey&&!e.shiftKey)if(e.ctrlKey||e.altKey||r.lookup(e)!==r.BACKSPACE){if(e.ctrlKey===i.IS_APPLE&&e.altKey===!i.IS_APPLE){var t=r.lookupChar(e);if("N"===t)return this.dispatch({type:"set-braille-mode",mode:"nemeth"}),n.alert(this.controller.t("Braille mode Nemeth")),!1;if("U"===t)return this.dispatch({type:"set-braille-mode",mode:"ueb"}),n.alert(this.controller.t("Braille mode UEB")),!1;if("Q"===t||"X"===t)return this.dispatch({type:"set-braille-mode",mode:"none"}),n.alert(this.controller.t("Braille mode off")),!1}}else if(!c(document.activeElement).is('input, textarea, [role="textbox"]'))return!1;return!0},t}(a.DCGViewBasic);t.default=v}),define("api/basic",["require","exports","tslib","dcgview","./abstract","main/shared-worker-pool","basic/controller","basic/main","lib/deepCopy"],function(e,t,n,r,i,o,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype.init=function(e){var t=this,r=n.__assign({qwertyKeyboard:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,brailleMode:"none",projectorMode:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1},e);this.controller=new s.default({workerPool:o.default,evaluationMode:r.evaluationMode,settingsMenu:r.settingsMenu,restrictedEditing:r.restrictedEditing,degreeMode:r.degreeMode,invertedColors:r.invertedColors,brailleMode:r.brailleMode,projectorMode:r.projectorMode,functionDefinition:r.functionDefinition,qwertyKeyboard:r.qwertyKeyboard,additionalFunctions:r.additionalFunctions,typingSlashWritesDivisionSymbol:r.typingSlashWritesDivisionSymbol,typingAsteriskWritesTimesSymbol:r.typingAsteriskWritesTimesSymbol}),this.settings=this.controller.settings,this.controller.onEventEmitted=function(e){"render"===e&&t.updateView(),t.triggerEvent(e)},this.setupDomChangeDetector(r.autosize)},t.prototype.onCreateView=function(){var e=r.mountToNode(a.default,this.rootElt,{controller:r.const(this.controller)});return e},t.prototype.setState=function(e,t){t||(t={}),this.controller.dispatch({type:"set-state-from-api",state:e,opts:{allowUndo:!!t.allowUndo}})},t.prototype.getState=function(){return c.default(this.controller.model.getPersistedState())},t.prototype.undo=function(){this.controller.dispatch({type:"undo",source:"api"})},t.prototype.redo=function(){this.controller.dispatch({type:"redo",source:"api"})},t.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-history"})},t.prototype.setBlank=function(e){e||(e={}),this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!e.allowUndo}})},t.prototype.updateSettings=function(e){if(null!=e)for(var t in e)switch(t){case"fontSize":var n=e[t];if(void 0===n)continue;this.controller.dispatch({type:"update-font-size",size:n});break;case"invertedColors":var r=e[t];if(void 0===r)continue;this.controller.dispatch({type:"update-inverted-colors",mode:r});break;case"degreeMode":var i=e[t];if(void 0===i)continue;this.controller.dispatch({type:"update-degree-mode",mode:i});break;case"brailleMode":var o=e[t];this.controller.dispatch({type:"set-braille-mode",mode:o});break;case"projectorMode":var s=e[t];if(void 0===s)continue;this.controller.dispatch({type:"update-projector-mode",mode:s});break;case"language":var a=e[t];if(void 0===a)continue;this.controller.dispatch({type:"update-language",language:a})}},t.prototype.focusFirstExpression=function(){this.controller.dispatch({type:"focus-first-expression"})},t.prototype.onResizeView=function(e){},t.prototype.onDestroyView=function(){r.unmountFromNode(this.rootElt)},t.prototype.destroy=function(){this.controller.model.destroy(),e.prototype.destroy.call(this)},t}(i.default);t.BasicCalculator=l}),define("api/fourfunction",["require","exports","tslib","./basic","lib/deepCopy","lib/console"],function(e,t,n,r,i,o){"use strict";function s(e){if(e=i.default(e),e.hasOwnProperty("typingSlashWritesDivisionSymbol")||(e.typingSlashWritesDivisionSymbol=!0),e.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(e.typingAsteriskWritesTimesSymbol=!0),e.exponentButtonForSquareRoot&&(o.warn("As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: \"exponent\"' instead."),e.additionalFunctions=["exponent"]),e.additionalFunctions){var t=e.additionalFunctions;"string"==typeof t&&(t=[t]),t.length>2&&(o.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),t=t.slice(0,2));for(var n=0;n<t.length;n++)["sqrt","exponent","percent"].indexOf(t[n])===-1&&o.warn("Unrecognized value: '"+t[n]+"' for 'additionalFunction'. Valid values are 'sqrt', 'percent', or 'exponent'. Using default (\"sqrt\")");e.additionalFunctions=t}return e.additionalFunctions&&e.additionalFunctions.length||(e.additionalFunctions=["sqrt"]),e.evaluationMode="fourFunction",e}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(n,r){var i=e.call(this,n)||this;return i instanceof t?(i.init(s(r||{})),i):new t(n,r)}return n.__extends(t,e),t}(r.BasicCalculator);t.default=a}),define("api/scientific",["require","exports","tslib","./basic","lib/deepCopy"],function(e,t,n,r,i){"use strict";function o(e){return e=i.default(e),e.singleExpression?e.evaluationMode="singleExpressionScientific":e.evaluationMode="scientific",delete e.singleExpression,e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(n,r){var i=e.call(this,n)||this;return i instanceof t?(i.init(o(r||{})),i):new t(n,r)}return n.__extends(t,e),t}(r.BasicCalculator);t.default=s}),define("api/calculator",["require","console","pjs","underscore","i18n","main/calc_embed","main/calc_headless","underscore_model","mathquill","math/recttransformation","main/shared-clock-bus","main/shared-worker-pool","lib/number-to-latex","expressions/colors","expressions/styles","expressions/opacity","graphing/columnmode","graphing/dragmode","graphing/axisarrowmode","main/font_sizes","expressions/image_file_to_data_url","lib/dom-change-detector","graphing/compute-async-screenshot-bounds","expressions/sanitize_expression","./fourfunction","./scientific"],function(e){function t(e){var t={};e||(e={});var n=function(n,r){e.hasOwnProperty(n)?t[n]=e[n]:t[n]=r};return n("keypad",!0),n("disableScrollFix",!1),n("graphpaper",!0),n("settingsMenu",!0),n("expressionsTopbar",!0),n("branding",!0),n("links",!0),n("autosize",!0),n("zoomButtons",t.graphpaper),n("pointsOfInterest",!0),n("plotSingleVariableImplicitEquations",!0),n("expressionsCollapsed",!1),n("lockViewport",!1),n("administerSecretFolders",!1),n("redrawSlowly",!1),n("onlyTraceSelected",!1),n("disableMouseInteractions",!1),n("trace",!0),n("folders",!0),n("images",t.graphpaper),n("expressions",!0),n("border",!0),n("nativeOnscreenKeypad",!1),n("qwertyKeyboard",!0),n("restrictedFunctions",!1),n("notes",!0),n("degreeMode",!1),n("functionDefinition",!0),n("pasteGraphLink",!1),n("pasteTableData",!0),n("plaidMode",!1),n("imageUploadCallback",w),n("pasteGraphLinkCallback",!1),n("editOnWeb",!1),n("invertedColors",!1),n("colors",{RED:m.RED,BLUE:m.BLUE,GREEN:m.GREEN,ORANGE:m.ORANGE,PURPLE:m.PURPLE,BLACK:m.BLACK}),n("crossOriginSaveTest",!1),e.hasOwnProperty("menus")&&(r.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),e.hasOwnProperty("settingsMenu")||(t.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(t.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(r.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),e.hasOwnProperty("pointsOfInterest")||(t.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&r.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),t.graphpaper||(t.expressionsCollapsed&&(t.expressionsCollapsed=!1,r.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),t.zoomButtons&&(t.zoomButtons=!1,r.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false."))),t}function n(e,t){!window.Desmos.enabledFeatures||window.Desmos.enabledFeatures[e]?window.Desmos[e]=t:window.Desmos[e]=function(){throw new Error("The Desmos "+e+" is not enabled for this API key.")}}var r=e("console"),i=e("pjs"),o=e("underscore"),s=e("i18n"),a=e("main/calc_embed").default,c=e("main/calc_headless"),l=e("underscore_model"),u=e("mathquill"),h=e("math/recttransformation"),d=e("main/shared-clock-bus"),p=e("main/shared-worker-pool").default,f=e("lib/number-to-latex").default,m=e("expressions/colors"),g=e("expressions/styles"),y=e("expressions/opacity"),v=e("graphing/columnmode"),b=e("graphing/dragmode"),x=e("graphing/axisarrowmode"),_=e("main/font_sizes"),w=e("expressions/image_file_to_data_url"),E=e("lib/dom-change-detector").default,S=e("graphing/compute-async-screenshot-bounds"),M=e("expressions/sanitize_expression"),I=e("./fourfunction").default,k=e("./scientific").default,T=i(l,function(e,n,i){function c(e,t){var n={};return t.hasOwnProperty("x")&&(n.x=e.mapX(t.x)),t.hasOwnProperty("y")&&(n.y=e.mapY(t.y)),n}e.init=function(e,r,i){n.init.call(this);var o=t(r);this._calc=new a(e,p,o),this._calc.interceptTouch(),this.controller=this._calc.controller,this.controller.onEventsEmitted=function(e){this.setProperty("isAnyExpressionSelected",!!this.controller.getSelectedItem()),this.setProperty("expressionAnalysis",this.controller.getExpressionAnalysis());for(var t in e)e.hasOwnProperty(t)&&e[t]&&this.triggerEvent(t)}.bind(this),this._calc.graphpaperBounds.observeAndSync("mathCoordinates",this._syncGraphpaperBounds.bind(this)),this._calc.graphpaperBounds.observeAndSync("pixelCoordinates",this._syncGraphpaperBounds.bind(this)),this.colors=this.controller.getColors(),this._initGraphSettings(),this._sharedClockBusToken=d.subscribe(function(e){this._calc.tick(e)}.bind(this)),this.domChangeDetector=new E(e,function(e){switch(e.type){case"added":this._calc.resize();break;case"removed":this._calc.resize();break;case"resized":this._calc.resize()}}.bind(this)),o.autosize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges(),"function"==typeof i&&i(this)},e.destroy=function(){function e(e){r.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}this._calc.destroy(),d.unsubscribe(this._sharedClockBusToken),this.domChangeDetector.destroy();for(var t in this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},e._syncGraphpaperBounds=function(){this.controller.runAfterDispatch(function(){this.setProperty("graphpaperBounds",{mathCoordinates:this._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:this._calc.graphpaperBounds.pixelCoordinates})}.bind(this))};var u=["showGrid","showXAxis","showYAxis","xAxisStep","yAxisStep","xAxisMinorSubdivisions","yAxisMinorSubdivisions","xAxisArrowMode","yAxisArrowMode","xAxisLabel","yAxisLabel","xAxisNumbers","yAxisNumbers","polarMode","polarNumbers","degreeMode","projectorMode","fontSize","invertedColors","language"];e._initGraphSettings=function(){var e=l();this.settings=this.graphSettings=e,this.knownSettings=u;var t=this,n=function(n){t._calc.grapher.settings.observeAndSync(n,function(){t.controller.runAfterDispatch(function(){e.setProperty(n,t._calc.grapher.settings[n])})})};u.forEach(n)},e.updateSettings=function(e){this._calc.grapher.settings.setGraphSettings(e),this.notifyControllerOfAPICall()},e.setGraphSettings=function(e){r.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(e),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()},e.fetchLanguage=function(e){return s.fetchLanguage(e)},e.setDefaultState=function(e){this._calc.grapher.settings.setProperty("defaultState",e),this.notifyControllerOfAPICall()},e.mathToPixels=function(e){var t=h.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates);return c(t,e)},e.pixelsToMath=function(e){var t=h.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates);return c(t,e)};var m={};m.expression=function(e,t,n){var i={};if(i.type="expression",e.hasOwnProperty("id")?i.id=e.id.toString():i.id=t.generateId(),e.hasOwnProperty("latex")&&(i.latex=e.latex.toString()),e.hasOwnProperty("color")&&(i.color=e.color.toString()),e.hasOwnProperty("points")&&(i.points=!!e.points),e.hasOwnProperty("lines")&&(i.lines=!!e.lines),e.hasOwnProperty("style")&&(r.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),o.contains([g.POINT,g.CROSS,g.OPEN],e.style)?i.pointStyle=e.style:o.contains([g.SOLID,g.DASHED,g.DOTTED],e.style)?i.lineStyle=e.style:r.warn("Invalid style: '"+e.style+"'.")),e.hasOwnProperty("pointStyle")&&(o.contains([g.POINT,g.CROSS,g.OPEN],e.pointStyle)?i.pointStyle=e.pointStyle:r.warn("Invalid pointStyle: '"+e.pointStyle+"'.")),e.hasOwnProperty("lineStyle")&&(o.contains([g.SOLID,g.DASHED,g.DOTTED],e.lineStyle)?i.lineStyle=e.lineStyle:r.warn("Invalid lineStyle: '"+e.lineStyle+"'.")),e.hasOwnProperty("hidden")&&(i.hidden=!!e.hidden),e.hasOwnProperty("secret")&&(i.secret=!!e.secret),e.hasOwnProperty("sliderBounds")&&(i.slider={min:f(e.sliderBounds.min),max:f(e.sliderBounds.max),step:void 0===e.sliderBounds.step?"":f(e.sliderBounds.step)}),e.hasOwnProperty("domain")&&(i.domain={min:f(e.domain.min),max:f(e.domain.max)}),e.hasOwnProperty("dragMode")&&(o.contains(o.values(b),e.dragMode)?i.dragMode=e.dragMode:r.warn("Invalid dragMode: '"+e.dragMode+"'.")),e.hasOwnProperty("label")&&(i.label=e.label.toString()),e.hasOwnProperty("showLabel")&&(i.showLabel=!!e.showLabel),e.hasOwnProperty("fill")&&(i.fill=!!e.fill),e.hasOwnProperty("fillOpacity")){var s=parseFloat(e.fillOpacity);isNaN(s)||!isFinite(s)||s<0||s>1?(r.warn("Invalid fillOpacity: "+s+". Continuing with default."),i.fillOpacity=y.DEFAULT):i.fillOpacity=s}return i};var x=function(e,t,n){var i={};return e.hasOwnProperty("id")?i.id=e.id.toString():i.id=t.generateId(),e.hasOwnProperty("latex")&&(i.latex=e.latex.toString()),e.hasOwnProperty("color")&&(i.color=e.color.toString()),e.hasOwnProperty("hidden")&&(i.hidden=!!e.hidden),e.hasOwnProperty("points")&&(i.points=!!e.points),e.hasOwnProperty("lines")&&(i.lines=!!e.lines),e.hasOwnProperty("values")&&(i.values=e.values.map(function(e){return e.toString()})),e.hasOwnProperty("columnMode")&&(r.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),e.columnMode===v.POINTS_AND_LINES?(i.points=!0,i.lines=!0):e.columnMode===v.LINES?(i.points=!1,i.lines=!0):(i.points=!0,i.lines=!1),i.lines&&!i.points&&e.hasOwnProperty("dragMode")&&e.dragMode!==b.NONE&&(r.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),i.points=!0),o.contains(o.values(v),e.columnMode)?i.columnMode=e.columnMode:r.warn("Invalid columnMode: '"+e.columnMode+"'.")),e.hasOwnProperty("dragMode")&&(o.contains(o.values(b),e.dragMode)?i.dragMode=e.dragMode===b.AUTO?b.NONE:e.dragMode:r.warn("Invalid dragMode: '"+e.dragMode+"'.")),i};m.table=function(e,t,n){var r={};return r.type="table",e.hasOwnProperty("id")?r.id=e.id.toString():r.id=t.generateId(),e.hasOwnProperty("columns")&&(r.columns=e.columns.map(function(e){return x(e,t,n)})),r},m.folder=function(e,t,n){var r={};return r.type="folder",e.hasOwnProperty("id")?r.id=e.id.toString():r.id=t.generateId(),e.hasOwnProperty("hidden")&&(r.hidden=!!e.hidden),r},m.image=function(e,t,n){var r={};return r.type="image",e.hasOwnProperty("id")?r.id=e.id.toString():r.id=t.generateId(),e.hasOwnProperty("hidden")&&(r.hidden=!!e.hidden),r},e.notifyControllerOfAPICall=function(){this.controller.dispatch({type:"api-method-called"})},e.setExpression=function(e){var t,n=this.controller,i=n.getItemModel(e.id);if(i){if(e.type&&e.type!==i.type)return void r.warn("Cannot change type of expression from '"+i.type+"' to '"+e.type+"'.");if(!m.hasOwnProperty(i.type))return void r.warn("Cannot modify expressions of type: '"+e.type+"' through the API.");t=m[i.type](e,this.controller,!1),this.controller.dispatch({type:"set-expression-properties-from-api",id:t.id,properties:t})}else{if(e.type&&!m.hasOwnProperty(e.type))return void r.warn("Invalid expression type: '"+e.type+"'.");t=m[e.type||"expression"](e,this.controller,!0),this.controller.dispatch({type:"add-item-to-end-from-api",state:t})}},e.setExpressions=function(e){e.forEach(this.setExpression.bind(this)),this.notifyControllerOfAPICall()},e.removeExpression=function(e){var t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})},e.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this)),this.notifyControllerOfAPICall()},e.removeSelected=function(){var e=this.controller.getSelectedItem();e&&this.controller.dispatch({type:"remove-item-by-id",id:e.id})},e.setMathBounds=function(e){e&&e.left<e.right&&e.bottom<e.top?this._calc.setViewport([e.left,e.right,e.bottom,e.top]):r.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(e)),this.notifyControllerOfAPICall()},e.setViewport=function(e){4==e.length&&e[1]>e[0]&&e[3]>e[2]?this._calc.setViewport(e):r.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+e),this.notifyControllerOfAPICall()},e.resize=function(){this.domChangeDetector.checkForChanges()},e.getState=function(){return this._calc.getState.apply(this._calc,arguments)},e.getExpressions=function(){var e=this.getState({stripDefaults:!1}).expressions.list;return e.map(M)},e.setBlank=function(e){e||(e={}),this._calc.setBlank(e)},e.setState=function(e,t){t||(t={}),this._calc.setState(e,t)},e.undo=function(){this.controller.dispatch({type:"undo"})},e.redo=function(){this.controller.dispatch({type:"redo"})},e.clearHistory=function(){this.controller.dispatch({type:"clear-undoredo-history"})},e.screenshot=function(e){return this._calc.grapher.screenshot(e)},e._getMathAspectRatio=function(){var e=this.graphpaperBounds.mathCoordinates,t=this._calc.grapher.getProjection().pixelCoordinates,n=t.right-t.left,r=t.bottom-t.top,i=e.width/n,o=e.height/r;return i/o},e.isProjectionUniform=function(){return!!this._calc.grapher.getProjection().settings.squareAxes},e._parseAsyncScreenshotOpts=function(e){var t=e.mode||"contain",n=e.width||e.height||this.graphpaperBounds.pixelCoordinates.width,r=e.height||e.width||this.graphpaperBounds.pixelCoordinates.height,i=e.mathBounds||{},o=e.targetPixelRatio||1,s=e.preserveAxisNumbers,a=this._getMathAspectRatio(),c=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,l=S({mode:t,width:n,height:r,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:c,mathAspectRatio:a,mathBounds:i});return{width:n,height:r,targetPixelRatio:o,preserveAxisNumbers:s,mathBounds:l}},e.asyncScreenshot=function(e,t){if(!arguments.length)return void r.warn("asyncScreenshot expects a callback");if(1===arguments.length){if("function"!=typeof e)return void r.warn("asyncScreenshot expects a callback");t=e,e={}}e||(e={}),e=this._parseAsyncScreenshotOpts(e),i._sharedScreenshotCalc||(i._sharedScreenshotCalc=T());var n=i._sharedScreenshotCalc;n.setState(this.getState()),n.setMathBounds(e.mathBounds);var o=n._calc.evaluator,s=function(){var r=n.screenshot({width:e.width,height:e.height,targetPixelRatio:e.targetPixelRatio});t(r)},a=this.controller,c=d.subscribe(function(){a.areAnyImagesLoading()||(d.unsubscribe(c),o.notifyWhenSynced(s))})},e.setOptions=function(){var e=this._calc.setOptions.apply(this._calc,arguments);return this.notifyControllerOfAPICall(),e},e.focusFirstExpression=function(){var e=this.controller.getItemModelByIndex(0);this.controller.dispatch({type:"move-focus-to-item",id:e.id,where:"end"})},e.HelperExpression=function(e){var t=e&&e.latex||"",n=l();return n.latex=t,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:n}}),n}}),C=i(T,function(e,n,r){e.init=function(){this._calc=c(p,t({})),this.controller=this._calc.controller,this._sharedClockBusToken=d.subscribe(function(e){this._calc.tick(e)}.bind(this))}});return window.Desmos=window.Desmos?window.Desmos:{},window.Desmos.Colors={RED:m.RED,BLUE:m.BLUE,GREEN:m.GREEN,ORANGE:m.ORANGE,PURPLE:m.PURPLE,BLACK:m.BLACK},window.Desmos.imageFileToDataURL=w,window.Desmos.Styles=g,window.Desmos.supportedLanguages=window.Desmos.locales?Object.keys(window.Desmos.locales):[],window.Desmos.ColumnModes=v,window.Desmos.DragModes=b,window.Desmos.AxisArrowModes=x,window.Desmos.FontSizes=_,window.Desmos.MathQuill=u,n("FourFunctionCalculator",I),n("ScientificCalculator",k),n("GraphingCalculator",T),window.Desmos.HeadlessGraphingCalculator=C,window.Desmos.Calculator=window.Desmos.GraphingCalculator,{Calculator:T,GraphingCalculator:T,FourFunctionCalculator:I,ScientificCalculator:k,HeadlessGraphingCalculator:C}}),define("vendor/fake-xml-http-request",[],function(){function e(e){var t;if("undefined"!=typeof DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t}function t(e,t){t.addEventListener(e,function(n){var r=t["on"+e];r&&"function"==typeof r&&r.call(n.target,n)})}function n(){this._eventListeners={};for(var e=["loadstart","progress","load","abort","loadend"],n=e.length-1;n>=0;n--)t(e[n],this)}function r(){n.call(this),this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new n}function i(e){if(e.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function o(e){if(e.readyState==r.DONE)throw new Error("Request done")}function s(e){if(e.async&&e.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function a(e){if("string"!=typeof e){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var c=function(e,t,n,r){this.type=e,this.bubbles=t,this.cancelable=n,this.target=r};c.prototype={stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}};var l={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},u={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};n.prototype={addEventListener:function(e,t){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push(t)},removeEventListener:function(e,t){for(var n=this._eventListeners[e]||[],r=0,i=n.length;r<i;++r)if(n[r]==t)return n.splice(r,1)},dispatchEvent:function(e){for(var t=e.type,n=this._eventListeners[t]||[],r=0;r<n.length;r++)"function"==typeof n[r]?n[r].call(this,e):n[r].handleEvent(e);return!!e.defaultPrevented},_progress:function(e,t,n){var r=new c("progress");r.target=this,r.lengthComputable=e,r.loaded=t,r.total=n,this.dispatchEvent(r)}},r.prototype=new n,r.UNSENT=0,r.OPENED=1,r.HEADERS_RECEIVED=2,r.LOADING=3,r.DONE=4;var h={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,async:!0,withCredentials:!1,open:function(e,t,n,i,o){this.method=e,this.url=t,this.async="boolean"!=typeof n||n,this.username=i,this.password=o,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,this._readyStateChange(r.OPENED)},setRequestHeader:function(e,t){if(i(this),u[e]||/^(Sec-|Proxy-)/.test(e))throw new Error('Refused to set unsafe header "'+e+'"');this.requestHeaders[e]?this.requestHeaders[e]+=","+t:this.requestHeaders[e]=t},send:function(e){if(i(this),!/^(get|head)$/i.test(this.method)){var t=!1;Object.keys(this.requestHeaders).forEach(function(e){"content-type"===e.toLowerCase()&&(t=!0)}),t||(e||"").toString().match("FormData")||(this.requestHeaders["Content-Type"]="text/plain;charset=UTF-8"),this.requestBody=e}this.errorFlag=!1,this.sendFlag=this.async,this._readyStateChange(r.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new c("loadstart",!1,!1,this)),r.onSend&&r.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>r.UNSENT&&this.sendFlag&&(this._readyStateChange(r.DONE),this.sendFlag=!1),this.readyState=r.UNSENT,this.dispatchEvent(new c("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(e){if(this.readyState<r.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(e))return null;e=e.toLowerCase();for(var t in this.responseHeaders)if(t.toLowerCase()==e)return this.responseHeaders[t];return null},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var e="";for(var t in this.responseHeaders)this.responseHeaders.hasOwnProperty(t)&&!/^Set-Cookie2?$/i.test(t)&&(e+=t+": "+this.responseHeaders[t]+"\r\n");return e},overrideMimeType:function(e){"string"==typeof e&&(this.forceMimeType=e.toLowerCase())},_readyStateChange:function(e){this.readyState=e,"function"==typeof this.onreadystatechange&&this.onreadystatechange(new c("readystatechange")),this.dispatchEvent(new c("readystatechange")),this.readyState==r.DONE&&(this.dispatchEvent(new c("load",!1,!1,this)),
this.dispatchEvent(new c("loadend",!1,!1,this)))},_setResponseHeaders:function(e){this.responseHeaders={};for(var t in e)e.hasOwnProperty(t)&&(this.responseHeaders[t]=e[t]);this.forceMimeType&&(this.responseHeaders["Content-Type"]=this.forceMimeType),this.async?this._readyStateChange(r.HEADERS_RECEIVED):this.readyState=r.HEADERS_RECEIVED},_setResponseBody:function(t){o(this),s(this),a(t);var n=this.chunkSize||10,i=0;this.responseText="";do this.async&&this._readyStateChange(r.LOADING),this.responseText+=t.substring(i,i+n),i+=n;while(i<t.length);var c=this.getResponseHeader("Content-Type");if(this.responseText&&(!c||/(text\/xml)|(application\/xml)|(\+xml)/.test(c)))try{this.responseXML=e(this.responseText)}catch(e){}this.async?this._readyStateChange(r.DONE):this.readyState=r.DONE},respond:function(e,t,n){this._setResponseHeaders(t||{}),this.status="number"==typeof e?e:200,this.statusText=l[this.status],this._setResponseBody(n||"")}};for(var d in h)r.prototype[d]=h[d];return r}),define("lib/app-bridge",["require","jquery","underscore_model","browser","lib/conditional_blur","vendor/fake-xml-http-request","pjs","console"],function(e){function t(){window.XMLHttpRequest=s,s.onSend=function(e){var t=p+"";p+=1,d[t]=e,a.methods.proxyXHR(JSON.stringify({id:t,url:e.url,method:e.method,headers:e.requestHeaders,body:e.requestBody}))}}var n=e("jquery"),r=e("underscore_model"),i=e("browser"),o=e("lib/conditional_blur").default,s=e("vendor/fake-xml-http-request"),a=null,c=null,l=e("pjs"),u=e("console"),h=!1,d={},p=0;if(i.IS_IOS){var f=[],m=[],g=function(e){var t=m.length?m.pop():f.length;return f[t]=e,t},y=function(e){var t=f[e];return f[e]=null,m.push(e),t};a={loaded:!1,methods:{},queuedMethodCalls:[]},n(function(){var e=[];window.ObjC_callback=function(n){a.loaded=!0,n.split(" ").forEach(function(t){a.methods[t]=function(n,i){var o=i?g(i):-1;e.push("desmos:"+t+"/"+o+"/"+encodeURIComponent(n)),1===e.length&&r.attr("src",e[0])}}),this.ObjC_callback=function(t,n){try{t!==-1&&y(t)(n)}finally{e.shift(),e.length>0&&r.attr("src",e[0])}},a.methods.proxyXHR&&t(),a.queuedMethodCalls.forEach(function(e){x[e.methodName].apply(x,e.args)})};var r=n('<iframe id="objc-bridge" style="position:absolute; left: -1000px; z-index: -1" src="desmos:loaded"/>').appendTo(document.body)})}else i.IS_ANDROID?c=window.Android:h=!0;var v=l(r,function(e,t){e.init=function(){t.init.call(this),this.heartbeatTimeout=null,this.observeEvent("started resumed",function(e){this.gaEvent(e+":"+this.versionNumber),this.incrementHeartbeat(0)}.bind(this))},e.heartbeat=function(e){clearTimeout(this.heartbeatTimeout),this.gaEvent("heartbeat-"+10*e),this.incrementHeartbeat(e)},e.incrementHeartbeat=function(e){clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=setTimeout(function(){this.heartbeat(e+1)}.bind(this),6e5)},e._started=function(e,t){this.appId=e,this.versionNumber=t,this.triggerEvent("started")},e._resumed=function(){this.triggerEvent("resumed")},e.ensureKeypadClosedAndReturnIfWasOpened=function(){return n(".dcg-keys-container.dcg-retracted").length>0?"false":(o(),"true")},e.onGoogleAuthResult=function(e){this.triggerEvent("onGoogleAuthResult",e)},e.onObjCXHRProxyResult=function(e){var t=e.id,n=d[t];delete d[t],n.respond(e.status,e.headers,e.body)}}),b=["hideLoadingScreen","gaEvent","openGoogleLogin","logout","saveCookies","deleteCookies"],x=new v;return b.forEach(function(e){x[e]=function(){h||(c?c[e]?c[e].apply(c,arguments):u.log("call to missing Android method",e,arguments):a&&(a.loaded?a.methods[e]?a.methods[e].apply(a,arguments):u.log("call to missing ObjC method",e,arguments):a.queuedMethodCalls.push({methodName:e,args:arguments})))}}),h||(window.AppBridge=x),x}),define("main/calc_basic",["require","api/calculator","config","main/cookie","bugsnag","analytics/google_analytics","lib/app-bridge","jquery"],function(e){var t=e("api/calculator"),n=e("config"),r=e("main/cookie"),i=e("bugsnag"),o=e("analytics/google_analytics"),s=e("lib/app-bridge"),a=e("jquery");n.get("testing")||(i.init(),o.init("UA-22127755-1"));var c=document.getElementById("main"),l=n.all();l.brailleMode=r.getCookie("desmosBrailleMode")||"none";var u;return n.get("sciKeypad")?(a("#main").addClass("dcg-scientific-container"),a(".help-link").attr("href","http://learn.desmos.com/scientific"),u=t.ScientificCalculator(c,l)):(a("#main").addClass("dcg-four-function-container"),a(".help-link").attr("href","http://learn.desmos.com/fourfunction"),u=t.FourFunctionCalculator(c,l)),a(document).on("keydown",function(e){if(0===a(e.target).closest(".dcg-calc-basic-main-wrapper").length)return u.view.handleRootKeydown(e)}),u.settings.observe("invertedColors",function(){var e=window.Calc.settings.invertedColors;a("body").toggleClass("dcg-inverted-colors",e)}),u.settings.observe("brailleMode",function(){var e=window.Calc.settings.brailleMode;r.setCookie("desmosBrailleMode",e)}),u.focusFirstExpression(),s.hideLoadingScreen(),a(".dcg-loading-div-container").hide(),a(".hidden-until-load").fadeIn("fast"),u}),define("main/noconflict",["require","jquery","underscore"],function(e){var t=e("jquery"),n=e("underscore");window.Desmos=window.Desmos||{};var r=window.Desmos;return function(){r.$=t,r._=n,r.$.noConflict(!0),r._.noConflict()}}),define("toplevel/calculator_basic",["require","bugsnag","analytics/google_analytics","main/calc_basic","main/noconflict"],function(e){var t=e("bugsnag"),n=e("analytics/google_analytics");/testing/.test(document.location.search)||(t.init(),n.init("UA-22127755-1"));var r=e("main/calc_basic");return e("main/noconflict")(),r});
